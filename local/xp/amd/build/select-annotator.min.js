/**
 * Select annotator.
 *
 * Adds annotation as per the value chosen in a select field.
 *
 * @copyright  2022 Frédéric Massart
 * @author     Frédéric Massart <fred@branchup.tech>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define([],(function(){function init(fieldId,data){const node=document.getElementById(fieldId);if(!node)return;node.style.width="auto";const wrapper=document.createElement("div");wrapper.className="block_xp",wrapper.style.display="inline-block";const container=document.createElement("div");function updator(value){value=value||"";var item=data.find((function(item){return item.value==value}));container.childNodes.forEach((function(child){child.remove()})),item&&item.annotation&&(container.innerHTML=item.annotation)}container.className="xp-ml-2",wrapper.appendChild(container),node.parentNode.appendChild(wrapper),node.addEventListener("change",(function(e){updator(e.target.value)})),updator(node.value)}return{init:init,initWithJson:function(fieldId,jsonSelector){try{const node=document.querySelector(jsonSelector),data=node?JSON.parse(node.textContent):null;if(!Array.isArray(data))throw new Error("That's a bit strange.");init(fieldId,data)}catch(err){}}}}));

//# sourceMappingURL=select-annotator.min.js.map