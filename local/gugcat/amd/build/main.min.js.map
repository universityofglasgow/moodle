{"version":3,"sources":["../src/main.js"],"names":["define","$","Str","ModalFactory","ModalGcat","Storage","Ajax","checkCurrentUrl","path","url","window","location","pathname","match","calculatePercentagePoints","target","is_percentage","grade_max","document","getElementsByName","value","input_point","getElementById","id","slice","rounder","input_percentage","number","multiplier","parseInt","repeat","Math","round","update_reason_inputs","val","list","querySelectorAll","forEach","input","check_blind_marking","btn_identities","classes","length","textContent","element","classList","add","is_blindmarking","get","get_strings","key","component","then","langStrings","remove","toggle_child_activities","btns","btn","addEventListener","e","selected","getAttribute","icon","querySelector","toggle","contains","colgroups","toggle_display_assessments","btn_switch_display","urlParams","URLSearchParams","search","courseid","requests","call","methodname","args","done","data","switchOn","result","fail","style","display","sortTable","n","table","rows","switching","i","x","y","shouldSwitch","dir","switchcount","getElementsByTagName","innerHTML","toLowerCase","parentNode","insertBefore","showModal","dataAction","messageId","confirmId","cancelId","templateContext","bodycontent","strcancel","strconfirm","dataaction","create","type","TYPE","modal","show","toggleScaleTable","schedA","schedB","onChangeListeners","event","categories","activities","childactivities","grade_reason","select_scale","select_template","mform_grade_reason","delete","set","replace","selectedOption","mformReason","focus","templateid","template","JSON","parse","input_pts","scaletype","nameidprc","nameidpt","maxgrade","conversions","conversion","conv","nameprc","grade","namept","inputprc","inputpt","lowerboundary","parseFloat","console","log","onClickListeners","btn_multiadd","btn_multisave","btn_release","btn_import","btn_coursegradeform","btn_download","btn_finalrelease","btn_bulk_import","btn_convert","radio_ptprc","click","text","includes","inputarr","total","div","invalid","isConvertSubcat","input_percentage_points","lastElementChild","firstElementChild","is_input_H","init","GCAT","input_reason","input_search","keyCode","which","input_gradept","grademax","test","Number","isInteger","input_percentarr","totalweight","columns","column","entries","searchIcons","currentTarget","blur","nextSibling","grdDiscExist","nodeArr","Array","from","isConverted","find","node","btnnewgrade","hideshowgrade"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * AMD module for local_gugcat.\r\n * \r\n * @package    local_gugcat\r\n * @copyright  2020\r\n * @author     Accenture\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(['jquery', 'core/str', 'core/modal_factory', 'local_gugcat/modal_gcat', 'core/sessionstorage', 'core/ajax'], \r\nfunction($, Str, ModalFactory, ModalGcat, Storage, Ajax) {\r\n\r\n    const BLIND_MARKING_KEY = 'blind-marking';\r\n    //Returns boolean on check of the current url and match it to the path params\r\n    const checkCurrentUrl = (path) => {\r\n        var url = window.location.pathname;\r\n        return url.match(path);\r\n    }\r\n\r\n    const calculatePercentagePoints = (target, is_percentage = true) => {\r\n        grade_max = document.getElementsByName('grademax')[0].value;\r\n        if (is_percentage){\r\n            input_point = document.getElementById(target.id.slice(0,10) + \"pt_\" + target.id.slice(10));\r\n            input_point.value = rounder((target.value / 100) * grade_max);\r\n        } else {\r\n            input_percentage = document.getElementById(target.id.slice(0,10) + target.id.slice(13));\r\n            input_percentage.value = rounder((target.value / grade_max) * 100);\r\n        }\r\n    }\r\n\r\n    const rounder = (number) => {\r\n        var multiplier = parseInt(\"1\" + \"0\".repeat(2));\r\n        number = number * multiplier;\r\n        return Math.round(number) / multiplier;\r\n    }\r\n\r\n    const update_reason_inputs = (val) => {\r\n        var list = document.querySelectorAll('.input-reason');\r\n        list.forEach(input => input.value = val);\r\n    }\r\n\r\n    const check_blind_marking = () =>{\r\n        var btn_identities = document.getElementById('btn-identities');\r\n        var classes = document.querySelectorAll('.blind-marking');\r\n        if(btn_identities && classes.length > 0){\r\n            btn_identities.textContent = '...';\r\n            classes.forEach(element => element.classList.add('hide-names'));\r\n            var is_blindmarking = (Storage.get(BLIND_MARKING_KEY) == 'true');\r\n            var strings = [\r\n                {\r\n                    key: 'showidentities',\r\n                    component: 'local_gugcat'\r\n                },\r\n                {\r\n                    key: 'hideidentities',\r\n                    component: 'local_gugcat'\r\n                }\r\n            ];\r\n            Str.get_strings(strings).then(function(langStrings){\r\n                btn_identities.textContent = is_blindmarking\r\n                    ?langStrings[0]//show\r\n                    :langStrings[1];//hide\r\n                classes.forEach(element => {\r\n                    is_blindmarking \r\n                    ? element.classList.add('hide-names')\r\n                    : element.classList.remove('hide-names');\r\n                });\r\n            });\r\n           \r\n        }\r\n    }\r\n\r\n    const toggle_child_activities = () =>{\r\n        var btns = document.querySelectorAll('.btn-colexp');\r\n        if(btns.length > 0){\r\n            btns.forEach(btn => {\r\n                btn.addEventListener('click', (e) => {\r\n                    var selected = e.target.getAttribute('data-categoryid');\r\n                    var classes = document.querySelectorAll(`[data-category=\"${selected}\"]`);\r\n                    var icon = btn.querySelector('.i-colexp');\r\n                    classes.forEach(element => {\r\n                       element.classList.toggle('hidden');\r\n                       if(element.classList.contains('hidden')){\r\n                           icon.classList.add('fa-plus');\r\n                           icon.classList.remove('fa-minus');\r\n                       }else{\r\n                           icon.classList.remove('fa-plus');\r\n                           icon.classList.add('fa-minus');\r\n                       }\r\n                   });\r\n                    var colgroups = document.querySelectorAll(`.catid-${selected}`);\r\n                    colgroups.forEach(element => element.classList.toggle('hidden'));\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    const toggle_display_assessments = () =>{\r\n        var btn_switch_display = document.getElementById('btn-switch-display');\r\n        var urlParams = new URLSearchParams(window.location.search);\r\n        var courseid = urlParams.get('id');\r\n        if(btn_switch_display){\r\n            btn_switch_display.textContent = '...';\r\n            var requests = Ajax.call([{\r\n                methodname: 'local_gugcat_display_assessments',\r\n                args: { courseid: courseid},\r\n            }]);\r\n            requests[0].done(function(data) {\r\n                var switchOn = data.result;\r\n                var strings = [\r\n                    {\r\n                        key: 'switchoffdisplay',\r\n                        component: 'local_gugcat'\r\n                    },\r\n                    {\r\n                        key: 'switchondisplay',\r\n                        component: 'local_gugcat'\r\n                    }\r\n                ];\r\n                Str.get_strings(strings).then(function(langStrings){\r\n                    btn_switch_display.textContent = switchOn\r\n                        ?langStrings[0]//off\r\n                        :langStrings[1];//on\r\n                });\r\n                }).fail(function(){\r\n                    btn_switch_display.style.display = 'none';\r\n                });\r\n        }\r\n    }\r\n        \r\n    const sortTable = (n) => {\r\n        var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;\r\n        table = document.getElementById(\"gcat-table\");\r\n        switching = true;\r\n        // Set the sorting direction to ascending:\r\n        dir = \"asc\";\r\n        /* Make a loop that will continue until\r\n        no switching has been done: */\r\n        while (switching) {\r\n          // Start by saying: no switching is done:\r\n          switching = false;\r\n          rows = table.rows;\r\n          /* Loop through all table rows (except the\r\n          first, which contains table headers): */\r\n          for (i = 1; i < (rows.length - 1); i++) {\r\n            // Start by saying there should be no switching:\r\n            shouldSwitch = false;\r\n            /* Get the two elements you want to compare,\r\n            one from current row and one from the next: */\r\n            x = rows[i].getElementsByTagName(\"TD\")[n];\r\n            y = rows[i + 1].getElementsByTagName(\"TD\")[n];\r\n            /* Check if the two rows should switch place,\r\n            based on the direction, asc or desc: */\r\n            if (dir == \"asc\") {\r\n              if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {\r\n                // If so, mark as a switch and break the loop:\r\n                shouldSwitch = true;\r\n                break;\r\n              }\r\n            } else if (dir == \"desc\") {\r\n              if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {\r\n                // If so, mark as a switch and break the loop:\r\n                shouldSwitch = true;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (shouldSwitch) {\r\n            /* If a switch has been marked, make the switch\r\n            and mark that a switch has been done: */\r\n            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);\r\n            switching = true;\r\n            // Each time a switch is done, increase this count by 1:\r\n            switchcount ++;\r\n          } else {\r\n            /* If no switching has been done AND the direction is \"asc\",\r\n            set the direction to \"desc\" and run the while loop again. */\r\n            if (switchcount == 0 && dir == \"asc\") {\r\n              dir = \"desc\";\r\n              switching = true;\r\n            }\r\n          }\r\n        }\r\n    }\r\n\r\n    const showModal = (dataAction, messageId, confirmId, cancelId = 'cancelmodal') => {\r\n        var strings = [\r\n            {\r\n                key: messageId,\r\n                component: 'local_gugcat'\r\n            },\r\n            {\r\n                key: cancelId,\r\n                component: 'local_gugcat'\r\n            },\r\n            {\r\n                key: confirmId,\r\n                component: 'local_gugcat'\r\n            }\r\n        ];\r\n        Str.get_strings(strings).then(function(langStrings){\r\n            var templateContext = {\r\n                bodycontent: langStrings[0],\r\n                strcancel: langStrings[1], \r\n                strconfirm: langStrings[2], \r\n                dataaction: dataAction\r\n            };\r\n            ModalFactory.create({\r\n                type:ModalGcat.TYPE,\r\n                templateContext: templateContext\r\n            }).done(modal => modal.show());\r\n        });\r\n    }\r\n\r\n    const toggleScaleTable = () => {\r\n        var schedA = document.getElementById('table-schedulea');\r\n        var schedB = document.getElementById('table-scheduleb');\r\n        schedA.classList.toggle('hidden');\r\n        schedB.classList.toggle('hidden');\r\n    }\r\n\r\n    const onChangeListeners = (event) =>{\r\n        var urlParams = new URLSearchParams(window.location.search);\r\n        var categories = document.getElementById('select-category');\r\n        var activities = document.getElementById('select-activity');\r\n        var childactivities = document.getElementById('select-child-act');\r\n        var grade_reason = document.querySelector('.multi-select-reason > select');\r\n        var select_scale = document.getElementById('select-scale');\r\n        var select_template = document.getElementById('select-template');\r\n        var mform_grade_reason = document.getElementById('id_reasons');\r\n        switch (event.target) {\r\n            case categories:\r\n                urlParams.delete(\"activityid\");\r\n                urlParams.delete(\"childactivityid\")\r\n                urlParams.delete(\"page\");\r\n                if(categories.value === 'null'){\r\n                    urlParams.delete(\"categoryid\");\r\n                }else{\r\n                    urlParams.set(\"categoryid\", categories.value);\r\n                }\r\n                if(checkCurrentUrl(\"gugcat/add\")){\r\n                    urlParams.delete(\"studentid\");\r\n                    var url = window.location.pathname;\r\n                    url = url.replace(\"gugcat/add\", \"gugcat\")+\"?\"+urlParams;\r\n                    window.location.replace(url);\r\n                    return;\r\n                }\r\n                window.location.search = urlParams;\r\n                break;\r\n            case activities:\r\n                urlParams.set(\"activityid\", activities.value);\r\n                urlParams.delete(\"childactivityid\")\r\n                urlParams.delete(\"page\");\r\n                window.location.search = urlParams;\r\n                break;\r\n            case childactivities:\r\n                urlParams.set(\"childactivityid\", childactivities.value)\r\n                urlParams.delete(\"page\");\r\n                window.location.search = urlParams;\r\n                break;\r\n            case grade_reason:\r\n                var selected = event.target.value; \r\n                var input = document.querySelector('.togglemultigrd > input');\r\n                update_reason_inputs(selected);\r\n                if(selected === 'Other'){\r\n                    update_reason_inputs('');\r\n                    input.style.display = 'block';\r\n                }else{\r\n                    input.style.display = 'none';\r\n                }\r\n                break;\r\n            case mform_grade_reason:\r\n                var selectedOption = event.target.value;\r\n                var mformReason = document.getElementById('id_otherreason');\r\n                if(selectedOption == '9'){\r\n                    mformReason.value = '';\r\n                    mformReason.focus();\r\n                }\r\n                break;\r\n            case select_scale:\r\n                toggleScaleTable();\r\n                break;\r\n            case select_template:\r\n                if(select_template.value != 0){\r\n                    var templateid = select_template.value;\r\n                    var requests = Ajax.call([{\r\n                        methodname: 'local_gugcat_get_converter_template',\r\n                        args: { templateid: templateid},\r\n                    }]);\r\n                    requests[0].done(function(data) {\r\n                        var template = data.result;\r\n                        if(template){\r\n                            template = JSON.parse(template);\r\n                            // Empty all input pt fields first\r\n                            var input_pts = document.querySelectorAll('.input-pt > div > input');\r\n                            if(input_pts.length > 0){\r\n                                input_pts.forEach(input => {\r\n                                    input.value = '';\r\n                                });\r\n                            }\r\n\r\n                            // Toggle table scale based on the template scale\r\n                            if(select_scale.value != template.scaletype){\r\n                                toggleScaleTable();\r\n                            }\r\n                            \r\n                            // Assign template scale on the select scale field\r\n                            select_scale.value = template.scaletype;\r\n\r\n                            // Name identifier for the input percentages and input points\r\n\r\n                            var nameidprc = template.scaletype != 2 ? \"schedA[*]\" : \"schedB[*]\";\r\n                            var nameidpt = template.scaletype != 2 ? \"schedA_pt[*]\" : \"schedB_pt[*]\";\r\n\r\n                            // Get maximum grade\r\n                            var maxgrade = document.getElementsByName('grademax')[0].value;\r\n\r\n                            // Start assigning lowerboundary from template on the input pt fields \r\n                            var conversions = template.conversion;\r\n                            for (let key in conversions) {\r\n                                let conv = conversions[key];\r\n                                let nameprc = nameidprc.replace(\"*\", conv.grade);\r\n                                let namept = nameidpt.replace(\"*\", conv.grade);\r\n                                var inputprc = document.querySelector(`.input-prc > div > input[name=\"${nameprc}\"]`);\r\n                                var inputpt = document.querySelector(`.input-pt > div > input[name=\"${namept}\"]`);\r\n                                let lowerboundary = parseFloat(conv.lowerboundary);\r\n                                inputprc.value =  lowerboundary;\r\n                                inputpt.value = rounder((lowerboundary / 100) * maxgrade); //convert percentage to points\r\n                            }\r\n                        }\r\n                    }).fail(function(e){\r\n                        console.log(e);\r\n                    });\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    const onClickListeners = (event) =>{\r\n        var btn_multiadd = document.getElementById('btn-saveadd');\r\n        var btn_multisave = document.getElementById('btn-multisave');\r\n        var btn_release = document.getElementById('btn-release');\r\n        var btn_import = document.getElementById('btn-import');\r\n        var btn_identities = document.getElementById('btn-identities');\r\n        var btn_coursegradeform = document.getElementById('btn-coursegradeform');\r\n        var btn_download = document.getElementById('btn-download');\r\n        var btn_finalrelease = document.getElementById('btn-finalrelease');\r\n        var btn_switch_display = document.getElementById('btn-switch-display');\r\n        var btn_bulk_import = document.getElementById('btn-blkimport');\r\n        var btn_convert = document.getElementById('id_convertbutton');\r\n        var radio_ptprc = document.getElementsByName('percentpoints');\r\n        switch (event.target) {\r\n            case btn_multiadd:\r\n                $(\".togglemultigrd\").toggle();\r\n                btn_multisave.classList.toggle('hidden');\r\n                break;\r\n            case btn_multisave:\r\n                if(document.querySelectorAll('input.is-invalid').length == 0){\r\n                    document.getElementById('multiadd-submit').click();\r\n                }\r\n                break;\r\n            case btn_release:   \r\n                showModal('release', 'modalreleaseprovisionalgrade', 'confirmreleaseprovisionalgrade');\r\n                break;\r\n            case btn_import:\r\n                if(!$(\".gradeitems\").text().includes(\"Moodle Grade[Date]\")){\r\n                    showModal('importgrades', 'modalimportgrades', 'confirmimport');\r\n                }else{\r\n                    document.getElementById('importgrades-submit').click();\r\n                }\r\n                break;\r\n            case btn_coursegradeform:\r\n                var inputarr = document.querySelectorAll('.input-percent');\r\n                var total = 0;\r\n                if(inputarr.length > 0){\r\n                    inputarr.forEach(div => {\r\n                        var input = div.querySelector('input');\r\n                        total += parseInt(input.value);\r\n                        var invalid = div.querySelector('input.is-invalid');\r\n                        if(invalid != null){\r\n                            div.querySelector('div.felement').classList.add('no-after');\r\n                        }else{\r\n                            div.querySelector('div.felement').classList.remove('no-after');\r\n                        }\r\n                    });\r\n                }\r\n                if(total != 100){\r\n                    showModal('adjustweight', 'modaladjustweights', 'confirmchanges');\r\n                }else{\r\n                    document.getElementById('coursegradeform-submit').click();\r\n                }\r\n                break;\r\n            case btn_finalrelease:\r\n                var isConvertSubcat = document.getElementById('isconvertsubcat');\r\n                showModal('finalrelease', isConvertSubcat.value != 1 ? 'modalreleasefinalgrades' : 'modalreleasefinalconvertedgrades', 'confirmfinalrelease');\r\n                break;\r\n            case btn_download:\r\n                document.getElementById('downloadcsv-submit').click();\r\n                break;\r\n            case btn_identities:\r\n                var is_blindmarking = (Storage.get(BLIND_MARKING_KEY) == 'true');\r\n                Storage.set(BLIND_MARKING_KEY, !is_blindmarking);\r\n                check_blind_marking();\r\n                break;\r\n            case btn_switch_display:\r\n                toggle_display_assessments();\r\n                break;\r\n            case btn_bulk_import:\r\n                if(!$(\".gradeitems\").text().includes(\"Moodle Grade[Date]\")){\r\n                    showModal('bulkimportgrades', 'modalimportgrades', 'confirmimport');\r\n                }else{\r\n                    document.getElementById('bulk-submit').click();\r\n                }\r\n                break;\r\n            case btn_convert:\r\n                showModal('convertgrades', 'modalconvertgrades', 'continueconvertgrade');\r\n                break;\r\n            case radio_ptprc[0]:\r\n            case radio_ptprc[1]:\r\n                var input_percentage_points = document.querySelectorAll('.input-prc,.input-pt');\r\n                input_percentage_points.forEach(element => {\r\n                    input = element.lastElementChild.firstElementChild\r\n                    is_input_H = input.id == 'id_schedA_pt_1' || input.id == 'id_schedA_1' || input.id == 'id_schedB_1' || input.id == 'id_schedB_pt_1'\r\n                    if (!is_input_H){\r\n                        input.value = \"\";\r\n                    }\r\n                })\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    return {\r\n        init: function() {\r\n            const GCAT = document.querySelector('.gcat-container');\r\n            if(GCAT){\r\n                GCAT.addEventListener('change', onChangeListeners);\r\n                GCAT.addEventListener('click', onClickListeners);\r\n    \r\n                //if hide identities button is visible, add key in storage\r\n                if(document.getElementById('btn-identities') && !Storage.get(BLIND_MARKING_KEY)){\r\n                    Storage.set(BLIND_MARKING_KEY, false);\r\n                }\r\n                check_blind_marking();\r\n                toggle_child_activities();\r\n\r\n                var input_reason = document.querySelector('.togglemultigrd > input');\r\n                if(input_reason){\r\n                    input_reason.addEventListener('input', (e) => {\r\n                        update_reason_inputs(e.target.value);\r\n                    });\r\n                }\r\n\r\n                var select_scale = document.getElementById('select-scale');\r\n                if(select_scale){\r\n                    if(select_scale.value != 1){\r\n                        toggleScaleTable();\r\n                    }\r\n                }\r\n\r\n                var input_search = document.querySelectorAll('.input-search');\r\n                if(input_search.length > 0){\r\n                    input_search.forEach(input => {\r\n                        input.addEventListener('keydown', (e) => {\r\n                            var key = e.keyCode ? e.keyCode : e.which;\r\n                            if(key === 13){\r\n                                document.getElementById('search-submit').click();\r\n                            }                        \r\n                        });\r\n                    });\r\n                }\r\n\r\n                var input_percentage_points = document.querySelectorAll('.input-prc,.input-pt');\r\n                if(input_percentage_points.length > 0){\r\n                    input_percentage_points.forEach(input => {\r\n                        input.addEventListener('change', (e) =>{\r\n                            calculatePercentagePoints(e.target, input.classList.contains('input-prc'));\r\n                        });\r\n                    });\r\n                }\r\n\r\n                var input_gradept = document.querySelectorAll('.input-gradept');\r\n                if(input_gradept.length > 0){\r\n                    input_gradept.forEach(input => {\r\n                        input.addEventListener('input', (e) => {\r\n                            var val = e.target.value;\r\n                            var grademax = e.target.getAttribute('data-grademax');\r\n                            if(val && !(/^([mM][vV]|[0-9]|[nN][sS])+$/).test(val)){\r\n                                input.classList.add('is-invalid');\r\n                            }else{\r\n                                if(Number.isInteger(parseInt(val)) && parseInt(val) > parseInt(grademax)){\r\n                                    input.classList.add('is-invalid');\r\n                                }else{\r\n                                    input.classList.remove('is-invalid');\r\n                                }\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n\r\n                var input_percentarr = document.querySelectorAll('.input-percent');\r\n                if(input_percentarr.length > 0){\r\n                    var total = 0;\r\n                    var totalweight = document.querySelector('#fitem_id_totalweight .form-inline');\r\n                    input_percentarr.forEach(div => {\r\n                        var input = div.querySelector('input');\r\n                        total += parseInt(input.value);\r\n                        input.addEventListener('input', (e) => {\r\n                            let total = 0;\r\n                            input_percentarr.forEach(div => total += parseInt(div.querySelector('input').value));\r\n                            totalweight.innerHTML = `${total}%`;\r\n                        });\r\n                        input.addEventListener('focus', (e) => {\r\n                            var val = e.target.value;\r\n                            if(val !== \"\" && val.match(/^[0-9]+$/) === null){\r\n                                div.querySelector('div.felement').classList.add('no-after');\r\n                            }else{\r\n                                div.querySelector('div.felement').classList.remove('no-after');\r\n                            }\r\n                        });\r\n                        input.addEventListener('blur', (e) => {\r\n                            var val = e.target.value;\r\n                            if(val !== \"\" && val.match(/^[0-9]+$/) === null){\r\n                                div.querySelector('div.felement').classList.add('no-after');\r\n                            }else{\r\n                                div.querySelector('div.felement').classList.remove('no-after');\r\n                            }\r\n                        });\r\n                    });\r\n                    totalweight.innerHTML = `${total}%`;\r\n                }\r\n\r\n                var columns = document.querySelectorAll('.sortable');\r\n                if(columns.length > 0){\r\n                    for (const [id, column] of columns.entries()) {\r\n                        column.addEventListener('click', () => sortTable(id));\r\n                    }\r\n                }\r\n\r\n                var searchIcons = document.querySelectorAll('.fa-search');\r\n                if(searchIcons.length > 0){\r\n                    searchIcons.forEach(icon => {\r\n                        icon.addEventListener('click', (e) => {\r\n                            e.currentTarget.blur();\r\n                            var input = e.target.nextSibling;\r\n                            input.classList.toggle('visible');\r\n                            if(input.classList.contains('visible')){\r\n                                input.style.display = 'block';\r\n                            } else {\r\n                                input.style.display = 'none';\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n\r\n                //Show 'grade discrepancy' when grade discrepancy exist\r\n                var grdDiscExist = document.querySelectorAll('td .grade-discrepancy');\r\n                if (grdDiscExist.length > 0) {\r\n                    document.getElementById('btn-grddisc').style.display = 'inline-block';\r\n                }\r\n\r\n                // Hide elements different pages\r\n                if(checkCurrentUrl(\"gugcat/overview\")){\r\n                    document.querySelector('#btn-overviewtab').classList.add('active');\r\n                    document.querySelector('#btn-assessmenttab').classList.remove('active');\r\n                }else if(checkCurrentUrl(\"gugcat/index\")){\r\n                    document.getElementById('btn-release').style.display = \r\n                    !$(\".gradeitems\").text().includes(\"Moodle Grade[Date]\") ? 'inline-block' : 'none';\r\n                    var nodeArr = Array.from(document.querySelectorAll('.gradeitems'));\r\n                    var isConverted = document.getElementById('isconverted');\r\n                    if(nodeArr.find(node => node.innerHTML !== 'Moodle Grade<br>[Date]')){\r\n                        document.getElementById('btn-saveadd').style.display = 'inline-block';\r\n                        var btnnewgrade = document.querySelectorAll('.addnewgrade');\r\n                        btnnewgrade.forEach(e => {\r\n                            e.style.display = 'block';\r\n                        });\r\n\r\n                        var hideshowgrade = document.querySelectorAll('.hide-show-grade');\r\n                        hideshowgrade.forEach(element => {\r\n                            element.style.display = 'block';\r\n                        });\r\n                    }\r\n                    if(isConverted.value != 0){\r\n                        document.getElementById('btn-release').style.display = 'none';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n});\r\n"],"file":"main.min.js"}