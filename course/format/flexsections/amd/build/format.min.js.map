{"version":3,"sources":["../src/format.js"],"names":["define","$","Ajax","Templates","Notification","Str","confirmAction","e","message","preventDefault","href","currentTarget","attr","get_strings","key","component","done","strings","confirm","window","location","fail","exception","init","on"],"mappings":"AAsBAA,OAAM,8BAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,gBAAxB,CAA0C,mBAA1C,CAA+D,UAA/D,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAA6BC,CAA7B,CAA2CC,CAA3C,CAAgD,CAC5C,GAAIC,CAAAA,CAAa,CAAG,SAASC,CAAT,CAAYC,CAAZ,CAAqB,CAErCD,CAAC,CAACE,cAAF,GACA,GAAIC,CAAAA,CAAI,CAAGT,CAAC,CAACM,CAAC,CAACI,aAAH,CAAD,CAAmBC,IAAnB,CAAwB,MAAxB,CAAX,CACAP,CAAG,CAACQ,WAAJ,CAAgB,CACZ,CAACC,GAAG,CAAE,SAAN,CAAiBC,SAAS,CAAE,QAA5B,CADY,CAEZ,CAACD,GAAG,CAAEN,CAAN,CAAeO,SAAS,CAAE,qBAA1B,CAFY,CAGZ,CAACD,GAAG,CAAE,KAAN,CAAaC,SAAS,CAAE,QAAxB,CAHY,CAIZ,CAACD,GAAG,CAAE,IAAN,CAAYC,SAAS,CAAE,QAAvB,CAJY,CAAhB,EAKGC,IALH,CAKQ,SAASC,CAAT,CAAkB,CACtBb,CAAY,CAACc,OAAb,CACID,CAAO,CAAC,CAAD,CADX,CAEIA,CAAO,CAAC,CAAD,CAFX,CAGIA,CAAO,CAAC,CAAD,CAHX,CAIIA,CAAO,CAAC,CAAD,CAJX,CAKI,UAAW,CACPE,MAAM,CAACC,QAAP,CAAgBV,IAAhB,CAAuBA,CAAI,CAAG,YACjC,CAPL,CASH,CAfD,EAeGW,IAfH,CAeQjB,CAAY,CAACkB,SAfrB,CAgBH,CApBD,CAsBA,MAAO,CACHC,IAAI,CAAE,eAAW,CACbtB,CAAC,CAAC,MAAD,CAAD,CAAUuB,EAAV,CAAa,OAAb,CAAsB,oDAAtB,CAA0E,SAASjB,CAAT,CAAY,CAClFD,CAAa,CAACC,CAAD,CAAI,eAAJ,CAChB,CAFD,EAGAN,CAAC,CAAC,MAAD,CAAD,CAAUuB,EAAV,CAAa,OAAb,CAAsB,qDAAtB,CAA2E,SAASjB,CAAT,CAAY,CACnFD,CAAa,CAACC,CAAD,CAAI,cAAJ,CAChB,CAFD,CAGH,CARE,CAUV,CAlCC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Various actions on modules and sections in the editing mode - hiding, duplicating, deleting, etc.\n *\n * @module     format_flexsections/format\n * @copyright  2020 Marina Glancy\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/ajax', 'core/templates', 'core/notification', 'core/str'],\n    function($, Ajax, Templates, Notification, Str) {\n        var confirmAction = function(e, message) {\n            // Prevent the default button action.\n            e.preventDefault();\n            var href = $(e.currentTarget).attr('href');\n            Str.get_strings([\n                {key: 'confirm', component: 'moodle'},\n                {key: message, component: 'format_flexsections'},\n                {key: 'yes', component: 'moodle'},\n                {key: 'no', component: 'moodle'}\n            ]).done(function(strings) {\n                Notification.confirm(\n                    strings[0], // Confirm.\n                    strings[1], // Are you sure you want to delete.\n                    strings[2], // Yes.\n                    strings[3], // No.\n                    function() {\n                        window.location.href = href + '&confirm=1';\n                    }\n                );\n            }).fail(Notification.exception);\n        };\n\n        return {\n            init: function() {\n                $('body').on('click', 'li.section > .controls > a[data-action=\"delete\"]', function(e) {\n                    confirmAction(e, 'confirmdelete');\n                });\n                $('body').on('click', 'li.section > .controls > a[data-action=\"mergeup\"]', function(e) {\n                    confirmAction(e, 'confirmmerge');\n                });\n            }\n        };\n    }\n);\n"],"file":"format.min.js"}