{"version":3,"sources":["../src/eula.js"],"names":["define","$","Templates","ModalFactory","ModalEvents","ModalEulaLaunch","eulaLaunch","turnitinEulaClass","show","document","on","event","newid","create","type","TYPE","templateContext","cmid","val","wwwroot","M","cfg","large","then","modal","getRoot","find","addClass","length","hide","siblings"],"mappings":"AASAA,OAAM,4BAAC,CAAC,QAAD,CACC,gBADD,CAEC,oBAFD,CAGC,mBAHD,CAIC,uCAJD,CAAD,CAMF,SAASC,CAAT,CAAYC,CAAZ,CAAuBC,CAAvB,CAAqCC,CAArC,CAAkDC,CAAlD,CAAmE,CAC/D,MAAO,CACHC,UAAU,CAAE,qBAAW,CACnB,GAAIC,CAAAA,CAAiB,CAAGN,CAAC,CAAC,mBAAD,CAAzB,CACAM,CAAiB,CAACC,IAAlB,GAGAP,CAAC,CAACQ,QAAD,CAAD,CAAYC,EAAZ,CAAe,wBAAf,CAAyC,uBAAzC,CAAkE,SAAUC,CAAV,CAAiBC,CAAjB,CAAwB,CACtF,GAAIL,CAAAA,CAAiB,CAAGN,CAAC,CAAC,iBAAmBW,CAAnB,CAA2B,oBAA5B,CAAzB,CACAL,CAAiB,CAACC,IAAlB,EACH,CAHD,EAKAP,CAAC,CAACQ,QAAD,CAAD,CAAYC,EAAZ,CAAe,OAAf,CAAwB,wBAAxB,CAAkD,UAAW,CACzDP,CAAY,CAACU,MAAb,CAAoB,CAChBC,IAAI,CAAET,CAAe,CAACU,IADN,CAEhBC,eAAe,CAAE,CACbC,IAAI,CAAEhB,CAAC,CAAC,8BAAD,CAAD,CAAgCiB,GAAhC,EADO,CAEbC,OAAO,CAAEC,CAAC,CAACC,GAAF,CAAMF,OAFF,CAFD,CAMhBG,KAAK,GANW,CAApB,EAQKC,IARL,CAQU,SAAUC,CAAV,CAAiB,CACnBA,CAAK,CAAChB,IAAN,GACAgB,CAAK,CAACC,OAAN,GAAgBC,IAAhB,CAAqB,QAArB,EAA+BC,QAA/B,CAAwC,mBAAxC,EACAH,CAAK,CAACC,OAAN,GAAgBC,IAAhB,CAAqB,gBAArB,EAAuCC,QAAvC,CAAgD,2BAAhD,CACH,CAZL,CAaH,CAdD,EAiBA,GAA4C,CAAxC,CAAA1B,CAAC,CAAC,2BAAD,CAAD,CAA+B2B,MAAnC,CAA+C,CAC3C,GAAsC,CAAlC,CAAA3B,CAAC,CAAC,qBAAD,CAAD,CAAyB2B,MAA7B,CAAyC,CACrC3B,CAAC,CAAC,qBAAD,CAAD,CAAyB4B,IAAzB,EACH,CACD,GAAkD,CAA9C,CAAAtB,CAAiB,CAACuB,QAAlB,CAA2B,QAA3B,EAAqCF,MAAzC,CAAqD,CACjDrB,CAAiB,CAACuB,QAAlB,CAA2B,QAA3B,EAAqCD,IAArC,EACH,CACJ,CACJ,CApCE,CAsCV,CA7CC,CAAN","sourcesContent":["/**\n * Javascript controller for launching the EULA modal.\n *\n * @package   turnitin\n * @copyright Turnitin\n * @author 2019 David Winn <dwinn@turnitin.com>\n * @module plagiarism_turnitin/eulaLaunch\n */\n\ndefine(['jquery',\n        'core/templates',\n        'core/modal_factory',\n        'core/modal_events',\n        'plagiarism_turnitin/modal_eula_launch'\n    ],\n    function($, Templates, ModalFactory, ModalEvents, ModalEulaLaunch) {\n        return {\n            eulaLaunch: function() {\n                var turnitinEulaClass = $(\".pp_turnitin_eula\");\n                turnitinEulaClass.show();\n\n                // Show the 'accept EULA' prompt for new in-page forum replies.\n                $(document).on('mod_forum-post-created', '.forum-post-container', function (event, newid) {\n                    var turnitinEulaClass = $(\"#post-content-\" + newid + \" .pp_turnitin_eula\");\n                    turnitinEulaClass.show();\n                });\n\n                $(document).on('click', '.pp_turnitin_eula_link', function() {\n                    ModalFactory.create({\n                        type: ModalEulaLaunch.TYPE,\n                        templateContext: {\n                            cmid: $('input[name=\"coursemodule\"]').val(),\n                            wwwroot: M.cfg.wwwroot\n                        },\n                        large: true\n                    })\n                        .then(function (modal) {\n                            modal.show();\n                            modal.getRoot().find('.modal').addClass('tii_pp_modal_eula');\n                            modal.getRoot().find('.modal-content').addClass('tii_pp_modal_eula_content');\n                        });\n                });\n\n                // Hide the submission form if the user has never accepted or declined the Turnitin EULA.\n                if ($(\".pp_turnitin_eula_ignored\").length > 0) {\n                    if ($('.editsubmissionform').length > 0) {\n                        $('.editsubmissionform').hide();\n                    }\n                    if (turnitinEulaClass.siblings('.mform').length > 0) {\n                        turnitinEulaClass.siblings('.mform').hide();\n                    }\n                }\n            }\n        };\n    });"],"file":"eula.min.js"}