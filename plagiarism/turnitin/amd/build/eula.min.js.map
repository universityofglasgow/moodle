{"version":3,"file":"eula.min.js","sources":["../src/eula.js"],"sourcesContent":["/**\n * Javascript controller for launching the EULA modal.\n *\n * @copyright Turnitin\n * @author 2019 David Winn <dwinn@turnitin.com>\n * @module plagiarism_turnitin/eulaLaunch\n */\n\ndefine(['jquery',\n        'core/templates',\n        'core/modal_factory',\n        'core/modal_events',\n        'plagiarism_turnitin/modal_eula_launch'\n    ],\n    function($, Templates, ModalFactory, ModalEvents, ModalEulaLaunch) {\n        return {\n            eulaLaunch: function() {\n                var turnitinEulaClass = $(\".pp_turnitin_eula\");\n                turnitinEulaClass.show();\n\n                // Show the 'accept EULA' prompt for new in-page forum replies.\n                $(document).on('mod_forum-post-created', '.forum-post-container', function (event, newid) {\n                    var turnitinEulaClass = $(\"#post-content-\" + newid + \" .pp_turnitin_eula\");\n                    turnitinEulaClass.show();\n                });\n\n                $(document).on('click', '.pp_turnitin_eula_link', function() {\n                    ModalFactory.create({\n                        type: ModalEulaLaunch.TYPE,\n                        templateContext: {\n                            cmid: $('input[name=\"coursemodule\"]').val(),\n                            wwwroot: M.cfg.wwwroot\n                        },\n                        large: true\n                    })\n                        .then(function (modal) {\n                            modal.show();\n                            modal.getRoot().find('.modal').addClass('tii_pp_modal_eula');\n                            modal.getRoot().find('.modal-content').addClass('tii_pp_modal_eula_content');\n                        });\n                });\n\n                // Hide the submission form if the user has never accepted or declined the Turnitin EULA.\n                if ($(\".pp_turnitin_eula_ignored\").length > 0) {\n                    if ($('.editsubmissionform').length > 0) {\n                        $('.editsubmissionform').hide();\n                    }\n                    if (turnitinEulaClass.siblings('.mform').length > 0) {\n                        turnitinEulaClass.siblings('.mform').hide();\n                    }\n                }\n            }\n        };\n    });"],"names":["define","$","Templates","ModalFactory","ModalEvents","ModalEulaLaunch","eulaLaunch","turnitinEulaClass","show","document","on","event","newid","create","type","TYPE","templateContext","cmid","val","wwwroot","M","cfg","large","then","modal","getRoot","find","addClass","length","hide","siblings"],"mappings":"AAQAA,kCAAO,CAAC,SACA,iBACA,qBACA,oBACA,0CAEJ,SAASC,EAAGC,UAAWC,aAAcC,YAAaC,uBACvC,CACHC,WAAY,eACJC,kBAAoBN,EAAE,qBAC1BM,kBAAkBC,OAGlBP,EAAEQ,UAAUC,GAAG,yBAA0B,yBAAyB,SAAUC,MAAOC,OACvDX,EAAE,iBAAmBW,MAAQ,sBACnCJ,UAGtBP,EAAEQ,UAAUC,GAAG,QAAS,0BAA0B,WAC9CP,aAAaU,OAAO,CAChBC,KAAMT,gBAAgBU,KACtBC,gBAAiB,CACbC,KAAMhB,EAAE,8BAA8BiB,MACtCC,QAASC,EAAEC,IAAIF,SAEnBG,OAAO,IAENC,MAAK,SAAUC,OACZA,MAAMhB,OACNgB,MAAMC,UAAUC,KAAK,UAAUC,SAAS,qBACxCH,MAAMC,UAAUC,KAAK,kBAAkBC,SAAS,mCAKxD1B,EAAE,6BAA6B2B,OAAS,IACpC3B,EAAE,uBAAuB2B,OAAS,GAClC3B,EAAE,uBAAuB4B,OAEzBtB,kBAAkBuB,SAAS,UAAUF,OAAS,GAC9CrB,kBAAkBuB,SAAS,UAAUD"}