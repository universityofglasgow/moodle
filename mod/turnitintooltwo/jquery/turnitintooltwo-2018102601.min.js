!function($){$(window).on("load",function(){function enableEditingText(i){$("#tabs-"+i+" .editable_date, #tabs-"+i+" .editable_text").editable("enable")}function disableEditingText(i){$("#tabs-"+i+" .editable_date, #tabs-"+i+" .editable_text").editable("disable")}function getLoadingGif(){var i='<div class="loading_gif"></div>';$("#cboxOverlay").after(i);var e=$(window).scrollTop()+$(window).height()/2;$(".loading_gif").css("top",e+"px")}function hideLoadingGif(){$(".loading_gif").remove()}function getSubmissions(table,assignment_id,part_id,start,refresh_requested,total){$.ajax({dataType:"json",type:"POST",url:"ajax.php",async:!0,data:{action:"get_submissions",assignment:assignment_id,part:part_id,start:start,refresh_requested:refresh_requested[part_id],sesskey:M.cfg.sesskey,total:total},success:function(result){if(eval(result),start=result.end,result.aaData.length>0&&table.fnAddData(result.aaData),result.end<result.total)getSubmissions(table,assignment_id,part_id,start,refresh_requested,result.total);else{$("#"+part_id+"_processing").attr("style","visibility: hidden"),refresh_requested[part_id]=0;var allrefreshed=1;$.each(refresh_requested,function(i,e){1==e&&(allrefreshed=0)}),1==allrefreshed&&($(".refreshing_link").hide(),$(".refresh_link").show()),submitVisibility(),enableEditingText(part_id),result.nonsubmitters>0&&$(".nonsubmitters_link").attr("style","display: block")}},error:function(i,e){$("#"+part_id+"_processing").attr("style","visibility: hidden"),$(".dataTables_empty").html(M.str.turnitintooltwo.tiisubmissionsgeterror)}})}function submitVisibility(){1==$(".upload_box").data("user-type")||1==$(".upload_box").data("eula")?$(".upload_box").show():$(".upload_box").hide()}function refreshRubricSelect(){var i=$("#id_rubric").length?"#id_rubric":"#id_plagiarism_rubric",e=$(i).val();$.ajax({dataType:"json",type:"POST",url:"../mod/turnitintooltwo/ajax.php",data:{action:"refresh_rubric_select",assignment:$('input[name="instance"]').val(),modulename:$('input[name="modulename"]').val(),course:$('input[name="course"]').val()},success:function(t){$($(i)).empty();var s=t;$.each(s,function(e,t){if($.isNumeric(e)||""===e)$($(i)).append($("<option>",{value:e,text:t}));else{var s=$("<optgroup>");s.attr("label",e),$.each(t,function(i,e){var t=$("<option></option>");t.val(i),t.text(e),s.append(t)}),$(i).append(s)}}),$(i+' option[value="'+e+'"]').attr("selected","selected")}})}function refreshUserMessages(){$(".messages_loading").show(),$(".messages_amount").html(""),$.ajax({dataType:"html",type:"POST",url:"ajax.php",data:{action:"refresh_user_messages",assignment:$("#assignment_id").html()},success:function(i){$(".messages_loading").hide(),$(".messages_amount").html(i)}})}function resetPeermarkSection(i){$("#tabs-"+i+" .toggle_peermarks").hide(),$("#tabs-"+i+" .peermark_count").html(""),$("#tabs-"+i+" .peermark-loading").show(),$("#tabs-"+i+" .peermark_assignments_container").hide()}function refreshPeermarkAssignments(part_id,refresh_requested){var user_role=$(".tii_peermark_manager_launch").length>0?"Instructor":"Learner";$("#tabs-"+part_id+" .peermark_assignments_container").length>0&&(resetPeermarkSection(part_id),$.ajax({dataType:"json",type:"POST",url:"ajax.php",data:{action:"refresh_peermark_assignments",assignment:$("#assignment_id").html(),part:part_id,refresh_requested:refresh_requested,sesskey:M.cfg.sesskey},success:function(data){eval(data),$("#tabs-"+part_id+" .peermark_assignments_container").html(data.peermark_table),$("#tabs-"+part_id+" .peermark-loading").hide(),$("#tabs-"+part_id+" .peermark_count").html(data.no_of_peermarks),data.no_of_peermarks>0?$("#tabs-"+part_id+" .toggle_peermarks").show():$("#tabs-"+part_id+" .toggle_peermarks").hide(),(data.no_of_peermarks>0&&"Instructor"==user_role||data.peermarks_active&&"Learner"==user_role)&&$("#tabs-"+part_id+" .row_peermark_reviews").show(),"true"==$.cookie("show_peermarks_"+$("#assignment_id").html())&&data.no_of_peermarks>0?($(".show_peermarks_"+$("#assignment_id").html()).hide(),$(".hide_peermarks_"+$("#assignment_id").html()).show(),$(".peermark_assignments_container").slideDown()):($(".show_peermarks_"+$("#assignment_id").html()).show(),$(".hide_peermarks_"+$("#assignment_id").html()).hide(),$(".peermark_assignments_container").slideUp())}}))}function initialiseUnanoymiseForm(scope,assignment_id,submission_id){var identifier="a.unanonymise";"row"==scope&&(identifier="#submission_"+submission_id),$(identifier).colorbox({inline:!0,width:"50%",top:"100px",height:"260px",opacity:"0.7",className:"tii_unanonymise_reveal_form",onComplete:function(){var idStr=$(this).attr("id").split("_");if(0==submission_id||void 0==submission_id)var submission_id=idStr[1];0==assignment_id&&(assignment_id=$("#assignment_id").html()),$("#submission_id").html(submission_id),$("#cboxLoadedContent .unanonymise_form").show(),$("#id_reveal").unbind("click"),$("#id_reveal").click(function(){$.ajax({dataType:"json",type:"POST",url:"ajax.php",data:{action:"reveal_submission_name",assignment:assignment_id,submission_id:submission_id,reason:encodeURIComponent($("#id_anonymous_reveal_reason").val()),sesskey:M.cfg.sesskey},success:function(data){if(eval(data),"success"==data.status)$.colorbox.close(),$("#submission_"+submission_id).attr("href",M.cfg.wwwroot+"/user/view.php?id="+data.userid+"&course="+data.courseid),$("#submission_"+submission_id).html(data.name),$("#submission_"+submission_id).removeClass("unanonymise cboxElement");else{var current_msg=$("#unanonymise_desc").html;$("#unanonymise_desc").html(current_msg+" "+data.msg)}}})})},onCleanup:function(){$(".unanonymise_form").hide()}})}function initialiseUploadBox(i,e,t,s){var a=".upload_box";"row"==i&&(a="#upload_"+e+"_"+t+"_"+s);var n="80%",o="80%";$(a).colorbox({onLoad:function(){getLoadingGif(),lightBoxCloseButton(),$(this).hide()},onClosed:function(){hideLoadingGif()},onCleanup:function(){hideLoadingGif();var i=$(this).attr("id").split("_");refreshInboxRow("upload",i[1],i[2],i[3]),$("#tii_close_bar").remove()},iframe:!0,width:n,height:o,opacity:"0.7",className:"upload",transition:"none"})}function initialiseZipDownloads(i){$("#tabs-"+i+" .orig_zip_open, #tabs-"+i+" .pdf_zip_open, #tabs-"+i+" .xls_inbox_open").unbind("click"),$("#tabs-"+i+" .orig_zip_open, #tabs-"+i+" .pdf_zip_open, #tabs-"+i+" .xls_inbox_open").click(function(){var i=$(this).attr("id").split("_");downloadZipFile(i[0]+"_"+i[1],i[2])}),$("#tabs-"+i+" .downloadpdf_box").colorbox({iframe:!0,width:"40%",height:"60%",opacity:"0.7",className:"downloadpdf_window",transition:"none",onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()},onClosed:function(){refreshUserMessages()}}),$(document).on("click","#tabs-"+i+" .gmpdfzip_box",function(e){return $(this).colorbox({open:!0,iframe:!0,width:"786px",height:"300px",opacity:"0.7",className:"gmpdfzip_window",transition:"none",href:function(){var e="";return $("#tabs-"+i+" .inbox_checkbox:checked").each(function(i){e+="&submission_id"+i+"="+$(this).val(),i++}),$(this).attr("href")+e},onLoad:function(){getLoadingGif()},onCleanup:function(){hideLoadingGif()},onClosed:function(){refreshUserMessages()}}),!1})}function lightBoxCloseButton(){$("body").append('<div id="tii_close_bar"><a href="#" onclick="jQuery(\'#cboxClose\').click(); return false;">'+M.str.turnitintooltwo.closebutton+"</a></div>")}function initialiseDigitalReceipt(){$(".tii_digital_receipt").length>0&&$(".tii_digital_receipt").colorbox({iframe:!0,width:"832px",height:"482px",opacity:"0.7",className:"rubric_view",transition:"none",onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()}})}function initialiseHiddenZipDownloads(i){$("#tabs-"+i+" .origchecked_zip_open").unbind("click"),$("#tabs-"+i+" .origchecked_zip_open").click(function(){var e=$(this).attr("id").split("_");return downloadZipFile(e[0]+"_"+e[1],i),!1})}function initialiseRefreshRow(i,e,t,s){var a=".refresh_row .fa-refresh";"row"==i&&(a="#refreshrow_"+e+"_"+t+"_"+s+" .fa-refresh"),$(a).unbind("click"),$(a).click(function(){$(this).hide(),$(this).siblings(".fa-spinner").css("display","inline-block").addClass("fa-lg");var i=$(this).parent().attr("id").split("_");refreshInboxRow(i[0],i[1],i[2],i[3])})}function initialiseDVLaunchers(i,e,t,s){var a="#"+t+" .download_original_open";"row"==i&&(a="#downloadoriginal_"+e+"_"+t+"_"+s),$(a).unbind("click"),$(a).click(function(){var i=$(this).attr("id").split("_");$(this).children(".score_colour").hasClass("score_colour_")||downloadOriginalFile(i[0],i[1],i[2],i[3])})}function downloadZipFile(i,e){var t=[];"origchecked_zip"!=i&&"gmpdf_zip"!=i||$("#tabs-"+e+" .inbox_checkbox:checked").each(function(i){t[i]=$(this).val()}),$.ajax({type:"POST",url:"ajax.php",dataType:"html",data:{action:i,assignment:$("#assignment_id").html(),part:e,submission_ids:t},success:function(t){$("#"+i+"_form_"+e).html(t),$("#"+i+"_form_"+e).children("form").submit(),$("#"+i+"_form_"+e).html("")}})}function downloadOriginalFile(i,e,t,s){$.ajax({type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",dataType:"html",data:{action:i,submission:e,assignment:$("#assignment_id").html()},success:function(t){$("#"+i+"_form_"+e).html(t),$("#"+i+"_form_"+e).children("form").submit(),$("#"+i+"_form_"+e).html("")}})}function checkDVClosed(i){window.dvWindow.closed?$("#refresh_"+i).click():setTimeout(function(){checkDVClosed(i)},500)}function submitNothing(user_id,part_id){$("#submitnothing_0_"+part_id+"_"+user_id+" i").attr("class","fa fa-spin fa-spinner fa-lg"),$.ajax({type:"POST",url:"ajax.php",dataType:"json",data:{action:"submit_nothing",assignment:$("#assignment_id").html(),part:part_id,user:user_id,sesskey:M.cfg.sesskey},success:function(data){eval(data),$.cookie("submitnothingaccept",!0,{expires:365}),$("table#"+part_id+" .select_all_checkbox").attr("checked",!1)},error:function(i){$("#submitnothing_0_"+part_id+"_"+user_id+" i").attr("class","fa fa-pencil fa-lg"),$("#submitnothing_0_"+part_id+"_"+user_id).removeClass("disabled"),alert(i.responseText)},complete:function(){refreshInboxRow("submitnothing",0,part_id,user_id)}})}function refreshInboxRow(link,submission_id,part_id,user_id){$.ajax({type:"POST",url:"ajax.php",dataType:"json",data:{action:"refresh_submission_row",assignment:$("#assignment_id").html(),part:part_id,user:user_id,sesskey:M.cfg.sesskey},success:function(data){$("table#"+part_id+" .select_all_checkbox").attr("checked",!1),eval(data);var i=0;0==submission_id?(link+="_0",submission_id=data.submission_id):link=null==data.submission_id&&0!=submission_id?link+"_"+submission_id:link+"_"+data.submission_id,0!=submission_id&&$("#export_links").removeClass("hidden_class"),oTable=$("table#"+part_id).dataTable();var tr=$("#"+link+"_"+part_id+"_"+user_id).parent().parent(),rowindex=tr.index();oTable.fnDeleteRow(tr),oTable.fnAddData(data.row),submitVisibility(),initialiseUploadBox("row",data.submission_id,part_id,user_id),initialiseDVLaunchers("row",data.submission_id,part_id,user_id),initialiseRefreshRow("row",data.submission_id,part_id,user_id),initialiseCheckboxes(data.submission_id,part_id),initialiseUnanoymiseForm("row",$("#assignment_id").html(),data.submission_id)}})}function initialiseCheckboxes(i,e){var t="#tabs-"+e+" .inbox_checkbox";0!=i&&(t="check_"+i),$("#tabs-"+e+" .inbox_checkbox").click(function(){$("table#"+e+" .select_all_checkbox").attr("checked",!1)}),$(document).on("click",t+", .select_all_checkbox",function(){$("#tabs-"+e+" .inbox_checkbox:checked").length>0?($("#tabs-"+e+" .zip_downloads button").prop("disabled",!1),$("#tabs-"+e+" .zip_downloads button").removeAttr("title"),initialiseHiddenZipDownloads(e)):($("#tabs-"+e+" .origchecked_zip_open").unbind("click"),$("#tabs-"+e+" .zip_downloads button").prop("disabled",!0),$("#tabs-"+e+" .zip_downloads button").prop("title",M.str.turnitintooltwo.download_button_warning))})}function showPartDatesBoxes(){for(var i=0;i<=5;i++)i<=$("#id_numparts").val()?$('fieldset[id$="partdates'+i+'"]').slideDown():$('fieldset[id$="partdates'+i+'"]').slideUp()}if($(".js_required").show(),$(".js_hide").hide(),1==$("#id_submissiontype").val()&&$("#id_submissiontext").parent().parent().hide(),2==$("#id_submissiontype").val()&&$("#id_submissionfile").parent().parent().hide(),$("#id_submissionagreement").length&&$("#id_submitbutton").attr("disabled","disabled"),$("#id_submissionagreement").on("click",function(){$(this).is(":checked")?$("#id_submissionagreement").each(function(){$("#id_submitbutton").removeAttr("disabled")}):$("#id_submissionagreement").each(function(){$("#id_submitbutton").attr("disabled","disabled")})}),$(document).on("click",".delete_paper",function(){var i=$(this).data("confirm"),e=M.str.turnitintooltwo[i].replace(/\\n/g,"\n"),t=confirm(e);t&&$.ajax({type:"POST",url:"ajax.php",dataType:"html",data:{action:"deletesubmission",sesskey:M.cfg.sesskey,paper:$(this).data("paper"),part:$(this).data("part"),assignment:$(this).data("assignment")},success:function(){window.location.href=window.location.href}})}),$(document).on("click",".submit_nothing",function(){if(!$(this).hasClass("disabled")){$(this).addClass("disabled");var i=$(this).prop("id").split("_")[2],e=$(this).prop("id").split("_")[3],t=M.str.turnitintooltwo.submitnothingwarning.replace(/<br>/g,"\n").replace(/&#39;/g,"'"),s=$.cookie("submitnothingaccept");s||confirm(t)?submitNothing(e,i):$(this).removeClass("disabled")}}),$(document).on("change","#id_submissiontype",function(){1==$("#id_submissiontype").val()&&($("#id_submissiontext").parent().parent().hide(),$("#id_submissionfile").parent().parent().show()),2==$("#id_submissiontype").val()&&($("#id_submissionfile").parent().parent().hide(),$("#id_submissiontext").parent().parent().show())}),$(document).on("submit",".submission_form_container form",function(){return $("#id_submissiontitle").val().length>0&&($("#general").slideUp("slow"),$(".mod_turnitintooltwo .noticebox").slideUp("slow"),$(".submission_form_container form").slideUp("slow"),$("#submitting_loader").slideDown("slow"),!0)}),$(".toggle_summary").length>0&&($.cookie("show_summary_"+$("#assignment_id").html())||$.cookie("show_summary_"+$("#assignment_id").html(),!0,{expires:30}),"true"==$.cookie("show_summary_"+$("#assignment_id").html())?($(".hide_summary_"+$("#assignment_id").html()).show(),$(".show_summary_"+$("#assignment_id").html()).hide(),$(".introduction").slideDown()):($(".show_summary_"+$("#assignment_id").html()).show(),$(".hide_summary_"+$("#assignment_id").html()).hide(),$(".introduction").slideUp()),$(".toggle_summary i").click(function(){$(this).hasClass("show_summary_"+$("#assignment_id").html())?($.cookie("show_summary_"+$("#assignment_id").html(),!0,{expires:30}),$(".show_summary_"+$("#assignment_id").html()).hide(),$(".hide_summary_"+$("#assignment_id").html()).show(),$(".introduction").slideDown()):($.cookie("show_summary_"+$("#assignment_id").html(),!1,{expires:30}),$(".show_summary_"+$("#assignment_id").html()).show(),$(".hide_summary_"+$("#assignment_id").html()).hide(),$(".introduction").slideUp())})),$(".toggle_peermarks").length>0&&($.cookie("show_peermarks_"+$("#assignment_id").html())||$.cookie("show_peermarks_"+$("#assignment_id").html(),!0,{expires:30}),"true"==$.cookie("show_peermarks_"+$("#assignment_id").html())?($(".hide_peermarks_"+$("#assignment_id").html()).show(),$(".show_peermarks_"+$("#assignment_id").html()).hide(),$(".peermark_assignments_container").slideDown()):($(".show_peermarks_"+$("#assignment_id").html()).show(),$(".hide_peermarks_"+$("#assignment_id").html()).hide(),$(".peermark_assignments_container").slideUp()),$(".toggle_peermarks i").click(function(){$(this).hasClass("show_peermarks_"+$("#assignment_id").html())?($.cookie("show_peermarks_"+$("#assignment_id").html(),!0,{expires:30}),$(".show_peermarks_"+$("#assignment_id").html()).hide(),$(".hide_peermarks_"+$("#assignment_id").html()).show(),$(".peermark_assignments_container").slideDown()):($.cookie("show_peermarks_"+$("#assignment_id").html(),!1,{expires:30}),$(".show_peermarks_"+$("#assignment_id").html()).show(),$(".hide_peermarks_"+$("#assignment_id").html()).hide(),$(".peermark_assignments_container").slideUp())})),$(document).on("click",".show_peermark_instructions, .hide_peermark_instructions",function(){var i=$(this).attr("id").split("_");"show"==i[0]?($("#show_peermark_instructions_"+i[3]).hide(),$("#hide_peermark_instructions_"+i[3]).show(),$("#peermark_instructions_"+i[3]).slideDown()):($("#show_peermark_instructions_"+i[3]).show(),$("#hide_peermark_instructions_"+i[3]).hide(),$("#peermark_instructions_"+i[3]).slideUp())}),showPartDatesBoxes(),$(document).on("change","#id_numparts",function(){showPartDatesBoxes()}),$(document).on("click",".splitter-lastname, .splitter-firstname",function(i){var e=$(i.target),t=e.hasClass("sorting_asc"),s="asc",a="desc",n=e.attr("data-col");t||(s="desc",a="asc"),e.closest(".submissionsDataTable").DataTable().order([n,a]).draw(),e.addClass("sorting_"+a).removeClass("sorting sorting_"+s),e.parent().removeClass("sorting sorting_asc sorting_desc"),e.siblings().removeClass("sorting_asc sorting_desc").addClass("sorting")}),$("#dataTable").length>0&&$("#dataTable").dataTable(),"undefined"!=typeof M.str.turnitintooltwo)var dataTablesLang={sProcessing:'<span class="loading-message">'+M.str.turnitintooltwo.sprocessing+"</span>",sZeroRecords:M.str.turnitintooltwo.szerorecords,sInfo:M.str.turnitintooltwo.sinfo,sSearch:M.str.turnitintooltwo.ssearch,sLengthMenu:M.str.turnitintooltwo.slengthmenu,oPaginate:{sNext:M.str.turnitintooltwo.snext,sPrevious:M.str.turnitintooltwo.sprevious}};if($("#tabs").length>0){var activeTab=0;$("#tab_position").length>0&&(activeTab=$("#tab_position").text()),$("#tabs").tabs({active:activeTab,show:function(){var i=$.fn.dataTable.fnTables(!0);i.length>0&&$(i).dataTable().fnAdjustColumnSizing()}})}$(".enrolledMembers").length>0&&$(".enrolledMembers").dataTable({bProcessing:!0,sAjaxSource:"ajax.php",aoColumnDefs:[{bSortable:!1,sClass:"centered_cell",aTargets:[0]},{sClass:"left",aTargets:[1]}],oLanguage:dataTablesLang,fnServerData:function(i,e,t){$.ajax({dataType:"json",type:"POST",url:i,data:{action:"get_members",assignment:$("#assignment_id").html(),role:$("#user_role").html()},success:function(i){t(i)},error:function(i,e){$(".dataTables_processing").attr("style","visibility: hidden"),$(".dataTables_empty").html(M.str.turnitintooltwo.membercheckerror)}})}});var submissionsDataTableColumns=[],visibleCols=[],noOfColumns=$("table.submissionsDataTable th").length/$("table.submissionsDataTable").length,notStudentView=$("table.submissionsDataTable th.sorting_name").length>0,showOrigReport=$("table.submissionsDataTable th.creport").length>0,useGradeMark=$("table.submissionsDataTable th.cgrade").length>0,multipleParts=$("table.submissionsDataTable th.coverallgrade").length>0;if(notStudentView)for(var i=0;i<noOfColumns;i++)3==i?(submissionsDataTableColumns.push({sType:"string",bSortable:!1}),visibleCols.push(!0)):2==i?(submissionsDataTableColumns.push({sType:"string",bSortable:!1,bVisible:!1}),visibleCols.push(!1)):5==i?(submissionsDataTableColumns.push({iDataSort:i-1,sType:"string"}),visibleCols.push(!0)):6==i?(submissionsDataTableColumns.push({sClass:"right"}),visibleCols.push(!0)):8==i||10==i&&showOrigReport||10==i&&!showOrigReport||12==i&&useGradeMark?(submissionsDataTableColumns.push({sClass:"right",iDataSort:i-1,sType:"numeric"}),visibleCols.push(!0)):13==i&&showOrigReport||12==i&&!showOrigReport?(submissionsDataTableColumns.push({sClass:"right"}),visibleCols.push(!0)):1==i||i>=9&&!showOrigReport&&!useGradeMark||i>=11&&(!showOrigReport&&useGradeMark||showOrigReport&&!useGradeMark)||i>=13&&showOrigReport&&useGradeMark?(submissionsDataTableColumns.push({sClass:"center",bSortable:!1}),visibleCols.push(!0)):(0==i||4==i||7==i||9==i&&showOrigReport||9==i&&!showOrigReport||11==i&&useGradeMark)&&(submissionsDataTableColumns.push({bVisible:!1}),visibleCols.push(!1));else for(var i=0;i<noOfColumns;i++)2==i?(submissionsDataTableColumns.push(null),visibleCols.push(!0)):4==i?(submissionsDataTableColumns.push({iDataSort:i-1,sType:"string"}),visibleCols.push(!0)):5==i?(submissionsDataTableColumns.push({sClass:"right"}),visibleCols.push(!0)):7==i||9==i&&showOrigReport||9==i&&!showOrigReport||11==i&&useGradeMark?(submissionsDataTableColumns.push({sClass:"right",iDataSort:i-1,sType:"numeric"}),visibleCols.push(!0)):12==i&&showOrigReport||11==i&&!showOrigReport?(submissionsDataTableColumns.push({sClass:"right"}),visibleCols.push(!0)):1==i||i>=8&&!showOrigReport&&!useGradeMark||i>=10&&(!showOrigReport&&useGradeMark||showOrigReport&&!useGradeMark)||i>=12&&showOrigReport&&useGradeMark?(submissionsDataTableColumns.push({sClass:"center",bSortable:!1}),visibleCols.push(!0)):(0==i||3==i||6==i||8==i&&showOrigReport||8==i&&!showOrigReport||10==i&&useGradeMark)&&(submissionsDataTableColumns.push({bVisible:!1}),visibleCols.push(!1));var partTables=[],refreshRequested=[];$("table.submissionsDataTable").each(function(){var i=$(this).attr("id");refreshRequested[i]=0,partTables[i]=$("table#"+i).dataTable({bProcessing:!0,aoColumns:submissionsDataTableColumns,aLengthMenu:[[10,25,50,100,-1],[10,25,50,100,"All"]],aaSorting:[[2,"asc"],[4,"asc"]],sAjaxSource:"ajax.php",oLanguage:dataTablesLang,sDom:'r<"listbar-container"<"top listbar clearfix"lf>><"dt_pagination clearfix"pi>t<"bottom"><"dt_pagination clearfix"pi>',fnServerData:function(e,t,s){$.ajax({dataType:"json",type:"POST",url:e,data:{action:"initialise_redraw"},success:function(e){disableEditingText(i),s(e),$("#"+i+"_processing").attr("style","visibility: visible"),getSubmissions(partTables[i],$("#assignment_id").html(),i,0,refreshRequested,0)}})},bStateSave:!0,fnStateSave:function(e,t){try{localStorage.setItem(i+"DataTables",JSON.stringify(t))}catch(s){}},fnStateSaveParams:function(i,e){e.abVisCols=visibleCols},fnStateLoad:function(e){try{return JSON.parse(localStorage.getItem(i+"DataTables"))}catch(t){}},fnStateLoadParams:function(i,e){e.abVisCols=visibleCols},fnDrawCallback:function(e){initialiseDigitalReceipt(),initialiseDVLaunchers("all",0,i,0),initialiseRefreshRow("all",0,i,0),initialiseUploadBox("all",0,0,0),initialiseZipDownloads(i),initialiseCheckboxes(0,i),initialiseUnanoymiseForm("all",0,0)}})}),$("table.submissionsDataTable").each(function(){var i=$(this).attr("id");refreshPeermarkAssignments(i,0)}),$(".messages_amount").length>0&&refreshUserMessages(),$(".tii_table_functions").each(function(){var i=$(this).attr("id").split("tii_table_functions_")[1],e=$("#tii_table_functions_"+i).html();$("#tii_table_functions_"+i).remove(),$("#"+i+"_length").after(e),$(".messages_inbox").show(),$("#refresh_"+i).show(),$("#refreshing_"+i).hide()});var zip_downloads=$(".zip_downloads");if($.each(zip_downloads,function(){var i=$(this).attr("id").split("_")[1];$(this).remove(),$("#"+i+"_length").after($(this))}),"Learner"==$("#user_role").html()&&$(".dataTables_length, .dataTables_filter, .dt_pagination").hide(),$(".refresh_link").click(function(){return $(this).is(":visible")&&($(".refresh_link").hide(),$(".refreshing_link").show(),$("table.submissionsDataTable").each(function(){refreshRequested[$(this).attr("id")]=1,partTables[$(this).attr("id")].fnReloadAjax(),partTables[$(this).attr("id")].fnStandingRedraw()})),!1}),$("#turnitin_sync_all_grades").length>0&&$(".turnitin_sync_grades").click(function(){$(".turnitin_sync_grades").hide(),$(".turnitin_syncing_grades").show(),$.ajax({type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",dataType:"json",data:{action:"sync_all_submissions",assignment:$("#turnitin_sync_all_grades").data("turnitintooltwoid"),sesskey:M.cfg.sesskey},success:function(i){$(".turnitin_sync_grades").show(),$(".turnitin_syncing_grades").hide()}})}),$(".submission_failure_msg").length>0&&window.parent.$(".upload_box").colorbox.resize({width:"800px",height:"240px"}),$(".enrol_link").click(function(){$("#enrolling_error").hide(),$(".enrol_link").hide(),$(".enrolling_container").show(),$.ajax({type:"POST",url:"ajax.php",dataType:"html",data:{action:"enrol_all_students",assignment:$("#assignment_id").html(),sesskey:M.cfg.sesskey},success:function(i){window.location.href=window.location.href},error:function(i,e){$(".enrol_link").show(),$(".enrolling_container").hide(),$("#enrolling_error").show()}})}),$(".rubric_manager_launch").length>0&&$(".rubric_manager_launch").colorbox({iframe:!0,width:"832px",height:"682px",opacity:"0.7",className:"rubric_manager",transition:"none",onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){hideLoadingGif(),"rubric_manager_inbox_launch"!=$(this).attr("id")&&refreshRubricSelect(),$("#tii_close_bar").remove()}}),$(".rubric_view_launch").length>0&&$(".rubric_view_launch").colorbox({iframe:!0,width:"832px",height:"682px",opacity:"0.7",className:"rubric_view",transition:"none",onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()}}),$("#id_rubric, #id_plagiarism_rubric").mousedown(function(){""!=$('input[name="instance"]').val()&&"Y"!=$('input[name="rubric_warning_seen"]').val()&&confirm(M.str.turnitintooltwo.changerubricwarning)&&$('input[name="rubric_warning_seen"]').val("Y")}),($(".quickmark_manager_launch").length>0||$(".plagiarism_turnitin_quickmark_manager_launch").length>0)&&$(".quickmark_manager_launch, .plagiarism_turnitin_quickmark_manager_launch").colorbox({iframe:!0,width:"770px",height:"600px",opacity:"0.7",className:"quickmark_manager",transition:"none",onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()}}),$(".tii_peermark_manager_launch").length>0&&$(".tii_peermark_manager_launch").colorbox({iframe:!0,width:"802px",height:"772px",opacity:"0.7",className:"peermark_manager",transition:"none",onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()},onClosed:function(){var i=$(this).attr("id").split("_");refreshPeermarkAssignments(i[2],1)}}),$(".tii_peermark_reviews_launch").length>0&&$(".tii_peermark_reviews_launch").colorbox({iframe:!0,width:"802px",height:"772px",opacity:"0.7",className:"peermark_reviews",transition:"none",onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()}}),$(".messages_inbox").length>0&&$(".messages_inbox").colorbox({iframe:!0,width:"772px",height:"772px",opacity:"0.7",className:"messages",transition:"none",closeButton:!0,onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()}}),$(".nonsubmitters_link").length>0&&$(".nonsubmitters_link").colorbox({iframe:!0,width:"740px",height:"540px",opacity:"0.7",className:"nonsubmitters",transition:"none",closeButton:!0,onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()}}),$(".nonsubmittersformsuccessmsg").length>0&&(hideLoadingGif(),window.parent.$(".nonsubmitters").colorbox.resize({width:"740px",height:"120px"})),$(".rubric_view_launch").length>0&&$(".rubric_view_launch").colorbox({iframe:!0,width:"832px",height:"682px",opacity:"0.7",className:"rubric_view",transition:"none",onLoad:function(){lightBoxCloseButton(),getLoadingGif()},onCleanup:function(){$("#tii_close_bar").remove(),hideLoadingGif()}}),$(document).on("click",".default_open, .origreport_open, .grademark_open",function(){var i=!0,e=$(this).attr("id").split("_"),t=$("#date_due_"+e[2]).html(),s=moment(t).unix(),a=e[0],n=e[1],o=e[2];if(s>moment().unix()&&$(this).hasClass("graded_warning")&&(confirm(M.str.turnitintooltwo.resubmissiongradewarn)||(i=!1)),i){dvWindow=window.open("","_blank");var r='<div style="text-align:center;">';r+='<img src="'+M.cfg.wwwroot+'/mod/turnitintooltwo/pix/tiiIcon.svg" style="width:100px; height: 100px">',r+='<p style="font-family: Arial, Helvetica, sans-serif;">'+M.str.turnitintooltwo.loadingdv+"</p>",r+="</div>",$(dvWindow.document.body).html(r),$.ajax({type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",dataType:"json",data:{action:a,submission:n,assignment:$("#assignment_id").html()},success:function(i){$(dvWindow.document.body).html(r+i),dvWindow.document.forms[0].submit(),dvWindow.document.close(),checkDVClosed(o)}})}}),$("#id_rubric").length>0&&refreshRubricSelect(),self!=top&&"box"==$("#view_context").html()?$("html").css("background","none"):self!=top&&"box_solid"==$("#view_context").html()&&$("html").css("background","#FFF"),$(".editable_postdue").on("click",function(){1==$(this).data("anon")&&alert(M.str.turnitintooltwo.postdate_warning)}),$(".max_marks_warning").on("click",function(){alert(M.str.turnitintooltwo.max_marks_warning)}),$(".editable_text").length>0){$.fn.editable.defaults.mode="inline",$.fn.editable.defaults.url="ajax.php",$.fn.editable.defaults.onblur="submit",$.fn.editable.defaults.showbuttons=!1,$.fn.editable.defaults.ajaxOptions={dataType:"json"},$(".editable_text").editable({validate:function(i){if($(this).attr("id").indexOf("marks_")>=0&&(Math.floor(i)!=i||!$.isNumeric(i)||i.indexOf(".")!=-1))return M.str.turnitintooltwo.maxmarkserror},success:function(i,e){if(!i.success)return i.msg;if("maxmarks"==i.field)$("#refresh_"+i.partid).click(),$.ajax({type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",dataType:"json",data:{action:"sync_all_submissions",assignment:$("#assignment_id").html(),sesskey:M.cfg.sesskey}});else if("partname"==i.field){var t=$(this).parentsUntil(".ui-tabs-panel").parent().attr("aria-labelledby");$("#"+t).text(e)}}}),$("#export_options").hasClass("tii_export_options_hide")&&($("#export_options").hide(),$(".export_data").html('<span class="empty-dash">--</span>')),$(".editable_postdue").on("click",function(){var i=$(this);$.ajax({type:"POST",url:"ajax.php",dataType:"json",data:{action:"check_anon",part:i.data("pk"),assignment:$("#assignment_id").html()},success:function(e){i.data("anon",e.anon),i.data("unanon",e.unanon),i.data("submitted",e.submitted)}})});var theDate=new Date;$(".editable_date").editable({type:"combodate",format:"YYYY-MM-DD HH:mm",viewformat:"D MMM YYYY, HH:mm",template:"D MMM YYYY  HH:mm",combodate:{minuteStep:1,minYear:2e3,maxYear:theDate.getFullYear()+2,smartDays:!0},validate:function(i){if(i.format("X")<moment().unix()&&$(this).hasClass("editable_postdue")&&1==$(this).data("anon")&&0==$(this).data("unanon")&&1==$(this).data("submitted")&&!confirm(M.str.turnitintooltwo.disableanonconfirm))return $(".editable-open").editableContainer("hide")," "},success:function(i,e){return i.success?($("#refresh_"+i.partid).click(),void("tii_export_options_hide"==i.export_option?($("#export_options").hide(),$(".export_data").html('<span class="empty-dash">--</span>')):($(".empty-dash").remove(),$("#export_options").show()))):i.msg}}),$(".editable_date").click(function(){if($(this).hasClass("editable-disabled"))return!1}),$(".editable_date, .editable_text").on("shown",function(i,e){var t=$(this).prop("id");$(".editable_date, .editable_text").not("#"+t).editable("disable"),$(".submit_nothing").addClass("disabled")}),$(".editable_date, .editable_text").on("hidden",function(){var i=$(this).prop("id");$(".editable_date, .editable_text").not("#"+i).editable("enable"),$(".submit_nothing").removeClass("disabled")})}$("#inbox_form form, .launch_form form").submit(),$(".turnitin_eula_link").length>0&&$(".turnitin_eula_link").colorbox({iframe:!0,width:"766px",height:"596px",opacity:"0.7",className:"eula_view",scrolling:"false",onLoad:function(){getLoadingGif()},onComplete:function(){$(window).on("message",function(i){var e="undefined"==typeof i.data?i.originalEvent.data:i.data;"turnitin_eula_declined"!=e&&"turnitin_eula_accepted"!=e||$.ajax({type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",dataType:"json",data:{action:"acceptuseragreement",message:e,sesskey:M.cfg.sesskey},success:function(i){window.location.reload();
},error:function(i){window.location.reload()}})})},onCleanup:function(){hideLoadingGif()}}),$("#tii_receipt_print").click(function(){window.print()}),$(".select_all_checkbox").on("click",function(){var i=$(this).parent().parent().parent().parent().attr("id");$(this).is(":checked")?($("#"+i+" .inbox_checkbox").length&&($("#tabs-"+i+" .zip_downloads button").prop("disabled",!1),$("#tabs-"+i+" .zip_downloads button").removeAttr("title")),$("#"+i+" .inbox_checkbox").each(function(){$(this).prop("checked",!0)})):($("#"+i+" .inbox_checkbox").each(function(){$(this).prop("checked",!1)}),$("#"+i+" .inbox_checkbox").length&&($("#tabs-"+i+" .zip_downloads button").prop("disabled",!0),$("#tabs-"+i+" .zip_downloads button").prop("title",M.str.turnitintooltwo.download_button_warning)))}),$("[id^=fitem_id_dtpost] select").change(function(){var i=$(this).parent().parent().parent(),e=buildUnixDate("#fitem_id_dtpost",i.data("partId"));e<moment().unix()&&1==i.data("anon")&&0==i.data("unanon")&&1==i.data("submitted")&&alert(M.str.turnitintooltwo.anonalert)});var buildUnixDate=function(i,e){var t=["_day","_month","_year","_hour","_minute"];$this=$(i+e);var s="";return $.each(t,function(i,t){s+=$this.find("[id$="+e+t+"] option:selected").text(),"_year"===t?s+=" ":"_hour"===t?s+=":":"_minute"!==t&&(s+="-")}),moment(s,"DD-MMMM-YYYY hh:mm").unix()}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR1cm5pdGludG9vbHR3by0yMDE4MTAyNjAxLmpzIl0sIm5hbWVzIjpbIiQiLCJ3aW5kb3ciLCJvbiIsImVuYWJsZUVkaXRpbmdUZXh0IiwicGFydF9pZCIsImVkaXRhYmxlIiwiZGlzYWJsZUVkaXRpbmdUZXh0IiwiZ2V0TG9hZGluZ0dpZiIsImltZyIsImFmdGVyIiwidG9wIiwic2Nyb2xsVG9wIiwiaGVpZ2h0IiwiY3NzIiwiaGlkZUxvYWRpbmdHaWYiLCJyZW1vdmUiLCJnZXRTdWJtaXNzaW9ucyIsInRhYmxlIiwiYXNzaWdubWVudF9pZCIsInN0YXJ0IiwicmVmcmVzaF9yZXF1ZXN0ZWQiLCJ0b3RhbCIsImFqYXgiLCJkYXRhVHlwZSIsInR5cGUiLCJ1cmwiLCJhc3luYyIsImRhdGEiLCJhY3Rpb24iLCJhc3NpZ25tZW50IiwicGFydCIsInNlc3NrZXkiLCJNIiwiY2ZnIiwic3VjY2VzcyIsInJlc3VsdCIsImV2YWwiLCJlbmQiLCJhYURhdGEiLCJsZW5ndGgiLCJmbkFkZERhdGEiLCJhdHRyIiwiYWxscmVmcmVzaGVkIiwiZWFjaCIsImsiLCJ2IiwiaGlkZSIsInNob3ciLCJzdWJtaXRWaXNpYmlsaXR5Iiwibm9uc3VibWl0dGVycyIsImVycm9yIiwicmVzcG9uc2UiLCJodG1sIiwic3RyIiwidHVybml0aW50b29sdHdvIiwidGlpc3VibWlzc2lvbnNnZXRlcnJvciIsInJlZnJlc2hSdWJyaWNTZWxlY3QiLCJydWJyaWNFbGVtZW50SWQiLCJjdXJyZW50UnVicmljIiwidmFsIiwibW9kdWxlbmFtZSIsImNvdXJzZSIsImVtcHR5Iiwib3B0aW9ucyIsImkiLCJpc051bWVyaWMiLCJhcHBlbmQiLCJ2YWx1ZSIsInRleHQiLCJvcHRncm91cCIsImoiLCJydWJyaWMiLCJvcHRpb24iLCJyZWZyZXNoVXNlck1lc3NhZ2VzIiwicmVzZXRQZWVybWFya1NlY3Rpb24iLCJyZWZyZXNoUGVlcm1hcmtBc3NpZ25tZW50cyIsInVzZXJfcm9sZSIsInBlZXJtYXJrX3RhYmxlIiwibm9fb2ZfcGVlcm1hcmtzIiwicGVlcm1hcmtzX2FjdGl2ZSIsImNvb2tpZSIsInNsaWRlRG93biIsInNsaWRlVXAiLCJpbml0aWFsaXNlVW5hbm95bWlzZUZvcm0iLCJzY29wZSIsInN1Ym1pc3Npb25faWQiLCJpZGVudGlmaWVyIiwiY29sb3Jib3giLCJpbmxpbmUiLCJ3aWR0aCIsIm9wYWNpdHkiLCJjbGFzc05hbWUiLCJvbkNvbXBsZXRlIiwiaWRTdHIiLCJ0aGlzIiwic3BsaXQiLCJ1bmRlZmluZWQiLCJ1bmJpbmQiLCJjbGljayIsInJlYXNvbiIsImVuY29kZVVSSUNvbXBvbmVudCIsInN0YXR1cyIsImNsb3NlIiwid3d3cm9vdCIsInVzZXJpZCIsImNvdXJzZWlkIiwibmFtZSIsInJlbW92ZUNsYXNzIiwiY3VycmVudF9tc2ciLCJtc2ciLCJvbkNsZWFudXAiLCJpbml0aWFsaXNlVXBsb2FkQm94IiwidXNlcl9pZCIsImNvbG9yQm94V2lkdGgiLCJjb2xvckJveEhlaWdodCIsIm9uTG9hZCIsImxpZ2h0Qm94Q2xvc2VCdXR0b24iLCJvbkNsb3NlZCIsInJlZnJlc2hJbmJveFJvdyIsImlmcmFtZSIsInRyYW5zaXRpb24iLCJpbml0aWFsaXNlWmlwRG93bmxvYWRzIiwiZG93bmxvYWRaaXBGaWxlIiwiZG9jdW1lbnQiLCJlIiwib3BlbiIsImhyZWYiLCJzdWJtaXNzaW9uX2lkcyIsImNsb3NlYnV0dG9uIiwiaW5pdGlhbGlzZURpZ2l0YWxSZWNlaXB0IiwiaW5pdGlhbGlzZUhpZGRlblppcERvd25sb2FkcyIsImluaXRpYWxpc2VSZWZyZXNoUm93Iiwic2libGluZ3MiLCJhZGRDbGFzcyIsInBhcmVudCIsImluaXRpYWxpc2VEVkxhdW5jaGVycyIsImNoaWxkcmVuIiwiaGFzQ2xhc3MiLCJkb3dubG9hZE9yaWdpbmFsRmlsZSIsImRvd25sb2FkdHlwZSIsInN1Ym1pdCIsImR2dHlwZSIsInN1Ym1pc3Npb24iLCJjaGVja0RWQ2xvc2VkIiwiZHZXaW5kb3ciLCJjbG9zZWQiLCJzZXRUaW1lb3V0Iiwic3VibWl0Tm90aGluZyIsInVzZXIiLCJleHBpcmVzIiwiYWxlcnQiLCJyZXNwb25zZVRleHQiLCJjb21wbGV0ZSIsImxpbmsiLCJvVGFibGUiLCJkYXRhVGFibGUiLCJ0ciIsInJvd2luZGV4IiwiaW5kZXgiLCJmbkRlbGV0ZVJvdyIsInJvdyIsImluaXRpYWxpc2VDaGVja2JveGVzIiwicHJvcCIsInJlbW92ZUF0dHIiLCJkb3dubG9hZF9idXR0b25fd2FybmluZyIsInNob3dQYXJ0RGF0ZXNCb3hlcyIsImlzIiwiY29uZmlybXN0cm5hbWUiLCJjb25maXJtc3RyIiwicmVwbGFjZSIsImNvbmZpcm1yZXN1bHQiLCJjb25maXJtIiwicGFwZXIiLCJsb2NhdGlvbiIsInN0dWRlbnRfaWQiLCJtZXNzYWdlIiwic3VibWl0bm90aGluZ3dhcm5pbmciLCJjb29raWVzZWVuIiwiZXZlbnQiLCJub2RlIiwidGFyZ2V0IiwiaXNBc2NlbmRpbmciLCJjdXJyZW50c29ydCIsInNvcnRieSIsInNvcnRDb2x1bW4iLCJjbG9zZXN0IiwiRGF0YVRhYmxlIiwib3JkZXIiLCJkcmF3IiwiZGF0YVRhYmxlc0xhbmciLCJzUHJvY2Vzc2luZyIsInNwcm9jZXNzaW5nIiwic1plcm9SZWNvcmRzIiwic3plcm9yZWNvcmRzIiwic0luZm8iLCJzaW5mbyIsInNTZWFyY2giLCJzc2VhcmNoIiwic0xlbmd0aE1lbnUiLCJzbGVuZ3RobWVudSIsIm9QYWdpbmF0ZSIsInNOZXh0Iiwic25leHQiLCJzUHJldmlvdXMiLCJzcHJldmlvdXMiLCJhY3RpdmVUYWIiLCJ0YWJzIiwiYWN0aXZlIiwiZm4iLCJmblRhYmxlcyIsImZuQWRqdXN0Q29sdW1uU2l6aW5nIiwiYlByb2Nlc3NpbmciLCJzQWpheFNvdXJjZSIsImFvQ29sdW1uRGVmcyIsImJTb3J0YWJsZSIsInNDbGFzcyIsImFUYXJnZXRzIiwib0xhbmd1YWdlIiwiZm5TZXJ2ZXJEYXRhIiwic1NvdXJjZSIsImFvRGF0YSIsImZuQ2FsbGJhY2siLCJyb2xlIiwibWVtYmVyY2hlY2tlcnJvciIsInN1Ym1pc3Npb25zRGF0YVRhYmxlQ29sdW1ucyIsInZpc2libGVDb2xzIiwibm9PZkNvbHVtbnMiLCJub3RTdHVkZW50VmlldyIsInNob3dPcmlnUmVwb3J0IiwidXNlR3JhZGVNYXJrIiwibXVsdGlwbGVQYXJ0cyIsInB1c2giLCJzVHlwZSIsImJWaXNpYmxlIiwiaURhdGFTb3J0IiwicGFydFRhYmxlcyIsInJlZnJlc2hSZXF1ZXN0ZWQiLCJhb0NvbHVtbnMiLCJhTGVuZ3RoTWVudSIsImFhU29ydGluZyIsInNEb20iLCJiU3RhdGVTYXZlIiwiZm5TdGF0ZVNhdmUiLCJvU2V0dGluZ3MiLCJvRGF0YSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZm5TdGF0ZVNhdmVQYXJhbXMiLCJhYlZpc0NvbHMiLCJmblN0YXRlTG9hZCIsInBhcnNlIiwiZ2V0SXRlbSIsImZuU3RhdGVMb2FkUGFyYW1zIiwiZm5EcmF3Q2FsbGJhY2siLCJ0aWlfdGFibGVfZnVuY3Rpb25zIiwiemlwX2Rvd25sb2FkcyIsImZuUmVsb2FkQWpheCIsImZuU3RhbmRpbmdSZWRyYXciLCJyZXNpemUiLCJtb3VzZWRvd24iLCJjaGFuZ2VydWJyaWN3YXJuaW5nIiwiY2xvc2VCdXR0b24iLCJwcm9jZWVkIiwiZHVlX2RhdGUiLCJkdWVfZGF0ZV91bml4IiwibW9tZW50IiwidW5peCIsInJlc3VibWlzc2lvbmdyYWRld2FybiIsImxvYWRpbmciLCJsb2FkaW5nZHYiLCJib2R5IiwiZm9ybXMiLCJzZWxmIiwicG9zdGRhdGVfd2FybmluZyIsIm1heF9tYXJrc193YXJuaW5nIiwiZGVmYXVsdHMiLCJtb2RlIiwib25ibHVyIiwic2hvd2J1dHRvbnMiLCJhamF4T3B0aW9ucyIsInZhbGlkYXRlIiwiaW5kZXhPZiIsIk1hdGgiLCJmbG9vciIsIm1heG1hcmtzZXJyb3IiLCJuZXdWYWx1ZSIsImZpZWxkIiwicGFydGlkIiwidGFiSWQiLCJwYXJlbnRzVW50aWwiLCIkdGhpcyIsInRoZURhdGUiLCJEYXRlIiwiZm9ybWF0Iiwidmlld2Zvcm1hdCIsInRlbXBsYXRlIiwiY29tYm9kYXRlIiwibWludXRlU3RlcCIsIm1pblllYXIiLCJtYXhZZWFyIiwiZ2V0RnVsbFllYXIiLCJzbWFydERheXMiLCJkaXNhYmxlYW5vbmNvbmZpcm0iLCJlZGl0YWJsZUNvbnRhaW5lciIsImV4cG9ydF9vcHRpb24iLCJjdXJyZW50Iiwibm90Iiwic2Nyb2xsaW5nIiwiZXYiLCJvcmlnaW5hbEV2ZW50IiwicmVsb2FkIiwicHJpbnQiLCJpZCIsImNoYW5nZSIsImRhdGFFbCIsInBvc3RfZGF0ZSIsImJ1aWxkVW5peERhdGUiLCJhbm9uYWxlcnQiLCJlbCIsImRhdGUiLCJmaW5kIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFXQSxHQUNQQSxFQUFFQyxRQUFRQyxHQUFHLE9BQVEsV0EwMkJqQixRQUFTQyxtQkFBa0JDLEdBQ3ZCSixFQUFFLFNBQVdJLEVBQVUsMEJBQTRCQSxFQUFVLG1CQUFtQkMsU0FBUyxVQUk3RixRQUFTQyxvQkFBbUJGLEdBQ3hCSixFQUFFLFNBQVdJLEVBQVUsMEJBQTRCQSxFQUFVLG1CQUFtQkMsU0FBUyxXQUc3RixRQUFTRSxpQkFDTCxHQUFJQyxHQUFNLGlDQUNWUixHQUFFLGdCQUFnQlMsTUFBTUQsRUFDeEIsSUFBSUUsR0FBTVYsRUFBRUMsUUFBUVUsWUFBZVgsRUFBRUMsUUFBUVcsU0FBVyxDQUN4RFosR0FBRSxnQkFBZ0JhLElBQUksTUFBT0gsRUFBTSxNQUd2QyxRQUFTSSxrQkFDTGQsRUFBRSxnQkFBZ0JlLFNBR3RCLFFBQVNDLGdCQUFlQyxNQUFPQyxjQUFlZCxRQUFTZSxNQUFPQyxrQkFBbUJDLE9BQzdFckIsRUFBRXNCLE1BQ0VDLFNBQVksT0FDWkMsS0FBUSxPQUNSQyxJQUFPLFdBQ1BDLE9BQVMsRUFDVEMsTUFDSUMsT0FBUSxrQkFBbUJDLFdBQVlYLGNBQWVZLEtBQU0xQixRQUFTZSxNQUFPQSxNQUM1RUMsa0JBQW1CQSxrQkFBa0JoQixTQUFV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LE9BQ3RELFVBQU52QixFQUNBb1IsR0FBUSxJQUNLLFVBQU5wUixFQUNQb1IsR0FBUSxJQUNLLFlBQU5wUixJQUNQb1IsR0FBUSxPQUtUdEQsT0FBT3NELEVBQU0sc0JBQXNCckQsV0FHbkR1RCIsImZpbGUiOiJ0dXJuaXRpbnRvb2x0d28tMjAxODEwMjYwMS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQpIHtcbiAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIuanNfcmVxdWlyZWRcIikuc2hvdygpO1xuICAgICAgICAkKFwiLmpzX2hpZGVcIikuaGlkZSgpO1xuXG4gICAgICAgIC8vIENvbmZpZ3VyZSBzdWJtaXQgcGFwZXIgZm9ybSBlbGVtZW50cyBkZXBlbmRpbmcgb24gd2hhdCBzdWJtaXNzaW9uIHR5cGUgaXMgYWxsb3dlZC5cbiAgICAgICAgaWYgKCQoXCIjaWRfc3VibWlzc2lvbnR5cGVcIikudmFsKCkgPT0gMSkge1xuICAgICAgICAgICAgJChcIiNpZF9zdWJtaXNzaW9udGV4dFwiKS5wYXJlbnQoKS5wYXJlbnQoKS5oaWRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJChcIiNpZF9zdWJtaXNzaW9udHlwZVwiKS52YWwoKSA9PSAyKSB7XG4gICAgICAgICAgICAkKFwiI2lkX3N1Ym1pc3Npb25maWxlXCIpLnBhcmVudCgpLnBhcmVudCgpLmhpZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpc2FibGUgYXNzaWdubWVudCBzdWJtaXNzaW9uIGlmIGEgc3VibWlzc2lvbiBhZ3JlZW1lbnQgZXhpc3RzIGFuZCBpcyBub3QgY2hlY2tlZC5cbiAgICAgICAgaWYgKCgkKFwiI2lkX3N1Ym1pc3Npb25hZ3JlZW1lbnRcIikubGVuZ3RoKSkge1xuICAgICAgICAgICAgJCgnI2lkX3N1Ym1pdGJ1dHRvbicpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEaXNhYmxlL2VuYWJsZSBhc3NpZ25tZW50IHN1Ym1pc3Npb24gd2hlbiB0aGUgc3VibWlzc2lvbiBjaGVja2JveCBpcyBjaGVja2VkL3VuY2hlY2tlZC5cbiAgICAgICAgJCgnI2lkX3N1Ym1pc3Npb25hZ3JlZW1lbnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICQoJyNpZF9zdWJtaXNzaW9uYWdyZWVtZW50JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNpZF9zdWJtaXRidXR0b24nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjaWRfc3VibWlzc2lvbmFncmVlbWVudCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjaWRfc3VibWl0YnV0dG9uJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5kZWxldGVfcGFwZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBTZXQgdXAgdGhlIGNvbmZpcm0gd2luZG93LlxuICAgICAgICAgICAgdmFyIGNvbmZpcm1zdHJuYW1lID0gJCh0aGlzKS5kYXRhKFwiY29uZmlybVwiKTtcbiAgICAgICAgICAgIHZhciBjb25maXJtc3RyID0gTS5zdHIudHVybml0aW50b29sdHdvW2NvbmZpcm1zdHJuYW1lXS5yZXBsYWNlKC9cXFxcbi9nLCBcIlxcblwiKTtcbiAgICAgICAgICAgIHZhciBjb25maXJtcmVzdWx0ID0gY29uZmlybShjb25maXJtc3RyKTtcblxuICAgICAgICAgICAgaWYgKGNvbmZpcm1yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcImFqYXgucGhwXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZGVsZXRlc3VibWlzc2lvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXNza2V5OiBNLmNmZy5zZXNza2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFwZXI6ICQodGhpcykuZGF0YShcInBhcGVyXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydDogJCh0aGlzKS5kYXRhKFwicGFydFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnQ6ICQodGhpcykuZGF0YShcImFzc2lnbm1lbnRcIilcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnN1Ym1pdF9ub3RoaW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJkaXNhYmxlZFwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB2YXIgcGFydF9pZCA9ICQodGhpcykucHJvcCgnaWQnKS5zcGxpdCgnXycpWzJdO1xuICAgICAgICAgICAgdmFyIHN0dWRlbnRfaWQgPSAkKHRoaXMpLnByb3AoJ2lkJykuc3BsaXQoJ18nKVszXTtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gTS5zdHIudHVybml0aW50b29sdHdvLnN1Ym1pdG5vdGhpbmd3YXJuaW5nLnJlcGxhY2UoLzxicj4vZywgXCJcXG5cIikucmVwbGFjZSgvJiMzOTsvZywgXCJcXCdcIik7XG4gICAgICAgICAgICB2YXIgY29va2llc2VlbiA9ICQuY29va2llKCdzdWJtaXRub3RoaW5nYWNjZXB0Jyk7XG4gICAgICAgICAgICBpZiAoY29va2llc2VlbiB8fCBjb25maXJtKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgc3VibWl0Tm90aGluZyhzdHVkZW50X2lkLCBwYXJ0X2lkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDb25maWd1cmUgc3VibWl0IHBhcGVyIGZvcm0gZWxlbWVudHMgZGVwZW5kaW5nIG9uIHdoYXQgc3VibWlzc2lvbiB0eXBlIGlzIHNlbGVjdGVkLlxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNpZF9zdWJtaXNzaW9udHlwZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKFwiI2lkX3N1Ym1pc3Npb250eXBlXCIpLnZhbCgpID09IDEpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2lkX3N1Ym1pc3Npb250ZXh0XCIpLnBhcmVudCgpLnBhcmVudCgpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKFwiI2lkX3N1Ym1pc3Npb25maWxlXCIpLnBhcmVudCgpLnBhcmVudCgpLnNob3coKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCQoXCIjaWRfc3VibWlzc2lvbnR5cGVcIikudmFsKCkgPT0gMikge1xuICAgICAgICAgICAgICAgICQoXCIjaWRfc3VibWlzc2lvbmZpbGVcIikucGFyZW50KCkucGFyZW50KCkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoXCIjaWRfc3VibWlzc2lvbnRleHRcIikucGFyZW50KCkucGFyZW50KCkuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTaG93IGxvYWRpbmcgaWYgc3VibWlzc2lvbiBwYXNzZXMgdmFsaWRhdGlvbi5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcuc3VibWlzc2lvbl9mb3JtX2NvbnRhaW5lciBmb3JtJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQoXCIjaWRfc3VibWlzc2lvbnRpdGxlXCIpLnZhbCgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKFwiI2dlbmVyYWxcIikuc2xpZGVVcCgnc2xvdycpO1xuICAgICAgICAgICAgICAgICQoXCIubW9kX3R1cm5pdGludG9vbHR3byAubm90aWNlYm94XCIpLnNsaWRlVXAoJ3Nsb3cnKTtcbiAgICAgICAgICAgICAgICAkKFwiLnN1Ym1pc3Npb25fZm9ybV9jb250YWluZXIgZm9ybVwiKS5zbGlkZVVwKCdzbG93Jyk7XG4gICAgICAgICAgICAgICAgJChcIiNzdWJtaXR0aW5nX2xvYWRlclwiKS5zbGlkZURvd24oJ3Nsb3cnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluaXRpYWxpc2UgYW5kIHNldCBjb29raWUgZm9yIHNob3dpbmcgdGhlIHN1bW1hcnkgZm9yIHRoaXMgYXNzaWdubWVudC5cbiAgICAgICAgaWYgKCQoJy50b2dnbGVfc3VtbWFyeScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICghJC5jb29raWUoJ3Nob3dfc3VtbWFyeV8nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpKSB7XG4gICAgICAgICAgICAgICAgJC5jb29raWUoJ3Nob3dfc3VtbWFyeV8nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCksIHRydWUsIHsgZXhwaXJlczogMzAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkLmNvb2tpZSgnc2hvd19zdW1tYXJ5XycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICAkKCcuaGlkZV9zdW1tYXJ5XycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJy5zaG93X3N1bW1hcnlfJyArICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmludHJvZHVjdGlvbicpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuc2hvd19zdW1tYXJ5XycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJy5oaWRlX3N1bW1hcnlfJyArICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmludHJvZHVjdGlvbicpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVG9nZ2xlIFN1bW1hcnkgZGlzcGxheSBvbiBJbmJveC5cbiAgICAgICAgICAgICQoJy50b2dnbGVfc3VtbWFyeSBpJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdzaG93X3N1bW1hcnlfJyArICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpKSkge1xuICAgICAgICAgICAgICAgICAgICAkLmNvb2tpZSgnc2hvd19zdW1tYXJ5XycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSwgdHJ1ZSwgeyBleHBpcmVzOiAzMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNob3dfc3VtbWFyeV8nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhpZGVfc3VtbWFyeV8nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmludHJvZHVjdGlvbicpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQuY29va2llKCdzaG93X3N1bW1hcnlfJyArICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpLCBmYWxzZSwgeyBleHBpcmVzOiAzMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNob3dfc3VtbWFyeV8nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhpZGVfc3VtbWFyeV8nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmludHJvZHVjdGlvbicpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluaXRpYWxpc2UgYW5kIHNldCBjb29raWUgZm9yIHNob3dpbmcgdGhlIHBlZXJtYXJrIGFzc2lnbm1lbnRzIGZvciB0aGlzIGFzc2lnbm1lbnQuXG4gICAgICAgIGlmICgkKCcudG9nZ2xlX3BlZXJtYXJrcycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICghJC5jb29raWUoJ3Nob3dfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkpIHtcbiAgICAgICAgICAgICAgICAkLmNvb2tpZSgnc2hvd19wZWVybWFya3NfJyArICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpLCB0cnVlLCB7IGV4cGlyZXM6IDMwIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJC5jb29raWUoJ3Nob3dfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICAkKCcuaGlkZV9wZWVybWFya3NfJyArICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCgnLnNob3dfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5wZWVybWFya19hc3NpZ25tZW50c19jb250YWluZXInKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLnNob3dfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJy5oaWRlX3BlZXJtYXJrc18nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcucGVlcm1hcmtfYXNzaWdubWVudHNfY29udGFpbmVyJykuc2xpZGVVcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUb2dnbGUgUGVlcm1hcmtzIGRpc3BsYXkgb24gSW5ib3guXG4gICAgICAgICAgICAkKCcudG9nZ2xlX3BlZXJtYXJrcyBpJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdzaG93X3BlZXJtYXJrc18nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICQuY29va2llKCdzaG93X3BlZXJtYXJrc18nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCksIHRydWUsIHsgZXhwaXJlczogMzAgfSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zaG93X3BlZXJtYXJrc18nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhpZGVfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKCcucGVlcm1hcmtfYXNzaWdubWVudHNfY29udGFpbmVyJykuc2xpZGVEb3duKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJC5jb29raWUoJ3Nob3dfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSwgZmFsc2UsIHsgZXhwaXJlczogMzAgfSk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zaG93X3BlZXJtYXJrc18nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmhpZGVfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcucGVlcm1hcmtfYXNzaWdubWVudHNfY29udGFpbmVyJykuc2xpZGVVcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaG93X3BlZXJtYXJrX2luc3RydWN0aW9ucywgLmhpZGVfcGVlcm1hcmtfaW5zdHJ1Y3Rpb25zJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkU3RyID0gJCh0aGlzKS5hdHRyKCdpZCcpLnNwbGl0KFwiX1wiKTtcblxuICAgICAgICAgICAgaWYgKGlkU3RyWzBdID09IFwic2hvd1wiKSB7XG4gICAgICAgICAgICAgICAgJCgnI3Nob3dfcGVlcm1hcmtfaW5zdHJ1Y3Rpb25zXycgKyBpZFN0clszXSkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJyNoaWRlX3BlZXJtYXJrX2luc3RydWN0aW9uc18nICsgaWRTdHJbM10pLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcjcGVlcm1hcmtfaW5zdHJ1Y3Rpb25zXycgKyBpZFN0clszXSkuc2xpZGVEb3duKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyNzaG93X3BlZXJtYXJrX2luc3RydWN0aW9uc18nICsgaWRTdHJbM10pLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcjaGlkZV9wZWVybWFya19pbnN0cnVjdGlvbnNfJyArIGlkU3RyWzNdKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnI3BlZXJtYXJrX2luc3RydWN0aW9uc18nICsgaWRTdHJbM10pLnNsaWRlVXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2hvdyBvcHRpb25zIGZvciBwYXJ0cyBpbiBtb2RfZm9ybS5waHAuXG4gICAgICAgIHNob3dQYXJ0RGF0ZXNCb3hlcygpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNpZF9udW1wYXJ0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNob3dQYXJ0RGF0ZXNCb3hlcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFudWFsIGFjdGl2YXRpb24gb2Ygc29ydGluZyBiYXNlZCBvbiBmaXJzdCBvciBsYXN0IG5hbWUuXG4gICAgICAgICAqIFRoaXMgYm9ycm93cyBjbGFzc2VzIGZyb20gZGF0YXRhYmxlcyBhbmQgYXBwbGllcyB0aGVtIHRvIHR3byBkaXZzIGluc2lkZSB0aGUgc3R1ZGVudCBuYW1lIGNvbHVtbiBoZWFkZXIuXG4gICAgICAgICAqIEluIG9yZGVyIHRvIHNvcnQgYnkgbGFzdCBuYW1lIGl0IHJlZmVyZW5jZXMgYSBoaWRkZW4gY29sdW1uIGluIHBvc2l0aW9uIDIuXG4gICAgICAgICAqL1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNwbGl0dGVyLWxhc3RuYW1lLCAuc3BsaXR0ZXItZmlyc3RuYW1lJywgZnVuY3Rpb24gKCBldmVudCApIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gJChldmVudC50YXJnZXQpLFxuICAgICAgICAgICAgICAgIGlzQXNjZW5kaW5nID0gbm9kZS5oYXNDbGFzcygnc29ydGluZ19hc2MnKSxcbiAgICAgICAgICAgICAgICBjdXJyZW50c29ydCA9ICdhc2MnLCBzb3J0YnkgPSAnZGVzYycsXG4gICAgICAgICAgICAgICAgc29ydENvbHVtbiA9IG5vZGUuYXR0cignZGF0YS1jb2wnKTtcblxuICAgICAgICAgICAgaWYgKCFpc0FzY2VuZGluZykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRzb3J0ID0gJ2Rlc2MnO1xuICAgICAgICAgICAgICAgIHNvcnRieSA9ICdhc2MnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBub2RlLmNsb3Nlc3QoJy5zdWJtaXNzaW9uc0RhdGFUYWJsZScpLkRhdGFUYWJsZSgpXG4gICAgICAgICAgICAgICAgLm9yZGVyKCBbIHNvcnRDb2x1bW4sIHNvcnRieSBdIClcbiAgICAgICAgICAgICAgICAuZHJhdygpO1xuXG4gICAgICAgICAgICBub2RlLmFkZENsYXNzKCdzb3J0aW5nXycgKyBzb3J0YnkpLnJlbW92ZUNsYXNzKCdzb3J0aW5nIHNvcnRpbmdfJyArIGN1cnJlbnRzb3J0KTtcbiAgICAgICAgICAgIG5vZGUucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3NvcnRpbmcgc29ydGluZ19hc2Mgc29ydGluZ19kZXNjJyk7XG4gICAgICAgICAgICBub2RlLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ3NvcnRpbmdfYXNjIHNvcnRpbmdfZGVzYycpLmFkZENsYXNzKCdzb3J0aW5nJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFjdGl2YXRlIHNpbXBsZSBkYXRhVGFibGVzLlxuICAgICAgICBpZiAoJChcIiNkYXRhVGFibGVcIikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJChcIiNkYXRhVGFibGVcIikuZGF0YVRhYmxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb25maWd1cmUgZGF0YXRhYmxlcyBsYW5ndWFnZSBzZXR0aW5ncy5cbiAgICAgICAgaWYgKHR5cGVvZiBNLnN0ci50dXJuaXRpbnRvb2x0d28gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB2YXIgZGF0YVRhYmxlc0xhbmcgPSB7XG4gICAgICAgICAgICAgICAgXCJzUHJvY2Vzc2luZ1wiOiAnPHNwYW4gY2xhc3M9XCJsb2FkaW5nLW1lc3NhZ2VcIj4nICsgTS5zdHIudHVybml0aW50b29sdHdvLnNwcm9jZXNzaW5nICsgJzwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgIFwic1plcm9SZWNvcmRzXCI6IE0uc3RyLnR1cm5pdGludG9vbHR3by5zemVyb3JlY29yZHMsXG4gICAgICAgICAgICAgICAgXCJzSW5mb1wiOiBNLnN0ci50dXJuaXRpbnRvb2x0d28uc2luZm8sXG4gICAgICAgICAgICAgICAgXCJzU2VhcmNoXCI6IE0uc3RyLnR1cm5pdGludG9vbHR3by5zc2VhcmNoLFxuICAgICAgICAgICAgICAgIFwic0xlbmd0aE1lbnVcIjogTS5zdHIudHVybml0aW50b29sdHdvLnNsZW5ndGhtZW51LFxuICAgICAgICAgICAgICAgIFwib1BhZ2luYXRlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJzTmV4dFwiOiBNLnN0ci50dXJuaXRpbnRvb2x0d28uc25leHQsXG4gICAgICAgICAgICAgICAgICAgIFwic1ByZXZpb3VzXCI6IE0uc3RyLnR1cm5pdGludG9vbHR3by5zcHJldmlvdXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWN0aXZhdGUgZGF0YXRhYmxlIHRhYnMgb24gc3VibWlzc2lvbiBpbmJveC5cbiAgICAgICAgaWYgKCQoXCIjdGFic1wiKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBTZXQgdGFiIHBvc2l0aW9uLlxuICAgICAgICAgICAgdmFyIGFjdGl2ZVRhYiA9IDA7XG4gICAgICAgICAgICBpZiAoJChcIiN0YWJfcG9zaXRpb25cIikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVRhYiA9ICQoJyN0YWJfcG9zaXRpb24nKS50ZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKFwiI3RhYnNcIikudGFicyh7XG4gICAgICAgICAgICAgICAgXCJhY3RpdmVcIjogYWN0aXZlVGFiLFxuICAgICAgICAgICAgICAgIFwic2hvd1wiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9ICQuZm4uZGF0YVRhYmxlLmZuVGFibGVzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0YWJsZSkuZGF0YVRhYmxlKCkuZm5BZGp1c3RDb2x1bW5TaXppbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29uZmlndXJlIHRoZSBkYXRhdGFibGUgZm9yIGFkZGluZy9yZW1vdmluZyBlbnJvbGxlZCB0dXRvcnMvc3R1ZGVudHMgdG8gYSBUdXJuaXRpbiBjb3Vyc2UuXG4gICAgICAgIGlmICgkKCcuZW5yb2xsZWRNZW1iZXJzJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLmVucm9sbGVkTWVtYmVycycpLmRhdGFUYWJsZSh7XG4gICAgICAgICAgICAgICAgXCJiUHJvY2Vzc2luZ1wiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwic0FqYXhTb3VyY2VcIjogXCJhamF4LnBocFwiLFxuICAgICAgICAgICAgICAgIFwiYW9Db2x1bW5EZWZzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBcImJTb3J0YWJsZVwiOiBmYWxzZSwgXCJzQ2xhc3NcIjogXCJjZW50ZXJlZF9jZWxsXCIsIFwiYVRhcmdldHNcIjogWzBdIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgXCJzQ2xhc3NcIjogXCJsZWZ0XCIsIFwiYVRhcmdldHNcIjogWzFdIH1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFwib0xhbmd1YWdlXCI6IGRhdGFUYWJsZXNMYW5nLFxuICAgICAgICAgICAgICAgIFwiZm5TZXJ2ZXJEYXRhXCI6IGZ1bmN0aW9uIChzU291cmNlLCBhb0RhdGEsIGZuQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YVR5cGVcIjogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1cmxcIjogc1NvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YVwiOiB7IGFjdGlvbjogXCJnZXRfbWVtYmVyc1wiLCBhc3NpZ25tZW50OiAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSwgcm9sZTogJCgnI3VzZXJfcm9sZScpLmh0bWwoKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbkNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlcnJvclwiOiBmdW5jdGlvbiAoZGF0YSwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZGF0YVRhYmxlc19wcm9jZXNzaW5nJykuYXR0cignc3R5bGUnLCAndmlzaWJpbGl0eTogaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRhdGFUYWJsZXNfZW1wdHknKS5odG1sKE0uc3RyLnR1cm5pdGludG9vbHR3by5tZW1iZXJjaGVja2Vycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb25maWd1cmUgdGhlIGRhdGF0YWJsZXMgb24gdGhlIHN1Ym1pc3Npb24gaW5ib3gsIGEgc2VwZXJhdGUgZGF0YXRhYmxlIGlzIHNob3duIGZvciBlYWNoIHBhcnQuXG4gICAgICAgIC8vIFRoZXJlIGFyZSB0YWJzIHRvIHRvZ2dsZSB3aGljaCBwYXJ0IHRhYmxlIGlzIGRpc3BsYXllZC5cblxuICAgICAgICAvLyBEZWZpbmUgY29sdW1uIGRlZmluaXRpb25zIGFzIHRoZXJlIGNhbiBiZSBkaWZmZXJlbnQgbnVtYmVyIG9mIGNvbHVtbnMuXG4gICAgICAgIHZhciBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMgPSBbXTtcbiAgICAgICAgdmFyIHZpc2libGVDb2xzID0gW107XG4gICAgICAgIHZhciBub09mQ29sdW1ucyA9ICQoJ3RhYmxlLnN1Ym1pc3Npb25zRGF0YVRhYmxlIHRoJykubGVuZ3RoIC8gJCgndGFibGUuc3VibWlzc2lvbnNEYXRhVGFibGUnKS5sZW5ndGg7XG4gICAgICAgIHZhciBub3RTdHVkZW50VmlldyA9ICgkKCd0YWJsZS5zdWJtaXNzaW9uc0RhdGFUYWJsZSB0aC5zb3J0aW5nX25hbWUnKS5sZW5ndGggPiAwKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdmFyIHNob3dPcmlnUmVwb3J0ID0gKCQoJ3RhYmxlLnN1Ym1pc3Npb25zRGF0YVRhYmxlIHRoLmNyZXBvcnQnKS5sZW5ndGggPiAwKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdmFyIHVzZUdyYWRlTWFyayA9ICgkKCd0YWJsZS5zdWJtaXNzaW9uc0RhdGFUYWJsZSB0aC5jZ3JhZGUnKS5sZW5ndGggPiAwKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdmFyIG11bHRpcGxlUGFydHMgPSAoJCgndGFibGUuc3VibWlzc2lvbnNEYXRhVGFibGUgdGguY292ZXJhbGxncmFkZScpLmxlbmd0aCA+IDApID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIGlmIChub3RTdHVkZW50Vmlldykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub09mQ29sdW1uczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gMykge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMucHVzaCh7IFwic1R5cGVcIjogXCJzdHJpbmdcIiwgXCJiU29ydGFibGVcIjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVDb2xzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VibWlzc2lvbnNEYXRhVGFibGVDb2x1bW5zLnB1c2goeyBcInNUeXBlXCI6IFwic3RyaW5nXCIsIFwiYlNvcnRhYmxlXCI6IGZhbHNlLCBcImJWaXNpYmxlXCI6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlQ29scy5wdXNoKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gNSkge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMucHVzaCh7IFwiaURhdGFTb3J0XCI6IGkgLSAxLCBcInNUeXBlXCI6IFwic3RyaW5nXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVDb2xzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VibWlzc2lvbnNEYXRhVGFibGVDb2x1bW5zLnB1c2goeyBcInNDbGFzc1wiOiBcInJpZ2h0XCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVDb2xzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09IDggfHwgKGkgPT0gMTAgJiYgc2hvd09yaWdSZXBvcnQpIHx8ICgoaSA9PSAxMCAmJiAhc2hvd09yaWdSZXBvcnQpIHx8IChpID09IDEyICYmIHVzZUdyYWRlTWFyaykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25zRGF0YVRhYmxlQ29sdW1ucy5wdXNoKHsgXCJzQ2xhc3NcIjogXCJyaWdodFwiLCBcImlEYXRhU29ydFwiOiBpIC0gMSwgXCJzVHlwZVwiOiBcIm51bWVyaWNcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUNvbHMucHVzaCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChpID09IDEzICYmIHNob3dPcmlnUmVwb3J0KSB8fCAoaSA9PSAxMiAmJiAhc2hvd09yaWdSZXBvcnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25zRGF0YVRhYmxlQ29sdW1ucy5wdXNoKHsgXCJzQ2xhc3NcIjogXCJyaWdodFwiIH0pO1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlQ29scy5wdXNoKHRydWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSAxIHx8ICgoaSA+PSA5ICYmICFzaG93T3JpZ1JlcG9ydCAmJiAhdXNlR3JhZGVNYXJrKVxuICAgICAgICAgICAgICAgICAgICB8fCAoaSA+PSAxMSAmJiAoKCFzaG93T3JpZ1JlcG9ydCAmJiB1c2VHcmFkZU1hcmspIHx8IChzaG93T3JpZ1JlcG9ydCAmJiAhdXNlR3JhZGVNYXJrKSkpXG4gICAgICAgICAgICAgICAgICAgIHx8IChpID49IDEzICYmIHNob3dPcmlnUmVwb3J0ICYmIHVzZUdyYWRlTWFyaykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25zRGF0YVRhYmxlQ29sdW1ucy5wdXNoKHsgXCJzQ2xhc3NcIjogXCJjZW50ZXJcIiwgXCJiU29ydGFibGVcIjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVDb2xzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoaSA9PSAwKSB8fCAoaSA9PSA0KSB8fCAoaSA9PSA3KSB8fCAoaSA9PSA5ICYmIHNob3dPcmlnUmVwb3J0KSB8fCAoKGkgPT0gOSAmJiAhc2hvd09yaWdSZXBvcnQpIHx8IChpID09IDExICYmIHVzZUdyYWRlTWFyaykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25zRGF0YVRhYmxlQ29sdW1ucy5wdXNoKHsgXCJiVmlzaWJsZVwiOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUNvbHMucHVzaChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub09mQ29sdW1uczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gMikge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMucHVzaChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUNvbHMucHVzaCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMucHVzaCh7IFwiaURhdGFTb3J0XCI6IGkgLSAxLCBcInNUeXBlXCI6IFwic3RyaW5nXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVDb2xzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VibWlzc2lvbnNEYXRhVGFibGVDb2x1bW5zLnB1c2goeyBcInNDbGFzc1wiOiBcInJpZ2h0XCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVDb2xzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09IDcgfHwgKGkgPT0gOSAmJiBzaG93T3JpZ1JlcG9ydCkgfHwgKChpID09IDkgJiYgIXNob3dPcmlnUmVwb3J0KSB8fCAoaSA9PSAxMSAmJiB1c2VHcmFkZU1hcmspKSkge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMucHVzaCh7IFwic0NsYXNzXCI6IFwicmlnaHRcIiwgXCJpRGF0YVNvcnRcIjogaSAtIDEsIFwic1R5cGVcIjogXCJudW1lcmljXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVDb2xzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoaSA9PSAxMiAmJiBzaG93T3JpZ1JlcG9ydCkgfHwgKGkgPT0gMTEgJiYgIXNob3dPcmlnUmVwb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMucHVzaCh7IFwic0NsYXNzXCI6IFwicmlnaHRcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUNvbHMucHVzaCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gMSB8fCAoKGkgPj0gOCAmJiAhc2hvd09yaWdSZXBvcnQgJiYgIXVzZUdyYWRlTWFyaylcbiAgICAgICAgICAgICAgICAgICAgfHwgKGkgPj0gMTAgJiYgKCghc2hvd09yaWdSZXBvcnQgJiYgdXNlR3JhZGVNYXJrKSB8fCAoc2hvd09yaWdSZXBvcnQgJiYgIXVzZUdyYWRlTWFyaykpKVxuICAgICAgICAgICAgICAgICAgICB8fCAoaSA+PSAxMiAmJiBzaG93T3JpZ1JlcG9ydCAmJiB1c2VHcmFkZU1hcmspKSkge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMucHVzaCh7IFwic0NsYXNzXCI6IFwiY2VudGVyXCIsIFwiYlNvcnRhYmxlXCI6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlQ29scy5wdXNoKHRydWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGkgPT0gMCkgfHwgKGkgPT0gMykgfHwgKGkgPT0gNikgfHwgKGkgPT0gOCAmJiBzaG93T3JpZ1JlcG9ydCkgfHwgKChpID09IDggJiYgIXNob3dPcmlnUmVwb3J0KSB8fCAoaSA9PSAxMCAmJiB1c2VHcmFkZU1hcmspKSkge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMucHVzaCh7IFwiYlZpc2libGVcIjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVDb2xzLnB1c2goZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJ0VGFibGVzID0gW107XG4gICAgICAgIHZhciByZWZyZXNoUmVxdWVzdGVkID0gW107XG4gICAgICAgICQoJ3RhYmxlLnN1Ym1pc3Npb25zRGF0YVRhYmxlJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciBwYXJ0X2lkID0gJCh0aGlzKS5hdHRyKFwiaWRcIik7XG4gICAgICAgICAgICByZWZyZXNoUmVxdWVzdGVkW3BhcnRfaWRdID0gMDtcblxuICAgICAgICAgICAgcGFydFRhYmxlc1twYXJ0X2lkXSA9ICQoJ3RhYmxlIycgKyBwYXJ0X2lkKS5kYXRhVGFibGUoe1xuICAgICAgICAgICAgICAgIFwiYlByb2Nlc3NpbmdcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImFvQ29sdW1uc1wiOiBzdWJtaXNzaW9uc0RhdGFUYWJsZUNvbHVtbnMsXG4gICAgICAgICAgICAgICAgXCJhTGVuZ3RoTWVudVwiOiBbWzEwLCAyNSwgNTAsIDEwMCwgLTFdLCBbMTAsIDI1LCA1MCwgMTAwLCBcIkFsbFwiXV0sXG4gICAgICAgICAgICAgICAgXCJhYVNvcnRpbmdcIjogW1syLCBcImFzY1wiXSwgWzQsIFwiYXNjXCJdXSxcbiAgICAgICAgICAgICAgICBcInNBamF4U291cmNlXCI6IFwiYWpheC5waHBcIixcbiAgICAgICAgICAgICAgICBcIm9MYW5ndWFnZVwiOiBkYXRhVGFibGVzTGFuZyxcbiAgICAgICAgICAgICAgICBcInNEb21cIjogJ3I8XCJsaXN0YmFyLWNvbnRhaW5lclwiPFwidG9wIGxpc3RiYXIgY2xlYXJmaXhcImxmPj48XCJkdF9wYWdpbmF0aW9uIGNsZWFyZml4XCJwaT50PFwiYm90dG9tXCI+PFwiZHRfcGFnaW5hdGlvbiBjbGVhcmZpeFwicGk+JyxcbiAgICAgICAgICAgICAgICBcImZuU2VydmVyRGF0YVwiOiBmdW5jdGlvbiAoc1NvdXJjZSwgYW9EYXRhLCBmbkNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRhdGFUeXBlXCI6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidXJsXCI6IHNTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRhdGFcIjogeyBhY3Rpb246IFwiaW5pdGlhbGlzZV9yZWRyYXdcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlRWRpdGluZ1RleHQocGFydF9pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBmb3JjZSBzaG93aW5nIG9mIGxvYWRpbmcgYmFyIGFzIGlmIHdlIHBsYWNlIGZuQ2FsbGJhY2sgYWZ0ZXIgdGhlIHRhYmxlIGlzIHBvcHVsYXRlZCBpdCBpcyB3aXBlZCB3aGVuIHJlZnJlc2hpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm5DYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyMnICsgcGFydF9pZCArIFwiX3Byb2Nlc3NpbmdcIikuYXR0cignc3R5bGUnLCAndmlzaWJpbGl0eTogdmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFN1Ym1pc3Npb25zKHBhcnRUYWJsZXNbcGFydF9pZF0sICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpLCBwYXJ0X2lkLCAwLCByZWZyZXNoUmVxdWVzdGVkLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImJTdGF0ZVNhdmVcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImZuU3RhdGVTYXZlXCI6IGZ1bmN0aW9uIChvU2V0dGluZ3MsIG9EYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwYXJ0X2lkICsgJ0RhdGFUYWJsZXMnLCBKU09OLnN0cmluZ2lmeShvRGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwiZm5TdGF0ZVNhdmVQYXJhbXNcIjogZnVuY3Rpb24gKG9TZXR0aW5ncywgb0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgb0RhdGEuYWJWaXNDb2xzID0gdmlzaWJsZUNvbHM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImZuU3RhdGVMb2FkXCI6IGZ1bmN0aW9uIChvU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHBhcnRfaWQgKyAnRGF0YVRhYmxlcycpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImZuU3RhdGVMb2FkUGFyYW1zXCI6IGZ1bmN0aW9uIChvU2V0dGluZ3MsIG9EYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIG9EYXRhLmFiVmlzQ29scyA9IHZpc2libGVDb2xzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJmbkRyYXdDYWxsYmFja1wiOiBmdW5jdGlvbiAob1NldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpc2VEaWdpdGFsUmVjZWlwdCgpO1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXNlRFZMYXVuY2hlcnMoXCJhbGxcIiwgMCwgcGFydF9pZCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpc2VSZWZyZXNoUm93KFwiYWxsXCIsIDAsIHBhcnRfaWQsIDApO1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXNlVXBsb2FkQm94KFwiYWxsXCIsIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXNlWmlwRG93bmxvYWRzKHBhcnRfaWQpO1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXNlQ2hlY2tib3hlcygwLCBwYXJ0X2lkKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGlzZVVuYW5veW1pc2VGb3JtKFwiYWxsXCIsIDAsIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgICQoJ3RhYmxlLnN1Ym1pc3Npb25zRGF0YVRhYmxlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFydF9pZCA9ICQodGhpcykuYXR0cihcImlkXCIpO1xuXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSBQZWVybWFyayBTZWN0aW9uIG9mIFBhcnQgRGV0YWlscy5cbiAgICAgICAgICAgIHJlZnJlc2hQZWVybWFya0Fzc2lnbm1lbnRzKHBhcnRfaWQsIDApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJCgnLm1lc3NhZ2VzX2Ftb3VudCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlZnJlc2hVc2VyTWVzc2FnZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlcG9zaXRpb24gbGlua3MvZGl2cy5cbiAgICAgICAgJCgnLnRpaV90YWJsZV9mdW5jdGlvbnMnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYXJ0X2lkID0gJCh0aGlzKS5hdHRyKCdpZCcpLnNwbGl0KCd0aWlfdGFibGVfZnVuY3Rpb25zXycpWzFdO1xuXG4gICAgICAgICAgICB2YXIgdGlpX3RhYmxlX2Z1bmN0aW9ucyA9ICQoXCIjdGlpX3RhYmxlX2Z1bmN0aW9uc19cIiArIHBhcnRfaWQpLmh0bWwoKTtcbiAgICAgICAgICAgICQoJyN0aWlfdGFibGVfZnVuY3Rpb25zXycgKyBwYXJ0X2lkKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJyMnICsgcGFydF9pZCArICdfbGVuZ3RoJykuYWZ0ZXIodGlpX3RhYmxlX2Z1bmN0aW9ucyk7XG4gICAgICAgICAgICAkKCcubWVzc2FnZXNfaW5ib3gnKS5zaG93KCk7XG5cbiAgICAgICAgICAgICQoJyNyZWZyZXNoXycgKyBwYXJ0X2lkKS5zaG93KCk7XG4gICAgICAgICAgICAkKCcjcmVmcmVzaGluZ18nICsgcGFydF9pZCkuaGlkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgemlwX2Rvd25sb2FkcyA9ICQoXCIuemlwX2Rvd25sb2Fkc1wiKTtcblxuICAgICAgICAkLmVhY2goemlwX2Rvd25sb2FkcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhcnRfaWQgPSAkKHRoaXMpLmF0dHIoJ2lkJykuc3BsaXQoJ18nKVsxXTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICAkKCcjJyArIHBhcnRfaWQgKyAnX2xlbmd0aCcpLmFmdGVyKCQodGhpcykpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJChcIiN1c2VyX3JvbGVcIikuaHRtbCgpID09IFwiTGVhcm5lclwiKSB7XG4gICAgICAgICAgICAkKFwiLmRhdGFUYWJsZXNfbGVuZ3RoLCAuZGF0YVRhYmxlc19maWx0ZXIsIC5kdF9wYWdpbmF0aW9uXCIpLmhpZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdGhlIHJlZnJlc2ggc3VibWlzc2lvbnMgbGluayBpcyBjbGlja2VkLCB0aGUgZGF0YSBpbiBlYWNoIGRhdGF0YWJsZSBuZWVkcyB0byBiZSByZWxvYWRlZC5cbiAgICAgICAgJChcIi5yZWZyZXNoX2xpbmtcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaXMoXCI6dmlzaWJsZVwiKSkge1xuICAgICAgICAgICAgICAgICQoXCIucmVmcmVzaF9saW5rXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKFwiLnJlZnJlc2hpbmdfbGlua1wiKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAkKCd0YWJsZS5zdWJtaXNzaW9uc0RhdGFUYWJsZScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUmVxdWVzdGVkWyQodGhpcykuYXR0cihcImlkXCIpXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRUYWJsZXNbJCh0aGlzKS5hdHRyKFwiaWRcIildLmZuUmVsb2FkQWpheCgpO1xuICAgICAgICAgICAgICAgICAgICBwYXJ0VGFibGVzWyQodGhpcykuYXR0cihcImlkXCIpXS5mblN0YW5kaW5nUmVkcmF3KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFN5bmMgYWxsIGdyYWRlcyBsaW5rIGluIHNldHRpbmdzIHBhZ2UuXG4gICAgICAgIGlmICgkKCcjdHVybml0aW5fc3luY19hbGxfZ3JhZGVzJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLnR1cm5pdGluX3N5bmNfZ3JhZGVzJykuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgJCgnLnR1cm5pdGluX3N5bmNfZ3JhZGVzJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy50dXJuaXRpbl9zeW5jaW5nX2dyYWRlcycpLnNob3coKTtcblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IE0uY2ZnLnd3d3Jvb3QgKyBcIi9tb2QvdHVybml0aW50b29sdHdvL2FqYXgucGhwXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBhY3Rpb246IFwic3luY19hbGxfc3VibWlzc2lvbnNcIiwgYXNzaWdubWVudDogJCgnI3R1cm5pdGluX3N5bmNfYWxsX2dyYWRlcycpLmRhdGEoJ3R1cm5pdGludG9vbHR3b2lkJyksIHNlc3NrZXk6IE0uY2ZnLnNlc3NrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy50dXJuaXRpbl9zeW5jX2dyYWRlcycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy50dXJuaXRpbl9zeW5jaW5nX2dyYWRlcycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNpemUgd2luZG93IGlmIHN1Ym1pc3Npb24gaGFzIGZhaWxlZC5cbiAgICAgICAgaWYgKCQoJy5zdWJtaXNzaW9uX2ZhaWx1cmVfbXNnJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgd2luZG93LnBhcmVudC4kKCcudXBsb2FkX2JveCcpLmNvbG9yYm94LnJlc2l6ZSh7XG4gICAgICAgICAgICAgICAgd2lkdGg6IFwiODAwcHhcIixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiMjQwcHhcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbnJvbCBhbGwgc3R1ZGVudHMgbGluayBvbiB0aGUgZW5yb2xsZWQgc3R1ZGVudHMgcGFnZS5cbiAgICAgICAgJChcIi5lbnJvbF9saW5rXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIjZW5yb2xsaW5nX2Vycm9yXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICQoXCIuZW5yb2xfbGlua1wiKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiLmVucm9sbGluZ19jb250YWluZXJcIikuc2hvdygpO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICB1cmw6IFwiYWpheC5waHBcIixcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogeyBhY3Rpb246IFwiZW5yb2xfYWxsX3N0dWRlbnRzXCIsIGFzc2lnbm1lbnQ6ICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpLCBzZXNza2V5OiBNLmNmZy5zZXNza2V5IH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5lbnJvbF9saW5rXCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5lbnJvbGxpbmdfY29udGFpbmVyXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNlbnJvbGxpbmdfZXJyb3JcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBPcGVuIGFuIGlmcmFtZSBsaWdodCBib3ggY29udGFpbmluZyB0aGUgUnVicmljIE1hbmFnZXIuXG4gICAgICAgIGlmICgkKCcucnVicmljX21hbmFnZXJfbGF1bmNoJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLnJ1YnJpY19tYW5hZ2VyX2xhdW5jaCcpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICBpZnJhbWU6IHRydWUsIHdpZHRoOiBcIjgzMnB4XCIsIGhlaWdodDogXCI2ODJweFwiLCBvcGFjaXR5OiBcIjAuN1wiLCBjbGFzc05hbWU6IFwicnVicmljX21hbmFnZXJcIiwgdHJhbnNpdGlvbjogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0Qm94Q2xvc2VCdXR0b24oKTtcbiAgICAgICAgICAgICAgICAgICAgZ2V0TG9hZGluZ0dpZigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DbGVhbnVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nR2lmKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZnJlc2ggUnVicmljIGRyb3AgZG93biBpbiBhZGQvdXBkYXRlIGZvcm0uXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJpZFwiKSAhPSAncnVicmljX21hbmFnZXJfaW5ib3hfbGF1bmNoJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFJ1YnJpY1NlbGVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJyN0aWlfY2xvc2VfYmFyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPcGVuIGFuIGlmcmFtZSBsaWdodCBib3ggY29udGFpbmluZyB0aGUgUnVicmljIFZpZXcuXG4gICAgICAgIGlmICgkKCcucnVicmljX3ZpZXdfbGF1bmNoJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLnJ1YnJpY192aWV3X2xhdW5jaCcpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICBpZnJhbWU6IHRydWUsIHdpZHRoOiBcIjgzMnB4XCIsIGhlaWdodDogXCI2ODJweFwiLCBvcGFjaXR5OiBcIjAuN1wiLCBjbGFzc05hbWU6IFwicnVicmljX3ZpZXdcIiwgdHJhbnNpdGlvbjogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0Qm94Q2xvc2VCdXR0b24oKTtcbiAgICAgICAgICAgICAgICAgICAgZ2V0TG9hZGluZ0dpZigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DbGVhbnVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0aWlfY2xvc2VfYmFyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nR2lmKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IHdhcm5pbmcgd2hlbiBjaGFuZ2luZyB0aGUgcnVicmljIGxpbmtlZCB0byBhbiBhc3NpZ25tZW50LlxuICAgICAgICAkKCcjaWRfcnVicmljLCAjaWRfcGxhZ2lhcmlzbV9ydWJyaWMnKS5tb3VzZWRvd24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCQoJ2lucHV0W25hbWU9XCJpbnN0YW5jZVwiXScpLnZhbCgpICE9ICcnICYmICQoJ2lucHV0W25hbWU9XCJydWJyaWNfd2FybmluZ19zZWVuXCJdJykudmFsKCkgIT0gJ1knKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oTS5zdHIudHVybml0aW50b29sdHdvLmNoYW5nZXJ1YnJpY3dhcm5pbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJydWJyaWNfd2FybmluZ19zZWVuXCJdJykudmFsKCdZJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBPcGVuIGFuIGlmcmFtZSBsaWdodCBib3ggY29udGFpbmluZyB0aGUgUXVpY2ttYXJrIE1hbmFnZXIuXG4gICAgICAgIGlmICgkKCcucXVpY2ttYXJrX21hbmFnZXJfbGF1bmNoJykubGVuZ3RoID4gMCB8fCAkKCcucGxhZ2lhcmlzbV90dXJuaXRpbl9xdWlja21hcmtfbWFuYWdlcl9sYXVuY2gnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkKCcucXVpY2ttYXJrX21hbmFnZXJfbGF1bmNoLCAucGxhZ2lhcmlzbV90dXJuaXRpbl9xdWlja21hcmtfbWFuYWdlcl9sYXVuY2gnKS5jb2xvcmJveCh7XG4gICAgICAgICAgICAgICAgaWZyYW1lOiB0cnVlLCB3aWR0aDogXCI3NzBweFwiLCBoZWlnaHQ6IFwiNjAwcHhcIiwgb3BhY2l0eTogXCIwLjdcIiwgY2xhc3NOYW1lOiBcInF1aWNrbWFya19tYW5hZ2VyXCIsIHRyYW5zaXRpb246IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBsaWdodEJveENsb3NlQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGdldExvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ2xlYW51cDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGlpX2Nsb3NlX2JhcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZ0dpZigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3BlbiBhbiBpZnJhbWUgbGlnaHQgYm94IGNvbnRhaW5pbmcgdGhlIFBlZXJtYXJrIE1hbmFnZXIuXG4gICAgICAgIGlmICgkKCcudGlpX3BlZXJtYXJrX21hbmFnZXJfbGF1bmNoJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLnRpaV9wZWVybWFya19tYW5hZ2VyX2xhdW5jaCcpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICBpZnJhbWU6IHRydWUsIHdpZHRoOiBcIjgwMnB4XCIsIGhlaWdodDogXCI3NzJweFwiLCBvcGFjaXR5OiBcIjAuN1wiLCBjbGFzc05hbWU6IFwicGVlcm1hcmtfbWFuYWdlclwiLCB0cmFuc2l0aW9uOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRCb3hDbG9zZUJ1dHRvbigpO1xuICAgICAgICAgICAgICAgICAgICBnZXRMb2FkaW5nR2lmKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNsZWFudXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RpaV9jbG9zZV9iYXInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ2xvc2VkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZFN0ciA9ICQodGhpcykuYXR0cihcImlkXCIpLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBlZXJtYXJrQXNzaWdubWVudHMoaWRTdHJbMl0sIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3BlbiBhbiBpZnJhbWUgbGlnaHQgYm94IGNvbnRhaW5pbmcgdGhlIFBlZXJtYXJrIFJldmlld3MuXG4gICAgICAgIGlmICgkKCcudGlpX3BlZXJtYXJrX3Jldmlld3NfbGF1bmNoJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLnRpaV9wZWVybWFya19yZXZpZXdzX2xhdW5jaCcpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICBpZnJhbWU6IHRydWUsIHdpZHRoOiBcIjgwMnB4XCIsIGhlaWdodDogXCI3NzJweFwiLCBvcGFjaXR5OiBcIjAuN1wiLCBjbGFzc05hbWU6IFwicGVlcm1hcmtfcmV2aWV3c1wiLCB0cmFuc2l0aW9uOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRCb3hDbG9zZUJ1dHRvbigpO1xuICAgICAgICAgICAgICAgICAgICBnZXRMb2FkaW5nR2lmKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNsZWFudXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RpaV9jbG9zZV9iYXInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9wZW4gYW4gaWZyYW1lIGxpZ2h0IGJveCBjb250YWluaW5nIHRoZSB0dXJuaXRpbiBtZXNzYWdlIGluYm94LlxuICAgICAgICBpZiAoJChcIi5tZXNzYWdlc19pbmJveFwiKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkKFwiLm1lc3NhZ2VzX2luYm94XCIpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICBpZnJhbWU6IHRydWUsIHdpZHRoOiBcIjc3MnB4XCIsIGhlaWdodDogXCI3NzJweFwiLCBvcGFjaXR5OiBcIjAuN1wiLCBjbGFzc05hbWU6IFwibWVzc2FnZXNcIiwgdHJhbnNpdGlvbjogXCJub25lXCIsIGNsb3NlQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBsaWdodEJveENsb3NlQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGdldExvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ2xlYW51cDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGlpX2Nsb3NlX2JhcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZ0dpZigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3BlbiBhbiBpZnJhbWUgbGlnaHQgYm94IGNvbnRhaW5pbmcgdGhlIGZvcm0gdG8gbWVzc2FnZSBub24gc3VibWl0dGVycy5cbiAgICAgICAgaWYgKCQoXCIubm9uc3VibWl0dGVyc19saW5rXCIpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQoXCIubm9uc3VibWl0dGVyc19saW5rXCIpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICBpZnJhbWU6IHRydWUsIHdpZHRoOiBcIjc0MHB4XCIsIGhlaWdodDogXCI1NDBweFwiLCBvcGFjaXR5OiBcIjAuN1wiLCBjbGFzc05hbWU6IFwibm9uc3VibWl0dGVyc1wiLCB0cmFuc2l0aW9uOiBcIm5vbmVcIiwgY2xvc2VCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0Qm94Q2xvc2VCdXR0b24oKTtcbiAgICAgICAgICAgICAgICAgICAgZ2V0TG9hZGluZ0dpZigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DbGVhbnVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0aWlfY2xvc2VfYmFyJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nR2lmKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNpemUgd2luZG93IHdoZW4gZW1haWwgaGFzIGJlZW4gc2VudC5cbiAgICAgICAgaWYgKCQoJy5ub25zdWJtaXR0ZXJzZm9ybXN1Y2Nlc3Ntc2cnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBoaWRlTG9hZGluZ0dpZigpO1xuICAgICAgICAgICAgd2luZG93LnBhcmVudC4kKCcubm9uc3VibWl0dGVycycpLmNvbG9yYm94LnJlc2l6ZSh7XG4gICAgICAgICAgICAgICAgd2lkdGg6IFwiNzQwcHhcIixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiMTIwcHhcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPcGVuIGFuIGlmcmFtZSBsaWdodCBib3ggY29udGFpbmluZyB0aGUgRW1haWwgbm9uIHN1Ym1pdHRlcnMgZm9ybS5cbiAgICAgICAgaWYgKCQoJy5ydWJyaWNfdmlld19sYXVuY2gnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkKCcucnVicmljX3ZpZXdfbGF1bmNoJykuY29sb3Jib3goe1xuICAgICAgICAgICAgICAgIGlmcmFtZTogdHJ1ZSwgd2lkdGg6IFwiODMycHhcIiwgaGVpZ2h0OiBcIjY4MnB4XCIsIG9wYWNpdHk6IFwiMC43XCIsIGNsYXNzTmFtZTogXCJydWJyaWNfdmlld1wiLCB0cmFuc2l0aW9uOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRCb3hDbG9zZUJ1dHRvbigpO1xuICAgICAgICAgICAgICAgICAgICBnZXRMb2FkaW5nR2lmKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNsZWFudXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RpaV9jbG9zZV9iYXInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9wZW4gdGhlIERWIGluIGEgbmV3IHdpbmRvdyBpbiBzdWNoIGEgd2F5IGFzIHRvIG5vdCBiZSBibG9ja2VkIGJ5IHBvcHVwcy5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5kZWZhdWx0X29wZW4sIC5vcmlncmVwb3J0X29wZW4sIC5ncmFkZW1hcmtfb3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwcm9jZWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBpZFN0ciA9ICQodGhpcykuYXR0cihcImlkXCIpLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgIHZhciBkdWVfZGF0ZSA9ICQoJyNkYXRlX2R1ZV8nICsgaWRTdHJbMl0pLmh0bWwoKTtcbiAgICAgICAgICAgIHZhciBkdWVfZGF0ZV91bml4ID0gbW9tZW50KGR1ZV9kYXRlKS51bml4KCk7XG5cbiAgICAgICAgICAgIHZhciBkdnR5cGUgPSBpZFN0clswXTtcbiAgICAgICAgICAgIHZhciBzdWJtaXNzaW9uX2lkID0gaWRTdHJbMV07XG4gICAgICAgICAgICB2YXIgcGFydF9pZCA9IGlkU3RyWzJdO1xuXG4gICAgICAgICAgICAvLyBTaG93IHJlc3VibWlzc2lvbiBncmFkZSB3YXJuaW5nIGlmIHRoZSBkdWUgZGF0ZSBoYXMgbm90IHBhc3NlZC5cbiAgICAgICAgICAgIGlmIChkdWVfZGF0ZV91bml4ID4gbW9tZW50KCkudW5peCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2dyYWRlZF93YXJuaW5nJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKE0uc3RyLnR1cm5pdGludG9vbHR3by5yZXN1Ym1pc3Npb25ncmFkZXdhcm4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9jZWVkKSB7XG4gICAgICAgICAgICAgICAgZHZXaW5kb3cgPSB3aW5kb3cub3BlbignJywgJ19ibGFuaycpO1xuICAgICAgICAgICAgICAgIHZhciBsb2FkaW5nID0gJzxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlcjtcIj4nO1xuICAgICAgICAgICAgICAgIGxvYWRpbmcgKz0gJzxpbWcgc3JjPVwiJyArIE0uY2ZnLnd3d3Jvb3QgKyAnL21vZC90dXJuaXRpbnRvb2x0d28vcGl4L3RpaUljb24uc3ZnXCIgc3R5bGU9XCJ3aWR0aDoxMDBweDsgaGVpZ2h0OiAxMDBweFwiPic7XG4gICAgICAgICAgICAgICAgbG9hZGluZyArPSAnPHAgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtcIj4nICsgTS5zdHIudHVybml0aW50b29sdHdvLmxvYWRpbmdkdiArICc8L3A+JztcbiAgICAgICAgICAgICAgICBsb2FkaW5nICs9ICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICQoZHZXaW5kb3cuZG9jdW1lbnQuYm9keSkuaHRtbChsb2FkaW5nKTtcblxuICAgICAgICAgICAgICAgIC8vIEdldCBodG1sIHRvIGxhdW5jaCBEVi5cbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBNLmNmZy53d3dyb290ICsgXCIvbW9kL3R1cm5pdGludG9vbHR3by9hamF4LnBocFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYWN0aW9uOiBkdnR5cGUsIHN1Ym1pc3Npb246IHN1Ym1pc3Npb25faWQsIGFzc2lnbm1lbnQ6ICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGR2V2luZG93LmRvY3VtZW50LmJvZHkpLmh0bWwobG9hZGluZyArIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHZXaW5kb3cuZG9jdW1lbnQuZm9ybXNbMF0uc3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdldpbmRvdy5kb2N1bWVudC5jbG9zZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0RWQ2xvc2VkKHBhcnRfaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICgkKFwiI2lkX3J1YnJpY1wiKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZWZyZXNoUnVicmljU2VsZWN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPdmVycmlkZSBhbnkgdGhlbWUgdGhhdCBwdXRzIGEgYmFja2dyb3VuZCBvbiB0aGUgaHRtbCBlbGVtZW50IHdoaWNoIGdldHMgc2V0IG9uIGFuIGlmcmFtZS5cbiAgICAgICAgaWYgKHNlbGYgIT0gdG9wICYmICQoJyN2aWV3X2NvbnRleHQnKS5odG1sKCkgPT0gJ2JveCcpIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5jc3MoJ2JhY2tncm91bmQnLCAnbm9uZScpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYgIT0gdG9wICYmICQoJyN2aWV3X2NvbnRleHQnKS5odG1sKCkgPT0gJ2JveF9zb2xpZCcpIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5jc3MoJ2JhY2tncm91bmQnLCAnI0ZGRicpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLmVkaXRhYmxlX3Bvc3RkdWUnKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2Fub24nKSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoTS5zdHIudHVybml0aW50b29sdHdvLnBvc3RkYXRlX3dhcm5pbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcubWF4X21hcmtzX3dhcm5pbmcnKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFsZXJ0KE0uc3RyLnR1cm5pdGludG9vbHR3by5tYXhfbWFya3Nfd2FybmluZyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICgkKCcuZWRpdGFibGVfdGV4dCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICQuZm4uZWRpdGFibGUuZGVmYXVsdHMubW9kZSA9ICdpbmxpbmUnO1xuICAgICAgICAgICAgJC5mbi5lZGl0YWJsZS5kZWZhdWx0cy51cmwgPSAnYWpheC5waHAnO1xuICAgICAgICAgICAgJC5mbi5lZGl0YWJsZS5kZWZhdWx0cy5vbmJsdXIgPSAnc3VibWl0JztcbiAgICAgICAgICAgICQuZm4uZWRpdGFibGUuZGVmYXVsdHMuc2hvd2J1dHRvbnMgPSBmYWxzZTtcbiAgICAgICAgICAgICQuZm4uZWRpdGFibGUuZGVmYXVsdHMuYWpheE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKCcuZWRpdGFibGVfdGV4dCcpLmVkaXRhYmxlKHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ2lkJykuaW5kZXhPZihcIm1hcmtzX1wiKSA+PSAwICYmIChNYXRoLmZsb29yKHZhbHVlKSAhPSB2YWx1ZSB8fCAhJC5pc051bWVyaWModmFsdWUpIHx8IHZhbHVlLmluZGV4T2YoXCIuXCIpICE9IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE0uc3RyLnR1cm5pdGludG9vbHR3by5tYXhtYXJrc2Vycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLm1zZztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5maWVsZCA9PSBcIm1heG1hcmtzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZWZyZXNoXycgKyByZXNwb25zZS5wYXJ0aWQpLmNsaWNrKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgZ3JhZGVib29rLlxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IE0uY2ZnLnd3d3Jvb3QgKyBcIi9tb2QvdHVybml0aW50b29sdHdvL2FqYXgucGhwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgYWN0aW9uOiBcInN5bmNfYWxsX3N1Ym1pc3Npb25zXCIsIGFzc2lnbm1lbnQ6ICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpLCBzZXNza2V5OiBNLmNmZy5zZXNza2V5IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmZpZWxkID09IFwicGFydG5hbWVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYklkID0gJCh0aGlzKS5wYXJlbnRzVW50aWwoJy51aS10YWJzLXBhbmVsJykucGFyZW50KCkuYXR0cignYXJpYS1sYWJlbGxlZGJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjJyArIHRhYklkKS50ZXh0KG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoJCgnI2V4cG9ydF9vcHRpb25zJykuaGFzQ2xhc3MoJ3RpaV9leHBvcnRfb3B0aW9uc19oaWRlJykpIHtcbiAgICAgICAgICAgICAgICAkKCcjZXhwb3J0X29wdGlvbnMnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmV4cG9ydF9kYXRhJykuaHRtbCgnPHNwYW4gY2xhc3M9XCJlbXB0eS1kYXNoXCI+LS08L3NwYW4+Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoJy5lZGl0YWJsZV9wb3N0ZHVlJykub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcImFqYXgucGhwXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBhY3Rpb246ICdjaGVja19hbm9uJywgcGFydDogJHRoaXMuZGF0YSgncGsnKSwgYXNzaWdubWVudDogJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmRhdGEoJ2Fub24nLCBkYXRhWydhbm9uJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZGF0YSgndW5hbm9uJywgZGF0YVsndW5hbm9uJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZGF0YSgnc3VibWl0dGVkJywgZGF0YVsnc3VibWl0dGVkJ10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIHRoZURhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgJCgnLmVkaXRhYmxlX2RhdGUnKS5lZGl0YWJsZSh7XG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnY29tYm9kYXRlJyxcbiAgICAgICAgICAgICAgICAnZm9ybWF0JzogJ1lZWVktTU0tREQgSEg6bW0nLFxuICAgICAgICAgICAgICAgICd2aWV3Zm9ybWF0JzogJ0QgTU1NIFlZWVksIEhIOm1tJyxcbiAgICAgICAgICAgICAgICAndGVtcGxhdGUnOiAnRCBNTU0gWVlZWSAgSEg6bW0nLFxuICAgICAgICAgICAgICAgICdjb21ib2RhdGUnOiB7XG4gICAgICAgICAgICAgICAgICAgICdtaW51dGVTdGVwJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ21pblllYXInOiAyMDAwLFxuICAgICAgICAgICAgICAgICAgICAnbWF4WWVhcic6IHRoZURhdGUuZ2V0RnVsbFllYXIoKSArIDIsXG4gICAgICAgICAgICAgICAgICAgICdzbWFydERheXMnOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5mb3JtYXQoXCJYXCIpIDwgbW9tZW50KCkudW5peCgpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmhhc0NsYXNzKCdlZGl0YWJsZV9wb3N0ZHVlJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgnYW5vbicpID09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgndW5hbm9uJykgPT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCdzdWJtaXR0ZWQnKSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm0oTS5zdHIudHVybml0aW50b29sdHdvLmRpc2FibGVhbm9uY29uZmlybSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZWRpdGFibGUtb3BlbicpLmVkaXRhYmxlQ29udGFpbmVyKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmFsaWRhdGlvbiBvbmx5IGZhaWxzIGlmIHN0cmluZyBpcyByZXR1cm5lZCAoV2UgbmVlZCBhIHN0cmluZykuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlLCBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5tc2c7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVmcmVzaF8nICsgcmVzcG9uc2UucGFydGlkKS5jbGljaygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXhwb3J0X29wdGlvbiA9PSBcInRpaV9leHBvcnRfb3B0aW9uc19oaWRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjZXhwb3J0X29wdGlvbnMnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmV4cG9ydF9kYXRhJykuaHRtbCgnPHNwYW4gY2xhc3M9XCJlbXB0eS1kYXNoXCI+LS08L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5lbXB0eS1kYXNoJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2V4cG9ydF9vcHRpb25zJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJy5lZGl0YWJsZV9kYXRlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdlZGl0YWJsZS1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSBvdGhlciBlZGl0YWJsZSBmaWVsZHMgJiBHcmFkaW5nIHRlbXBsYXRlIHN1Ym1pc3Npb25zIHdoZW4gYW4gZWRpdGFibGUgZm9ybSBpcyBvcGVuZWQuXG4gICAgICAgICAgICAkKCcuZWRpdGFibGVfZGF0ZSwgLmVkaXRhYmxlX3RleHQnKS5vbignc2hvd24nLCBmdW5jdGlvbiAoZSwgZWRpdGFibGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9ICgkKHRoaXMpLnByb3AoJ2lkJykpO1xuICAgICAgICAgICAgICAgICQoJy5lZGl0YWJsZV9kYXRlLCAuZWRpdGFibGVfdGV4dCcpLm5vdCgnIycgKyBjdXJyZW50KS5lZGl0YWJsZSgnZGlzYWJsZScpO1xuICAgICAgICAgICAgICAgICQoJy5zdWJtaXRfbm90aGluZycpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEVuYWJsZSBvdGhlciBlZGl0YWJsZSBmaWVsZHMgJiBHcmFkaW5nIHRlbXBsYXRlIHN1Ym1pc3Npb25zIHdoZW4gYW4gZWRpdGFibGUgZm9ybSBpcyBjbG9zZWQuXG4gICAgICAgICAgICAkKCcuZWRpdGFibGVfZGF0ZSwgLmVkaXRhYmxlX3RleHQnKS5vbignaGlkZGVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gKCQodGhpcykucHJvcCgnaWQnKSk7XG4gICAgICAgICAgICAgICAgJCgnLmVkaXRhYmxlX2RhdGUsIC5lZGl0YWJsZV90ZXh0Jykubm90KCcjJyArIGN1cnJlbnQpLmVkaXRhYmxlKCdlbmFibGUnKTtcbiAgICAgICAgICAgICAgICAkKCcuc3VibWl0X25vdGhpbmcnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnI2luYm94X2Zvcm0gZm9ybSwgLmxhdW5jaF9mb3JtIGZvcm0nKS5zdWJtaXQoKTtcblxuICAgICAgICAvLyBPcGVuIGFuIGlmcmFtZSBsaWdodCBib3ggY29udGFpbmluZyB0aGUgRVVMQSAuXG4gICAgICAgIGlmICgkKCcudHVybml0aW5fZXVsYV9saW5rJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJCgnLnR1cm5pdGluX2V1bGFfbGluaycpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICBpZnJhbWU6IHRydWUsIHdpZHRoOiBcIjc2NnB4XCIsIGhlaWdodDogXCI1OTZweFwiLCBvcGFjaXR5OiBcIjAuN1wiLCBjbGFzc05hbWU6IFwiZXVsYV92aWV3XCIsIHNjcm9sbGluZzogXCJmYWxzZVwiLFxuICAgICAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24gKCkgeyBnZXRMb2FkaW5nR2lmKCk7IH0sXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB0eXBlb2YgZXYuZGF0YSA9PT0gJ3VuZGVmaW5lZCcgPyBldi5vcmlnaW5hbEV2ZW50LmRhdGEgOiBldi5kYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IG1ha2UgYWpheCByZXF1ZXN0IGlmIG1lc3NhZ2UgaXMgb25lIG9mIHRoZSBleHBlY3RlZCByZXNwb25zZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZSA9PSAndHVybml0aW5fZXVsYV9kZWNsaW5lZCcgfHwgbWVzc2FnZSA9PSAndHVybml0aW5fZXVsYV9hY2NlcHRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBNLmNmZy53d3dyb290ICsgXCIvbW9kL3R1cm5pdGludG9vbHR3by9hamF4LnBocFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHthY3Rpb246IFwiYWNjZXB0dXNlcmFncmVlbWVudFwiLCBtZXNzYWdlOiBtZXNzYWdlLCBzZXNza2V5OiBNLmNmZy5zZXNza2V5fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNsZWFudXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVuYWJsZSB0aGUgZWRpdGluZyBmaWVsZHMgaW4gdGhlIGluYm94IHBhcnRzIHRhYmxlLlxuICAgICAgICBmdW5jdGlvbiBlbmFibGVFZGl0aW5nVGV4dChwYXJ0X2lkKSB7XG4gICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLmVkaXRhYmxlX2RhdGUsICN0YWJzLScgKyBwYXJ0X2lkICsgJyAuZWRpdGFibGVfdGV4dCcpLmVkaXRhYmxlKCdlbmFibGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpc2FibGUgdGhlIGVkaXRpbmcgZmllbGRzIGluIHRoZSBpbmJveCBwYXJ0cyB0YWJsZS5cbiAgICAgICAgZnVuY3Rpb24gZGlzYWJsZUVkaXRpbmdUZXh0KHBhcnRfaWQpIHtcbiAgICAgICAgICAgICQoJyN0YWJzLScgKyBwYXJ0X2lkICsgJyAuZWRpdGFibGVfZGF0ZSwgI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5lZGl0YWJsZV90ZXh0JykuZWRpdGFibGUoJ2Rpc2FibGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldExvYWRpbmdHaWYoKSB7XG4gICAgICAgICAgICB2YXIgaW1nID0gJzxkaXYgY2xhc3M9XCJsb2FkaW5nX2dpZlwiPjwvZGl2Pic7XG4gICAgICAgICAgICAkKCcjY2JveE92ZXJsYXknKS5hZnRlcihpbWcpO1xuICAgICAgICAgICAgdmFyIHRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKSArICgkKHdpbmRvdykuaGVpZ2h0KCkgLyAyKTtcbiAgICAgICAgICAgICQoJy5sb2FkaW5nX2dpZicpLmNzcygndG9wJywgdG9wICsgJ3B4Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBoaWRlTG9hZGluZ0dpZigpIHtcbiAgICAgICAgICAgICQoJy5sb2FkaW5nX2dpZicpLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0U3VibWlzc2lvbnModGFibGUsIGFzc2lnbm1lbnRfaWQsIHBhcnRfaWQsIHN0YXJ0LCByZWZyZXNoX3JlcXVlc3RlZCwgdG90YWwpIHtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgXCJkYXRhVHlwZVwiOiAnanNvbicsXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIFwidXJsXCI6IFwiYWpheC5waHBcIixcbiAgICAgICAgICAgICAgICBcImFzeW5jXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJkYXRhXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcImdldF9zdWJtaXNzaW9uc1wiLCBhc3NpZ25tZW50OiBhc3NpZ25tZW50X2lkLCBwYXJ0OiBwYXJ0X2lkLCBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hfcmVxdWVzdGVkOiByZWZyZXNoX3JlcXVlc3RlZFtwYXJ0X2lkXSwgc2Vzc2tleTogTS5jZmcuc2Vzc2tleSwgdG90YWw6IHRvdGFsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBldmFsKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gcmVzdWx0LmVuZDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmFhRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5mbkFkZERhdGEocmVzdWx0LmFhRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmVuZCA8IHJlc3VsdC50b3RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U3VibWlzc2lvbnModGFibGUsIGFzc2lnbm1lbnRfaWQsIHBhcnRfaWQsIHN0YXJ0LCByZWZyZXNoX3JlcXVlc3RlZCwgcmVzdWx0LnRvdGFsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyMnICsgcGFydF9pZCArIFwiX3Byb2Nlc3NpbmdcIikuYXR0cignc3R5bGUnLCAndmlzaWJpbGl0eTogaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hfcmVxdWVzdGVkW3BhcnRfaWRdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGxyZWZyZXNoZWQgPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2gocmVmcmVzaF9yZXF1ZXN0ZWQsIGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxyZWZyZXNoZWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxscmVmcmVzaGVkID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucmVmcmVzaGluZ19saW5rJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5yZWZyZXNoX2xpbmsnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdFZpc2liaWxpdHkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlRWRpdGluZ1RleHQocGFydF9pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuYWJsZSBFbWFpbCBub24gc3VibWl0dGVycyBsaW5rIGlmIHRoZXJlIGlzIGFueSBub24gc3VibWl0dGVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubm9uc3VibWl0dGVycyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubm9uc3VibWl0dGVyc19saW5rJykuYXR0cignc3R5bGUnLCAnZGlzcGxheTogYmxvY2snKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJlcnJvclwiOiBmdW5jdGlvbiAoZGF0YSwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBwYXJ0X2lkICsgXCJfcHJvY2Vzc2luZ1wiKS5hdHRyKCdzdHlsZScsICd2aXNpYmlsaXR5OiBoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmRhdGFUYWJsZXNfZW1wdHknKS5odG1sKE0uc3RyLnR1cm5pdGludG9vbHR3by50aWlzdWJtaXNzaW9uc2dldGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNob3cgb3IgaGlkZSB0aGUgc3VibWlzc2lvbiBsaW5rIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBFVUxBIGhhcyBiZWVuIGFjY2VwdGVkLlxuICAgICAgICBmdW5jdGlvbiBzdWJtaXRWaXNpYmlsaXR5KCkge1xuICAgICAgICAgICAgaWYgKCgkKFwiLnVwbG9hZF9ib3hcIikuZGF0YShcInVzZXItdHlwZVwiKSA9PSAxKSB8fCAoJChcIi51cGxvYWRfYm94XCIpLmRhdGEoXCJldWxhXCIpID09IDEpKSB7XG4gICAgICAgICAgICAgICAgJChcIi51cGxvYWRfYm94XCIpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCIudXBsb2FkX2JveFwiKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgdGhlIHJ1YnJpY3MgYmVsb25naW5nIHRvIGEgdXNlciBmcm9tIFR1cm5pdGluIGFuZCByZWZyZXNoIG1lbnUgYWNjb3JkaW5nbHkuXG4gICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hSdWJyaWNTZWxlY3QoKSB7XG4gICAgICAgICAgICB2YXIgcnVicmljRWxlbWVudElkID0gKCQoJyNpZF9ydWJyaWMnKS5sZW5ndGgpID8gJyNpZF9ydWJyaWMnIDogJyNpZF9wbGFnaWFyaXNtX3J1YnJpYyc7XG4gICAgICAgICAgICB2YXIgY3VycmVudFJ1YnJpYyA9ICQocnVicmljRWxlbWVudElkKS52YWwoKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgXCJkYXRhVHlwZVwiOiAnanNvbicsXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIFwidXJsXCI6IFwiLi4vbW9kL3R1cm5pdGludG9vbHR3by9hamF4LnBocFwiLFxuICAgICAgICAgICAgICAgIFwiZGF0YVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJyZWZyZXNoX3J1YnJpY19zZWxlY3RcIiwgYXNzaWdubWVudDogJCgnaW5wdXRbbmFtZT1cImluc3RhbmNlXCJdJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZW5hbWU6ICQoJ2lucHV0W25hbWU9XCJtb2R1bGVuYW1lXCJdJykudmFsKCksIGNvdXJzZTogJCgnaW5wdXRbbmFtZT1cImNvdXJzZVwiXScpLnZhbCgpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkKCQocnVicmljRWxlbWVudElkKSkuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2gob3B0aW9ucywgZnVuY3Rpb24gKGksIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkLmlzTnVtZXJpYyhpKSAmJiBpICE9PSBcIlwiKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0Z3JvdXAgPSAkKCc8b3B0Z3JvdXA+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0Z3JvdXAuYXR0cignbGFiZWwnLCBpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCh2YWwsIGZ1bmN0aW9uIChqLCBydWJyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9ICQoXCI8b3B0aW9uPjwvb3B0aW9uPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbChqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQocnVicmljKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRncm91cC5hcHBlbmQob3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQocnVicmljRWxlbWVudElkKS5hcHBlbmQob3B0Z3JvdXApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJChydWJyaWNFbGVtZW50SWQpKS5hcHBlbmQoJCgnPG9wdGlvbj4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB2YWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICQocnVicmljRWxlbWVudElkICsgJyBvcHRpb25bdmFsdWU9XCInICsgY3VycmVudFJ1YnJpYyArICdcIl0nKS5hdHRyKFwic2VsZWN0ZWRcIiwgXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlZnJlc2ggdGhlIG51bWJlciBvZiBtZXNzYWdlcyBpbiB0aGUgdXNlcidzIFR1cm5pdGluIGluYm94LlxuICAgICAgICBmdW5jdGlvbiByZWZyZXNoVXNlck1lc3NhZ2VzKCkge1xuICAgICAgICAgICAgJCgnLm1lc3NhZ2VzX2xvYWRpbmcnKS5zaG93KCk7XG4gICAgICAgICAgICAkKCcubWVzc2FnZXNfYW1vdW50JykuaHRtbCgnJyk7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgXCJkYXRhVHlwZVwiOiAnaHRtbCcsXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIFwidXJsXCI6IFwiYWpheC5waHBcIixcbiAgICAgICAgICAgICAgICBcImRhdGFcIjogeyBhY3Rpb246IFwicmVmcmVzaF91c2VyX21lc3NhZ2VzXCIsIGFzc2lnbm1lbnQ6ICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1lc3NhZ2VzX2xvYWRpbmcnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5tZXNzYWdlc19hbW91bnQnKS5odG1sKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGlkZSBQZWVybWFyayBhc3NpZ25tZW50cyBmb3IgcmVmcmVzaGluZy5cbiAgICAgICAgZnVuY3Rpb24gcmVzZXRQZWVybWFya1NlY3Rpb24ocGFydF9pZCkge1xuICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC50b2dnbGVfcGVlcm1hcmtzJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5wZWVybWFya19jb3VudCcpLmh0bWwoJycpO1xuICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5wZWVybWFyay1sb2FkaW5nJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5wZWVybWFya19hc3NpZ25tZW50c19jb250YWluZXInKS5oaWRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZWZyZXNoIHRoZSBQZWVybWFyayBBc3NpZ25tZW50cyBmcm9tIFR1cm5pdGluIGFuZCBzaG93IGluIFBhcnQgRGV0YWlscyBzZWN0aW9uIG9mIGluYm94LlxuICAgICAgICBmdW5jdGlvbiByZWZyZXNoUGVlcm1hcmtBc3NpZ25tZW50cyhwYXJ0X2lkLCByZWZyZXNoX3JlcXVlc3RlZCkge1xuXG4gICAgICAgICAgICB2YXIgdXNlcl9yb2xlID0gKCQoJy50aWlfcGVlcm1hcmtfbWFuYWdlcl9sYXVuY2gnKS5sZW5ndGggPiAwKSA/ICdJbnN0cnVjdG9yJyA6ICdMZWFybmVyJ1xuXG4gICAgICAgICAgICBpZiAoJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5wZWVybWFya19hc3NpZ25tZW50c19jb250YWluZXInKS5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgICAgICByZXNldFBlZXJtYXJrU2VjdGlvbihwYXJ0X2lkKTtcblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIFwiZGF0YVR5cGVcIjogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidXJsXCI6IFwiYWpheC5waHBcIixcbiAgICAgICAgICAgICAgICAgICAgXCJkYXRhXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJyZWZyZXNoX3BlZXJtYXJrX2Fzc2lnbm1lbnRzXCIsIGFzc2lnbm1lbnQ6ICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydDogcGFydF9pZCwgcmVmcmVzaF9yZXF1ZXN0ZWQ6IHJlZnJlc2hfcmVxdWVzdGVkLCBzZXNza2V5OiBNLmNmZy5zZXNza2V5XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmFsKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5wZWVybWFya19hc3NpZ25tZW50c19jb250YWluZXInKS5odG1sKGRhdGEucGVlcm1hcmtfdGFibGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLnBlZXJtYXJrLWxvYWRpbmcnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLnBlZXJtYXJrX2NvdW50JykuaHRtbChkYXRhLm5vX29mX3BlZXJtYXJrcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm5vX29mX3BlZXJtYXJrcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLnRvZ2dsZV9wZWVybWFya3MnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyN0YWJzLScgKyBwYXJ0X2lkICsgJyAudG9nZ2xlX3BlZXJtYXJrcycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChkYXRhLm5vX29mX3BlZXJtYXJrcyA+IDAgJiYgdXNlcl9yb2xlID09ICdJbnN0cnVjdG9yJykgfHwgKGRhdGEucGVlcm1hcmtzX2FjdGl2ZSAmJiB1c2VyX3JvbGUgPT0gJ0xlYXJuZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyN0YWJzLScgKyBwYXJ0X2lkICsgJyAucm93X3BlZXJtYXJrX3Jldmlld3MnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkLmNvb2tpZSgnc2hvd19wZWVybWFya3NfJyArICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpKSA9PSBcInRydWVcIiAmJiBkYXRhLm5vX29mX3BlZXJtYXJrcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2hvd19wZWVybWFya3NfJyArICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmhpZGVfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wZWVybWFya19hc3NpZ25tZW50c19jb250YWluZXInKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNob3dfcGVlcm1hcmtzXycgKyAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSkuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5oaWRlX3BlZXJtYXJrc18nICsgJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCkpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucGVlcm1hcmtfYXNzaWdubWVudHNfY29udGFpbmVyJykuc2xpZGVVcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IGxpZ2h0IGJveCB3aXRoIGZvcm0gdG8gcmV2ZWFsIHRoZSBzdHVkZW50J3MgbmFtZSBvbiBhbiBhbm9ueW1pc2VkIHN1Ym1pc3Npb24uXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpc2VVbmFub3ltaXNlRm9ybShzY29wZSwgYXNzaWdubWVudF9pZCwgc3VibWlzc2lvbl9pZCkge1xuICAgICAgICAgICAgdmFyIGlkZW50aWZpZXIgPSAnYS51bmFub255bWlzZSc7XG4gICAgICAgICAgICBpZiAoc2NvcGUgPT0gXCJyb3dcIikge1xuICAgICAgICAgICAgICAgIGlkZW50aWZpZXIgPSAnI3N1Ym1pc3Npb25fJyArIHN1Ym1pc3Npb25faWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKGlkZW50aWZpZXIpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICBpbmxpbmU6IHRydWUsIHdpZHRoOiBcIjUwJVwiLCB0b3A6IFwiMTAwcHhcIiwgaGVpZ2h0OiBcIjI2MHB4XCIsIG9wYWNpdHk6IFwiMC43XCIsIGNsYXNzTmFtZTogXCJ0aWlfdW5hbm9ueW1pc2VfcmV2ZWFsX2Zvcm1cIixcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZFN0ciA9ICQodGhpcykuYXR0cihcImlkXCIpLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Ym1pc3Npb25faWQgPT0gMCB8fCBzdWJtaXNzaW9uX2lkID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Ym1pc3Npb25faWQgPSBpZFN0clsxXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXNzaWdubWVudF9pZCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50X2lkID0gJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJChcIiNzdWJtaXNzaW9uX2lkXCIpLmh0bWwoc3VibWlzc2lvbl9pZCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNjYm94TG9hZGVkQ29udGVudCAudW5hbm9ueW1pc2VfZm9ybScpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2lkX3JldmVhbCcpLnVuYmluZChcImNsaWNrXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjaWRfcmV2ZWFsJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGFUeXBlXCI6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1cmxcIjogXCJhamF4LnBocFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJyZXZlYWxfc3VibWlzc2lvbl9uYW1lXCIsIGFzc2lnbm1lbnQ6IGFzc2lnbm1lbnRfaWQsIHN1Ym1pc3Npb25faWQ6IHN1Ym1pc3Npb25faWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogZW5jb2RlVVJJQ29tcG9uZW50KCQoXCIjaWRfYW5vbnltb3VzX3JldmVhbF9yZWFzb25cIikudmFsKCkpLCBzZXNza2V5OiBNLmNmZy5zZXNza2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmFsKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuY29sb3Jib3guY2xvc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3N1Ym1pc3Npb25fJyArIHN1Ym1pc3Npb25faWQpLmF0dHIoJ2hyZWYnLCBNLmNmZy53d3dyb290ICsgXCIvdXNlci92aWV3LnBocD9pZD1cIiArIGRhdGEudXNlcmlkICsgXCImY291cnNlPVwiICsgZGF0YS5jb3Vyc2VpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc3VibWlzc2lvbl8nICsgc3VibWlzc2lvbl9pZCkuaHRtbChkYXRhLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3N1Ym1pc3Npb25fJyArIHN1Ym1pc3Npb25faWQpLnJlbW92ZUNsYXNzKCd1bmFub255bWlzZSBjYm94RWxlbWVudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfbXNnID0gJCgnI3VuYW5vbnltaXNlX2Rlc2MnKS5odG1sO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3VuYW5vbnltaXNlX2Rlc2MnKS5odG1sKGN1cnJlbnRfbXNnICsgXCIgXCIgKyBkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNsZWFudXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnVuYW5vbnltaXNlX2Zvcm0nKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXNlVXBsb2FkQm94KHNjb3BlLCBzdWJtaXNzaW9uX2lkLCBwYXJ0X2lkLCB1c2VyX2lkKSB7XG4gICAgICAgICAgICB2YXIgaWRlbnRpZmllciA9IFwiLnVwbG9hZF9ib3hcIjtcbiAgICAgICAgICAgIGlmIChzY29wZSA9PSBcInJvd1wiKSB7XG4gICAgICAgICAgICAgICAgaWRlbnRpZmllciA9IFwiI3VwbG9hZF9cIiArIHN1Ym1pc3Npb25faWQgKyBcIl9cIiArIHBhcnRfaWQgKyBcIl9cIiArIHVzZXJfaWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb2xvckJveFdpZHRoID0gXCI4MCVcIjtcbiAgICAgICAgICAgIHZhciBjb2xvckJveEhlaWdodCA9IFwiODAlXCI7XG5cbiAgICAgICAgICAgICQoaWRlbnRpZmllcikuY29sb3Jib3goe1xuICAgICAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBnZXRMb2FkaW5nR2lmKCk7XG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0Qm94Q2xvc2VCdXR0b24oKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNsb3NlZDogZnVuY3Rpb24gKCkgeyBoaWRlTG9hZGluZ0dpZigpOyB9LFxuICAgICAgICAgICAgICAgIG9uQ2xlYW51cDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZ0dpZigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWRTdHIgPSAkKHRoaXMpLmF0dHIoXCJpZFwiKS5zcGxpdChcIl9cIik7XG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hJbmJveFJvdyhcInVwbG9hZFwiLCBpZFN0clsxXSwgaWRTdHJbMl0sIGlkU3RyWzNdKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCcjdGlpX2Nsb3NlX2JhcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaWZyYW1lOiB0cnVlLCB3aWR0aDogY29sb3JCb3hXaWR0aCwgaGVpZ2h0OiBjb2xvckJveEhlaWdodCwgb3BhY2l0eTogXCIwLjdcIiwgY2xhc3NOYW1lOiBcInVwbG9hZFwiLCB0cmFuc2l0aW9uOiBcIm5vbmVcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbml0aWFsaXNlIHRoZSBldmVudHMgdG8gb3BlbiB0aGUgemlwIGZpbGVzIGNvbnRhaW5lZCBpbiB0aGUgcGFydCBkZXRhaWxzIGluZm9ybWF0aW9uIHRhYmxlOlxuICAgICAgICAvLyBJbmJveCBpbiBYTFMgZm9ybWF0XG4gICAgICAgIC8vIFpJUCBjb250YWluaW5nIGFsbCBmaWxlcyBhcyBQREZzXG4gICAgICAgIC8vIFpJUCBjb250YWluaW5nIGFsbCBmaWxlcyBpbiBvcmlnaW5hbCBmb3JtYXQuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpc2VaaXBEb3dubG9hZHMocGFydF9pZCkge1xuICAgICAgICAgICAgLy8gVW5iaW5kIHRoZSBldmVudCBmaXJzdCB0byBzdG9wIGl0IGJlaW5nIGJpbmRlZCBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAgICAgICQoJyN0YWJzLScgKyBwYXJ0X2lkICsgJyAub3JpZ196aXBfb3BlbiwgI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5wZGZfemlwX29wZW4sICN0YWJzLScgKyBwYXJ0X2lkICsgJyAueGxzX2luYm94X29wZW4nKS51bmJpbmQoXCJjbGlja1wiKTtcblxuICAgICAgICAgICAgLy8gT3BlbiBhIHNwcmVhZHNoZWV0IG9yIGEgemlwIGZpbGUgY29udGFpbmluZyBhbGwgdGhlIHJlbGV2YW50IGRhdGEuXG4gICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLm9yaWdfemlwX29wZW4sICN0YWJzLScgKyBwYXJ0X2lkICsgJyAucGRmX3ppcF9vcGVuLCAjdGFicy0nICsgcGFydF9pZCArICcgLnhsc19pbmJveF9vcGVuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpZFN0ciA9ICQodGhpcykuYXR0cihcImlkXCIpLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgICAgICBkb3dubG9hZFppcEZpbGUoaWRTdHJbMF0gKyBcIl9cIiArIGlkU3RyWzFdLCBpZFN0clsyXSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gT3BlbiBhbiBpZnJhbWUgbGlnaHQgYm94IHdoaWNoIHJlcXVlc3RzIGFsbCB0aGUgc3VibWlzc2lvbnMgYXMgcGRmcyBmcm9tIFR1cm5pdGluLlxuICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5kb3dubG9hZHBkZl9ib3gnKS5jb2xvcmJveCh7XG4gICAgICAgICAgICAgICAgaWZyYW1lOiB0cnVlLCB3aWR0aDogXCI0MCVcIiwgaGVpZ2h0OiBcIjYwJVwiLCBvcGFjaXR5OiBcIjAuN1wiLCBjbGFzc05hbWU6IFwiZG93bmxvYWRwZGZfd2luZG93XCIsIHRyYW5zaXRpb246IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBsaWdodEJveENsb3NlQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGdldExvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ2xlYW51cDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGlpX2Nsb3NlX2JhcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZ0dpZigpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DbG9zZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFVzZXJNZXNzYWdlcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBPcGVuIGFuIGlmcmFtZSBsaWdodCBib3ggd2hpY2ggcmVxdWVzdHMgc2VsZWN0ZWQgc3VibWlzc2lvbnMgYXMgcGRmcyBmcm9tIFR1cm5pdGluLlxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0YWJzLScgKyBwYXJ0X2lkICsgJyAuZ21wZGZ6aXBfYm94JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbjogdHJ1ZSwgaWZyYW1lOiB0cnVlLCB3aWR0aDogXCI3ODZweFwiLCBoZWlnaHQ6IFwiMzAwcHhcIiwgb3BhY2l0eTogXCIwLjdcIiwgY2xhc3NOYW1lOiBcImdtcGRmemlwX3dpbmRvd1wiLCB0cmFuc2l0aW9uOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Ym1pc3Npb25faWRzID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5pbmJveF9jaGVja2JveDpjaGVja2VkJykuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25faWRzICs9IFwiJnN1Ym1pc3Npb25faWRcIiArIGkgKyBcIj1cIiArICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmF0dHIoJ2hyZWYnKSArIHN1Ym1pc3Npb25faWRzO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHsgZ2V0TG9hZGluZ0dpZigpOyB9LFxuICAgICAgICAgICAgICAgICAgICBvbkNsZWFudXA6IGZ1bmN0aW9uICgpIHsgaGlkZUxvYWRpbmdHaWYoKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgb25DbG9zZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hVc2VyTWVzc2FnZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbGlnaHRCb3hDbG9zZUJ1dHRvbigpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJ0aWlfY2xvc2VfYmFyXCI+PGEgaHJlZj1cIiNcIiBvbmNsaWNrPVwialF1ZXJ5KFxcJyNjYm94Q2xvc2VcXCcpLmNsaWNrKCk7IHJldHVybiBmYWxzZTtcIj4nICsgTS5zdHIudHVybml0aW50b29sdHdvLmNsb3NlYnV0dG9uICsgJzwvYT48L2Rpdj4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpc2VEaWdpdGFsUmVjZWlwdCgpIHtcbiAgICAgICAgICAgIGlmICgkKCcudGlpX2RpZ2l0YWxfcmVjZWlwdCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcudGlpX2RpZ2l0YWxfcmVjZWlwdCcpLmNvbG9yYm94KHtcbiAgICAgICAgICAgICAgICAgICAgaWZyYW1lOiB0cnVlLCB3aWR0aDogXCI4MzJweFwiLCBoZWlnaHQ6IFwiNDgycHhcIiwgb3BhY2l0eTogXCIwLjdcIiwgY2xhc3NOYW1lOiBcInJ1YnJpY192aWV3XCIsIHRyYW5zaXRpb246IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Qm94Q2xvc2VCdXR0b24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldExvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25DbGVhbnVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjdGlpX2Nsb3NlX2JhcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmdHaWYoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgJCgnI3RpaV9yZWNlaXB0X3ByaW50JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LnByaW50KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpc2VIaWRkZW5aaXBEb3dubG9hZHMocGFydF9pZCkge1xuICAgICAgICAgICAgLy8gVW5iaW5kIHRoZSBldmVudCBmaXJzdCB0byBzdG9wIGl0IGJlaW5nIGJpbmRlZCBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAgICAgICQoJyN0YWJzLScgKyBwYXJ0X2lkICsgJyAub3JpZ2NoZWNrZWRfemlwX29wZW4nKS51bmJpbmQoXCJjbGlja1wiKTtcbiAgICAgICAgICAgIC8vIFNlcGVyYXRlIGJpbmRlciBmb3IgaGlkZGVuIHppcCBmaWxlIGxpbmsuXG4gICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLm9yaWdjaGVja2VkX3ppcF9vcGVuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpZFN0ciA9ICQodGhpcykuYXR0cihcImlkXCIpLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgICAgICBkb3dubG9hZFppcEZpbGUoaWRTdHJbMF0gKyBcIl9cIiArIGlkU3RyWzFdLCBwYXJ0X2lkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpc2VSZWZyZXNoUm93KHNjb3BlLCBzdWJtaXNzaW9uX2lkLCBwYXJ0X2lkLCB1c2VyX2lkKSB7XG4gICAgICAgICAgICB2YXIgaWRlbnRpZmllciA9IFwiLnJlZnJlc2hfcm93IC5mYS1yZWZyZXNoXCI7XG4gICAgICAgICAgICBpZiAoc2NvcGUgPT0gXCJyb3dcIikge1xuICAgICAgICAgICAgICAgIGlkZW50aWZpZXIgPSBcIiNyZWZyZXNocm93X1wiICsgc3VibWlzc2lvbl9pZCArICdfJyArIHBhcnRfaWQgKyBcIl9cIiArIHVzZXJfaWQgKyBcIiAuZmEtcmVmcmVzaFwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVbmJpbmQgdGhlIGV2ZW50IGZpcnN0IHRvIHN0b3AgaXQgYmVpbmcgYmluZGVkIG11bHRpcGxlIHRpbWVzLlxuICAgICAgICAgICAgJChpZGVudGlmaWVyKS51bmJpbmQoXCJjbGlja1wiKTtcblxuICAgICAgICAgICAgJChpZGVudGlmaWVyKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmZhLXNwaW5uZXInKS5jc3MoXCJkaXNwbGF5XCIsIFwiaW5saW5lLWJsb2NrXCIpLmFkZENsYXNzKCdmYS1sZycpO1xuICAgICAgICAgICAgICAgIHZhciBpZFN0ciA9ICQodGhpcykucGFyZW50KCkuYXR0cihcImlkXCIpLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgICAgICByZWZyZXNoSW5ib3hSb3coaWRTdHJbMF0sIGlkU3RyWzFdLCBpZFN0clsyXSwgaWRTdHJbM10pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbml0aWFsaXNlIHRoZSBldmVudHMgdG8gb3BlbiB0aGUgZG9jdW1lbnQgdmlld2VyIGFzIHRoZSBsaW5rcyBhcmUgbG9hZGVkIGFmdGVyIHRoZSBwYWdlLlxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXNlRFZMYXVuY2hlcnMoc2NvcGUsIHN1Ym1pc3Npb25faWQsIHBhcnRfaWQsIHVzZXJfaWQpIHtcbiAgICAgICAgICAgIHZhciBpZGVudGlmaWVyID0gJyMnICsgcGFydF9pZCArICcgLmRvd25sb2FkX29yaWdpbmFsX29wZW4nO1xuICAgICAgICAgICAgaWYgKHNjb3BlID09IFwicm93XCIpIHtcbiAgICAgICAgICAgICAgICBpZGVudGlmaWVyID0gJyNkb3dubG9hZG9yaWdpbmFsXycgKyBzdWJtaXNzaW9uX2lkICsgJ18nICsgcGFydF9pZCArICdfJyArIHVzZXJfaWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVuYmluZCB0aGUgZXZlbnQgZmlyc3QgdG8gc3RvcCBpdCBiZWluZyBiaW5kZWQgbXVsdGlwbGUgdGltZXMuXG4gICAgICAgICAgICAkKGlkZW50aWZpZXIpLnVuYmluZChcImNsaWNrXCIpO1xuXG4gICAgICAgICAgICAkKGlkZW50aWZpZXIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWRTdHIgPSAkKHRoaXMpLmF0dHIoXCJpZFwiKS5zcGxpdChcIl9cIik7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3Qgb3BlbiBPUiBEViBpZiBzY29yZSBpcyBwZW5kaW5nLlxuICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5jaGlsZHJlbignLnNjb3JlX2NvbG91cicpLmhhc0NsYXNzKCdzY29yZV9jb2xvdXJfJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRPcmlnaW5hbEZpbGUoaWRTdHJbMF0sIGlkU3RyWzFdLCBpZFN0clsyXSwgaWRTdHJbM10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHV0IHRoZSBmb3JtIGluIHRvIHRoZSBzdWJtaXNzaW9ucyB0YWJsZSByb3cgYW5kIHN1Ym1pdCBpdC5cbiAgICAgICAgLy8gVGhpcyB3aWxsIGRvd25sb2FkIHRoZSByZWxldmFudCB6aXAgZmlsZS5cbiAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRaaXBGaWxlKGRvd25sb2FkdHlwZSwgcGFydF9pZCkge1xuICAgICAgICAgICAgdmFyIHN1Ym1pc3Npb25faWRzID0gW107XG5cbiAgICAgICAgICAgIGlmIChkb3dubG9hZHR5cGUgPT0gXCJvcmlnY2hlY2tlZF96aXBcIiB8fCBkb3dubG9hZHR5cGUgPT0gXCJnbXBkZl96aXBcIikge1xuICAgICAgICAgICAgICAgICQoJyN0YWJzLScgKyBwYXJ0X2lkICsgJyAuaW5ib3hfY2hlY2tib3g6Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VibWlzc2lvbl9pZHNbaV0gPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIHVybDogXCJhamF4LnBocFwiLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcbiAgICAgICAgICAgICAgICBkYXRhOiB7IGFjdGlvbjogZG93bmxvYWR0eXBlLCBhc3NpZ25tZW50OiAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSwgcGFydDogcGFydF9pZCwgc3VibWlzc2lvbl9pZHM6IHN1Ym1pc3Npb25faWRzIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNcIiArIGRvd25sb2FkdHlwZSArIFwiX2Zvcm1fXCIgKyBwYXJ0X2lkKS5odG1sKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI1wiICsgZG93bmxvYWR0eXBlICsgXCJfZm9ybV9cIiArIHBhcnRfaWQpLmNoaWxkcmVuKFwiZm9ybVwiKS5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNcIiArIGRvd25sb2FkdHlwZSArIFwiX2Zvcm1fXCIgKyBwYXJ0X2lkKS5odG1sKFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHV0IHRoZSBmb3JtIGluIHRvIHRoZSBzdWJtaXNzaW9ucyB0YWJsZSByb3cgYW5kIHN1Ym1pdCBpdC5cbiAgICAgICAgLy8gVGhpcyB3aWxsIGRvd25sb2FkIHRoZSByZWxldmFudCBvcmlnaW5hbCBmaWxlLlxuICAgICAgICBmdW5jdGlvbiBkb3dubG9hZE9yaWdpbmFsRmlsZShkdnR5cGUsIHN1Ym1pc3Npb25faWQsIHBhcnRfaWQsIHVzZXJfaWQpIHtcbiAgICAgICAgICAgIC8vIEdldCBodG1sIHRvIGxhdW5jaCBEVi5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiBNLmNmZy53d3dyb290ICsgXCIvbW9kL3R1cm5pdGludG9vbHR3by9hamF4LnBocFwiLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcbiAgICAgICAgICAgICAgICBkYXRhOiB7IGFjdGlvbjogZHZ0eXBlLCBzdWJtaXNzaW9uOiBzdWJtaXNzaW9uX2lkLCBhc3NpZ25tZW50OiAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjXCIgKyBkdnR5cGUgKyBcIl9mb3JtX1wiICsgc3VibWlzc2lvbl9pZCkuaHRtbChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNcIiArIGR2dHlwZSArIFwiX2Zvcm1fXCIgKyBzdWJtaXNzaW9uX2lkKS5jaGlsZHJlbihcImZvcm1cIikuc3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjXCIgKyBkdnR5cGUgKyBcIl9mb3JtX1wiICsgc3VibWlzc2lvbl9pZCkuaHRtbChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlIERWIGlzIHN0aWxsIG9wZW4sIHJlZnJlc2ggdGhlIG9wZW5pbmcgd2luZG93IHdoZW4gaXQgY2xvc2VzLlxuICAgICAgICBmdW5jdGlvbiBjaGVja0RWQ2xvc2VkKHBhcnRfaWQpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuZHZXaW5kb3cuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgJChcIiNyZWZyZXNoX1wiICsgcGFydF9pZCkuY2xpY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrRFZDbG9zZWQocGFydF9pZCk7XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluaXRpYXRlIGEgbm90aGluZyBzdWJtaXNzaW9uLlxuICAgICAgICBmdW5jdGlvbiBzdWJtaXROb3RoaW5nKHVzZXJfaWQsIHBhcnRfaWQpIHtcbiAgICAgICAgICAgICQoXCIjc3VibWl0bm90aGluZ18wX1wiICsgcGFydF9pZCArIFwiX1wiICsgdXNlcl9pZCArIFwiIGlcIikuYXR0cignY2xhc3MnLCAnZmEgZmEtc3BpbiBmYS1zcGlubmVyIGZhLWxnJyk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIHVybDogXCJhamF4LnBocFwiLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJzdWJtaXRfbm90aGluZ1wiLCBhc3NpZ25tZW50OiAkKCcjYXNzaWdubWVudF9pZCcpLmh0bWwoKSxcbiAgICAgICAgICAgICAgICAgICAgcGFydDogcGFydF9pZCwgdXNlcjogdXNlcl9pZCwgc2Vzc2tleTogTS5jZmcuc2Vzc2tleVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZhbChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgJC5jb29raWUoJ3N1Ym1pdG5vdGhpbmdhY2NlcHQnLCB0cnVlLCB7IGV4cGlyZXM6IDM2NSB9KTtcbiAgICAgICAgICAgICAgICAgICAgJCgndGFibGUjJyArIHBhcnRfaWQgKyAnIC5zZWxlY3RfYWxsX2NoZWNrYm94JykuYXR0cignY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3N1Ym1pdG5vdGhpbmdfMF9cIiArIHBhcnRfaWQgKyBcIl9cIiArIHVzZXJfaWQgKyBcIiBpXCIpLmF0dHIoJ2NsYXNzJywgJ2ZhIGZhLXBlbmNpbCBmYS1sZycpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3N1Ym1pdG5vdGhpbmdfMF9cIiArIHBhcnRfaWQgKyBcIl9cIiArIHVzZXJfaWQpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBhbGVydChkYXRhLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZWZyZXNoSW5ib3hSb3coJ3N1Ym1pdG5vdGhpbmcnLCAwLCBwYXJ0X2lkLCB1c2VyX2lkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlZnJlc2ggYSByb3cgaW4gdGhlIGluYm94IGFmdGVyIGEgc3VibWlzc2lvbiBoYXMgYmVlbiBtYWRlIG9yIERWIGNsb3NlZC5cbiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaEluYm94Um93KGxpbmssIHN1Ym1pc3Npb25faWQsIHBhcnRfaWQsIHVzZXJfaWQpIHtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiBcImFqYXgucGhwXCIsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcInJlZnJlc2hfc3VibWlzc2lvbl9yb3dcIiwgYXNzaWdubWVudDogJCgnI2Fzc2lnbm1lbnRfaWQnKS5odG1sKCksXG4gICAgICAgICAgICAgICAgICAgIHBhcnQ6IHBhcnRfaWQsIHVzZXI6IHVzZXJfaWQsIHNlc3NrZXk6IE0uY2ZnLnNlc3NrZXlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ3RhYmxlIycgKyBwYXJ0X2lkICsgJyAuc2VsZWN0X2FsbF9jaGVja2JveCcpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGV2YWwoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Ym1pc3Npb25faWQgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluayArPSBcIl8wXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uX2lkID0gZGF0YS5zdWJtaXNzaW9uX2lkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuc3VibWlzc2lvbl9pZCA9PSBudWxsICYmIHN1Ym1pc3Npb25faWQgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluayA9IGxpbmsgKyBcIl9cIiArIHN1Ym1pc3Npb25faWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gbGluayArIFwiX1wiICsgZGF0YS5zdWJtaXNzaW9uX2lkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3cgZXhwb3J0IGxpbmtzLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VibWlzc2lvbl9pZCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjZXhwb3J0X2xpbmtzJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbl9jbGFzcycpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIHRoZSByb3cgYW5kIHJlLWFkZC5cbiAgICAgICAgICAgICAgICAgICAgb1RhYmxlID0gJCgndGFibGUjJyArIHBhcnRfaWQpLmRhdGFUYWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHIgPSAkKFwiI1wiICsgbGluayArIFwiX1wiICsgcGFydF9pZCArICdfJyArIHVzZXJfaWQpLnBhcmVudCgpLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93aW5kZXggPSB0ci5pbmRleCgpO1xuICAgICAgICAgICAgICAgICAgICBvVGFibGUuZm5EZWxldGVSb3codHIpO1xuICAgICAgICAgICAgICAgICAgICBvVGFibGUuZm5BZGREYXRhKGRhdGEucm93KTtcblxuICAgICAgICAgICAgICAgICAgICBzdWJtaXRWaXNpYmlsaXR5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGlzZVVwbG9hZEJveChcInJvd1wiLCBkYXRhLnN1Ym1pc3Npb25faWQsIHBhcnRfaWQsIHVzZXJfaWQpO1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXNlRFZMYXVuY2hlcnMoXCJyb3dcIiwgZGF0YS5zdWJtaXNzaW9uX2lkLCBwYXJ0X2lkLCB1c2VyX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGlzZVJlZnJlc2hSb3coXCJyb3dcIiwgZGF0YS5zdWJtaXNzaW9uX2lkLCBwYXJ0X2lkLCB1c2VyX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGlzZUNoZWNrYm94ZXMoZGF0YS5zdWJtaXNzaW9uX2lkLCBwYXJ0X2lkKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGlzZVVuYW5veW1pc2VGb3JtKFwicm93XCIsICQoJyNhc3NpZ25tZW50X2lkJykuaHRtbCgpLCBkYXRhLnN1Ym1pc3Npb25faWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvdyBkb3dubG9hZCBsaW5rcyB3aGVuIGNoZWNrYm94ZXMgaGF2ZSBiZWVuIHRpY2tlZC5cbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGlzZUNoZWNrYm94ZXMoc3VibWlzc2lvbl9pZCwgcGFydF9pZCkge1xuICAgICAgICAgICAgdmFyIGlkZW50aWZpZXIgPSAnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5pbmJveF9jaGVja2JveCc7XG4gICAgICAgICAgICBpZiAoc3VibWlzc2lvbl9pZCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgaWRlbnRpZmllciA9ICdjaGVja18nICsgc3VibWlzc2lvbl9pZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5pbmJveF9jaGVja2JveCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKCd0YWJsZSMnICsgcGFydF9pZCArICcgLnNlbGVjdF9hbGxfY2hlY2tib3gnKS5hdHRyKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGlkZW50aWZpZXIgKyAnLCAuc2VsZWN0X2FsbF9jaGVja2JveCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC5pbmJveF9jaGVja2JveDpjaGVja2VkJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLnppcF9kb3dubG9hZHMgYnV0dG9uJykucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RhYnMtJyArIHBhcnRfaWQgKyAnIC56aXBfZG93bmxvYWRzIGJ1dHRvbicpLnJlbW92ZUF0dHIoXCJ0aXRsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGlzZUhpZGRlblppcERvd25sb2FkcyhwYXJ0X2lkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLm9yaWdjaGVja2VkX3ppcF9vcGVuJykudW5iaW5kKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLnppcF9kb3dubG9hZHMgYnV0dG9uJykucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGFicy0nICsgcGFydF9pZCArICcgLnppcF9kb3dubG9hZHMgYnV0dG9uJykucHJvcChcInRpdGxlXCIsIE0uc3RyLnR1cm5pdGludG9vbHR3by5kb3dubG9hZF9idXR0b25fd2FybmluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IHRoZSBkYXRlIGFuZCBtYXJrcyBvcHRpb25zIGZvciB0aGUgcmVsZXZhbnQgbnVtYmVyIG9mIHBhcnRzIHdoZW4gY3JlYXRpbmcvZWRpdGluZyBhc3NpZ25tZW50LlxuICAgICAgICBmdW5jdGlvbiBzaG93UGFydERhdGVzQm94ZXMoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSA1OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8PSAkKFwiI2lkX251bXBhcnRzXCIpLnZhbCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ2ZpZWxkc2V0W2lkJD1cInBhcnRkYXRlcycgKyBpICsgJ1wiXScpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ2ZpZWxkc2V0W2lkJD1cInBhcnRkYXRlcycgKyBpICsgJ1wiXScpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkKCcuc2VsZWN0X2FsbF9jaGVja2JveCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuYXR0cignaWQnKTtcblxuICAgICAgICAgICAgaWYgKCQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCgnIycgKyBpZCArICcgLmluYm94X2NoZWNrYm94JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0YWJzLScgKyBpZCArICcgLnppcF9kb3dubG9hZHMgYnV0dG9uJykucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RhYnMtJyArIGlkICsgJyAuemlwX2Rvd25sb2FkcyBidXR0b24nKS5yZW1vdmVBdHRyKFwidGl0bGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJyMnICsgaWQgKyAnIC5pbmJveF9jaGVja2JveCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnIycgKyBpZCArICcgLmluYm94X2NoZWNrYm94JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoJCgnIycgKyBpZCArICcgLmluYm94X2NoZWNrYm94JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0YWJzLScgKyBpZCArICcgLnppcF9kb3dubG9hZHMgYnV0dG9uJykucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGFicy0nICsgaWQgKyAnIC56aXBfZG93bmxvYWRzIGJ1dHRvbicpLnByb3AoXCJ0aXRsZVwiLCBNLnN0ci50dXJuaXRpbnRvb2x0d28uZG93bmxvYWRfYnV0dG9uX3dhcm5pbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2V0dGluZ3MgcGFnZSBwYXJ0cyB3YXJuaW5nLlxuICAgICAgICAkKCdbaWRePWZpdGVtX2lkX2R0cG9zdF0gc2VsZWN0JykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIEdldCBwYXJ0IGlkIGZyb20gdGl0bGUuXG4gICAgICAgICAgICB2YXIgZGF0YUVsID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKTtcbiAgICAgICAgICAgIHZhciBwb3N0X2RhdGUgPSBidWlsZFVuaXhEYXRlKCcjZml0ZW1faWRfZHRwb3N0JywgZGF0YUVsLmRhdGEoJ3BhcnRJZCcpKTtcblxuICAgICAgICAgICAgaWYgKHBvc3RfZGF0ZSA8IG1vbWVudCgpLnVuaXgoKSAmJiBkYXRhRWwuZGF0YSgnYW5vbicpID09IDEgJiYgZGF0YUVsLmRhdGEoJ3VuYW5vbicpID09IDAgJiYgZGF0YUVsLmRhdGEoJ3N1Ym1pdHRlZCcpID09IDEpIHtcbiAgICAgICAgICAgICAgICBhbGVydChNLnN0ci50dXJuaXRpbnRvb2x0d28uYW5vbmFsZXJ0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgYnVpbGRVbml4RGF0ZSA9IGZ1bmN0aW9uIChlbCwgcGFydF9pZCkge1xuICAgICAgICAgICAgLy8gT3B0aW9uIGlkJ3MuXG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBbJ19kYXknLCAnX21vbnRoJywgJ195ZWFyJywgJ19ob3VyJywgJ19taW51dGUnXTtcblxuICAgICAgICAgICAgJHRoaXMgPSAkKGVsICsgcGFydF9pZCk7XG5cbiAgICAgICAgICAgIC8vIEJ1aWxkIGRhdGU6dGltZSBzdHJpbmcuXG4gICAgICAgICAgICB2YXIgZGF0ZSA9ICcnO1xuICAgICAgICAgICAgJC5lYWNoKHN0YXJ0LCBmdW5jdGlvbiAoaywgdikge1xuICAgICAgICAgICAgICAgIGRhdGUgKz0gJHRoaXMuZmluZCgnW2lkJD0nICsgcGFydF9pZCArIHYgKyAnXSBvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHYgPT09ICdfeWVhcicpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSArPSAnICc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2ID09PSAnX2hvdXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGUgKz0gJzonO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodiAhPT0gJ19taW51dGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGUgKz0gJy0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZXR1cm4gY29udmVydGVkIG1vbWVudCBvYmplY3QuXG4gICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGUsIFwiREQtTU1NTS1ZWVlZIGhoOm1tXCIpLnVuaXgoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSkoalF1ZXJ5KTtcbiJdfQ==
