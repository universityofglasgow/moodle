{{=<% %>=}}

<%> local_xp/mobile-css %>

<style>
.mma-xp-ladder .mma-xp-item-ladder {
    border-left: 5px solid transparent;
}
.mma-xp-ladder .mma-xp-item-ladder.is-mine {
    border-color: #41c2ff;
}
.mma-xp-item-ladder [slot=end] + [slot=end] {
    margin-left: 16px;
}
</style>

<%#tabs%>
    <%> local_xp/mobile-tabs %>
<%/tabs%>

<%#ladder%>
<div class="mma-xp-ladder ion-margin-bottom">
    <ion-list>
        <%#hasbefore%>
            <ion-item>
                <ion-button class="prev-page ion-no-margin" fill="clear" expand="full" core-site-plugins-new-content component="local_xp" method="group_ladder_page" samePage="true" [args]="{courseid: <% courseid %>, page: <% prevpage %>}"><%#str%>previous, core<%/str%></ion-button>
            </ion-item>
        <%/hasbefore%>

        <%#ranking%>
            <ion-item class="mma-xp-item-ladder <%#state.subject.ismine%>is-mine<%/state.subject.ismine%>">

                <div class="rank" slot="start"><% rank %>.</div>

                <%#state.subject%>
                    <%#imageurl%>
                    <ion-avatar slot="start">
                        <img src="<% imageurl %>" core-external-content alt="">
                    </ion-avatar>
                    <%/imageurl%>
                    <core-format-text text="<% name %>" component="local_xp"></core-format-text>
                <%/state.subject%>

                <%#showpoints%>
                <div slot="end">
                    <%#state.xp%>
                        <%> local_xp/mobile-xp %>
                    <%/state.xp%>
                    <%^state.xp%>
                        <%> local_xp/mobile-xp-zero %>
                    <%/state.xp%>
                </div>
                <%/showpoints%>

                <%#showprogress%>
                <div slot="end" style="min-width: 90px; max-width: 20%">
                    <%> local_xp/mobile-progress %>
                </div>
                <%/showprogress%>

            </ion-item>
        <%/ranking%>

        <%#hasmore%>
            <ion-item>
                <ion-button class="next-page ion-no-margin" fill="clear" expand="full" core-site-plugins-new-content component="local_xp" method="group_ladder_page" samePage="true" [args]="{courseid: <% courseid %>, page: <% nextpage %>}"><%#str%>next, core<%/str%></ion-button>
            </ion-item>
        <%/hasmore%>
    </ion-list>
</div>
<%/ladder%>
