function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e3){didErr=!0,err=_e3},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet),privateSet.add(obj)}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap),privateMap.set(obj,value)}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(receiver,classConstructor,method){return function(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}(receiver,classConstructor),method}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}define("mod_pdfannotator/pdf_viewer",[],(function(){return function(){var __webpack_modules__=[,function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultXfaLayerFactory=exports.DefaultTextLayerFactory=exports.DefaultStructTreeLayerFactory=exports.DefaultAnnotationLayerFactory=void 0;var _annotation_layer_builder=__w_pdfjs_require__(2),_l10n_utils=__w_pdfjs_require__(4),_pdf_link_service=__w_pdfjs_require__(5),_struct_tree_layer_builder=__w_pdfjs_require__(7),_text_layer_builder=__w_pdfjs_require__(8),_xfa_layer_builder=__w_pdfjs_require__(9),DefaultAnnotationLayerFactory=function(){function DefaultAnnotationLayerFactory(){_classCallCheck(this,DefaultAnnotationLayerFactory)}return _createClass(DefaultAnnotationLayerFactory,[{key:"createAnnotationLayerBuilder",value:function(pageDiv,pdfPage){var annotationStorage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,imageResourcesPath=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",renderForms=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l10n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_l10n_utils.NullL10n,enableScripting=arguments.length>6&&void 0!==arguments[6]&&arguments[6],hasJSActionsPromise=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,mouseState=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,fieldObjectsPromise=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,annotationCanvasMap=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return new _annotation_layer_builder.AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,imageResourcesPath:imageResourcesPath,renderForms:renderForms,linkService:new _pdf_link_service.SimpleLinkService,l10n:l10n,annotationStorage:annotationStorage,enableScripting:enableScripting,hasJSActionsPromise:hasJSActionsPromise,fieldObjectsPromise:fieldObjectsPromise,mouseState:mouseState,annotationCanvasMap:annotationCanvasMap})}}]),DefaultAnnotationLayerFactory}();exports.DefaultAnnotationLayerFactory=DefaultAnnotationLayerFactory;var DefaultStructTreeLayerFactory=function(){function DefaultStructTreeLayerFactory(){_classCallCheck(this,DefaultStructTreeLayerFactory)}return _createClass(DefaultStructTreeLayerFactory,[{key:"createStructTreeLayerBuilder",value:function(pdfPage){return new _struct_tree_layer_builder.StructTreeLayerBuilder({pdfPage:pdfPage})}}]),DefaultStructTreeLayerFactory}();exports.DefaultStructTreeLayerFactory=DefaultStructTreeLayerFactory;var DefaultTextLayerFactory=function(){function DefaultTextLayerFactory(){_classCallCheck(this,DefaultTextLayerFactory)}return _createClass(DefaultTextLayerFactory,[{key:"createTextLayerBuilder",value:function(textLayerDiv,pageIndex,viewport){var enhanceTextSelection=arguments.length>3&&void 0!==arguments[3]&&arguments[3],eventBus=arguments.length>4?arguments[4]:void 0,highlighter=arguments.length>5?arguments[5]:void 0;return new _text_layer_builder.TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport,enhanceTextSelection:enhanceTextSelection,eventBus:eventBus,highlighter:highlighter})}}]),DefaultTextLayerFactory}();exports.DefaultTextLayerFactory=DefaultTextLayerFactory;var DefaultXfaLayerFactory=function(){function DefaultXfaLayerFactory(){_classCallCheck(this,DefaultXfaLayerFactory)}return _createClass(DefaultXfaLayerFactory,[{key:"createXfaLayerBuilder",value:function(pageDiv,pdfPage){var annotationStorage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,xfaHtml=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new _xfa_layer_builder.XfaLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,annotationStorage:annotationStorage,linkService:new _pdf_link_service.SimpleLinkService,xfaHtml:xfaHtml})}}]),DefaultXfaLayerFactory}();exports.DefaultXfaLayerFactory=DefaultXfaLayerFactory},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(3),_l10n_utils=__w_pdfjs_require__(4),AnnotationLayerBuilder=function(){function AnnotationLayerBuilder(_ref){var pageDiv=_ref.pageDiv,pdfPage=_ref.pdfPage,linkService=_ref.linkService,downloadManager=_ref.downloadManager,_ref$annotationStorag=_ref.annotationStorage,annotationStorage=void 0===_ref$annotationStorag?null:_ref$annotationStorag,_ref$imageResourcesPa=_ref.imageResourcesPath,imageResourcesPath=void 0===_ref$imageResourcesPa?"":_ref$imageResourcesPa,_ref$renderForms=_ref.renderForms,renderForms=void 0===_ref$renderForms||_ref$renderForms,_ref$l10n=_ref.l10n,l10n=void 0===_ref$l10n?_l10n_utils.NullL10n:_ref$l10n,_ref$enableScripting=_ref.enableScripting,enableScripting=void 0!==_ref$enableScripting&&_ref$enableScripting,_ref$hasJSActionsProm=_ref.hasJSActionsPromise,hasJSActionsPromise=void 0===_ref$hasJSActionsProm?null:_ref$hasJSActionsProm,_ref$fieldObjectsProm=_ref.fieldObjectsPromise,fieldObjectsPromise=void 0===_ref$fieldObjectsProm?null:_ref$fieldObjectsProm,_ref$mouseState=_ref.mouseState,mouseState=void 0===_ref$mouseState?null:_ref$mouseState,_ref$annotationCanvas=_ref.annotationCanvasMap,annotationCanvasMap=void 0===_ref$annotationCanvas?null:_ref$annotationCanvas;_classCallCheck(this,AnnotationLayerBuilder),this.pageDiv=pageDiv,this.pdfPage=pdfPage,this.linkService=linkService,this.downloadManager=downloadManager,this.imageResourcesPath=imageResourcesPath,this.renderForms=renderForms,this.l10n=l10n,this.annotationStorage=annotationStorage,this.enableScripting=enableScripting,this._hasJSActionsPromise=hasJSActionsPromise,this._fieldObjectsPromise=fieldObjectsPromise,this._mouseState=mouseState,this._annotationCanvasMap=annotationCanvasMap,this.div=null,this._cancelled=!1}var _render;return _createClass(AnnotationLayerBuilder,[{key:"render",value:(_render=_asyncToGenerator(regeneratorRuntime.mark((function _callee(viewport){var intent,_yield$Promise$all,_yield$Promise$all2,annotations,_yield$Promise$all2$,hasJSActions,_yield$Promise$all2$2,fieldObjects,parameters,_args=arguments;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return intent=_args.length>1&&void 0!==_args[1]?_args[1]:"display",_context.next=3,Promise.all([this.pdfPage.getAnnotations({intent:intent}),this._hasJSActionsPromise,this._fieldObjectsPromise]);case 3:if(_yield$Promise$all=_context.sent,_yield$Promise$all2=_slicedToArray(_yield$Promise$all,3),annotations=_yield$Promise$all2[0],_yield$Promise$all2$=_yield$Promise$all2[1],hasJSActions=void 0!==_yield$Promise$all2$&&_yield$Promise$all2$,_yield$Promise$all2$2=_yield$Promise$all2[2],fieldObjects=void 0===_yield$Promise$all2$2?null:_yield$Promise$all2$2,!this._cancelled&&0!==annotations.length){_context.next=12;break}return _context.abrupt("return");case 12:parameters={viewport:viewport.clone({dontFlip:!0}),div:this.div,annotations:annotations,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:hasJSActions,fieldObjects:fieldObjects,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap},this.div?_pdfjsLib.AnnotationLayer.update(parameters):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.appendChild(this.div),parameters.div=this.div,_pdfjsLib.AnnotationLayer.render(parameters),this.l10n.translate(this.div));case 14:case"end":return _context.stop()}}),_callee,this)}))),function(_x){return _render.apply(this,arguments)})},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}}]),AnnotationLayerBuilder}();exports.AnnotationLayerBuilder=AnnotationLayerBuilder},function(module){var pdfjsLib;pdfjsLib="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:require("../build/pdf.js.js"),module.exports=pdfjsLib},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.NullL10n=void 0,exports.fixupLangCode=function(langCode){return PARTIAL_LANG_CODES[null==langCode?void 0:langCode.toLowerCase()]||langCode},exports.getL10nFallback=getL10nFallback;var DEFAULT_L10N_STRINGS={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading…",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function getL10nFallback(key,args){switch(key){case"find_match_count":key="find_match_count[".concat(1===args.total?"one":"other","]");break;case"find_match_count_limit":key="find_match_count_limit[".concat(1===args.limit?"one":"other","]")}return DEFAULT_L10N_STRINGS[key]||""}var PARTIAL_LANG_CODES={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function formatL10nValue(text,args){return args?text.replace(/\{\{\s*(\w+)\s*\}\}/g,(function(all,name){return name in args?args[name]:"{{"+name+"}}"})):text}var NullL10n={getLanguage:function(){return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return","en-us");case 1:case"end":return _context2.stop()}}),_callee2)})))()},getDirection:function(){return _asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return","ltr");case 1:case"end":return _context3.stop()}}),_callee3)})))()},get:function(key){var _arguments=arguments;return _asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var args,fallback;return regeneratorRuntime.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return args=_arguments.length>1&&void 0!==_arguments[1]?_arguments[1]:null,fallback=_arguments.length>2&&void 0!==_arguments[2]?_arguments[2]:getL10nFallback(key,args),_context4.abrupt("return",formatL10nValue(fallback,args));case 3:case"end":return _context4.stop()}}),_callee4)})))()},translate:function(element){return _asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:case"end":return _context5.stop()}}),_callee5)})))()}};exports.NullL10n=NullL10n},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleLinkService=exports.PDFLinkService=exports.LinkTarget=void 0;var _ui_utils=__w_pdfjs_require__(6),LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function _addLinkAttributes(link){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},url=_ref2.url,target=_ref2.target,rel=_ref2.rel,_ref2$enabled=_ref2.enabled,enabled=void 0===_ref2$enabled||_ref2$enabled;if(!url||"string"!=typeof url)throw new Error('A valid "url" parameter must provided.');var urlNullRemoved=(0,_ui_utils.removeNullCharacters)(url);enabled?link.href=link.title=urlNullRemoved:(link.href="",link.title="Disabled: ".concat(urlNullRemoved),link.onclick=function(){return!1});var targetStr="";switch(target){case LinkTarget.NONE:break;case LinkTarget.SELF:targetStr="_self";break;case LinkTarget.BLANK:targetStr="_blank";break;case LinkTarget.PARENT:targetStr="_parent";break;case LinkTarget.TOP:targetStr="_top"}link.target=targetStr,link.rel="string"==typeof rel?rel:"noopener noreferrer nofollow"}exports.LinkTarget=LinkTarget;var _pagesRefCache=new WeakMap,_goToDestinationHelper=new WeakSet,PDFLinkService=function(){function PDFLinkService(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},eventBus=_ref3.eventBus,_ref3$externalLinkTar=_ref3.externalLinkTarget,externalLinkTarget=void 0===_ref3$externalLinkTar?null:_ref3$externalLinkTar,_ref3$externalLinkRel=_ref3.externalLinkRel,externalLinkRel=void 0===_ref3$externalLinkRel?null:_ref3$externalLinkRel,_ref3$ignoreDestinati=_ref3.ignoreDestinationZoom,ignoreDestinationZoom=void 0!==_ref3$ignoreDestinati&&_ref3$ignoreDestinati;_classCallCheck(this,PDFLinkService),_classPrivateMethodInitSpec(this,_goToDestinationHelper),_classPrivateFieldInitSpec(this,_pagesRefCache,{writable:!0,value:new Map}),this.eventBus=eventBus,this.externalLinkTarget=externalLinkTarget,this.externalLinkRel=externalLinkRel,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=ignoreDestinationZoom,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}var _goToDestination;return _createClass(PDFLinkService,[{key:"setDocument",value:function(pdfDocument){var baseUrl=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=baseUrl,this.pdfDocument=pdfDocument,_classPrivateFieldGet(this,_pagesRefCache).clear()}},{key:"setViewer",value:function(pdfViewer){this.pdfViewer=pdfViewer}},{key:"setHistory",value:function(pdfHistory){this.pdfHistory=pdfHistory}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(value){this.pdfViewer.currentPageNumber=value}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(value){this.pdfViewer.pagesRotation=value}},{key:"goToDestination",value:(_goToDestination=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(dest){var namedDest,explicitDest;return regeneratorRuntime.wrap((function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(this.pdfDocument){_context6.next=2;break}return _context6.abrupt("return");case 2:if("string"!=typeof dest){_context6.next=9;break}return namedDest=dest,_context6.next=6,this.pdfDocument.getDestination(dest);case 6:explicitDest=_context6.sent,_context6.next=13;break;case 9:return namedDest=null,_context6.next=12,dest;case 12:explicitDest=_context6.sent;case 13:if(Array.isArray(explicitDest)){_context6.next=16;break}return console.error('PDFLinkService.goToDestination: "'.concat(explicitDest,'" is not ')+'a valid destination array, for dest="'.concat(dest,'".')),_context6.abrupt("return");case 16:_classPrivateMethodGet(this,_goToDestinationHelper,_goToDestinationHelper2).call(this,dest,namedDest,explicitDest);case 17:case"end":return _context6.stop()}}),_callee6,this)}))),function(_x2){return _goToDestination.apply(this,arguments)})},{key:"goToPage",value:function(val){if(this.pdfDocument){var pageNumber="string"==typeof val&&this.pdfViewer.pageLabelToPageNumber(val)||0|val;Number.isInteger(pageNumber)&&pageNumber>0&&pageNumber<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(pageNumber)),this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber})):console.error('PDFLinkService.goToPage: "'.concat(val,'" is not a valid page.'))}}},{key:"addLinkAttributes",value:function(link,url){var newWindow=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_addLinkAttributes(link,{url:url,target:newWindow?LinkTarget.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}},{key:"getDestinationHash",value:function(dest){if("string"==typeof dest){if(dest.length>0)return this.getAnchorUrl("#"+escape(dest))}else if(Array.isArray(dest)){var str=JSON.stringify(dest);if(str.length>0)return this.getAnchorUrl("#"+escape(str))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(anchor){return(this.baseUrl||"")+anchor}},{key:"setHash",value:function(hash){var pageNumber,dest;if(this.pdfDocument)if(hash.includes("=")){var params=(0,_ui_utils.parseQueryString)(hash);if(params.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:params.get("search").replace(/"/g,""),phraseSearch:"true"===params.get("phrase")}),params.has("page")&&(pageNumber=0|params.get("page")||1),params.has("zoom")){var zoomArgs=params.get("zoom").split(","),zoomArg=zoomArgs[0],zoomArgNumber=parseFloat(zoomArg);zoomArg.includes("Fit")?"Fit"===zoomArg||"FitB"===zoomArg?dest=[null,{name:zoomArg}]:"FitH"===zoomArg||"FitBH"===zoomArg||"FitV"===zoomArg||"FitBV"===zoomArg?dest=[null,{name:zoomArg},zoomArgs.length>1?0|zoomArgs[1]:null]:"FitR"===zoomArg?5!==zoomArgs.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):dest=[null,{name:zoomArg},0|zoomArgs[1],0|zoomArgs[2],0|zoomArgs[3],0|zoomArgs[4]]:console.error('PDFLinkService.setHash: "'.concat(zoomArg,'" is not a valid zoom value.')):dest=[null,{name:"XYZ"},zoomArgs.length>1?0|zoomArgs[1]:null,zoomArgs.length>2?0|zoomArgs[2]:null,zoomArgNumber?zoomArgNumber/100:zoomArg]}dest?this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber||this.page,destArray:dest,allowNegativeOffset:!0}):pageNumber&&(this.page=pageNumber),params.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:params.get("pagemode")}),params.has("nameddest")&&this.goToDestination(params.get("nameddest"))}else{dest=unescape(hash);try{dest=JSON.parse(dest),Array.isArray(dest)||(dest=dest.toString())}catch(ex){}if("string"==typeof dest||_classStaticPrivateMethodGet(PDFLinkService,PDFLinkService,_isValidExplicitDestination).call(PDFLinkService,dest))return void this.goToDestination(dest);console.error('PDFLinkService.setHash: "'.concat(unescape(hash),'" is not a valid destination.'))}}},{key:"executeNamedAction",value:function(action){var _this$pdfHistory,_this$pdfHistory2;switch(action){case"GoBack":null===(_this$pdfHistory=this.pdfHistory)||void 0===_this$pdfHistory||_this$pdfHistory.back();break;case"GoForward":null===(_this$pdfHistory2=this.pdfHistory)||void 0===_this$pdfHistory2||_this$pdfHistory2.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:action})}},{key:"cachePageRef",value:function(pageNum,pageRef){if(pageRef){var refStr=0===pageRef.gen?"".concat(pageRef.num,"R"):"".concat(pageRef.num,"R").concat(pageRef.gen);_classPrivateFieldGet(this,_pagesRefCache).set(refStr,pageNum)}}},{key:"_cachedPageNumber",value:function(pageRef){if(!pageRef)return null;var refStr=0===pageRef.gen?"".concat(pageRef.num,"R"):"".concat(pageRef.num,"R").concat(pageRef.gen);return _classPrivateFieldGet(this,_pagesRefCache).get(refStr)||null}},{key:"isPageVisible",value:function(pageNumber){return this.pdfViewer.isPageVisible(pageNumber)}},{key:"isPageCached",value:function(pageNumber){return this.pdfViewer.isPageCached(pageNumber)}}]),PDFLinkService}();function _goToDestinationHelper2(rawDest){var pageNumber,_this=this,namedDest=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,explicitDest=arguments.length>2?arguments[2]:void 0,destRef=explicitDest[0];if("object"===_typeof(destRef)&&null!==destRef){if(!(pageNumber=this._cachedPageNumber(destRef)))return void this.pdfDocument.getPageIndex(destRef).then((function(pageIndex){_this.cachePageRef(pageIndex+1,destRef),_classPrivateMethodGet(_this,_goToDestinationHelper,_goToDestinationHelper2).call(_this,rawDest,namedDest,explicitDest)})).catch((function(){console.error('PDFLinkService.#goToDestinationHelper: "'.concat(destRef,'" is not ')+'a valid page reference, for dest="'.concat(rawDest,'".'))}))}else{if(!Number.isInteger(destRef))return void console.error('PDFLinkService.#goToDestinationHelper: "'.concat(destRef,'" is not ')+'a valid destination reference, for dest="'.concat(rawDest,'".'));pageNumber=destRef+1}!pageNumber||pageNumber<1||pageNumber>this.pagesCount?console.error('PDFLinkService.#goToDestinationHelper: "'.concat(pageNumber,'" is not ')+'a valid page number, for dest="'.concat(rawDest,'".')):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:namedDest,explicitDest:explicitDest,pageNumber:pageNumber})),this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber,destArray:explicitDest,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function _isValidExplicitDestination(dest){if(!Array.isArray(dest))return!1;var destLength=dest.length;if(destLength<2)return!1;var page=dest[0];if(!("object"===_typeof(page)&&Number.isInteger(page.num)&&Number.isInteger(page.gen)||Number.isInteger(page)&&page>=0))return!1;var zoom=dest[1];if("object"!==_typeof(zoom)||"string"!=typeof zoom.name)return!1;var allowNull=!0;switch(zoom.name){case"XYZ":if(5!==destLength)return!1;break;case"Fit":case"FitB":return 2===destLength;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==destLength)return!1;break;case"FitR":if(6!==destLength)return!1;allowNull=!1;break;default:return!1}for(var i=2;i<destLength;i++){var param=dest[i];if(!("number"==typeof param||allowNull&&null===param))return!1}return!0}exports.PDFLinkService=PDFLinkService;var SimpleLinkService=function(){function SimpleLinkService(){_classCallCheck(this,SimpleLinkService),this.externalLinkEnabled=!0}var _goToDestination2;return _createClass(SimpleLinkService,[{key:"pagesCount",get:function(){return 0}},{key:"page",get:function(){return 0},set:function(value){}},{key:"rotation",get:function(){return 0},set:function(value){}},{key:"goToDestination",value:(_goToDestination2=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(dest){return regeneratorRuntime.wrap((function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:case"end":return _context7.stop()}}),_callee7)}))),function(_x3){return _goToDestination2.apply(this,arguments)})},{key:"goToPage",value:function(val){}},{key:"addLinkAttributes",value:function(link,url){_addLinkAttributes(link,{url:url,enabled:this.externalLinkEnabled})}},{key:"getDestinationHash",value:function(dest){return"#"}},{key:"getAnchorUrl",value:function(hash){return"#"}},{key:"setHash",value:function(hash){}},{key:"executeNamedAction",value:function(action){}},{key:"cachePageRef",value:function(pageNum,pageRef){}},{key:"isPageVisible",value:function(pageNumber){return!0}},{key:"isPageCached",value:function(pageNumber){return!0}}]),SimpleLinkService}();exports.SimpleLinkService=SimpleLinkService},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.animationStarted=exports.VERTICAL_PADDING=exports.UNKNOWN_SCALE=exports.TextLayerMode=exports.SpreadMode=exports.SidebarView=exports.ScrollMode=exports.SCROLLBAR_PADDING=exports.RenderingStates=exports.RendererType=exports.ProgressBar=exports.PresentationModeState=exports.OutputScale=exports.MIN_SCALE=exports.MAX_SCALE=exports.MAX_AUTO_SCALE=exports.DEFAULT_SCALE_VALUE=exports.DEFAULT_SCALE_DELTA=exports.DEFAULT_SCALE=exports.AutoPrintRegExp=void 0,exports.apiPageLayoutToViewerModes=function(layout){var scrollMode=ScrollMode.VERTICAL,spreadMode=SpreadMode.NONE;switch(layout){case"SinglePage":scrollMode=ScrollMode.PAGE;break;case"OneColumn":break;case"TwoPageLeft":scrollMode=ScrollMode.PAGE;case"TwoColumnLeft":spreadMode=SpreadMode.ODD;break;case"TwoPageRight":scrollMode=ScrollMode.PAGE;case"TwoColumnRight":spreadMode=SpreadMode.EVEN}return{scrollMode:scrollMode,spreadMode:spreadMode}},exports.apiPageModeToSidebarView=function(mode){switch(mode){case"UseNone":return SidebarView.NONE;case"UseThumbs":return SidebarView.THUMBS;case"UseOutlines":return SidebarView.OUTLINE;case"UseAttachments":return SidebarView.ATTACHMENTS;case"UseOC":return SidebarView.LAYERS}return SidebarView.NONE},exports.approximateFraction=function(x){if(Math.floor(x)===x)return[x,1];var xinv=1/x;if(xinv>8)return[1,8];if(Math.floor(xinv)===xinv)return[1,xinv];var result,x_=x>1?xinv:x,a=0,b=1,c=1,d=1;for(;;){var p=a+c,q=b+d;if(q>8)break;x_<=p/q?(c=p,d=q):(a=p,b=q)}result=x_-a/b<c/d-x_?x_===x?[a,b]:[b,a]:x_===x?[c,d]:[d,c];return result},exports.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements,exports.binarySearchFirstItem=binarySearchFirstItem,exports.getActiveOrFocusedElement=function(){var curRoot=document,curActiveOrFocused=curRoot.activeElement||curRoot.querySelector(":focus");for(;null!==(_curActiveOrFocused=curActiveOrFocused)&&void 0!==_curActiveOrFocused&&_curActiveOrFocused.shadowRoot;){var _curActiveOrFocused;curRoot=curActiveOrFocused.shadowRoot,curActiveOrFocused=curRoot.activeElement||curRoot.querySelector(":focus")}return curActiveOrFocused},exports.getPageSizeInches=function(_ref4){var view=_ref4.view,userUnit=_ref4.userUnit,rotate=_ref4.rotate,_view=_slicedToArray(view,4),x1=_view[0],y1=_view[1],x2=_view[2],y2=_view[3],changeOrientation=rotate%180!=0,width=(x2-x1)/72*userUnit,height=(y2-y1)/72*userUnit;return{width:changeOrientation?height:width,height:changeOrientation?width:height}},exports.getVisibleElements=function(_ref5){var scrollEl=_ref5.scrollEl,views=_ref5.views,_ref5$sortByVisibilit=_ref5.sortByVisibility,sortByVisibility=void 0!==_ref5$sortByVisibilit&&_ref5$sortByVisibilit,_ref5$horizontal=_ref5.horizontal,horizontal=void 0!==_ref5$horizontal&&_ref5$horizontal,_ref5$rtl=_ref5.rtl,rtl=void 0!==_ref5$rtl&&_ref5$rtl,top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight,left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth;var visible=[],ids=new Set,numViews=views.length,firstVisibleElementInd=binarySearchFirstItem(views,horizontal?function(view){var element=view.div,elementLeft=element.offsetLeft+element.clientLeft,elementRight=elementLeft+element.clientWidth;return rtl?elementLeft<right:elementRight>left}:function(view){var element=view.div;return element.offsetTop+element.clientTop+element.clientHeight>top});firstVisibleElementInd>0&&firstVisibleElementInd<numViews&&!horizontal&&(firstVisibleElementInd=backtrackBeforeAllVisibleElements(firstVisibleElementInd,views,top));for(var lastEdge=horizontal?right:-1,i=firstVisibleElementInd;i<numViews;i++){var view=views[i],element=view.div,currentWidth=element.offsetLeft+element.clientLeft,currentHeight=element.offsetTop+element.clientTop,viewWidth=element.clientWidth,viewHeight=element.clientHeight,viewRight=currentWidth+viewWidth,viewBottom=currentHeight+viewHeight;if(-1===lastEdge)viewBottom>=bottom&&(lastEdge=viewBottom);else if((horizontal?currentWidth:currentHeight)>lastEdge)break;if(!(viewBottom<=top||currentHeight>=bottom||viewRight<=left||currentWidth>=right)){var hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,viewBottom-bottom),hiddenWidth=Math.max(0,left-currentWidth)+Math.max(0,viewRight-right),fractionWidth=(viewWidth-hiddenWidth)/viewWidth,percent=(viewHeight-hiddenHeight)/viewHeight*fractionWidth*100|0;visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percent,widthPercent:100*fractionWidth|0}),ids.add(view.id)}}var first=visible[0],last=visible[visible.length-1];sortByVisibility&&visible.sort((function(a,b){var pc=a.percent-b.percent;return Math.abs(pc)>.001?-pc:a.id-b.id}));return{first:first,last:last,views:visible,ids:ids}},exports.isPortraitOrientation=function(size){return size.width<=size.height},exports.isValidRotation=function(angle){return Number.isInteger(angle)&&angle%90==0},exports.isValidScrollMode=function(mode){return Number.isInteger(mode)&&Object.values(ScrollMode).includes(mode)&&mode!==ScrollMode.UNKNOWN},exports.isValidSpreadMode=function(mode){return Number.isInteger(mode)&&Object.values(SpreadMode).includes(mode)&&mode!==SpreadMode.UNKNOWN},exports.noContextMenuHandler=function(evt){evt.preventDefault()},exports.normalizeWheelEventDelta=function(evt){var delta=normalizeWheelEventDirection(evt);0===evt.deltaMode?delta/=900:1===evt.deltaMode&&(delta/=30);return delta},exports.normalizeWheelEventDirection=normalizeWheelEventDirection,exports.parseQueryString=function(query){var _step,params=new Map,_iterator=_createForOfIteratorHelper(new URLSearchParams(query));try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];params.set(key.toLowerCase(),value)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return params},exports.removeNullCharacters=function(str){var replaceInvisible=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof str)return console.error("The argument must be a string."),str;replaceInvisible&&(str=str.replace(InvisibleCharactersRegExp," "));return str.replace(NullCharactersRegExp,"")},exports.roundToDivide=function(x,div){var r=x%div;return 0===r?x:Math.round(x-r+div)},exports.scrollIntoView=function(element,spot){var scrollMatches=arguments.length>2&&void 0!==arguments[2]&&arguments[2],parent=element.offsetParent;if(!parent)return void console.error("offsetParent is not set -- cannot scroll");var offsetY=element.offsetTop+element.clientTop,offsetX=element.offsetLeft+element.clientLeft;for(;parent.clientHeight===parent.scrollHeight&&parent.clientWidth===parent.scrollWidth||scrollMatches&&(parent.classList.contains("markedContent")||"hidden"===getComputedStyle(parent).overflow);)if(offsetY+=parent.offsetTop,offsetX+=parent.offsetLeft,!(parent=parent.offsetParent))return;spot&&(void 0!==spot.top&&(offsetY+=spot.top),void 0!==spot.left&&(offsetX+=spot.left,parent.scrollLeft=offsetX));parent.scrollTop=offsetY},exports.watchScroll=function(viewAreaElement,callback){var debounceScroll=function(evt){rAF||(rAF=window.requestAnimationFrame((function(){rAF=null;var currentX=viewAreaElement.scrollLeft,lastX=state.lastX;currentX!==lastX&&(state.right=currentX>lastX),state.lastX=currentX;var currentY=viewAreaElement.scrollTop,lastY=state.lastY;currentY!==lastY&&(state.down=currentY>lastY),state.lastY=currentY,callback(state)})))},state={right:!0,down:!0,lastX:viewAreaElement.scrollLeft,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll},rAF=null;return viewAreaElement.addEventListener("scroll",debounceScroll,!0),state};exports.DEFAULT_SCALE_VALUE="auto";exports.DEFAULT_SCALE=1;exports.DEFAULT_SCALE_DELTA=1.1;exports.MIN_SCALE=.1;exports.MAX_SCALE=10;exports.UNKNOWN_SCALE=0;exports.MAX_AUTO_SCALE=1.25;exports.SCROLLBAR_PADDING=40;exports.VERTICAL_PADDING=5;exports.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};exports.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var SidebarView={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};exports.SidebarView=SidebarView;exports.RendererType={CANVAS:"canvas",SVG:"svg"};exports.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};var ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};exports.ScrollMode=ScrollMode;var SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};exports.SpreadMode=SpreadMode;exports.AutoPrintRegExp=/\bprint\s*\(/;var OutputScale=function(){function OutputScale(){_classCallCheck(this,OutputScale);var pixelRatio=window.devicePixelRatio||1;this.sx=pixelRatio,this.sy=pixelRatio}return _createClass(OutputScale,[{key:"scaled",get:function(){return 1!==this.sx||1!==this.sy}}]),OutputScale}();exports.OutputScale=OutputScale;var NullCharactersRegExp=/\x00/g,InvisibleCharactersRegExp=/[\x01-\x1F]/g;function binarySearchFirstItem(items,condition){var start=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,minIndex=start,maxIndex=items.length-1;if(maxIndex<0||!condition(items[maxIndex]))return items.length;if(condition(items[minIndex]))return minIndex;for(;minIndex<maxIndex;){var currentIndex=minIndex+maxIndex>>1,currentItem=items[currentIndex];condition(currentItem)?maxIndex=currentIndex:minIndex=currentIndex+1}return minIndex}function backtrackBeforeAllVisibleElements(index,views,top){if(index<2)return index;var elt=views[index].div,pageTop=elt.offsetTop+elt.clientTop;pageTop>=top&&(pageTop=(elt=views[index-1].div).offsetTop+elt.clientTop);for(var i=index-2;i>=0&&!((elt=views[i].div).offsetTop+elt.clientTop+elt.clientHeight<=pageTop);--i)index=i;return index}function normalizeWheelEventDirection(evt){var delta=Math.hypot(evt.deltaX,evt.deltaY),angle=Math.atan2(evt.deltaY,evt.deltaX);return-.25*Math.PI<angle&&angle<.75*Math.PI&&(delta=-delta),delta}var animationStarted=new Promise((function(resolve){window.requestAnimationFrame(resolve)}));exports.animationStarted=animationStarted;var ProgressBar=function(){function ProgressBar(id){var _ref6=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},height=_ref6.height,width=_ref6.width,units=_ref6.units;_classCallCheck(this,ProgressBar),this.visible=!0,this.div=document.querySelector(id+" .progress"),this.bar=this.div.parentNode,this.height=height||100,this.width=width||100,this.units=units||"%",this.div.style.height=this.height+this.units,this.percent=0}return _createClass(ProgressBar,[{key:"_updateBar",value:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var progressSize=this.width*this._percent/100;this.div.style.width=progressSize+this.units}},{key:"percent",get:function(){return this._percent},set:function(val){var v,min,max;this._indeterminate=isNaN(val),this._percent=(v=val,min=0,max=100,Math.min(Math.max(v,min),max)),this._updateBar()}},{key:"setWidth",value:function(viewer){if(viewer){var scrollbarWidth=viewer.parentNode.offsetWidth-viewer.offsetWidth;if(scrollbarWidth>0)document.documentElement.style.setProperty("--loadingBar-end-offset","".concat(scrollbarWidth,"px"))}}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}},{key:"show",value:function(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}]),ProgressBar}();exports.ProgressBar=ProgressBar},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.StructTreeLayerBuilder=void 0;var PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/,StructTreeLayerBuilder=function(){function StructTreeLayerBuilder(_ref7){var pdfPage=_ref7.pdfPage;_classCallCheck(this,StructTreeLayerBuilder),this.pdfPage=pdfPage}return _createClass(StructTreeLayerBuilder,[{key:"render",value:function(structTree){return this._walk(structTree)}},{key:"_setAttributes",value:function(structElement,htmlElement){void 0!==structElement.alt&&htmlElement.setAttribute("aria-label",structElement.alt),void 0!==structElement.id&&htmlElement.setAttribute("aria-owns",structElement.id),void 0!==structElement.lang&&htmlElement.setAttribute("lang",structElement.lang)}},{key:"_walk",value:function(node){if(!node)return null;var element=document.createElement("span");if("role"in node){var role=node.role,match=role.match(HEADING_PATTERN);match?(element.setAttribute("role","heading"),element.setAttribute("aria-level",match[1])):PDF_ROLE_TO_HTML_ROLE[role]&&element.setAttribute("role",PDF_ROLE_TO_HTML_ROLE[role])}if(this._setAttributes(node,element),node.children)if(1===node.children.length&&"id"in node.children[0])this._setAttributes(node.children[0],element);else{var _step2,_iterator2=_createForOfIteratorHelper(node.children);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var kid=_step2.value;element.appendChild(this._walk(kid))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}return element}}]),StructTreeLayerBuilder}();exports.StructTreeLayerBuilder=StructTreeLayerBuilder},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(3),TextLayerBuilder=function(){function TextLayerBuilder(_ref8){var textLayerDiv=_ref8.textLayerDiv,eventBus=_ref8.eventBus,pageIndex=_ref8.pageIndex,viewport=_ref8.viewport,_ref8$highlighter=_ref8.highlighter,highlighter=void 0===_ref8$highlighter?null:_ref8$highlighter,_ref8$enhanceTextSele=_ref8.enhanceTextSelection,enhanceTextSelection=void 0!==_ref8$enhanceTextSele&&_ref8$enhanceTextSele;_classCallCheck(this,TextLayerBuilder),this.textLayerDiv=textLayerDiv,this.eventBus=eventBus,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=pageIndex+1,this.viewport=viewport,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=highlighter,this.enhanceTextSelection=enhanceTextSelection,this._bindMouse()}return _createClass(TextLayerBuilder,[{key:"_finishRendering",value:function(){if(this.renderingDone=!0,!this.enhanceTextSelection){var endOfContent=document.createElement("div");endOfContent.className="endOfContent",this.textLayerDiv.appendChild(endOfContent)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function(){var _this$highlighter,_this2=this,timeout=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs.length=0,null===(_this$highlighter=this.highlighter)||void 0===_this$highlighter||_this$highlighter.setTextMapping(this.textDivs,this.textContentItemsStr);var textLayerFrag=document.createDocumentFragment();this.textLayerRenderTask=(0,_pdfjsLib.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:textLayerFrag,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:timeout,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then((function(){var _this2$highlighter;_this2.textLayerDiv.appendChild(textLayerFrag),_this2._finishRendering(),null===(_this2$highlighter=_this2.highlighter)||void 0===_this2$highlighter||_this2$highlighter.enable()}),(function(reason){}))}}},{key:"cancel",value:function(){var _this$highlighter2;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null===(_this$highlighter2=this.highlighter)||void 0===_this$highlighter2||_this$highlighter2.disable()}},{key:"setTextContentStream",value:function(readableStream){this.cancel(),this.textContentStream=readableStream}},{key:"setTextContent",value:function(textContent){this.cancel(),this.textContent=textContent}},{key:"_bindMouse",value:function(){var _this3=this,div=this.textLayerDiv,expandDivsTimer=null;div.addEventListener("mousedown",(function(evt){if(_this3.enhanceTextSelection&&_this3.textLayerRenderTask)return _this3.textLayerRenderTask.expandTextDivs(!0),void(expandDivsTimer&&(clearTimeout(expandDivsTimer),expandDivsTimer=null));var end=div.querySelector(".endOfContent");if(end){var adjustTop=evt.target!==div;if(adjustTop=adjustTop&&"none"!==window.getComputedStyle(end).getPropertyValue("-moz-user-select")){var divBounds=div.getBoundingClientRect(),r=Math.max(0,(evt.pageY-divBounds.top)/divBounds.height);end.style.top=(100*r).toFixed(2)+"%"}end.classList.add("active")}})),div.addEventListener("mouseup",(function(){if(_this3.enhanceTextSelection&&_this3.textLayerRenderTask)expandDivsTimer=setTimeout((function(){_this3.textLayerRenderTask&&_this3.textLayerRenderTask.expandTextDivs(!1),expandDivsTimer=null}),300);else{var end=div.querySelector(".endOfContent");end&&(end.style.top="",end.classList.remove("active"))}}))}}]),TextLayerBuilder}();exports.TextLayerBuilder=TextLayerBuilder},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.XfaLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(3),XfaLayerBuilder=function(){function XfaLayerBuilder(_ref9){var pageDiv=_ref9.pageDiv,pdfPage=_ref9.pdfPage,_ref9$annotationStora=_ref9.annotationStorage,annotationStorage=void 0===_ref9$annotationStora?null:_ref9$annotationStora,linkService=_ref9.linkService,_ref9$xfaHtml=_ref9.xfaHtml,xfaHtml=void 0===_ref9$xfaHtml?null:_ref9$xfaHtml;_classCallCheck(this,XfaLayerBuilder),this.pageDiv=pageDiv,this.pdfPage=pdfPage,this.annotationStorage=annotationStorage,this.linkService=linkService,this.xfaHtml=xfaHtml,this.div=null,this._cancelled=!1}return _createClass(XfaLayerBuilder,[{key:"render",value:function(viewport){var _this4=this,intent=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";if("print"===intent){var parameters={viewport:viewport.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:intent},div=document.createElement("div");this.pageDiv.appendChild(div),parameters.div=div;var result=_pdfjsLib.XfaLayer.render(parameters);return Promise.resolve(result)}return this.pdfPage.getXfa().then((function(xfaHtml){if(_this4._cancelled||!xfaHtml)return{textDivs:[]};var parameters={viewport:viewport.clone({dontFlip:!0}),div:_this4.div,xfaHtml:xfaHtml,annotationStorage:_this4.annotationStorage,linkService:_this4.linkService,intent:intent};return _this4.div?_pdfjsLib.XfaLayer.update(parameters):(_this4.div=document.createElement("div"),_this4.pageDiv.appendChild(_this4.div),parameters.div=_this4.div,_pdfjsLib.XfaLayer.render(parameters))})).catch((function(error){console.error(error)}))}},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}}]),XfaLayerBuilder}();exports.XfaLayerBuilder=XfaLayerBuilder},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFViewer=exports.PDFSinglePageViewer=void 0;var _ui_utils=__w_pdfjs_require__(6),_base_viewer=__w_pdfjs_require__(11),PDFViewer=function(_base_viewer$BaseView){_inherits(PDFViewer,_base_viewer$BaseView);var _super=_createSuper(PDFViewer);function PDFViewer(){return _classCallCheck(this,PDFViewer),_super.apply(this,arguments)}return _createClass(PDFViewer)}(_base_viewer.BaseViewer);exports.PDFViewer=PDFViewer;var PDFSinglePageViewer=function(_base_viewer$BaseView2){_inherits(PDFSinglePageViewer,_base_viewer$BaseView2);var _super2=_createSuper(PDFSinglePageViewer);function PDFSinglePageViewer(){return _classCallCheck(this,PDFSinglePageViewer),_super2.apply(this,arguments)}return _createClass(PDFSinglePageViewer,[{key:"_resetView",value:function(){_get(_getPrototypeOf(PDFSinglePageViewer.prototype),"_resetView",this).call(this),this._scrollMode=_ui_utils.ScrollMode.PAGE,this._spreadMode=_ui_utils.SpreadMode.NONE}},{key:"scrollMode",set:function(mode){}},{key:"_updateScrollMode",value:function(){}},{key:"spreadMode",set:function(mode){}},{key:"_updateSpreadMode",value:function(){}}]),PDFSinglePageViewer}(_base_viewer.BaseViewer);exports.PDFSinglePageViewer=PDFSinglePageViewer},function(__unused_webpack_module,exports,__w_pdfjs_require__){var _Symbol$iterator;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PagesCountLimit=exports.PDFPageViewBuffer=exports.BaseViewer=void 0;var _pdfjsLib=__w_pdfjs_require__(3),_ui_utils=__w_pdfjs_require__(6),_annotation_layer_builder=__w_pdfjs_require__(2),_l10n_utils=__w_pdfjs_require__(4),_pdf_page_view=__w_pdfjs_require__(12),_pdf_rendering_queue=__w_pdfjs_require__(14),_pdf_link_service=__w_pdfjs_require__(5),_struct_tree_layer_builder=__w_pdfjs_require__(7),_text_highlighter=__w_pdfjs_require__(15),_text_layer_builder=__w_pdfjs_require__(8),_xfa_layer_builder=__w_pdfjs_require__(9),PagesCountLimit={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};exports.PagesCountLimit=PagesCountLimit;var _buf=new WeakMap,_size=new WeakMap,_destroyFirstView=new WeakSet;_Symbol$iterator=Symbol.iterator;var PDFPageViewBuffer=function(){function PDFPageViewBuffer(size){_classCallCheck(this,PDFPageViewBuffer),_classPrivateMethodInitSpec(this,_destroyFirstView),_classPrivateFieldInitSpec(this,_buf,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,_size,{writable:!0,value:0}),_classPrivateFieldSet(this,_size,size)}return _createClass(PDFPageViewBuffer,[{key:"push",value:function(view){var buf=_classPrivateFieldGet(this,_buf);buf.has(view)&&buf.delete(view),buf.add(view),buf.size>_classPrivateFieldGet(this,_size)&&_classPrivateMethodGet(this,_destroyFirstView,_destroyFirstView2).call(this)}},{key:"resize",value:function(newSize){var idsToKeep=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classPrivateFieldSet(this,_size,newSize);var buf=_classPrivateFieldGet(this,_buf);if(idsToKeep){var _step3,ii=buf.size,i=1,_iterator3=_createForOfIteratorHelper(buf);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var view=_step3.value;if(idsToKeep.has(view.id)&&(buf.delete(view),buf.add(view)),++i>ii)break}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}for(;buf.size>_classPrivateFieldGet(this,_size);)_classPrivateMethodGet(this,_destroyFirstView,_destroyFirstView2).call(this)}},{key:"has",value:function(view){return _classPrivateFieldGet(this,_buf).has(view)}},{key:_Symbol$iterator,value:function(){return _classPrivateFieldGet(this,_buf).keys()}}]),PDFPageViewBuffer}();function _destroyFirstView2(){var firstView=_classPrivateFieldGet(this,_buf).keys().next().value;null==firstView||firstView.destroy(),_classPrivateFieldGet(this,_buf).delete(firstView)}exports.PDFPageViewBuffer=PDFPageViewBuffer;var _buffer=new WeakMap,_annotationMode=new WeakMap,_previousAnnotationMode=new WeakMap,_enablePermissions=new WeakMap,_previousContainerHeight=new WeakMap,_scrollModePageState=new WeakMap,_onVisibilityChange=new WeakMap,_initializePermissions=new WeakSet,_onePageRenderedOrForceFetch=new WeakSet,_ensurePageViewVisible=new WeakSet,_isSameScale=new WeakSet,_ensurePdfPageLoaded=new WeakSet,_getScrollAhead=new WeakSet,_toggleLoadingIconSpinner=new WeakSet,BaseViewer=function(){function BaseViewer(options){var _this$container,_this$viewer,_options$textLayerMod,_options$annotationMo,_this5=this;if(_classCallCheck(this,BaseViewer),_classPrivateMethodInitSpec(this,_toggleLoadingIconSpinner),_classPrivateMethodInitSpec(this,_getScrollAhead),_classPrivateMethodInitSpec(this,_ensurePdfPageLoaded),_classPrivateMethodInitSpec(this,_isSameScale),_classPrivateMethodInitSpec(this,_ensurePageViewVisible),_classPrivateMethodInitSpec(this,_onePageRenderedOrForceFetch),_classPrivateMethodInitSpec(this,_initializePermissions),_classPrivateFieldInitSpec(this,_buffer,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_annotationMode,{writable:!0,value:_pdfjsLib.AnnotationMode.ENABLE_FORMS}),_classPrivateFieldInitSpec(this,_previousAnnotationMode,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_enablePermissions,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_previousContainerHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_scrollModePageState,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_onVisibilityChange,{writable:!0,value:null}),this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");if("2.14.34"!==_pdfjsLib.version)throw new Error('The API version "'.concat(_pdfjsLib.version,'" does not match the Viewer version "').concat("2.14.34",'".'));if(this.container=options.container,this.viewer=options.viewer||options.container.firstElementChild,"DIV"!==(null===(_this$container=this.container)||void 0===_this$container?void 0:_this$container.tagName.toUpperCase())||"DIV"!==(null===(_this$viewer=this.viewer)||void 0===_this$viewer?void 0:_this$viewer.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=options.eventBus,this.linkService=options.linkService||new _pdf_link_service.SimpleLinkService,this.downloadManager=options.downloadManager||null,this.findController=options.findController||null,this._scriptingManager=options.scriptingManager||null,this.removePageBorders=options.removePageBorders||!1,this.textLayerMode=null!==(_options$textLayerMod=options.textLayerMode)&&void 0!==_options$textLayerMod?_options$textLayerMod:_ui_utils.TextLayerMode.ENABLE,_classPrivateFieldSet(this,_annotationMode,null!==(_options$annotationMo=options.annotationMode)&&void 0!==_options$annotationMo?_options$annotationMo:_pdfjsLib.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=options.imageResourcesPath||"",this.enablePrintAutoRotate=options.enablePrintAutoRotate||!1,this.renderer=options.renderer||_ui_utils.RendererType.CANVAS,this.useOnlyCssZoom=options.useOnlyCssZoom||!1,this.maxCanvasPixels=options.maxCanvasPixels,this.l10n=options.l10n||_l10n_utils.NullL10n,_classPrivateFieldSet(this,_enablePermissions,options.enablePermissions||!1),this.defaultRenderingQueue=!options.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new _pdf_rendering_queue.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=options.renderingQueue,this._doc=document.documentElement,this.scroll=(0,_ui_utils.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=_ui_utils.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then((function(){_this5.eventBus.dispatch("baseviewerinit",{source:_this5})}))}return _createClass(BaseViewer,[{key:"pagesCount",get:function(){return this._pages.length}},{key:"getPageView",value:function(index){return this._pages[index]}},{key:"pageViewsReady",get:function(){return!!this._pagesCapability.settled&&this._pages.every((function(pageView){return null==pageView?void 0:pageView.pdfPage}))}},{key:"renderForms",get:function(){return _classPrivateFieldGet(this,_annotationMode)===_pdfjsLib.AnnotationMode.ENABLE_FORMS}},{key:"enableScripting",get:function(){return!!this._scriptingManager}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(val){if(!Number.isInteger(val))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(val,!0)||console.error('currentPageNumber: "'.concat(val,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function(val){var _this$_pageLabels,_this$_pageLabels2,resetCurrentPageView=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===val)return resetCurrentPageView&&this._resetCurrentPageView(),!0;if(!(0<val&&val<=this.pagesCount))return!1;var previous=this._currentPageNumber;return this._currentPageNumber=val,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:val,pageLabel:null!==(_this$_pageLabels=null===(_this$_pageLabels2=this._pageLabels)||void 0===_this$_pageLabels2?void 0:_this$_pageLabels2[val-1])&&void 0!==_this$_pageLabels?_this$_pageLabels:null,previous:previous}),resetCurrentPageView&&this._resetCurrentPageView(),!0}},{key:"currentPageLabel",get:function(){var _this$_pageLabels3,_this$_pageLabels4;return null!==(_this$_pageLabels3=null===(_this$_pageLabels4=this._pageLabels)||void 0===_this$_pageLabels4?void 0:_this$_pageLabels4[this._currentPageNumber-1])&&void 0!==_this$_pageLabels3?_this$_pageLabels3:null},set:function(val){if(this.pdfDocument){var page=0|val;if(this._pageLabels){var i=this._pageLabels.indexOf(val);i>=0&&(page=i+1)}this._setCurrentPageNumber(page,!0)||console.error('currentPageLabel: "'.concat(val,'" is not a valid page.'))}}},{key:"currentScale",get:function(){return this._currentScale!==_ui_utils.UNKNOWN_SCALE?this._currentScale:_ui_utils.DEFAULT_SCALE},set:function(val){if(isNaN(val))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(val,!1)}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(val){this.pdfDocument&&this._setScale(val,!1)}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(rotation){if(!(0,_ui_utils.isValidRotation)(rotation))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&((rotation%=360)<0&&(rotation+=360),this._pagesRotation!==rotation)){this._pagesRotation=rotation;var _step4,pageNumber=this._currentPageNumber,updateArgs={rotation:rotation},_iterator4=_createForOfIteratorHelper(this._pages);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){_step4.value.update(updateArgs)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:rotation,pageNumber:pageNumber}),this.defaultRenderingQueue&&this.update()}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"setDocument",value:function(pdfDocument){var _this6=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=pdfDocument,pdfDocument){var isPureXfa=pdfDocument.isPureXfa,pagesCount=pdfDocument.numPages,firstPagePromise=pdfDocument.getPage(1),optionalContentConfigPromise=pdfDocument.getOptionalContentConfig(),permissionsPromise=_classPrivateFieldGet(this,_enablePermissions)?pdfDocument.getPermissions():Promise.resolve();if(pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");var mode=this._scrollMode=_ui_utils.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:mode})}this._pagesCapability.promise.then((function(){_this6.eventBus.dispatch("pagesloaded",{source:_this6,pagesCount:pagesCount})}),(function(){})),this._onBeforeDraw=function(evt){var pageView=_this6._pages[evt.pageNumber-1];pageView&&_classPrivateFieldGet(_this6,_buffer).push(pageView)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=function(evt){evt.cssTransform||_this6._onePageRenderedCapability.settled||(_this6._onePageRenderedCapability.resolve({timestamp:evt.timestamp}),_this6.eventBus._off("pagerendered",_this6._onAfterDraw),_this6._onAfterDraw=null,_classPrivateFieldGet(_this6,_onVisibilityChange)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet(_this6,_onVisibilityChange)),_classPrivateFieldSet(_this6,_onVisibilityChange,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([firstPagePromise,permissionsPromise]).then((function(_ref10){var _ref11=_slicedToArray(_ref10,2),firstPdfPage=_ref11[0],permissions=_ref11[1];if(pdfDocument===_this6.pdfDocument){_this6._firstPageCapability.resolve(firstPdfPage),_this6._optionalContentConfigPromise=optionalContentConfigPromise,_classPrivateMethodGet(_this6,_initializePermissions,_initializePermissions2).call(_this6,permissions);for(var viewerElement=_this6._scrollMode===_ui_utils.ScrollMode.PAGE?null:_this6.viewer,scale=_this6.currentScale,viewport=firstPdfPage.getViewport({scale:scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS}),textLayerFactory=_this6.textLayerMode===_ui_utils.TextLayerMode.DISABLE||isPureXfa?null:_this6,annotationLayerFactory=_classPrivateFieldGet(_this6,_annotationMode)!==_pdfjsLib.AnnotationMode.DISABLE?_this6:null,xfaLayerFactory=isPureXfa?_this6:null,pageNum=1;pageNum<=pagesCount;++pageNum){var pageView=new _pdf_page_view.PDFPageView({container:viewerElement,eventBus:_this6.eventBus,id:pageNum,scale:scale,defaultViewport:viewport.clone(),optionalContentConfigPromise:optionalContentConfigPromise,renderingQueue:_this6.renderingQueue,textLayerFactory:textLayerFactory,textLayerMode:_this6.textLayerMode,annotationLayerFactory:annotationLayerFactory,annotationMode:_classPrivateFieldGet(_this6,_annotationMode),xfaLayerFactory:xfaLayerFactory,textHighlighterFactory:_this6,structTreeLayerFactory:_this6,imageResourcesPath:_this6.imageResourcesPath,renderer:_this6.renderer,useOnlyCssZoom:_this6.useOnlyCssZoom,maxCanvasPixels:_this6.maxCanvasPixels,l10n:_this6.l10n});_this6._pages.push(pageView)}var firstPageView=_this6._pages[0];firstPageView&&(firstPageView.setPdfPage(firstPdfPage),_this6.linkService.cachePageRef(1,firstPdfPage.ref)),_this6._scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateMethodGet(_this6,_ensurePageViewVisible,_ensurePageViewVisible2).call(_this6):_this6._spreadMode!==_ui_utils.SpreadMode.NONE&&_this6._updateSpreadMode(),_classPrivateMethodGet(_this6,_onePageRenderedOrForceFetch,_onePageRenderedOrForceFetch2).call(_this6).then(_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var getPagesLeft,_loop,_pageNum;return regeneratorRuntime.wrap((function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(_this6.findController&&_this6.findController.setDocument(pdfDocument),_this6._scriptingManager&&_this6._scriptingManager.setDocument(pdfDocument),!(pdfDocument.loadingParams.disableAutoFetch||pagesCount>PagesCountLimit.FORCE_LAZY_PAGE_INIT)){_context9.next=5;break}return _this6._pagesCapability.resolve(),_context9.abrupt("return");case 5:if(!((getPagesLeft=pagesCount-1)<=0)){_context9.next=9;break}return _this6._pagesCapability.resolve(),_context9.abrupt("return");case 9:_loop=regeneratorRuntime.mark((function _loop(_pageNum){var promise;return regeneratorRuntime.wrap((function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(promise=pdfDocument.getPage(_pageNum).then((function(pdfPage){var pageView=_this6._pages[_pageNum-1];pageView.pdfPage||pageView.setPdfPage(pdfPage),_this6.linkService.cachePageRef(_pageNum,pdfPage.ref),0==--getPagesLeft&&_this6._pagesCapability.resolve()}),(function(reason){console.error("Unable to get page ".concat(_pageNum," to initialize viewer"),reason),0==--getPagesLeft&&_this6._pagesCapability.resolve()})),_pageNum%PagesCountLimit.PAUSE_EAGER_PAGE_INIT!=0){_context8.next=4;break}return _context8.next=4,promise;case 4:case"end":return _context8.stop()}}),_loop)})),_pageNum=2;case 11:if(!(_pageNum<=pagesCount)){_context9.next=16;break}return _context9.delegateYield(_loop(_pageNum),"t0",13);case 13:++_pageNum,_context9.next=11;break;case 16:case"end":return _context9.stop()}}),_callee8)})))),_this6.eventBus.dispatch("pagesinit",{source:_this6}),pdfDocument.getMetadata().then((function(_ref13){var info=_ref13.info;pdfDocument===_this6.pdfDocument&&info.Language&&(_this6.viewer.lang=info.Language)})),_this6.defaultRenderingQueue&&_this6.update()}})).catch((function(reason){console.error("Unable to initialize viewer",reason),_this6._pagesCapability.reject(reason)}))}}},{key:"setPageLabels",value:function(labels){if(this.pdfDocument){labels?Array.isArray(labels)&&this.pdfDocument.numPages===labels.length?this._pageLabels=labels:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var i=0,ii=this._pages.length;i<ii;i++){var _this$_pageLabels$i,_this$_pageLabels5;this._pages[i].setPageLabel(null!==(_this$_pageLabels$i=null===(_this$_pageLabels5=this._pageLabels)||void 0===_this$_pageLabels5?void 0:_this$_pageLabels5[i])&&void 0!==_this$_pageLabels$i?_this$_pageLabels$i:null)}}}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=_ui_utils.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_classPrivateFieldSet(this,_buffer,new PDFPageViewBuffer(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,_pdfjsLib.createPromiseCapability)(),this._onePageRenderedCapability=(0,_pdfjsLib.createPromiseCapability)(),this._pagesCapability=(0,_pdfjsLib.createPromiseCapability)(),this._scrollMode=_ui_utils.ScrollMode.VERTICAL,this._previousScrollMode=_ui_utils.ScrollMode.UNKNOWN,this._spreadMode=_ui_utils.SpreadMode.NONE,_classPrivateFieldSet(this,_scrollModePageState,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),_classPrivateFieldGet(this,_onVisibilityChange)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange)),_classPrivateFieldSet(this,_onVisibilityChange,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove("enablePermissions"),null!==_classPrivateFieldGet(this,_previousAnnotationMode)&&(_classPrivateFieldSet(this,_annotationMode,_classPrivateFieldGet(this,_previousAnnotationMode)),_classPrivateFieldSet(this,_previousAnnotationMode,null))}},{key:"_scrollUpdate",value:function(){0!==this.pagesCount&&this.update()}},{key:"_scrollIntoView",value:function(_ref14){var pageDiv=_ref14.pageDiv,_ref14$pageSpot=_ref14.pageSpot,pageSpot=void 0===_ref14$pageSpot?null:_ref14$pageSpot,_ref14$pageNumber=_ref14.pageNumber,pageNumber=void 0===_ref14$pageNumber?null:_ref14$pageNumber;if(this._scrollMode===_ui_utils.ScrollMode.PAGE&&(pageNumber&&this._setCurrentPageNumber(pageNumber),_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this),this.update()),!pageSpot&&!this.isInPresentationMode){var left=pageDiv.offsetLeft+pageDiv.clientLeft,right=left+pageDiv.clientWidth,_this$container2=this.container,scrollLeft=_this$container2.scrollLeft,clientWidth=_this$container2.clientWidth;(this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL||left<scrollLeft||right>scrollLeft+clientWidth)&&(pageSpot={left:0,top:0})}(0,_ui_utils.scrollIntoView)(pageDiv,pageSpot)}},{key:"_setScaleUpdatePages",value:function(newScale,newValue){var noScroll=arguments.length>2&&void 0!==arguments[2]&&arguments[2],preset=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._currentScaleValue=newValue.toString(),_classPrivateMethodGet(this,_isSameScale,_isSameScale2).call(this,newScale))preset&&this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:newValue});else{this._doc.style.setProperty("--zoom-factor",newScale),this._doc.style.setProperty("--viewport-scale-factor",newScale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS);var _step5,updateArgs={scale:newScale},_iterator5=_createForOfIteratorHelper(this._pages);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var pageView=_step5.value;pageView.update(updateArgs)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}if(this._currentScale=newScale,!noScroll){var dest,page=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(page=this._location.pageNumber,dest=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:page,destArray:dest,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:preset?newValue:void 0}),this.defaultRenderingQueue&&this.update(),_classPrivateFieldSet(this,_previousContainerHeight,this.container.clientHeight)}}},{key:"_pageWidthScaleFactor",get:function(){return this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._scrollMode!==_ui_utils.ScrollMode.HORIZONTAL?2:1}},{key:"_setScale",value:function(value){var noScroll=arguments.length>1&&void 0!==arguments[1]&&arguments[1],scale=parseFloat(value);if(scale>0)this._setScaleUpdatePages(scale,value,noScroll,!1);else{var currentPage=this._pages[this._currentPageNumber-1];if(!currentPage)return;var hPadding=_ui_utils.SCROLLBAR_PADDING,vPadding=_ui_utils.VERTICAL_PADDING;if(this.isInPresentationMode?hPadding=vPadding=4:this.removePageBorders&&(hPadding=vPadding=0),this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL){var _ref15=[vPadding,hPadding];hPadding=_ref15[0],vPadding=_ref15[1]}var pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale/this._pageWidthScaleFactor,pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":var horizontalScale=(0,_ui_utils.isPortraitOrientation)(currentPage)?pageWidthScale:Math.min(pageHeightScale,pageWidthScale);scale=Math.min(_ui_utils.MAX_AUTO_SCALE,horizontalScale);break;default:return void console.error('_setScale: "'.concat(value,'" is an unknown zoom value.'))}this._setScaleUpdatePages(scale,value,noScroll,!0)}}},{key:"_resetCurrentPageView",value:function(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var pageView=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:pageView.div})}},{key:"pageLabelToPageNumber",value:function(label){if(!this._pageLabels)return null;var i=this._pageLabels.indexOf(label);return i<0?null:i+1}},{key:"scrollPageIntoView",value:function(_ref16){var pageNumber=_ref16.pageNumber,_ref16$destArray=_ref16.destArray,destArray=void 0===_ref16$destArray?null:_ref16$destArray,_ref16$allowNegativeO=_ref16.allowNegativeOffset,allowNegativeOffset=void 0!==_ref16$allowNegativeO&&_ref16$allowNegativeO,_ref16$ignoreDestinat=_ref16.ignoreDestinationZoom,ignoreDestinationZoom=void 0!==_ref16$ignoreDestinat&&_ref16$ignoreDestinat;if(this.pdfDocument){var pageView=Number.isInteger(pageNumber)&&this._pages[pageNumber-1];if(pageView)if(!this.isInPresentationMode&&destArray){var widthScale,heightScale,x=0,y=0,width=0,height=0,changeOrientation=pageView.rotation%180!=0,pageWidth=(changeOrientation?pageView.height:pageView.width)/pageView.scale/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,pageHeight=(changeOrientation?pageView.width:pageView.height)/pageView.scale/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,scale=0;switch(destArray[1].name){case"XYZ":x=destArray[2],y=destArray[3],scale=destArray[4],x=null!==x?x:0,y=null!==y?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":scale="page-width",null===(y=destArray[2])&&this._location?(x=this._location.left,y=this._location.top):("number"!=typeof y||y<0)&&(y=pageHeight);break;case"FitV":case"FitBV":x=destArray[2],width=pageWidth,height=pageHeight,scale="page-height";break;case"FitR":x=destArray[2],y=destArray[3],width=destArray[4]-x,height=destArray[5]-y;var hPadding=this.removePageBorders?0:_ui_utils.SCROLLBAR_PADDING,vPadding=this.removePageBorders?0:_ui_utils.VERTICAL_PADDING;widthScale=(this.container.clientWidth-hPadding)/width/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,heightScale=(this.container.clientHeight-vPadding)/height/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:return void console.error('scrollPageIntoView: "'.concat(destArray[1].name,'" is not a valid destination type.'))}if(ignoreDestinationZoom||(scale&&scale!==this._currentScale?this.currentScaleValue=scale:this._currentScale===_ui_utils.UNKNOWN_SCALE&&(this.currentScaleValue=_ui_utils.DEFAULT_SCALE_VALUE)),"page-fit"!==scale||destArray[4]){var boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)],left=Math.min(boundingRect[0][0],boundingRect[1][0]),top=Math.min(boundingRect[0][1],boundingRect[1][1]);allowNegativeOffset||(left=Math.max(left,0),top=Math.max(top,0)),this._scrollIntoView({pageDiv:pageView.div,pageSpot:{left:left,top:top},pageNumber:pageNumber})}else this._scrollIntoView({pageDiv:pageView.div,pageNumber:pageNumber})}else this._setCurrentPageNumber(pageNumber,!0);else console.error('scrollPageIntoView: "'.concat(pageNumber,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function(firstPage){var currentScale=this._currentScale,currentScaleValue=this._currentScaleValue,normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(1e4*currentScale)/100:currentScaleValue,pageNumber=firstPage.id,pdfOpenParams="#page="+pageNumber;pdfOpenParams+="&zoom="+normalizedScaleValue;var currentPageView=this._pages[pageNumber-1],container=this.container,topLeft=currentPageView.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y),intLeft=Math.round(topLeft[0]),intTop=Math.round(topLeft[1]);pdfOpenParams+=","+intLeft+","+intTop,this._location={pageNumber:pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,rotation:this._pagesRotation,pdfOpenParams:pdfOpenParams}}},{key:"update",value:function(){var visible=this._getVisiblePages(),visiblePages=visible.views,numVisiblePages=visiblePages.length;if(0!==numVisiblePages){var newCacheSize=Math.max(10,2*numVisiblePages+1);if(_classPrivateFieldGet(this,_buffer).resize(newCacheSize,visible.ids),this.renderingQueue.renderHighestPriority(visible),!this.isInPresentationMode){var _step6,isSimpleLayout=this._spreadMode===_ui_utils.SpreadMode.NONE&&(this._scrollMode===_ui_utils.ScrollMode.PAGE||this._scrollMode===_ui_utils.ScrollMode.VERTICAL),currentId=this._currentPageNumber,stillFullyVisible=!1,_iterator6=_createForOfIteratorHelper(visiblePages);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var page=_step6.value;if(page.percent<100)break;if(page.id===currentId&&isSimpleLayout){stillFullyVisible=!0;break}}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}stillFullyVisible||(currentId=visiblePages[0].id),this._setCurrentPageNumber(currentId)}this._updateLocation(visible.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function(element){return this.container.contains(element)}},{key:"focus",value:function(){this.container.focus()}},{key:"_isContainerRtl",get:function(){return"rtl"===getComputedStyle(this.container).direction}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===_ui_utils.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===_ui_utils.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getCurrentVisiblePage",value:function(){if(!this.pagesCount)return{views:[]};var pageView=this._pages[this._currentPageNumber-1],element=pageView.div,view={id:pageView.id,x:element.offsetLeft+element.clientLeft,y:element.offsetTop+element.clientTop,view:pageView};return{first:view,last:view,views:[view],ids:new Set([pageView.id])}}},{key:"_getVisiblePages",value:function(){if(this.isInPresentationMode)return this._getCurrentVisiblePage();var views=this._scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateFieldGet(this,_scrollModePageState).pages:this._pages,horizontal=this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL,rtl=horizontal&&this._isContainerRtl;return(0,_ui_utils.getVisibleElements)({scrollEl:this.container,views:views,sortByVisibility:!0,horizontal:horizontal,rtl:rtl})}},{key:"isPageVisible",value:function(pageNumber){return!!this.pdfDocument&&(Number.isInteger(pageNumber)&&pageNumber>0&&pageNumber<=this.pagesCount?this._getVisiblePages().ids.has(pageNumber):(console.error('isPageVisible: "'.concat(pageNumber,'" is not a valid page.')),!1))}},{key:"isPageCached",value:function(pageNumber){if(!this.pdfDocument)return!1;if(!(Number.isInteger(pageNumber)&&pageNumber>0&&pageNumber<=this.pagesCount))return console.error('isPageCached: "'.concat(pageNumber,'" is not a valid page.')),!1;var pageView=this._pages[pageNumber-1];return _classPrivateFieldGet(this,_buffer).has(pageView)}},{key:"cleanup",value:function(){for(var i=0,ii=this._pages.length;i<ii;i++)this._pages[i]&&this._pages[i].renderingState!==_ui_utils.RenderingStates.FINISHED&&this._pages[i].reset()}},{key:"_cancelRendering",value:function(){for(var i=0,ii=this._pages.length;i<ii;i++)this._pages[i]&&this._pages[i].cancelRendering()}},{key:"forceRendering",value:function(currentlyVisiblePages){var _this7=this,visiblePages=currentlyVisiblePages||this._getVisiblePages(),scrollAhead=_classPrivateMethodGet(this,_getScrollAhead,_getScrollAhead2).call(this,visiblePages),preRenderExtra=this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._scrollMode!==_ui_utils.ScrollMode.HORIZONTAL,pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,scrollAhead,preRenderExtra);return _classPrivateMethodGet(this,_toggleLoadingIconSpinner,_toggleLoadingIconSpinner2).call(this,visiblePages.ids),!!pageView&&(_classPrivateMethodGet(this,_ensurePdfPageLoaded,_ensurePdfPageLoaded2).call(this,pageView).then((function(){_this7.renderingQueue.renderView(pageView)})),!0)}},{key:"createTextLayerBuilder",value:function(textLayerDiv,pageIndex,viewport){var enhanceTextSelection=arguments.length>3&&void 0!==arguments[3]&&arguments[3],eventBus=arguments.length>4?arguments[4]:void 0,highlighter=arguments.length>5?arguments[5]:void 0;return new _text_layer_builder.TextLayerBuilder({textLayerDiv:textLayerDiv,eventBus:eventBus,pageIndex:pageIndex,viewport:viewport,enhanceTextSelection:!this.isInPresentationMode&&enhanceTextSelection,highlighter:highlighter})}},{key:"createTextHighlighter",value:function(pageIndex,eventBus){return new _text_highlighter.TextHighlighter({eventBus:eventBus,pageIndex:pageIndex,findController:this.isInPresentationMode?null:this.findController})}},{key:"createAnnotationLayerBuilder",value:function(pageDiv,pdfPage){var _this$pdfDocument,_this$pdfDocument2,_this$pdfDocument3,_this$_scriptingManag,annotationStorage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,imageResourcesPath=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",renderForms=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l10n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_l10n_utils.NullL10n,enableScripting=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,hasJSActionsPromise=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,mouseState=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,fieldObjectsPromise=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,annotationCanvasMap=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return new _annotation_layer_builder.AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,annotationStorage:annotationStorage||(null===(_this$pdfDocument=this.pdfDocument)||void 0===_this$pdfDocument?void 0:_this$pdfDocument.annotationStorage),imageResourcesPath:imageResourcesPath,renderForms:renderForms,linkService:this.linkService,downloadManager:this.downloadManager,l10n:l10n,enableScripting:null!=enableScripting?enableScripting:this.enableScripting,hasJSActionsPromise:hasJSActionsPromise||(null===(_this$pdfDocument2=this.pdfDocument)||void 0===_this$pdfDocument2?void 0:_this$pdfDocument2.hasJSActions()),fieldObjectsPromise:fieldObjectsPromise||(null===(_this$pdfDocument3=this.pdfDocument)||void 0===_this$pdfDocument3?void 0:_this$pdfDocument3.getFieldObjects()),mouseState:mouseState||(null===(_this$_scriptingManag=this._scriptingManager)||void 0===_this$_scriptingManag?void 0:_this$_scriptingManag.mouseState),annotationCanvasMap:annotationCanvasMap})}},{key:"createXfaLayerBuilder",value:function(pageDiv,pdfPage){var _this$pdfDocument4,annotationStorage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new _xfa_layer_builder.XfaLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,annotationStorage:annotationStorage||(null===(_this$pdfDocument4=this.pdfDocument)||void 0===_this$pdfDocument4?void 0:_this$pdfDocument4.annotationStorage),linkService:this.linkService})}},{key:"createStructTreeLayerBuilder",value:function(pdfPage){return new _struct_tree_layer_builder.StructTreeLayerBuilder({pdfPage:pdfPage})}},{key:"hasEqualPageSizes",get:function(){for(var firstPageView=this._pages[0],i=1,ii=this._pages.length;i<ii;++i){var pageView=this._pages[i];if(pageView.width!==firstPageView.width||pageView.height!==firstPageView.height)return!1}return!0}},{key:"getPagesOverview",value:function(){var _this8=this;return this._pages.map((function(pageView){var viewport=pageView.pdfPage.getViewport({scale:1});return!_this8.enablePrintAutoRotate||(0,_ui_utils.isPortraitOrientation)(viewport)?{width:viewport.width,height:viewport.height,rotation:viewport.rotation}:{width:viewport.height,height:viewport.width,rotation:(viewport.rotation-90)%360}}))}},{key:"optionalContentConfigPromise",get:function(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)},set:function(promise){if(!(promise instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(promise));if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=promise;var _step7,updateArgs={optionalContentConfigPromise:promise},_iterator7=_createForOfIteratorHelper(this._pages);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){_step7.value.update(updateArgs)}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:promise})}}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(mode){if(this._scrollMode!==mode){if(!(0,_ui_utils.isValidScrollMode)(mode))throw new Error("Invalid scroll mode: ".concat(mode));this.pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=mode,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:mode}),this._updateScrollMode(this._currentPageNumber))}}},{key:"_updateScrollMode",value:function(){var pageNumber=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,scrollMode=this._scrollMode,viewer=this.viewer;viewer.classList.toggle("scrollHorizontal",scrollMode===_ui_utils.ScrollMode.HORIZONTAL),viewer.classList.toggle("scrollWrapped",scrollMode===_ui_utils.ScrollMode.WRAPPED),this.pdfDocument&&pageNumber&&(scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this):this._previousScrollMode===_ui_utils.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(pageNumber,!0),this.update())}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(mode){if(this._spreadMode!==mode){if(!(0,_ui_utils.isValidSpreadMode)(mode))throw new Error("Invalid spread mode: ".concat(mode));this._spreadMode=mode,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:mode}),this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function(){var pageNumber=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var viewer=this.viewer,pages=this._pages;if(this._scrollMode===_ui_utils.ScrollMode.PAGE)_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this);else if(viewer.textContent="",this._spreadMode===_ui_utils.SpreadMode.NONE)for(var i=0,ii=pages.length;i<ii;++i)viewer.appendChild(pages[i].div);else for(var parity=this._spreadMode-1,spread=null,_i2=0,_ii=pages.length;_i2<_ii;++_i2)null===spread?((spread=document.createElement("div")).className="spread",viewer.appendChild(spread)):_i2%2===parity&&(spread=spread.cloneNode(!1),viewer.appendChild(spread)),spread.appendChild(pages[_i2].div);pageNumber&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(pageNumber,!0),this.update())}}},{key:"_getPageAdvance",value:function(currentPageNumber){var previous=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._scrollMode){case _ui_utils.ScrollMode.WRAPPED:var _step8,_this$_getVisiblePage=this._getVisiblePages(),views=_this$_getVisiblePage.views,pageLayout=new Map,_iterator8=_createForOfIteratorHelper(views);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _step8$value=_step8.value,id=_step8$value.id,y=_step8$value.y,percent=_step8$value.percent,widthPercent=_step8$value.widthPercent;if(!(0===percent||widthPercent<100)){var yArray=pageLayout.get(y);yArray||pageLayout.set(y,yArray||(yArray=[])),yArray.push(id)}}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}var _step9,_iterator9=_createForOfIteratorHelper(pageLayout.values());try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _yArray=_step9.value,currentIndex=_yArray.indexOf(currentPageNumber);if(-1!==currentIndex){var numPages=_yArray.length;if(1===numPages)break;if(previous)for(var i=currentIndex-1,ii=0;i>=ii;i--){var currentId=_yArray[i],expectedId=_yArray[i+1]-1;if(currentId<expectedId)return currentPageNumber-expectedId}else for(var _i3=currentIndex+1,_ii2=numPages;_i3<_ii2;_i3++){var _currentId=_yArray[_i3],_expectedId=_yArray[_i3-1]+1;if(_currentId>_expectedId)return _expectedId-currentPageNumber}if(previous){var firstId=_yArray[0];if(firstId<currentPageNumber)return currentPageNumber-firstId+1}else{var lastId=_yArray[numPages-1];if(lastId>currentPageNumber)return lastId-currentPageNumber+1}break}}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}break;case _ui_utils.ScrollMode.HORIZONTAL:break;case _ui_utils.ScrollMode.PAGE:case _ui_utils.ScrollMode.VERTICAL:if(this._spreadMode===_ui_utils.SpreadMode.NONE)break;var parity=this._spreadMode-1;if(previous&&currentPageNumber%2!==parity)break;if(!previous&&currentPageNumber%2===parity)break;var _step10,_this$_getVisiblePage2=this._getVisiblePages(),_views=_this$_getVisiblePage2.views,_expectedId2=previous?currentPageNumber-1:currentPageNumber+1,_iterator10=_createForOfIteratorHelper(_views);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _step10$value=_step10.value,_id=_step10$value.id,_percent=_step10$value.percent,_widthPercent=_step10$value.widthPercent;if(_id===_expectedId2){if(_percent>0&&100===_widthPercent)return 2;break}}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}}return 1}},{key:"nextPage",value:function(){var currentPageNumber=this._currentPageNumber,pagesCount=this.pagesCount;if(currentPageNumber>=pagesCount)return!1;var advance=this._getPageAdvance(currentPageNumber,!1)||1;return this.currentPageNumber=Math.min(currentPageNumber+advance,pagesCount),!0}},{key:"previousPage",value:function(){var currentPageNumber=this._currentPageNumber;if(currentPageNumber<=1)return!1;var advance=this._getPageAdvance(currentPageNumber,!0)||1;return this.currentPageNumber=Math.max(currentPageNumber-advance,1),!0}},{key:"increaseScale",value:function(){var steps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,newScale=this._currentScale;do{newScale=(newScale*_ui_utils.DEFAULT_SCALE_DELTA).toFixed(2),newScale=Math.ceil(10*newScale)/10,newScale=Math.min(_ui_utils.MAX_SCALE,newScale)}while(--steps>0&&newScale<_ui_utils.MAX_SCALE);this.currentScaleValue=newScale}},{key:"decreaseScale",value:function(){var steps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,newScale=this._currentScale;do{newScale=(newScale/_ui_utils.DEFAULT_SCALE_DELTA).toFixed(2),newScale=Math.floor(10*newScale)/10,newScale=Math.max(_ui_utils.MIN_SCALE,newScale)}while(--steps>0&&newScale>_ui_utils.MIN_SCALE);this.currentScaleValue=newScale}}]),BaseViewer}();function _initializePermissions2(permissions){permissions&&(permissions.includes(_pdfjsLib.PermissionFlag.COPY)||this.viewer.classList.add("enablePermissions"),permissions.includes(_pdfjsLib.PermissionFlag.MODIFY_ANNOTATIONS)||permissions.includes(_pdfjsLib.PermissionFlag.FILL_INTERACTIVE_FORMS)||_classPrivateFieldGet(this,_annotationMode)===_pdfjsLib.AnnotationMode.ENABLE_FORMS&&(_classPrivateFieldSet(this,_previousAnnotationMode,_classPrivateFieldGet(this,_annotationMode)),_classPrivateFieldSet(this,_annotationMode,_pdfjsLib.AnnotationMode.ENABLE)))}function _onePageRenderedOrForceFetch2(){var _this9=this;if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();var visibilityChangePromise=new Promise((function(resolve){_classPrivateFieldSet(_this9,_onVisibilityChange,(function(){"hidden"===document.visibilityState&&(resolve(),document.removeEventListener("visibilitychange",_classPrivateFieldGet(_this9,_onVisibilityChange)),_classPrivateFieldSet(_this9,_onVisibilityChange,null))})),document.addEventListener("visibilitychange",_classPrivateFieldGet(_this9,_onVisibilityChange))}));return Promise.race([this._onePageRenderedCapability.promise,visibilityChangePromise])}function _ensurePageViewVisible2(){if(this._scrollMode!==_ui_utils.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var pageNumber=this._currentPageNumber,state=_classPrivateFieldGet(this,_scrollModePageState),viewer=this.viewer;if(viewer.textContent="",state.pages.length=0,this._spreadMode===_ui_utils.SpreadMode.NONE){var pageView=this._pages[pageNumber-1];if(this.isInPresentationMode){var spread=document.createElement("div");spread.className="spread";var dummyPage=document.createElement("div");dummyPage.className="dummyPage",dummyPage.style.height="".concat(this.container.clientHeight,"px"),spread.appendChild(dummyPage),spread.appendChild(pageView.div),viewer.appendChild(spread)}else viewer.appendChild(pageView.div);state.pages.push(pageView)}else{var pageIndexSet=new Set,parity=this._spreadMode-1;pageNumber%2!==parity?(pageIndexSet.add(pageNumber-1),pageIndexSet.add(pageNumber)):(pageIndexSet.add(pageNumber-2),pageIndexSet.add(pageNumber-1));var _step11,_spread=null,_iterator11=_createForOfIteratorHelper(pageIndexSet);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var i=_step11.value,_pageView=this._pages[i];_pageView&&(null===_spread?((_spread=document.createElement("div")).className="spread",viewer.appendChild(_spread)):i%2===parity&&(_spread=_spread.cloneNode(!1),viewer.appendChild(_spread)),_spread.appendChild(_pageView.div),state.pages.push(_pageView))}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}}state.scrollDown=pageNumber>=state.previousPageNumber,state.previousPageNumber=pageNumber}function _isSameScale2(newScale){return(!this.isInPresentationMode||this.container.clientHeight===_classPrivateFieldGet(this,_previousContainerHeight))&&(newScale===this._currentScale||Math.abs(newScale-this._currentScale)<1e-15)}function _ensurePdfPageLoaded2(_x4){return _ensurePdfPageLoaded3.apply(this,arguments)}function _ensurePdfPageLoaded3(){return(_ensurePdfPageLoaded3=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(pageView){var _this$linkService$_ca,_this$linkService,pdfPage;return regeneratorRuntime.wrap((function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!pageView.pdfPage){_context10.next=2;break}return _context10.abrupt("return",pageView.pdfPage);case 2:return _context10.prev=2,_context10.next=5,this.pdfDocument.getPage(pageView.id);case 5:return pdfPage=_context10.sent,pageView.pdfPage||pageView.setPdfPage(pdfPage),null!==(_this$linkService$_ca=(_this$linkService=this.linkService)._cachedPageNumber)&&void 0!==_this$linkService$_ca&&_this$linkService$_ca.call(_this$linkService,pdfPage.ref)||this.linkService.cachePageRef(pageView.id,pdfPage.ref),_context10.abrupt("return",pdfPage);case 11:return _context10.prev=11,_context10.t0=_context10.catch(2),console.error("Unable to get page for page view",_context10.t0),_context10.abrupt("return",null);case 15:case"end":return _context10.stop()}}),_callee9,this,[[2,11]])})))).apply(this,arguments)}function _getScrollAhead2(visible){var _visible$first,_visible$last;if(1===(null===(_visible$first=visible.first)||void 0===_visible$first?void 0:_visible$first.id))return!0;if((null===(_visible$last=visible.last)||void 0===_visible$last?void 0:_visible$last.id)===this.pagesCount)return!1;switch(this._scrollMode){case _ui_utils.ScrollMode.PAGE:return _classPrivateFieldGet(this,_scrollModePageState).scrollDown;case _ui_utils.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _toggleLoadingIconSpinner2(visibleIds){var _step12,_iterator12=_createForOfIteratorHelper(visibleIds);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var id=_step12.value,pageView=this._pages[id-1];null==pageView||pageView.toggleLoadingIconSpinner(!0)}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}var _step13,_iterator13=_createForOfIteratorHelper(_classPrivateFieldGet(this,_buffer));try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _pageView2=_step13.value;visibleIds.has(_pageView2.id)||_pageView2.toggleLoadingIconSpinner(!1)}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}exports.BaseViewer=BaseViewer},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFPageView=void 0;var _pdfjsLib=__w_pdfjs_require__(3),_ui_utils=__w_pdfjs_require__(6),_app_options=__w_pdfjs_require__(13),_l10n_utils=__w_pdfjs_require__(4),MAX_CANVAS_PIXELS=_app_options.compatibilityParams.maxCanvasPixels||16777216,_annotationMode2=new WeakMap,PDFPageView=function(){function PDFPageView(options){var _options$textLayerMod2,_options$annotationMo2,_options$textHighligh,_this$renderingQueue;_classCallCheck(this,PDFPageView),_classPrivateFieldInitSpec(this,_annotationMode2,{writable:!0,value:_pdfjsLib.AnnotationMode.ENABLE_FORMS});var container=options.container,defaultViewport=options.defaultViewport;this.id=options.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=options.scale||_ui_utils.DEFAULT_SCALE,this.viewport=defaultViewport,this.pdfPageRotate=defaultViewport.rotation,this._optionalContentConfigPromise=options.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!==(_options$textLayerMod2=options.textLayerMode)&&void 0!==_options$textLayerMod2?_options$textLayerMod2:_ui_utils.TextLayerMode.ENABLE,_classPrivateFieldSet(this,_annotationMode2,null!==(_options$annotationMo2=options.annotationMode)&&void 0!==_options$annotationMo2?_options$annotationMo2:_pdfjsLib.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=options.imageResourcesPath||"",this.useOnlyCssZoom=options.useOnlyCssZoom||!1,this.maxCanvasPixels=options.maxCanvasPixels||MAX_CANVAS_PIXELS,this.eventBus=options.eventBus,this.renderingQueue=options.renderingQueue,this.textLayerFactory=options.textLayerFactory,this.annotationLayerFactory=options.annotationLayerFactory,this.xfaLayerFactory=options.xfaLayerFactory,this.textHighlighter=null===(_options$textHighligh=options.textHighlighterFactory)||void 0===_options$textHighligh?void 0:_options$textHighligh.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=options.structTreeLayerFactory,this.renderer=options.renderer||_ui_utils.RendererType.CANVAS,this.l10n=options.l10n||_l10n_utils.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=_ui_utils.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null!==(_this$renderingQueue=this.renderingQueue)&&void 0!==_this$renderingQueue&&_this$renderingQueue.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;var div=document.createElement("div");div.className="page",div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px",div.setAttribute("data-page-number",this.id),div.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then((function(msg){div.setAttribute("aria-label",msg)})),this.div=div,null==container||container.appendChild(div)}var _buildXfaTextContentItems2,_renderXfaLayer2,_renderAnnotationLayer2;return _createClass(PDFPageView,[{key:"setPdfPage",value:function(pdfPage){this.pdfPage=pdfPage,this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport({scale:this.scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:totalRotation}),this.reset()}},{key:"destroy",value:function(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}},{key:"_renderAnnotationLayer",value:(_renderAnnotationLayer2=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var error;return regeneratorRuntime.wrap((function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return error=null,_context11.prev=1,_context11.next=4,this.annotationLayer.render(this.viewport,"display");case 4:_context11.next=9;break;case 6:_context11.prev=6,_context11.t0=_context11.catch(1),error=_context11.t0;case 9:return _context11.prev=9,this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:error}),_context11.finish(9);case 12:case"end":return _context11.stop()}}),_callee10,this,[[1,6,9,12]])}))),function(){return _renderAnnotationLayer2.apply(this,arguments)})},{key:"_renderXfaLayer",value:(_renderXfaLayer2=_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var error,result;return regeneratorRuntime.wrap((function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return error=null,_context12.prev=1,_context12.next=4,this.xfaLayer.render(this.viewport,"display");case 4:result=_context12.sent,this.textHighlighter&&this._buildXfaTextContentItems(result.textDivs),_context12.next=11;break;case 8:_context12.prev=8,_context12.t0=_context12.catch(1),error=_context12.t0;case 11:return _context12.prev=11,this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:error}),_context12.finish(11);case 14:case"end":return _context12.stop()}}),_callee11,this,[[1,8,11,14]])}))),function(){return _renderXfaLayer2.apply(this,arguments)})},{key:"_buildXfaTextContentItems",value:(_buildXfaTextContentItems2=_asyncToGenerator(regeneratorRuntime.mark((function _callee12(textDivs){var text,items,_iterator14,_step14,item;return regeneratorRuntime.wrap((function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.next=2,this.pdfPage.getTextContent();case 2:text=_context13.sent,items=[],_iterator14=_createForOfIteratorHelper(text.items);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;)item=_step14.value,items.push(item.str)}catch(err){_iterator14.e(err)}finally{_iterator14.f()}this.textHighlighter.setTextMapping(textDivs,items),this.textHighlighter.enable();case 8:case"end":return _context13.stop()}}),_callee12,this)}))),function(_x5){return _buildXfaTextContentItems2.apply(this,arguments)})},{key:"_resetZoomLayer",value:function(){var removeFromDOM=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var zoomLayerCanvas=this.zoomLayer.firstChild;this.paintedViewportMap.delete(zoomLayerCanvas),zoomLayerCanvas.width=0,zoomLayerCanvas.height=0,removeFromDOM&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var _this$annotationLayer,_this$xfaLayer,_this10=this,_ref17=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref17$keepZoomLayer=_ref17.keepZoomLayer,keepZoomLayer=void 0!==_ref17$keepZoomLayer&&_ref17$keepZoomLayer,_ref17$keepAnnotation=_ref17.keepAnnotationLayer,keepAnnotationLayer=void 0!==_ref17$keepAnnotation&&_ref17$keepAnnotation,_ref17$keepXfaLayer=_ref17.keepXfaLayer,keepXfaLayer=void 0!==_ref17$keepXfaLayer&&_ref17$keepXfaLayer;this.cancelRendering({keepAnnotationLayer:keepAnnotationLayer,keepXfaLayer:keepXfaLayer}),this.renderingState=_ui_utils.RenderingStates.INITIAL;var div=this.div;div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px";for(var childNodes=div.childNodes,zoomLayerNode=keepZoomLayer&&this.zoomLayer||null,annotationLayerNode=keepAnnotationLayer&&(null===(_this$annotationLayer=this.annotationLayer)||void 0===_this$annotationLayer?void 0:_this$annotationLayer.div)||null,xfaLayerNode=keepXfaLayer&&(null===(_this$xfaLayer=this.xfaLayer)||void 0===_this$xfaLayer?void 0:_this$xfaLayer.div)||null,i=childNodes.length-1;i>=0;i--){var node=childNodes[i];switch(node){case zoomLayerNode:case annotationLayerNode:case xfaLayerNode:continue}node.remove()}div.removeAttribute("data-loaded"),annotationLayerNode&&this.annotationLayer.hide(),xfaLayerNode&&this.xfaLayer.hide(),zoomLayerNode||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then((function(msg){var _this10$loadingIconDi;null===(_this10$loadingIconDi=_this10.loadingIconDiv)||void 0===_this10$loadingIconDi||_this10$loadingIconDi.setAttribute("aria-label",msg)})),div.appendChild(this.loadingIconDiv)}},{key:"update",value:function(_ref18){var _ref18$scale=_ref18.scale,scale=void 0===_ref18$scale?0:_ref18$scale,_ref18$rotation=_ref18.rotation,rotation=void 0===_ref18$rotation?null:_ref18$rotation,_ref18$optionalConten=_ref18.optionalContentConfigPromise,optionalContentConfigPromise=void 0===_ref18$optionalConten?null:_ref18$optionalConten;this.scale=scale||this.scale,"number"==typeof rotation&&(this.rotation=rotation),optionalContentConfigPromise instanceof Promise&&(this._optionalContentConfigPromise=optionalContentConfigPromise);var totalRotation=(this.rotation+this.pdfPageRotate)%360,viewportScale=this.scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS;if(this.viewport=this.viewport.clone({scale:viewportScale,rotation:totalRotation}),this._isStandalone){var style=document.documentElement.style;style.setProperty("--zoom-factor",this.scale),style.setProperty("--viewport-scale-factor",viewportScale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});var isScalingRestricted=!1;if(this.canvas&&this.maxCanvasPixels>0){var outputScale=this.outputScale;(Math.floor(this.viewport.width)*outputScale.sx|0)*(Math.floor(this.viewport.height)*outputScale.sy|0)>this.maxCanvasPixels&&(isScalingRestricted=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}},{key:"cancelRendering",value:function(){var _this$textHighlighter,_ref19=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref19$keepAnnotation=_ref19.keepAnnotationLayer,keepAnnotationLayer=void 0!==_ref19$keepAnnotation&&_ref19$keepAnnotation,_ref19$keepXfaLayer=_ref19.keepXfaLayer,keepXfaLayer=void 0!==_ref19$keepXfaLayer&&_ref19$keepXfaLayer;(this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!this.annotationLayer||keepAnnotationLayer&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),!this.xfaLayer||keepXfaLayer&&this.xfaLayer.div)||(this.xfaLayer.cancel(),this.xfaLayer=null,null===(_this$textHighlighter=this.textHighlighter)||void 0===_this$textHighlighter||_this$textHighlighter.disable());this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}},{key:"cssTransform",value:function(_ref20){var target=_ref20.target,_ref20$redrawAnnotati=_ref20.redrawAnnotationLayer,redrawAnnotationLayer=void 0!==_ref20$redrawAnnotati&&_ref20$redrawAnnotati,_ref20$redrawXfaLayer=_ref20.redrawXfaLayer,redrawXfaLayer=void 0!==_ref20$redrawXfaLayer&&_ref20$redrawXfaLayer,width=this.viewport.width,height=this.viewport.height,div=this.div;target.style.width=target.parentNode.style.width=div.style.width=Math.floor(width)+"px",target.style.height=target.parentNode.style.height=div.style.height=Math.floor(height)+"px";var relativeRotation=this.viewport.rotation-this.paintedViewportMap.get(target).rotation,absRotation=Math.abs(relativeRotation),scaleX=1,scaleY=1;if(90!==absRotation&&270!==absRotation||(scaleX=height/width,scaleY=width/height),target.style.transform="rotate(".concat(relativeRotation,"deg) scale(").concat(scaleX,", ").concat(scaleY,")"),this.textLayer){var textLayerViewport=this.textLayer.viewport,textRelativeRotation=this.viewport.rotation-textLayerViewport.rotation,textAbsRotation=Math.abs(textRelativeRotation),scale=width/textLayerViewport.width;90!==textAbsRotation&&270!==textAbsRotation||(scale=width/textLayerViewport.height);var transX,transY,textLayerDiv=this.textLayer.textLayerDiv;switch(textAbsRotation){case 0:transX=transY=0;break;case 90:transX=0,transY="-"+textLayerDiv.style.height;break;case 180:transX="-"+textLayerDiv.style.width,transY="-"+textLayerDiv.style.height;break;case 270:transX="-"+textLayerDiv.style.width,transY=0;break;default:console.error("Bad rotation value.")}textLayerDiv.style.transform="rotate(".concat(textAbsRotation,"deg) ")+"scale(".concat(scale,") ")+"translate(".concat(transX,", ").concat(transY,")"),textLayerDiv.style.transformOrigin="0% 0%"}redrawAnnotationLayer&&this.annotationLayer&&this._renderAnnotationLayer(),redrawXfaLayer&&this.xfaLayer&&this._renderXfaLayer()}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}},{key:"getPagePoint",value:function(x,y){return this.viewport.convertToPdfPoint(x,y)}},{key:"toggleLoadingIconSpinner",value:function(){var _this$loadingIconDiv,viewVisible=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(_this$loadingIconDiv=this.loadingIconDiv)||void 0===_this$loadingIconDiv||_this$loadingIconDiv.classList.toggle("notVisible",!viewVisible)}},{key:"draw",value:function(){var _this$annotationLayer2,_this$xfaLayer2,_this11=this;this.renderingState!==_ui_utils.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var div=this.div,pdfPage=this.pdfPage;if(!pdfPage)return this.renderingState=_ui_utils.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=_ui_utils.RenderingStates.RUNNING;var canvasWrapper=document.createElement("div");canvasWrapper.style.width=div.style.width,canvasWrapper.style.height=div.style.height,canvasWrapper.classList.add("canvasWrapper"),null!==(_this$annotationLayer2=this.annotationLayer)&&void 0!==_this$annotationLayer2&&_this$annotationLayer2.div?div.insertBefore(canvasWrapper,this.annotationLayer.div):div.appendChild(canvasWrapper);var textLayer=null;if(this.textLayerMode!==_ui_utils.TextLayerMode.DISABLE&&this.textLayerFactory){var _this$annotationLayer3,textLayerDiv=document.createElement("div");textLayerDiv.className="textLayer",textLayerDiv.style.width=canvasWrapper.style.width,textLayerDiv.style.height=canvasWrapper.style.height,null!==(_this$annotationLayer3=this.annotationLayer)&&void 0!==_this$annotationLayer3&&_this$annotationLayer3.div?div.insertBefore(textLayerDiv,this.annotationLayer.div):div.appendChild(textLayerDiv),textLayer=this.textLayerFactory.createTextLayerBuilder(textLayerDiv,this.id-1,this.viewport,this.textLayerMode===_ui_utils.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=textLayer,_classPrivateFieldGet(this,_annotationMode2)!==_pdfjsLib.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(div,pdfPage,null,this.imageResourcesPath,_classPrivateFieldGet(this,_annotationMode2)===_pdfjsLib.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))),null!==(_this$xfaLayer2=this.xfaLayer)&&void 0!==_this$xfaLayer2&&_this$xfaLayer2.div&&div.appendChild(this.xfaLayer.div);var renderContinueCallback=null;this.renderingQueue&&(renderContinueCallback=function(cont){if(!_this11.renderingQueue.isHighestPriority(_this11))return _this11.renderingState=_ui_utils.RenderingStates.PAUSED,void(_this11.resume=function(){_this11.renderingState=_ui_utils.RenderingStates.RUNNING,cont()});cont()});var _ref21,finishPaintTask=(_ref21=_asyncToGenerator(regeneratorRuntime.mark((function _callee13(){var error,_args14=arguments;return regeneratorRuntime.wrap((function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:if(error=_args14.length>0&&void 0!==_args14[0]?_args14[0]:null,paintTask===_this11.paintTask&&(_this11.paintTask=null),!(error instanceof _pdfjsLib.RenderingCancelledException)){_context14.next=5;break}return _this11._renderError=null,_context14.abrupt("return");case 5:if(_this11._renderError=error,_this11.renderingState=_ui_utils.RenderingStates.FINISHED,_this11.loadingIconDiv&&(_this11.loadingIconDiv.remove(),delete _this11.loadingIconDiv),_this11._resetZoomLayer(!0),_this11.eventBus.dispatch("pagerendered",{source:_this11,pageNumber:_this11.id,cssTransform:!1,timestamp:performance.now(),error:_this11._renderError}),!error){_context14.next=12;break}throw error;case 12:case"end":return _context14.stop()}}),_callee13)}))),function(){return _ref21.apply(this,arguments)}),paintTask=this.renderer===_ui_utils.RendererType.SVG?this.paintOnSvg(canvasWrapper):this.paintOnCanvas(canvasWrapper);paintTask.onRenderContinue=renderContinueCallback,this.paintTask=paintTask;var resultPromise=paintTask.promise.then((function(){return finishPaintTask(null).then((function(){if(textLayer){var readableStream=pdfPage.streamTextContent({includeMarkedContent:!0});textLayer.setTextContentStream(readableStream),textLayer.render()}_this11.annotationLayer&&_this11._renderAnnotationLayer()}))}),(function(reason){return finishPaintTask(reason)}));return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(div,pdfPage,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=function(event){event.pageNumber===_this11.id&&(_this11.eventBus._off("textlayerrendered",_this11._onTextLayerRendered),_this11._onTextLayerRendered=null,_this11.canvas&&_this11.pdfPage.getStructTree().then((function(tree){if(tree&&_this11.canvas){var treeDom=_this11.structTreeLayer.render(tree);treeDom.classList.add("structTree"),_this11.canvas.appendChild(treeDom)}})))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(pdfPage)),div.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),resultPromise}},{key:"paintOnCanvas",value:function(canvasWrapper){var renderCapability=(0,_pdfjsLib.createPromiseCapability)(),result={promise:renderCapability.promise,onRenderContinue:function(cont){cont()},cancel:function(){renderTask.cancel()}},viewport=this.viewport,canvas=document.createElement("canvas");canvas.hidden=!0;var isCanvasHidden=!0,showCanvas=function(){isCanvasHidden&&(canvas.hidden=!1,isCanvasHidden=!1)};canvasWrapper.appendChild(canvas),this.canvas=canvas,canvas.mozOpaque=!0;var ctx=canvas.getContext("2d",{alpha:!1}),outputScale=this.outputScale=new _ui_utils.OutputScale;if(this.useOnlyCssZoom){var actualSizeViewport=viewport.clone({scale:_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS});outputScale.sx*=actualSizeViewport.width/viewport.width,outputScale.sy*=actualSizeViewport.height/viewport.height}if(this.maxCanvasPixels>0){var pixelsInViewport=viewport.width*viewport.height,maxScale=Math.sqrt(this.maxCanvasPixels/pixelsInViewport);outputScale.sx>maxScale||outputScale.sy>maxScale?(outputScale.sx=maxScale,outputScale.sy=maxScale,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var sfx=(0,_ui_utils.approximateFraction)(outputScale.sx),sfy=(0,_ui_utils.approximateFraction)(outputScale.sy);canvas.width=(0,_ui_utils.roundToDivide)(viewport.width*outputScale.sx,sfx[0]),canvas.height=(0,_ui_utils.roundToDivide)(viewport.height*outputScale.sy,sfy[0]),canvas.style.width=(0,_ui_utils.roundToDivide)(viewport.width,sfx[1])+"px",canvas.style.height=(0,_ui_utils.roundToDivide)(viewport.height,sfy[1])+"px",this.paintedViewportMap.set(canvas,viewport);var renderContext={canvasContext:ctx,transform:outputScale.scaled?[outputScale.sx,0,0,outputScale.sy,0,0]:null,viewport:this.viewport,annotationMode:_classPrivateFieldGet(this,_annotationMode2),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap},renderTask=this.pdfPage.render(renderContext);return renderTask.onContinue=function(cont){showCanvas(),result.onRenderContinue?result.onRenderContinue(cont):cont()},renderTask.promise.then((function(){showCanvas(),renderCapability.resolve()}),(function(error){showCanvas(),renderCapability.reject(error)})),result}},{key:"paintOnSvg",value:function(wrapper){var _this12=this,cancelled=!1,ensureNotCancelled=function(){if(cancelled)throw new _pdfjsLib.RenderingCancelledException("Rendering cancelled, page ".concat(_this12.id),"svg")},pdfPage=this.pdfPage,actualSizeViewport=this.viewport.clone({scale:_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:pdfPage.getOperatorList({annotationMode:_classPrivateFieldGet(this,_annotationMode2)}).then((function(opList){return ensureNotCancelled(),new _pdfjsLib.SVGGraphics(pdfPage.commonObjs,pdfPage.objs).getSVG(opList,actualSizeViewport).then((function(svg){ensureNotCancelled(),_this12.svg=svg,_this12.paintedViewportMap.set(svg,actualSizeViewport),svg.style.width=wrapper.style.width,svg.style.height=wrapper.style.height,_this12.renderingState=_ui_utils.RenderingStates.FINISHED,wrapper.appendChild(svg)}))})),onRenderContinue:function(cont){cont()},cancel:function(){cancelled=!0}}}},{key:"setPageLabel",value:function(label){this.pageLabel="string"==typeof label?label:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}]),PDFPageView}();exports.PDFPageView=PDFPageView},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.compatibilityParams=exports.OptionKind=exports.AppOptions=void 0;var compatibilityParams=Object.create(null);exports.compatibilityParams=compatibilityParams;var userAgent=navigator.userAgent||"",platform=navigator.platform||"",maxTouchPoints=navigator.maxTouchPoints||1,isAndroid=/Android/.test(userAgent);(/\b(iPad|iPhone|iPod)(?=;)/.test(userAgent)||"MacIntel"===platform&&maxTouchPoints>1||isAndroid)&&(compatibilityParams.maxCanvasPixels=5242880);var OptionKind={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};exports.OptionKind=OptionKind;var defaultOptions={annotationMode:{value:2,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},cursorToolOnLoad:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:OptionKind.VIEWER},defaultZoomValue:{value:"",kind:OptionKind.VIEWER+OptionKind.PREFERENCE},disableHistory:{value:!1,kind:OptionKind.VIEWER},disablePageLabels:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enablePermissions:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enableScripting:{value:!0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:OptionKind.VIEWER},externalLinkTarget:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},historyUpdateUrl:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},imageResourcesPath:{value:"./images/",kind:OptionKind.VIEWER},maxCanvasPixels:{value:16777216,compatibility:compatibilityParams.maxCanvasPixels,kind:OptionKind.VIEWER},pdfBugEnabled:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},printResolution:{value:150,kind:OptionKind.VIEWER},renderer:{value:"canvas",kind:OptionKind.VIEWER},sidebarViewOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},scrollModeOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},spreadModeOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},textLayerMode:{value:1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},useOnlyCssZoom:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},viewerCssTheme:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},viewOnLoad:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},cMapPacked:{value:!0,kind:OptionKind.API},cMapUrl:{value:"../web/cmaps/",kind:OptionKind.API},disableAutoFetch:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableFontFace:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableRange:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableStream:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},docBaseUrl:{value:"",kind:OptionKind.API},enableXfa:{value:!0,kind:OptionKind.API+OptionKind.PREFERENCE},fontExtraProperties:{value:!1,kind:OptionKind.API},isEvalSupported:{value:!0,kind:OptionKind.API},maxImageSize:{value:-1,kind:OptionKind.API},pdfBug:{value:!1,kind:OptionKind.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:OptionKind.API},verbosity:{value:1,kind:OptionKind.API},workerPort:{value:null,kind:OptionKind.WORKER},workerSrc:{value:"../build/pdf.worker.js?ver=00002",kind:OptionKind.WORKER}};defaultOptions.disablePreferences={value:!1,kind:OptionKind.VIEWER},defaultOptions.locale={value:navigator.language||"en-US",kind:OptionKind.VIEWER},defaultOptions.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:OptionKind.VIEWER},defaultOptions.renderer.kind+=OptionKind.PREFERENCE;var userOptions=Object.create(null),AppOptions=function(){function AppOptions(){throw _classCallCheck(this,AppOptions),new Error("Cannot initialize AppOptions.")}return _createClass(AppOptions,null,[{key:"get",value:function(name){var userOption=userOptions[name];if(void 0!==userOption)return userOption;var _defaultOption$compat,defaultOption=defaultOptions[name];return void 0!==defaultOption?null!==(_defaultOption$compat=defaultOption.compatibility)&&void 0!==_defaultOption$compat?_defaultOption$compat:defaultOption.value:void 0}},{key:"getAll",value:function(){var kind=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,options=Object.create(null);for(var name in defaultOptions){var _defaultOption$compat2,defaultOption=defaultOptions[name];if(kind){if(0==(kind&defaultOption.kind))continue;if(kind===OptionKind.PREFERENCE){var value=defaultOption.value,valueType=_typeof(value);if("boolean"===valueType||"string"===valueType||"number"===valueType&&Number.isInteger(value)){options[name]=value;continue}throw new Error("Invalid type for preference: ".concat(name))}}var userOption=userOptions[name];options[name]=void 0!==userOption?userOption:null!==(_defaultOption$compat2=defaultOption.compatibility)&&void 0!==_defaultOption$compat2?_defaultOption$compat2:defaultOption.value}return options}},{key:"set",value:function(name,value){userOptions[name]=value}},{key:"setAll",value:function(options){for(var name in options)userOptions[name]=options[name]}},{key:"remove",value:function(name){delete userOptions[name]}},{key:"_hasUserOptions",value:function(){return Object.keys(userOptions).length>0}}]),AppOptions}();exports.AppOptions=AppOptions},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFRenderingQueue=void 0;var _pdfjsLib=__w_pdfjs_require__(3),_ui_utils=__w_pdfjs_require__(6),PDFRenderingQueue=function(){function PDFRenderingQueue(){_classCallCheck(this,PDFRenderingQueue),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return _createClass(PDFRenderingQueue,[{key:"setViewer",value:function(pdfViewer){this.pdfViewer=pdfViewer}},{key:"setThumbnailViewer",value:function(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer}},{key:"isHighestPriority",value:function(view){return this.highestPriorityPage===view.renderingId}},{key:"hasViewer",value:function(){return!!this.pdfViewer}},{key:"renderHighestPriority",value:function(currentlyVisiblePages){var _this$pdfThumbnailVie;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(currentlyVisiblePages)||this.isThumbnailViewEnabled&&null!==(_this$pdfThumbnailVie=this.pdfThumbnailViewer)&&void 0!==_this$pdfThumbnailVie&&_this$pdfThumbnailVie.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function(visible,views,scrolledDown){var preRenderExtra=arguments.length>3&&void 0!==arguments[3]&&arguments[3],visibleViews=visible.views,numVisible=visibleViews.length;if(0===numVisible)return null;for(var i=0;i<numVisible;i++){var view=visibleViews[i].view;if(!this.isViewFinished(view))return view}var firstId=visible.first.id,lastId=visible.last.id;if(lastId-firstId+1>numVisible)for(var visibleIds=visible.ids,_i4=1,ii=lastId-firstId;_i4<ii;_i4++){var holeId=scrolledDown?firstId+_i4:lastId-_i4;if(!visibleIds.has(holeId)){var holeView=views[holeId-1];if(!this.isViewFinished(holeView))return holeView}}var preRenderIndex=scrolledDown?lastId:firstId-2,preRenderView=views[preRenderIndex];return preRenderView&&!this.isViewFinished(preRenderView)||preRenderExtra&&(preRenderView=views[preRenderIndex+=scrolledDown?1:-1])&&!this.isViewFinished(preRenderView)?preRenderView:null}},{key:"isViewFinished",value:function(view){return view.renderingState===_ui_utils.RenderingStates.FINISHED}},{key:"renderView",value:function(view){var _this13=this;switch(view.renderingState){case _ui_utils.RenderingStates.FINISHED:return!1;case _ui_utils.RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId,view.resume();break;case _ui_utils.RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case _ui_utils.RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId,view.draw().finally((function(){_this13.renderHighestPriority()})).catch((function(reason){reason instanceof _pdfjsLib.RenderingCancelledException||console.error('renderView: "'.concat(reason,'"'))}))}return!0}}]),PDFRenderingQueue}();exports.PDFRenderingQueue=PDFRenderingQueue},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextHighlighter=void 0;var TextHighlighter=function(){function TextHighlighter(_ref22){var findController=_ref22.findController,eventBus=_ref22.eventBus,pageIndex=_ref22.pageIndex;_classCallCheck(this,TextHighlighter),this.findController=findController,this.matches=[],this.eventBus=eventBus,this.pageIdx=pageIndex,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}return _createClass(TextHighlighter,[{key:"setTextMapping",value:function(divs,texts){this.textDivs=divs,this.textContentItemsStr=texts}},{key:"enable",value:function(){var _this14=this;if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=function(evt){evt.pageIndex!==_this14.pageIdx&&-1!==evt.pageIndex||_this14._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}},{key:"disable",value:function(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}},{key:"_convertMatches",value:function(matches,matchesLength){if(!matches)return[];for(var textContentItemsStr=this.textContentItemsStr,i=0,iIndex=0,end=textContentItemsStr.length-1,result=[],m=0,mm=matches.length;m<mm;m++){for(var matchIdx=matches[m];i!==end&&matchIdx>=iIndex+textContentItemsStr[i].length;)iIndex+=textContentItemsStr[i].length,i++;i===textContentItemsStr.length&&console.error("Could not find a matching mapping");var match={begin:{divIdx:i,offset:matchIdx-iIndex}};for(matchIdx+=matchesLength[m];i!==end&&matchIdx>iIndex+textContentItemsStr[i].length;)iIndex+=textContentItemsStr[i].length,i++;match.end={divIdx:i,offset:matchIdx-iIndex},result.push(match)}return result}},{key:"_renderMatches",value:function(matches){if(0!==matches.length){var findController=this.findController,pageIdx=this.pageIdx,textContentItemsStr=this.textContentItemsStr,textDivs=this.textDivs,isSelectedPage=pageIdx===findController.selected.pageIdx,selectedMatchIdx=findController.selected.matchIdx,prevEnd=null,infinity={divIdx:-1,offset:void 0},i0=selectedMatchIdx,i1=i0+1;if(findController.state.highlightAll)i0=0,i1=matches.length;else if(!isSelectedPage)return;for(var i=i0;i<i1;i++){var match=matches[i],begin=match.begin,end=match.end,isSelected=isSelectedPage&&i===selectedMatchIdx,highlightSuffix=isSelected?" selected":"",selectedLeft=0;if(prevEnd&&begin.divIdx===prevEnd.divIdx?appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset):(null!==prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset),beginText(begin)),begin.divIdx===end.divIdx)selectedLeft=appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix);else{selectedLeft=appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(var n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++)textDivs[n0].className="highlight middle"+highlightSuffix;beginText(end,"highlight end"+highlightSuffix)}prevEnd=end,isSelected&&findController.scrollMatchIntoView({element:textDivs[begin.divIdx],selectedLeft:selectedLeft,pageIndex:pageIdx,matchIndex:selectedMatchIdx})}prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}function beginText(begin,className){var divIdx=begin.divIdx;return textDivs[divIdx].textContent="",appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){var div=textDivs[divIdx];if(div.nodeType===Node.TEXT_NODE){var span=document.createElement("span");div.parentNode.insertBefore(span,div),span.appendChild(div),textDivs[divIdx]=span,div=span}var content=textContentItemsStr[divIdx].substring(fromOffset,toOffset),node=document.createTextNode(content);if(className){var _span=document.createElement("span");return _span.className="".concat(className," appended"),_span.appendChild(node),div.appendChild(_span),className.includes("selected")?_span.offsetLeft:0}return div.appendChild(node),0}}},{key:"_updateMatches",value:function(){if(this.enabled){for(var findController=this.findController,matches=this.matches,pageIdx=this.pageIdx,textContentItemsStr=this.textContentItemsStr,textDivs=this.textDivs,clearedUntilDivIdx=-1,i=0,ii=matches.length;i<ii;i++){for(var match=matches[i],n=Math.max(clearedUntilDivIdx,match.begin.divIdx),end=match.end.divIdx;n<=end;n++){var div=textDivs[n];div.textContent=textContentItemsStr[n],div.className=""}clearedUntilDivIdx=match.end.divIdx+1}if(null!=findController&&findController.highlightMatches){var pageMatches=findController.pageMatches[pageIdx]||null,pageMatchesLength=findController.pageMatchesLength[pageIdx]||null;this.matches=this._convertMatches(pageMatches,pageMatchesLength),this._renderMatches(this.matches)}}}}]),TextHighlighter}();exports.TextHighlighter=TextHighlighter},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.DownloadManager=void 0;var _pdfjsLib=__w_pdfjs_require__(3);function _download(blobUrl,filename){var a=document.createElement("a");if(!a.click)throw new Error('DownloadManager: "a.click()" is not supported.');a.href=blobUrl,a.target="_parent","download"in a&&(a.download=filename),(document.body||document.documentElement).appendChild(a),a.click(),a.remove()}var DownloadManager=function(){function DownloadManager(){_classCallCheck(this,DownloadManager),this._openBlobUrls=new WeakMap}return _createClass(DownloadManager,[{key:"downloadUrl",value:function(url,filename){(0,_pdfjsLib.createValidAbsoluteUrl)(url,"http://example.com")?_download(url+"#pdfjs.action=download",filename):console.error("downloadUrl - not a valid URL: ".concat(url))}},{key:"downloadData",value:function(data,filename,contentType){_download(URL.createObjectURL(new Blob([data],{type:contentType})),filename)}},{key:"openOrDownloadData",value:function(element,data,filename){var isPdfData=(0,_pdfjsLib.isPdfFile)(filename),contentType=isPdfData?"application/pdf":"";if(isPdfData){var viewerUrl,blobUrl=this._openBlobUrls.get(element);blobUrl||(blobUrl=URL.createObjectURL(new Blob([data],{type:contentType})),this._openBlobUrls.set(element,blobUrl)),viewerUrl="?file="+encodeURIComponent(blobUrl+"#"+filename);try{return window.open(viewerUrl),!0}catch(ex){console.error("openOrDownloadData: ".concat(ex)),URL.revokeObjectURL(blobUrl),this._openBlobUrls.delete(element)}}return this.downloadData(data,filename,contentType),!1}},{key:"download",value:function(blob,url,filename){var blobUrl=URL.createObjectURL(blob);_download(blobUrl,filename)}}]),DownloadManager}();exports.DownloadManager=DownloadManager},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.WaitOnType=exports.EventBus=exports.AutomationEventBus=void 0,exports.waitOnEventOrTimeout=function(_ref23){var target=_ref23.target,name=_ref23.name,_ref23$delay=_ref23.delay,delay=void 0===_ref23$delay?0:_ref23$delay;return new Promise((function(resolve,reject){if("object"!==_typeof(target)||!name||"string"!=typeof name||!(Number.isInteger(delay)&&delay>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(type){target instanceof EventBus?target._off(name,eventHandler):target.removeEventListener(name,eventHandler),timeout&&clearTimeout(timeout),resolve(type)}var eventHandler=handler.bind(null,WaitOnType.EVENT);target instanceof EventBus?target._on(name,eventHandler):target.addEventListener(name,eventHandler);var timeoutHandler=handler.bind(null,WaitOnType.TIMEOUT),timeout=setTimeout(timeoutHandler,delay)}))};var WaitOnType={EVENT:"event",TIMEOUT:"timeout"};exports.WaitOnType=WaitOnType;var EventBus=function(){function EventBus(){_classCallCheck(this,EventBus),this._listeners=Object.create(null)}return _createClass(EventBus,[{key:"on",value:function(eventName,listener){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(eventName,listener,{external:!0,once:null==options?void 0:options.once})}},{key:"off",value:function(eventName,listener){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._off(eventName,listener,{external:!0,once:null==options?void 0:options.once})}},{key:"dispatch",value:function(eventName,data){var eventListeners=this._listeners[eventName];if(eventListeners&&0!==eventListeners.length){var externalListeners,_step15,_iterator15=_createForOfIteratorHelper(eventListeners.slice(0));try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _step15$value=_step15.value,_listener=_step15$value.listener,external=_step15$value.external;_step15$value.once&&this._off(eventName,_listener),external?(externalListeners||(externalListeners=[])).push(_listener):_listener(data)}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}if(externalListeners){var _step16,_iterator16=_createForOfIteratorHelper(externalListeners);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){(0,_step16.value)(data)}}catch(err){_iterator16.e(err)}finally{_iterator16.f()}externalListeners=null}}}},{key:"_on",value:function(eventName,listener){var _this$_listeners,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,eventListeners=(_this$_listeners=this._listeners)[eventName]||(_this$_listeners[eventName]=[]);eventListeners.push({listener:listener,external:!0===(null==options?void 0:options.external),once:!0===(null==options?void 0:options.once)})}},{key:"_off",value:function(eventName,listener){var eventListeners=this._listeners[eventName];if(eventListeners)for(var i=0,ii=eventListeners.length;i<ii;i++)if(eventListeners[i].listener===listener)return void eventListeners.splice(i,1)}}]),EventBus}();exports.EventBus=EventBus;var AutomationEventBus=function(_EventBus){_inherits(AutomationEventBus,_EventBus);var _super3=_createSuper(AutomationEventBus);function AutomationEventBus(){return _classCallCheck(this,AutomationEventBus),_super3.apply(this,arguments)}return _createClass(AutomationEventBus,[{key:"dispatch",value:function(eventName,data){throw new Error("Not implemented: AutomationEventBus.dispatch")}}]),AutomationEventBus}(EventBus);exports.AutomationEventBus=AutomationEventBus},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericL10n=void 0,__w_pdfjs_require__(19);var _l10n_utils=__w_pdfjs_require__(4),webL10n=document.webL10n,GenericL10n=function(){function GenericL10n(lang){_classCallCheck(this,GenericL10n),this._lang=lang,this._ready=new Promise((function(resolve,reject){webL10n.setLanguage((0,_l10n_utils.fixupLangCode)(lang),(function(){resolve(webL10n)}))}))}var _translate,_get2,_getDirection,_getLanguage;return _createClass(GenericL10n,[{key:"getLanguage",value:(_getLanguage=_asyncToGenerator(regeneratorRuntime.mark((function _callee14(){var l10n;return regeneratorRuntime.wrap((function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return _context15.next=2,this._ready;case 2:return l10n=_context15.sent,_context15.abrupt("return",l10n.getLanguage());case 4:case"end":return _context15.stop()}}),_callee14,this)}))),function(){return _getLanguage.apply(this,arguments)})},{key:"getDirection",value:(_getDirection=_asyncToGenerator(regeneratorRuntime.mark((function _callee15(){var l10n;return regeneratorRuntime.wrap((function(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return _context16.next=2,this._ready;case 2:return l10n=_context16.sent,_context16.abrupt("return",l10n.getDirection());case 4:case"end":return _context16.stop()}}),_callee15,this)}))),function(){return _getDirection.apply(this,arguments)})},{key:"get",value:(_get2=_asyncToGenerator(regeneratorRuntime.mark((function _callee16(key){var args,fallback,l10n,_args17=arguments;return regeneratorRuntime.wrap((function(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:return args=_args17.length>1&&void 0!==_args17[1]?_args17[1]:null,fallback=_args17.length>2&&void 0!==_args17[2]?_args17[2]:(0,_l10n_utils.getL10nFallback)(key,args),_context17.next=4,this._ready;case 4:return l10n=_context17.sent,_context17.abrupt("return",l10n.get(key,args,fallback));case 6:case"end":return _context17.stop()}}),_callee16,this)}))),function(_x6){return _get2.apply(this,arguments)})},{key:"translate",value:(_translate=_asyncToGenerator(regeneratorRuntime.mark((function _callee17(element){var l10n;return regeneratorRuntime.wrap((function(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:return _context18.next=2,this._ready;case 2:return l10n=_context18.sent,_context18.abrupt("return",l10n.translate(element));case 4:case"end":return _context18.stop()}}),_callee17,this)}))),function(_x7){return _translate.apply(this,arguments)})}]),GenericL10n}();exports.GenericL10n=GenericL10n},function(){document.webL10n=function(window,document,undefined$1){var gL10nData={},gTextData="",gTextProp="textContent",gLanguage="",gMacros={},gReadyState="loading";function xhrLoadText(url,onSuccess,onFailure){onSuccess=onSuccess||function(data){},onFailure=onFailure||function(){};var xhr=new XMLHttpRequest;xhr.open("GET",url,true),xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=utf-8"),xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status||0===xhr.status?onSuccess(xhr.responseText):onFailure())},xhr.onerror=onFailure,xhr.ontimeout=onFailure;try{xhr.send(null)}catch(e){onFailure()}}function parseResource(href,lang,successCallback,failureCallback){var baseURL=href.replace(/[^\/]*$/,"")||"./";function evalString(text){return text.lastIndexOf("\\")<0?text:text.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(href,(function(response){gTextData+=response,function(text,parsedPropertiesCallback){var dictionary={},reBlank=/^\s*|\s*$/,reComment=/^\s*#|^\s*$/,reSection=/^\s*\[(.*)\]\s*$/,reImport=/^\s*@import\s+url\((.*)\)\s*$/i,reSplit=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(rawText,extendedSyntax,parsedRawLinesCallback){var entries=rawText.replace(reBlank,"").split(/[\r\n]+/),currentLang="*",genericLang=lang.split("-",1)[0],skipLang=!1,match="";!function nextEntry(){for(;;){if(!entries.length)return void parsedRawLinesCallback();var line=entries.shift();if(!reComment.test(line)){if(extendedSyntax){if(match=reSection.exec(line)){currentLang=match[1].toLowerCase(),skipLang="*"!==currentLang&&currentLang!==lang&&currentLang!==genericLang;continue}if(skipLang)continue;if(match=reImport.exec(line))return void loadImport(baseURL+match[1],nextEntry)}var tmp=line.match(reSplit);tmp&&3==tmp.length&&(dictionary[tmp[1]]=evalString(tmp[2]))}}}()}function loadImport(url,callback){xhrLoadText(url,(function(content){parseRawLines(content,!1,callback)}),(function(){console.warn(url+" not found."),callback()}))}parseRawLines(text,!0,(function(){parsedPropertiesCallback(dictionary)}))}(response,(function(data){for(var key in data){var id,prop,index=key.lastIndexOf(".");index>0?(id=key.substring(0,index),prop=key.substring(index+1)):(id=key,prop=gTextProp),gL10nData[id]||(gL10nData[id]={}),gL10nData[id][prop]=data[key]}successCallback&&successCallback()}))}),failureCallback)}function loadLocale(lang,callback){lang&&(lang=lang.toLowerCase()),callback=callback||function(){},gL10nData={},gTextData="",gLanguage="",gLanguage=lang;var langLinks=document.querySelectorAll('link[type="application/l10n"]'),langCount=langLinks.length;if(0!==langCount){var script,onResourceLoaded,gResourceCount=0;onResourceLoaded=function(){++gResourceCount>=langCount&&(callback(),gReadyState="complete")};for(var i=0;i<langCount;i++){new L10nResourceLink(langLinks[i]).load(lang,onResourceLoaded)}}else{var dict=(script=document.querySelector('script[type="application/l10n"]'))?JSON.parse(script.innerHTML):null;if(dict&&dict.locales&&dict.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(gL10nData=dict.locales[lang])){var defaultLocale=dict.default_locale.toLowerCase();for(var anyCaseLang in dict.locales){if((anyCaseLang=anyCaseLang.toLowerCase())===lang){gL10nData=dict.locales[lang];break}anyCaseLang===defaultLocale&&(gL10nData=dict.locales[defaultLocale])}}callback()}else console.log("no resource to load, early way out");gReadyState="complete"}function L10nResourceLink(link){var href=link.href;this.load=function(lang,callback){parseResource(href,lang,callback,(function(){console.warn(href+" not found."),console.warn('"'+lang+'" resource not found'),gLanguage="",callback()}))}}}function getL10nData(key,args,fallback){var data=gL10nData[key];if(!data){if(console.warn("#"+key+" is undefined."),!fallback)return null;data=fallback}var rv={};for(var prop in data){var str=data[prop];str=substArguments(str=substIndexes(str,args,key,prop),args,key),rv[prop]=str}return rv}function substIndexes(str,args,key,prop){var reMatch=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(str);if(!reMatch||!reMatch.length)return str;var param,macroName=reMatch[1],paramName=reMatch[2];(args&&paramName in args?param=args[paramName]:paramName in gL10nData&&(param=gL10nData[paramName]),macroName in gMacros)&&(str=(0,gMacros[macroName])(str,param,key,prop));return str}function substArguments(str,args,key){return str.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(matched_text,arg){return args&&arg in args?args[arg]:arg in gL10nData?gL10nData[arg]:(console.log("argument {{"+arg+"}} for #"+key+" is undefined."),matched_text)}))}function translateElement(element){var l10n=function(element){if(!element)return{};var l10nId=element.getAttribute("data-l10n-id"),l10nArgs=element.getAttribute("data-l10n-args"),args={};if(l10nArgs)try{args=JSON.parse(l10nArgs)}catch(e){console.warn("could not parse arguments for #"+l10nId)}return{id:l10nId,args:args}}(element);if(l10n.id){var data=getL10nData(l10n.id,l10n.args);if(data){if(data[gTextProp]){if(0===function(element){if(element.children)return element.children.length;if(void 0!==element.childElementCount)return element.childElementCount;for(var count=0,i=0;i<element.childNodes.length;i++)count+=1===element.nodeType?1:0;return count}(element))element[gTextProp]=data[gTextProp];else{for(var children=element.childNodes,found=!1,i=0,l=children.length;i<l;i++)3===children[i].nodeType&&/\S/.test(children[i].nodeValue)&&(found?children[i].nodeValue="":(children[i].nodeValue=data[gTextProp],found=!0));if(!found){var textNode=document.createTextNode(data[gTextProp]);element.insertBefore(textNode,element.firstChild)}}delete data[gTextProp]}for(var k in data)element[k]=data[k]}else console.warn("#"+l10n.id+" is undefined.")}}return gMacros.plural=function(str,param,key,prop){var n=parseFloat(param);if(isNaN(n))return str;if(prop!=gTextProp)return str;gMacros._pluralRules||(gMacros._pluralRules=function(lang){function isIn(n,list){return-1!==list.indexOf(n)}function isBetween(n,start,end){return start<=n&&n<=end}var pluralRules={0:function(n){return"other"},1:function(n){return isBetween(n%100,3,10)?"few":0===n?"zero":isBetween(n%100,11,99)?"many":2==n?"two":1==n?"one":"other"},2:function(n){return 0!==n&&n%10==0?"many":2==n?"two":1==n?"one":"other"},3:function(n){return 1==n?"one":"other"},4:function(n){return isBetween(n,0,1)?"one":"other"},5:function(n){return isBetween(n,0,2)&&2!=n?"one":"other"},6:function(n){return 0===n?"zero":n%10==1&&n%100!=11?"one":"other"},7:function(n){return 2==n?"two":1==n?"one":"other"},8:function(n){return isBetween(n,3,6)?"few":isBetween(n,7,10)?"many":2==n?"two":1==n?"one":"other"},9:function(n){return 0===n||1!=n&&isBetween(n%100,1,19)?"few":1==n?"one":"other"},10:function(n){return isBetween(n%10,2,9)&&!isBetween(n%100,11,19)?"few":n%10!=1||isBetween(n%100,11,19)?"other":"one"},11:function(n){return isBetween(n%10,2,4)&&!isBetween(n%100,12,14)?"few":n%10==0||isBetween(n%10,5,9)||isBetween(n%100,11,14)?"many":n%10==1&&n%100!=11?"one":"other"},12:function(n){return isBetween(n,2,4)?"few":1==n?"one":"other"},13:function(n){return isBetween(n%10,2,4)&&!isBetween(n%100,12,14)?"few":1!=n&&isBetween(n%10,0,1)||isBetween(n%10,5,9)||isBetween(n%100,12,14)?"many":1==n?"one":"other"},14:function(n){return isBetween(n%100,3,4)?"few":n%100==2?"two":n%100==1?"one":"other"},15:function(n){return 0===n||isBetween(n%100,2,10)?"few":isBetween(n%100,11,19)?"many":1==n?"one":"other"},16:function(n){return n%10==1&&11!=n?"one":"other"},17:function(n){return 3==n?"few":0===n?"zero":6==n?"many":2==n?"two":1==n?"one":"other"},18:function(n){return 0===n?"zero":isBetween(n,0,2)&&0!==n&&2!=n?"one":"other"},19:function(n){return isBetween(n,2,10)?"few":isBetween(n,0,1)?"one":"other"},20:function(n){return!isBetween(n%10,3,4)&&n%10!=9||isBetween(n%100,10,19)||isBetween(n%100,70,79)||isBetween(n%100,90,99)?n%1e6==0&&0!==n?"many":n%10!=2||isIn(n%100,[12,72,92])?n%10!=1||isIn(n%100,[11,71,91])?"other":"one":"two":"few"},21:function(n){return 0===n?"zero":1==n?"one":"other"},22:function(n){return isBetween(n,0,1)||isBetween(n,11,99)?"one":"other"},23:function(n){return isBetween(n%10,1,2)||n%20==0?"one":"other"},24:function(n){return isBetween(n,3,10)||isBetween(n,13,19)?"few":isIn(n,[2,12])?"two":isIn(n,[1,11])?"one":"other"}},index={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[lang.replace(/-.*$/,"")];return index in pluralRules?pluralRules[index]:(console.warn("plural form unknown for ["+lang+"]"),function(){return"other"})}(gLanguage));var index="["+gMacros._pluralRules(n)+"]";return 0===n&&key+"[zero]"in gL10nData?str=gL10nData[key+"[zero]"][prop]:1==n&&key+"[one]"in gL10nData?str=gL10nData[key+"[one]"][prop]:2==n&&key+"[two]"in gL10nData?str=gL10nData[key+"[two]"][prop]:key+index in gL10nData?str=gL10nData[key+index][prop]:key+"[other]"in gL10nData&&(str=gL10nData[key+"[other]"][prop]),str},{get:function(key,args,fallbackString){var fallback,index=key.lastIndexOf("."),prop=gTextProp;index>0&&(prop=key.substring(index+1),key=key.substring(0,index)),fallbackString&&((fallback={})[prop]=fallbackString);var data=getL10nData(key,args,fallback);return data&&prop in data?data[prop]:"{{"+key+"}}"},getData:function(){return gL10nData},getText:function(){return gTextData},getLanguage:function(){return gLanguage},setLanguage:function(lang,callback){loadLocale(lang,(function(){callback&&callback()}))},getDirection:function(){var shortCode=gLanguage.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(shortCode)>=0?"rtl":"ltr"},translate:function(element){for(var children=function(element){return element?element.querySelectorAll("*[data-l10n-id]"):[]}(element=element||document.documentElement),elementCount=children.length,i=0;i<elementCount;i++)translateElement(children[i]);translateElement(element)},getReadyState:function(){return gReadyState},ready:function(callback){callback&&("complete"==gReadyState||"interactive"==gReadyState?window.setTimeout((function(){callback()})):document.addEventListener&&document.addEventListener("localized",(function once(){document.removeEventListener("localized",once),callback()})))}}}(window,document)},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFFindController=exports.FindState=void 0;var _ui_utils=__w_pdfjs_require__(6),_pdfjsLib=__w_pdfjs_require__(3),_pdf_find_utils=__w_pdfjs_require__(21),FindState={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};exports.FindState=FindState;var CHARACTERS_TO_NORMALIZE={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},DIACRITICS_EXCEPTION=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),DIACRITICS_EXCEPTION_STR=_toConsumableArray(DIACRITICS_EXCEPTION.values()).map((function(x){return String.fromCharCode(x)})).join(""),DIACRITICS_REG_EXP=/(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])+/g,SPECIAL_CHARS_REG_EXP=/([\$\(-\+\.\?\[-\^\{-\}])|((?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]))|([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)|((?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]))|((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]))/g,NOT_DIACRITIC_FROM_END_REG_EXP=/((?:(?![\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])[\s\S]))(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/,NOT_DIACRITIC_FROM_START_REG_EXP=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*((?:(?![\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])[\s\S]))/,normalizationRegex=null;function normalize(text){if(!normalizationRegex){var replace=Object.keys(CHARACTERS_TO_NORMALIZE).join("");normalizationRegex=new RegExp("([".concat(replace,"])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)"),"gum")}for(var m,rawDiacriticsPositions=[];null!==(m=DIACRITICS_REG_EXP.exec(text));)rawDiacriticsPositions.push([m[0].length,m.index]);var normalized=text.normalize("NFD"),positions=[[0,0]],k=0,shift=0,shiftOrigin=0,eol=0,hasDiacritics=!1;return normalized=normalized.replace(normalizationRegex,(function(match,p1,p2,p3,p4,i){if(i-=shiftOrigin,p1){for(var replacement=CHARACTERS_TO_NORMALIZE[match],jj=replacement.length,j=1;j<jj;j++)positions.push([i-shift+j,shift-j]);return shift-=jj-1,replacement}if(p2){var _rawDiacriticsPositio,hasTrailingDashEOL=p2.endsWith("\n"),len=hasTrailingDashEOL?p2.length-2:p2.length;hasDiacritics=!0;var _jj=len;i+eol===(null===(_rawDiacriticsPositio=rawDiacriticsPositions[k])||void 0===_rawDiacriticsPositio?void 0:_rawDiacriticsPositio[1])&&(_jj-=rawDiacriticsPositions[k][0],++k);for(var _j=1;_j<_jj+1;_j++)positions.push([i-1-shift+_j,shift-_j]);return shift-=_jj,shiftOrigin+=_jj,hasTrailingDashEOL?(i+=len-1,positions.push([i-shift+1,1+shift]),shift+=1,shiftOrigin+=1,eol+=1,p2.slice(0,len)):p2}return p3?(positions.push([i-shift+1,1+shift]),shift+=1,shiftOrigin+=1,eol+=1,p3.charAt(0)):(positions.push([i-shift+1,shift-1]),shift-=1,shiftOrigin+=1,eol+=1," ")})),positions.push([normalized.length,shift]),[normalized,positions,hasDiacritics]}function getOriginalIndex(diffs,pos,len){if(!diffs)return[pos,len];var start=pos,end=pos+len,i=(0,_ui_utils.binarySearchFirstItem)(diffs,(function(x){return x[0]>=start}));diffs[i][0]>start&&--i;var j=(0,_ui_utils.binarySearchFirstItem)(diffs,(function(x){return x[0]>=end}),i);return diffs[j][0]>end&&--j,[start+diffs[i][1],len+diffs[j][1]-diffs[i][1]]}var _onFind=new WeakSet,_onFindBarClose=new WeakSet,PDFFindController=function(){function PDFFindController(_ref24){var linkService=_ref24.linkService,eventBus=_ref24.eventBus;_classCallCheck(this,PDFFindController),_classPrivateMethodInitSpec(this,_onFindBarClose),_classPrivateMethodInitSpec(this,_onFind),this._linkService=linkService,this._eventBus=eventBus,this._reset(),eventBus._on("find",_classPrivateMethodGet(this,_onFind,_onFind2).bind(this)),eventBus._on("findbarclose",_classPrivateMethodGet(this,_onFindBarClose,_onFindBarClose2).bind(this))}return _createClass(PDFFindController,[{key:"highlightMatches",get:function(){return this._highlightMatches}},{key:"pageMatches",get:function(){return this._pageMatches}},{key:"pageMatchesLength",get:function(){return this._pageMatchesLength}},{key:"selected",get:function(){return this._selected}},{key:"state",get:function(){return this._state}},{key:"setDocument",value:function(pdfDocument){this._pdfDocument&&this._reset(),pdfDocument&&(this._pdfDocument=pdfDocument,this._firstPageCapability.resolve())}},{key:"scrollMatchIntoView",value:function(_ref25){var _ref25$element=_ref25.element,element=void 0===_ref25$element?null:_ref25$element,_ref25$selectedLeft=_ref25.selectedLeft,selectedLeft=void 0===_ref25$selectedLeft?0:_ref25$selectedLeft,_ref25$pageIndex=_ref25.pageIndex,pageIndex=void 0===_ref25$pageIndex?-1:_ref25$pageIndex,_ref25$matchIndex=_ref25.matchIndex,matchIndex=void 0===_ref25$matchIndex?-1:_ref25$matchIndex;if(this._scrollMatches&&element&&-1!==matchIndex&&matchIndex===this._selected.matchIdx&&-1!==pageIndex&&pageIndex===this._selected.pageIdx){this._scrollMatches=!1;var spot={top:-50,left:selectedLeft+-400};(0,_ui_utils.scrollIntoView)(element,spot,!0)}}},{key:"_reset",value:function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,_pdfjsLib.createPromiseCapability)()}},{key:"_query",get:function(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;var _normalize2=_slicedToArray(normalize(this._state.query),1);this._normalizedQuery=_normalize2[0]}return this._normalizedQuery}},{key:"_shouldDirtyMatch",value:function(state){if(state.query!==this._state.query)return!0;switch(state.type){case"again":var pageNumber=this._selected.pageIdx+1,linkService=this._linkService;return pageNumber>=1&&pageNumber<=linkService.pagesCount&&pageNumber!==linkService.page&&!linkService.isPageVisible(pageNumber);case"highlightallchange":return!1}return!0}},{key:"_isEntireWord",value:function(content,startIdx,length){var match=content.slice(0,startIdx).match(NOT_DIACRITIC_FROM_END_REG_EXP);if(match){var first=content.charCodeAt(startIdx),limit=match[1].charCodeAt(0);if((0,_pdf_find_utils.getCharacterType)(first)===(0,_pdf_find_utils.getCharacterType)(limit))return!1}if(match=content.slice(startIdx+length).match(NOT_DIACRITIC_FROM_START_REG_EXP)){var last=content.charCodeAt(startIdx+length-1),_limit=match[1].charCodeAt(0);if((0,_pdf_find_utils.getCharacterType)(last)===(0,_pdf_find_utils.getCharacterType)(_limit))return!1}return!0}},{key:"_calculateRegExpMatch",value:function(query,entireWord,pageIndex,pageContent){for(var match,matches=[],matchesLength=[],diffs=this._pageDiffs[pageIndex];null!==(match=query.exec(pageContent));)if(!entireWord||this._isEntireWord(pageContent,match.index,match[0].length)){var _getOriginalIndex2=_slicedToArray(getOriginalIndex(diffs,match.index,match[0].length),2),matchPos=_getOriginalIndex2[0],matchLen=_getOriginalIndex2[1];matchLen&&(matches.push(matchPos),matchesLength.push(matchLen))}this._pageMatches[pageIndex]=matches,this._pageMatchesLength[pageIndex]=matchesLength}},{key:"_convertToRegExpString",value:function(query,hasDiacritics){var matchDiacritics=this._state.matchDiacritics,isUnicode=!1;return(query=query.replace(SPECIAL_CHARS_REG_EXP,(function(match,p1,p2,p3,p4,p5){return p1?"[ ]*\\".concat(p1,"[ ]*"):p2?"[ ]*".concat(p2,"[ ]*"):p3?"[ ]+":matchDiacritics?p4||p5:p4?DIACRITICS_EXCEPTION.has(p4.charCodeAt(0))?p4:"":hasDiacritics?(isUnicode=!0,"".concat(p5,"\\p{M}*")):p5}))).endsWith("[ ]*")&&(query=query.slice(0,query.length-"[ ]*".length)),matchDiacritics&&hasDiacritics&&(isUnicode=!0,query="".concat(query,"(?=[").concat(DIACRITICS_EXCEPTION_STR,"]|[^\\p{M}]|$)")),[isUnicode,query]}},{key:"_calculateMatch",value:function(pageIndex){var _this15=this,query=this._query;if(0!==query.length){var _this$_state=this._state,caseSensitive=_this$_state.caseSensitive,entireWord=_this$_state.entireWord,phraseSearch=_this$_state.phraseSearch,pageContent=this._pageContents[pageIndex],hasDiacritics=this._hasDiacritics[pageIndex],isUnicode=!1;if(phraseSearch){var _this$_convertToRegEx2=_slicedToArray(this._convertToRegExpString(query,hasDiacritics),2);isUnicode=_this$_convertToRegEx2[0],query=_this$_convertToRegEx2[1]}else{var match=query.match(/\S+/g);match&&(query=match.sort().reverse().map((function(q){var _this15$_convertToReg2=_slicedToArray(_this15._convertToRegExpString(q,hasDiacritics),2),isUnicodePart=_this15$_convertToReg2[0],queryPart=_this15$_convertToReg2[1];return isUnicode||(isUnicode=isUnicodePart),"(".concat(queryPart,")")})).join("|"))}var flags="g".concat(isUnicode?"u":"").concat(caseSensitive?"":"i");query=new RegExp(query,flags),this._calculateRegExpMatch(query,entireWord,pageIndex,pageContent),this._state.highlightAll&&this._updatePage(pageIndex),this._resumePageIdx===pageIndex&&(this._resumePageIdx=null,this._nextPageMatch());var pageMatchesCount=this._pageMatches[pageIndex].length;pageMatchesCount>0&&(this._matchesCountTotal+=pageMatchesCount,this._updateUIResultsCount())}}},{key:"_extractText",value:function(){var _this16=this;if(!(this._extractTextPromises.length>0))for(var promise=Promise.resolve(),_loop2=function(i,ii){var extractTextCapability=(0,_pdfjsLib.createPromiseCapability)();_this16._extractTextPromises[i]=extractTextCapability.promise,promise=promise.then((function(){return _this16._pdfDocument.getPage(i+1).then((function(pdfPage){return pdfPage.getTextContent()})).then((function(textContent){for(var textItems=textContent.items,strBuf=[],j=0,jj=textItems.length;j<jj;j++)strBuf.push(textItems[j].str),textItems[j].hasEOL&&strBuf.push("\n");var _normalize4=_slicedToArray(normalize(strBuf.join("")),3);_this16._pageContents[i]=_normalize4[0],_this16._pageDiffs[i]=_normalize4[1],_this16._hasDiacritics[i]=_normalize4[2],extractTextCapability.resolve(i)}),(function(reason){console.error("Unable to get text content for page ".concat(i+1),reason),_this16._pageContents[i]="",_this16._pageDiffs[i]=null,_this16._hasDiacritics[i]=!1,extractTextCapability.resolve(i)}))}))},i=0,ii=this._linkService.pagesCount;i<ii;i++)_loop2(i)}},{key:"_updatePage",value:function(index){this._scrollMatches&&this._selected.pageIdx===index&&(this._linkService.page=index+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:index})}},{key:"_updateAllPages",value:function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}},{key:"_nextMatch",value:function(){var _this17=this,previous=this._state.findPrevious,currentPageIndex=this._linkService.page-1,numPages=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=currentPageIndex,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(var i=0;i<numPages;i++)this._pendingFindMatches.has(i)||(this._pendingFindMatches.add(i),this._extractTextPromises[i].then((function(pageIdx){_this17._pendingFindMatches.delete(pageIdx),_this17._calculateMatch(pageIdx)})))}if(""!==this._query){if(!this._resumePageIdx){var offset=this._offset;if(this._pagesToSearch=numPages,null!==offset.matchIdx){var numPageMatches=this._pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0)return offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(previous)}this._nextPageMatch()}}else this._updateUIState(FindState.FOUND)}},{key:"_matchesReady",value:function(matches){var offset=this._offset,numMatches=matches.length,previous=this._state.findPrevious;return numMatches?(offset.matchIdx=previous?numMatches-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(previous),!!(offset.wrapped&&(offset.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}},{key:"_nextPageMatch",value:function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");var matches=null;do{var pageIdx=this._offset.pageIdx;if(!(matches=this._pageMatches[pageIdx])){this._resumePageIdx=pageIdx;break}}while(!this._matchesReady(matches))}},{key:"_advanceOffsetPage",value:function(previous){var offset=this._offset,numPages=this._linkService.pagesCount;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1,offset.matchIdx=null,this._pagesToSearch--,(offset.pageIdx>=numPages||offset.pageIdx<0)&&(offset.pageIdx=previous?numPages-1:0,offset.wrapped=!0)}},{key:"_updateMatch",value:function(){var found=arguments.length>0&&void 0!==arguments[0]&&arguments[0],state=FindState.NOT_FOUND,wrapped=this._offset.wrapped;if(this._offset.wrapped=!1,found){var previousPage=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,state=wrapped?FindState.WRAPPED:FindState.FOUND,-1!==previousPage&&previousPage!==this._selected.pageIdx&&this._updatePage(previousPage)}this._updateUIState(state,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}},{key:"_requestMatchesCount",value:function(){var _this$_selected=this._selected,pageIdx=_this$_selected.pageIdx,matchIdx=_this$_selected.matchIdx,current=0,total=this._matchesCountTotal;if(-1!==matchIdx){for(var i=0;i<pageIdx;i++){var _this$_pageMatches$i;current+=(null===(_this$_pageMatches$i=this._pageMatches[i])||void 0===_this$_pageMatches$i?void 0:_this$_pageMatches$i.length)||0}current+=matchIdx+1}return(current<1||current>total)&&(current=total=0),{current:current,total:total}}},{key:"_updateUIResultsCount",value:function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}},{key:"_updateUIState",value:function(state){var _this$_state$query,_this$_state2,previous=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:state,previous:previous,matchesCount:this._requestMatchesCount(),rawQuery:null!==(_this$_state$query=null===(_this$_state2=this._state)||void 0===_this$_state2?void 0:_this$_state2.query)&&void 0!==_this$_state$query?_this$_state$query:null})}}]),PDFFindController}();function _onFind2(state){var _this18=this;if(state){var pdfDocument=this._pdfDocument,type=state.type;(null===this._state||this._shouldDirtyMatch(state))&&(this._dirtyMatch=!0),this._state=state,"highlightallchange"!==type&&this._updateUIState(FindState.PENDING),this._firstPageCapability.promise.then((function(){if(_this18._pdfDocument&&(!pdfDocument||_this18._pdfDocument===pdfDocument)){_this18._extractText();var findbarClosed=!_this18._highlightMatches,pendingTimeout=!!_this18._findTimeout;_this18._findTimeout&&(clearTimeout(_this18._findTimeout),_this18._findTimeout=null),type?_this18._dirtyMatch?_this18._nextMatch():"again"===type?(_this18._nextMatch(),findbarClosed&&_this18._state.highlightAll&&_this18._updateAllPages()):"highlightallchange"===type?(pendingTimeout?_this18._nextMatch():_this18._highlightMatches=!0,_this18._updateAllPages()):_this18._nextMatch():_this18._findTimeout=setTimeout((function(){_this18._nextMatch(),_this18._findTimeout=null}),250)}}))}}function _onFindBarClose2(evt){var _this19=this,pdfDocument=this._pdfDocument;this._firstPageCapability.promise.then((function(){!_this19._pdfDocument||pdfDocument&&_this19._pdfDocument!==pdfDocument||(_this19._findTimeout&&(clearTimeout(_this19._findTimeout),_this19._findTimeout=null),_this19._resumePageIdx&&(_this19._resumePageIdx=null,_this19._dirtyMatch=!0),_this19._updateUIState(FindState.FOUND),_this19._highlightMatches=!1,_this19._updateAllPages())}))}exports.PDFFindController=PDFFindController},function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.CharacterType=void 0,exports.getCharacterType=function(charCode){if(function(charCode){return charCode<11904}(charCode))return function(charCode){return 0==(65408&charCode)}(charCode)?function(charCode){return 32===charCode||9===charCode||13===charCode||10===charCode}(charCode)?CharacterType.SPACE:function(charCode){return charCode>=97&&charCode<=122||charCode>=65&&charCode<=90}(charCode)||function(charCode){return charCode>=48&&charCode<=57}(charCode)||95===charCode?CharacterType.ALPHA_LETTER:CharacterType.PUNCT:function(charCode){return 3584==(65408&charCode)}(charCode)?CharacterType.THAI_LETTER:160===charCode?CharacterType.SPACE:CharacterType.ALPHA_LETTER;if(function(charCode){return charCode>=13312&&charCode<=40959||charCode>=63744&&charCode<=64255}(charCode))return CharacterType.HAN_LETTER;if(function(charCode){return charCode>=12448&&charCode<=12543}(charCode))return CharacterType.KATAKANA_LETTER;if(function(charCode){return charCode>=12352&&charCode<=12447}(charCode))return CharacterType.HIRAGANA_LETTER;if(function(charCode){return charCode>=65376&&charCode<=65439}(charCode))return CharacterType.HALFWIDTH_KATAKANA_LETTER;return CharacterType.ALPHA_LETTER};var CharacterType={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};exports.CharacterType=CharacterType},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFHistory=void 0,exports.isDestArraysEqual=isDestArraysEqual,exports.isDestHashesEqual=isDestHashesEqual;var _ui_utils=__w_pdfjs_require__(6),_event_utils=__w_pdfjs_require__(17);function getCurrentHash(){return document.location.hash}var PDFHistory=function(){function PDFHistory(_ref26){var _this20=this,linkService=_ref26.linkService,eventBus=_ref26.eventBus;_classCallCheck(this,PDFHistory),this.linkService=linkService,this.eventBus=eventBus,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",(function(evt){_this20._isViewerInPresentationMode=evt.state!==_ui_utils.PresentationModeState.NORMAL})),this.eventBus._on("pagesinit",(function(){_this20._isPagesLoaded=!1,_this20.eventBus._on("pagesloaded",(function(evt){_this20._isPagesLoaded=!!evt.pagesCount}),{once:!0})}))}return _createClass(PDFHistory,[{key:"initialize",value:function(_ref27){var fingerprint=_ref27.fingerprint,_ref27$resetHistory=_ref27.resetHistory,resetHistory=void 0!==_ref27$resetHistory&&_ref27$resetHistory,_ref27$updateUrl=_ref27.updateUrl,updateUrl=void 0!==_ref27$updateUrl&&_ref27$updateUrl;if(fingerprint&&"string"==typeof fingerprint){this._initialized&&this.reset();var reInitialized=""!==this._fingerprint&&this._fingerprint!==fingerprint;this._fingerprint=fingerprint,this._updateUrl=!0===updateUrl,this._initialized=!0,this._bindEvents();var state=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=getCurrentHash(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(state,!0)||resetHistory){var _this$_parseCurrentHa=this._parseCurrentHash(!0),hash=_this$_parseCurrentHa.hash,page=_this$_parseCurrentHa.page,rotation=_this$_parseCurrentHa.rotation;return!hash||reInitialized||resetHistory?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:hash,page:page,rotation:rotation},!0)}var destination=state.destination;this._updateInternalState(destination,state.uid,!0),void 0!==destination.rotation&&(this._initialRotation=destination.rotation),destination.dest?(this._initialBookmark=JSON.stringify(destination.dest),this._destination.page=null):destination.hash?this._initialBookmark=destination.hash:destination.page&&(this._initialBookmark="page=".concat(destination.page))}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}},{key:"push",value:function(_ref28){var _this21=this,_ref28$namedDest=_ref28.namedDest,namedDest=void 0===_ref28$namedDest?null:_ref28$namedDest,explicitDest=_ref28.explicitDest,pageNumber=_ref28.pageNumber;if(this._initialized)if(namedDest&&"string"!=typeof namedDest)console.error("PDFHistory.push: "+'"'.concat(namedDest,'" is not a valid namedDest parameter.'));else if(Array.isArray(explicitDest))if(this._isValidPage(pageNumber)||null===pageNumber&&!this._destination){var hash=namedDest||JSON.stringify(explicitDest);if(hash){var forceReplace=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,hash)||isDestArraysEqual(this._destination.dest,explicitDest))){if(this._destination.page)return;forceReplace=!0}this._popStateInProgress&&!forceReplace||(this._pushOrReplaceState({dest:explicitDest,hash:hash,page:pageNumber,rotation:this.linkService.rotation},forceReplace),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){_this21._popStateInProgress=!1}))))}}else console.error("PDFHistory.push: "+'"'.concat(pageNumber,'" is not a valid pageNumber parameter.'));else console.error("PDFHistory.push: "+'"'.concat(explicitDest,'" is not a valid explicitDest parameter.'))}},{key:"pushPage",value:function(pageNumber){var _this$_destination,_this22=this;this._initialized&&(this._isValidPage(pageNumber)?(null===(_this$_destination=this._destination)||void 0===_this$_destination?void 0:_this$_destination.page)!==pageNumber&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:"page=".concat(pageNumber),page:pageNumber,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){_this22._popStateInProgress=!1}))))):console.error('PDFHistory.pushPage: "'.concat(pageNumber,'" is not a valid page number.')))}},{key:"pushCurrentPosition",value:function(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function(){if(this._initialized&&!this._popStateInProgress){var state=window.history.state;this._isValidState(state)&&state.uid>0&&window.history.back()}}},{key:"forward",value:function(){if(this._initialized&&!this._popStateInProgress){var state=window.history.state;this._isValidState(state)&&state.uid<this._maxUid&&window.history.forward()}}},{key:"popStateInProgress",get:function(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function(){return this._initialized?this._initialRotation:null}},{key:"_pushOrReplaceState",value:function(destination){var newUrl,forceReplace=arguments.length>1&&void 0!==arguments[1]&&arguments[1],shouldReplace=forceReplace||!this._destination,newState={fingerprint:this._fingerprint,uid:shouldReplace?this._uid:this._uid+1,destination:destination};if(this._updateInternalState(destination,newState.uid),this._updateUrl&&null!=destination&&destination.hash){var baseUrl=document.location.href.split("#")[0];baseUrl.startsWith("file://")||(newUrl="".concat(baseUrl,"#").concat(destination.hash))}shouldReplace?window.history.replaceState(newState,"",newUrl):window.history.pushState(newState,"",newUrl)}},{key:"_tryPushCurrentPosition",value:function(){var temporary=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var position=this._position;if(temporary&&((position=Object.assign(Object.create(null),this._position)).temporary=!0),this._destination){if(this._destination.temporary)this._pushOrReplaceState(position,!0);else if(this._destination.hash!==position.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){var forceReplace=!1;if(this._destination.page>=position.first&&this._destination.page<=position.page){if(void 0!==this._destination.dest||!this._destination.first)return;forceReplace=!0}this._pushOrReplaceState(position,forceReplace)}}else this._pushOrReplaceState(position)}}},{key:"_isValidPage",value:function(val){return Number.isInteger(val)&&val>0&&val<=this.linkService.pagesCount}},{key:"_isValidState",value:function(state){var checkReload=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!state)return!1;if(state.fingerprint!==this._fingerprint){if(!checkReload)return!1;if("string"!=typeof state.fingerprint||state.fingerprint.length!==this._fingerprint.length)return!1;var _performance$getEntri=performance.getEntriesByType("navigation"),_performance$getEntri2=_slicedToArray(_performance$getEntri,1),perfEntry=_performance$getEntri2[0];if("reload"!==(null==perfEntry?void 0:perfEntry.type))return!1}return!(!Number.isInteger(state.uid)||state.uid<0)&&(null!==state.destination&&"object"===_typeof(state.destination))}},{key:"_updateInternalState",value:function(destination,uid){var removeTemporary=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),removeTemporary&&null!=destination&&destination.temporary&&delete destination.temporary,this._destination=destination,this._uid=uid,this._maxUid=Math.max(this._maxUid,uid),this._numPositionUpdates=0}},{key:"_parseCurrentHash",value:function(){var checkNameddest=arguments.length>0&&void 0!==arguments[0]&&arguments[0],hash=unescape(getCurrentHash()).substring(1),params=(0,_ui_utils.parseQueryString)(hash),nameddest=params.get("nameddest")||"",page=0|params.get("page");return(!this._isValidPage(page)||checkNameddest&&nameddest.length>0)&&(page=null),{hash:hash,page:page,rotation:this.linkService.rotation}}},{key:"_updateViewarea",value:function(_ref29){var _this23=this,location=_ref29.location;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?"page=".concat(location.pageNumber):location.pdfOpenParams.substring(1),page:this.linkService.page,first:location.pageNumber,rotation:location.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((function(){_this23._popStateInProgress||_this23._tryPushCurrentPosition(!0),_this23._updateViewareaTimeout=null}),1e3))}},{key:"_popState",value:function(_ref30){var _this24=this,state=_ref30.state,newHash=getCurrentHash(),hashChanged=this._currentHash!==newHash;if(this._currentHash=newHash,state){if(this._isValidState(state)){this._popStateInProgress=!0,hashChanged&&(this._blockHashChange++,(0,_event_utils.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((function(){_this24._blockHashChange--})));var destination=state.destination;this._updateInternalState(destination,state.uid,!0),(0,_ui_utils.isValidRotation)(destination.rotation)&&(this.linkService.rotation=destination.rotation),destination.dest?this.linkService.goToDestination(destination.dest):destination.hash?this.linkService.setHash(destination.hash):destination.page&&(this.linkService.page=destination.page),Promise.resolve().then((function(){_this24._popStateInProgress=!1}))}}else{this._uid++;var _this$_parseCurrentHa2=this._parseCurrentHash(),hash=_this$_parseCurrentHa2.hash,page=_this$_parseCurrentHa2.page,rotation=_this$_parseCurrentHa2.rotation;this._pushOrReplaceState({hash:hash,page:page,rotation:rotation},!0)}}},{key:"_pageHide",value:function(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}},{key:"_bindEvents",value:function(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}},{key:"_unbindEvents",value:function(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}]),PDFHistory}();function isDestHashesEqual(destHash,pushHash){return"string"==typeof destHash&&"string"==typeof pushHash&&(destHash===pushHash||(0,_ui_utils.parseQueryString)(destHash).get("nameddest")===pushHash)}function isDestArraysEqual(firstDest,secondDest){function isEntryEqual(first,second){if(_typeof(first)!==_typeof(second))return!1;if(Array.isArray(first)||Array.isArray(second))return!1;if(null!==first&&"object"===_typeof(first)&&null!==second){if(Object.keys(first).length!==Object.keys(second).length)return!1;for(var key in first)if(!isEntryEqual(first[key],second[key]))return!1;return!0}return first===second||Number.isNaN(first)&&Number.isNaN(second)}if(!Array.isArray(firstDest)||!Array.isArray(secondDest))return!1;if(firstDest.length!==secondDest.length)return!1;for(var i=0,ii=firstDest.length;i<ii;i++)if(!isEntryEqual(firstDest[i],secondDest[i]))return!1;return!0}exports.PDFHistory=PDFHistory},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFScriptingManager=void 0;var _ui_utils=__w_pdfjs_require__(6),_pdfjsLib=__w_pdfjs_require__(3),PDFScriptingManager=function(){function PDFScriptingManager(_ref31){var _this25=this,eventBus=_ref31.eventBus,_ref31$sandboxBundleS=_ref31.sandboxBundleSrc,sandboxBundleSrc=void 0===_ref31$sandboxBundleS?null:_ref31$sandboxBundleS,_ref31$scriptingFacto=_ref31.scriptingFactory,scriptingFactory=void 0===_ref31$scriptingFacto?null:_ref31$scriptingFacto,_ref31$docPropertiesL=_ref31.docPropertiesLookup,docPropertiesLookup=void 0===_ref31$docPropertiesL?null:_ref31$docPropertiesL;_classCallCheck(this,PDFScriptingManager),this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=eventBus,this._sandboxBundleSrc=sandboxBundleSrc,this._scriptingFactory=scriptingFactory,this._docPropertiesLookup=docPropertiesLookup,this._scriptingFactory||window.addEventListener("updatefromsandbox",(function(event){_this25._eventBus.dispatch("updatefromsandbox",{source:window,detail:event.detail})}))}var _destroyScripting2,_getDocProperties2,_dispatchPageClose2,_dispatchPageOpen2,_updateFromSandbox2,_dispatchDidPrint,_dispatchWillPrint,_dispatchDidSave,_dispatchWillSave,_setDocument;return _createClass(PDFScriptingManager,[{key:"setViewer",value:function(pdfViewer){this._pdfViewer=pdfViewer}},{key:"setDocument",value:(_setDocument=_asyncToGenerator(regeneratorRuntime.mark((function _callee19(pdfDocument){var _this$_scripting,_yield$Promise$all3,_yield$Promise$all4,objects,calculationOrder,docActions,_iterator17,_step17,_step17$value,name,listener,_iterator18,_step18,_step18$value,_name,_listener2,docProperties,_this26=this;return regeneratorRuntime.wrap((function(_context20){for(;;)switch(_context20.prev=_context20.next){case 0:if(!this._pdfDocument){_context20.next=3;break}return _context20.next=3,this._destroyScripting();case 3:if(this._pdfDocument=pdfDocument,pdfDocument){_context20.next=6;break}return _context20.abrupt("return");case 6:return _context20.next=8,Promise.all([pdfDocument.getFieldObjects(),pdfDocument.getCalculationOrderIds(),pdfDocument.getJSActions()]);case 8:if(_yield$Promise$all3=_context20.sent,_yield$Promise$all4=_slicedToArray(_yield$Promise$all3,3),objects=_yield$Promise$all4[0],calculationOrder=_yield$Promise$all4[1],docActions=_yield$Promise$all4[2],objects||docActions){_context20.next=17;break}return _context20.next=16,this._destroyScripting();case 16:return _context20.abrupt("return");case 17:if(pdfDocument===this._pdfDocument){_context20.next=19;break}return _context20.abrupt("return");case 19:_context20.prev=19,this._scripting=this._createScripting(),_context20.next=29;break;case 23:return _context20.prev=23,_context20.t0=_context20.catch(19),console.error('PDFScriptingManager.setDocument: "'.concat(null===_context20.t0||void 0===_context20.t0?void 0:_context20.t0.message,'".')),_context20.next=28,this._destroyScripting();case 28:return _context20.abrupt("return");case 29:this._internalEvents.set("updatefromsandbox",(function(event){(null==event?void 0:event.source)===window&&_this26._updateFromSandbox(event.detail)})),this._internalEvents.set("dispatcheventinsandbox",(function(event){var _this26$_scripting;null===(_this26$_scripting=_this26._scripting)||void 0===_this26$_scripting||_this26$_scripting.dispatchEventInSandbox(event.detail)})),this._internalEvents.set("pagechanging",(function(_ref32){var pageNumber=_ref32.pageNumber,previous=_ref32.previous;pageNumber!==previous&&(_this26._dispatchPageClose(previous),_this26._dispatchPageOpen(pageNumber))})),this._internalEvents.set("pagerendered",(function(_ref33){var pageNumber=_ref33.pageNumber;_this26._pageOpenPending.has(pageNumber)&&pageNumber===_this26._pdfViewer.currentPageNumber&&_this26._dispatchPageOpen(pageNumber)})),this._internalEvents.set("pagesdestroy",function(){var _ref34=_asyncToGenerator(regeneratorRuntime.mark((function _callee18(event){var _this26$_scripting2,_this26$_closeCapabil;return regeneratorRuntime.wrap((function(_context19){for(;;)switch(_context19.prev=_context19.next){case 0:return _context19.next=2,_this26._dispatchPageClose(_this26._pdfViewer.currentPageNumber);case 2:return _context19.next=4,null===(_this26$_scripting2=_this26._scripting)||void 0===_this26$_scripting2?void 0:_this26$_scripting2.dispatchEventInSandbox({id:"doc",name:"WillClose"});case 4:null===(_this26$_closeCapabil=_this26._closeCapability)||void 0===_this26$_closeCapabil||_this26$_closeCapabil.resolve();case 5:case"end":return _context19.stop()}}),_callee18)})));return function(_x9){return _ref34.apply(this,arguments)}}()),this._domEvents.set("mousedown",(function(event){_this26._mouseState.isDown=!0})),this._domEvents.set("mouseup",(function(event){_this26._mouseState.isDown=!1})),_iterator17=_createForOfIteratorHelper(this._internalEvents);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;)_step17$value=_slicedToArray(_step17.value,2),name=_step17$value[0],listener=_step17$value[1],this._eventBus._on(name,listener)}catch(err){_iterator17.e(err)}finally{_iterator17.f()}_iterator18=_createForOfIteratorHelper(this._domEvents);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;)_step18$value=_slicedToArray(_step18.value,2),_name=_step18$value[0],_listener2=_step18$value[1],window.addEventListener(_name,_listener2)}catch(err){_iterator18.e(err)}finally{_iterator18.f()}return _context20.prev=40,_context20.next=43,this._getDocProperties();case 43:if(docProperties=_context20.sent,pdfDocument===this._pdfDocument){_context20.next=46;break}return _context20.abrupt("return");case 46:return _context20.next=48,this._scripting.createSandbox({objects:objects,calculationOrder:calculationOrder,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:_objectSpread(_objectSpread({},docProperties),{},{actions:docActions})});case 48:this._eventBus.dispatch("sandboxcreated",{source:this}),_context20.next=57;break;case 51:return _context20.prev=51,_context20.t1=_context20.catch(40),console.error('PDFScriptingManager.setDocument: "'.concat(null===_context20.t1||void 0===_context20.t1?void 0:_context20.t1.message,'".')),_context20.next=56,this._destroyScripting();case 56:return _context20.abrupt("return");case 57:return _context20.next=59,null===(_this$_scripting=this._scripting)||void 0===_this$_scripting?void 0:_this$_scripting.dispatchEventInSandbox({id:"doc",name:"Open"});case 59:return _context20.next=61,this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0);case 61:Promise.resolve().then((function(){pdfDocument===_this26._pdfDocument&&(_this26._ready=!0)}));case 62:case"end":return _context20.stop()}}),_callee19,this,[[19,23],[40,51]])}))),function(_x8){return _setDocument.apply(this,arguments)})},{key:"dispatchWillSave",value:(_dispatchWillSave=_asyncToGenerator(regeneratorRuntime.mark((function _callee20(detail){var _this$_scripting2;return regeneratorRuntime.wrap((function(_context21){for(;;)switch(_context21.prev=_context21.next){case 0:return _context21.abrupt("return",null===(_this$_scripting2=this._scripting)||void 0===_this$_scripting2?void 0:_this$_scripting2.dispatchEventInSandbox({id:"doc",name:"WillSave"}));case 1:case"end":return _context21.stop()}}),_callee20,this)}))),function(_x10){return _dispatchWillSave.apply(this,arguments)})},{key:"dispatchDidSave",value:(_dispatchDidSave=_asyncToGenerator(regeneratorRuntime.mark((function _callee21(detail){var _this$_scripting3;return regeneratorRuntime.wrap((function(_context22){for(;;)switch(_context22.prev=_context22.next){case 0:return _context22.abrupt("return",null===(_this$_scripting3=this._scripting)||void 0===_this$_scripting3?void 0:_this$_scripting3.dispatchEventInSandbox({id:"doc",name:"DidSave"}));case 1:case"end":return _context22.stop()}}),_callee21,this)}))),function(_x11){return _dispatchDidSave.apply(this,arguments)})},{key:"dispatchWillPrint",value:(_dispatchWillPrint=_asyncToGenerator(regeneratorRuntime.mark((function _callee22(detail){var _this$_scripting4;return regeneratorRuntime.wrap((function(_context23){for(;;)switch(_context23.prev=_context23.next){case 0:return _context23.abrupt("return",null===(_this$_scripting4=this._scripting)||void 0===_this$_scripting4?void 0:_this$_scripting4.dispatchEventInSandbox({id:"doc",name:"WillPrint"}));case 1:case"end":return _context23.stop()}}),_callee22,this)}))),function(_x12){return _dispatchWillPrint.apply(this,arguments)})},{key:"dispatchDidPrint",value:(_dispatchDidPrint=_asyncToGenerator(regeneratorRuntime.mark((function _callee23(detail){var _this$_scripting5;return regeneratorRuntime.wrap((function(_context24){for(;;)switch(_context24.prev=_context24.next){case 0:return _context24.abrupt("return",null===(_this$_scripting5=this._scripting)||void 0===_this$_scripting5?void 0:_this$_scripting5.dispatchEventInSandbox({id:"doc",name:"DidPrint"}));case 1:case"end":return _context24.stop()}}),_callee23,this)}))),function(_x13){return _dispatchDidPrint.apply(this,arguments)})},{key:"mouseState",get:function(){return this._mouseState}},{key:"destroyPromise",get:function(){var _this$_destroyCapabil;return(null===(_this$_destroyCapabil=this._destroyCapability)||void 0===_this$_destroyCapabil?void 0:_this$_destroyCapabil.promise)||null}},{key:"ready",get:function(){return this._ready}},{key:"_internalEvents",get:function(){return(0,_pdfjsLib.shadow)(this,"_internalEvents",new Map)}},{key:"_domEvents",get:function(){return(0,_pdfjsLib.shadow)(this,"_domEvents",new Map)}},{key:"_pageOpenPending",get:function(){return(0,_pdfjsLib.shadow)(this,"_pageOpenPending",new Set)}},{key:"_visitedPages",get:function(){return(0,_pdfjsLib.shadow)(this,"_visitedPages",new Map)}},{key:"_updateFromSandbox",value:(_updateFromSandbox2=_asyncToGenerator(regeneratorRuntime.mark((function _callee24(detail){var isInPresentationMode,id,siblings,command,value,modes,ids,_iterator19,_step19,elementId,element,_this$_pdfDocument;return regeneratorRuntime.wrap((function(_context25){for(;;)switch(_context25.prev=_context25.next){case 0:if(isInPresentationMode=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,id=detail.id,siblings=detail.siblings,command=detail.command,value=detail.value,id){_context25.next=46;break}_context25.t0=command,_context25.next="clear"===_context25.t0?6:"error"===_context25.t0?8:"layout"===_context25.t0?10:"page-num"===_context25.t0?15:"print"===_context25.t0?17:"println"===_context25.t0?21:"zoom"===_context25.t0?23:"SaveAs"===_context25.t0?27:"FirstPage"===_context25.t0?29:"LastPage"===_context25.t0?31:"NextPage"===_context25.t0?33:"PrevPage"===_context25.t0?35:"ZoomViewIn"===_context25.t0?37:"ZoomViewOut"===_context25.t0?41:45;break;case 6:return console.clear(),_context25.abrupt("break",45);case 8:return console.error(value),_context25.abrupt("break",45);case 10:if(!isInPresentationMode){_context25.next=12;break}return _context25.abrupt("return");case 12:return modes=(0,_ui_utils.apiPageLayoutToViewerModes)(value),this._pdfViewer.spreadMode=modes.spreadMode,_context25.abrupt("break",45);case 15:return this._pdfViewer.currentPageNumber=value+1,_context25.abrupt("break",45);case 17:return _context25.next=19,this._pdfViewer.pagesPromise;case 19:return this._eventBus.dispatch("print",{source:this}),_context25.abrupt("break",45);case 21:return console.log(value),_context25.abrupt("break",45);case 23:if(!isInPresentationMode){_context25.next=25;break}return _context25.abrupt("return");case 25:return this._pdfViewer.currentScaleValue=value,_context25.abrupt("break",45);case 27:return this._eventBus.dispatch("save",{source:this}),_context25.abrupt("break",45);case 29:return this._pdfViewer.currentPageNumber=1,_context25.abrupt("break",45);case 31:return this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount,_context25.abrupt("break",45);case 33:return this._pdfViewer.nextPage(),_context25.abrupt("break",45);case 35:return this._pdfViewer.previousPage(),_context25.abrupt("break",45);case 37:if(!isInPresentationMode){_context25.next=39;break}return _context25.abrupt("return");case 39:return this._pdfViewer.increaseScale(),_context25.abrupt("break",45);case 41:if(!isInPresentationMode){_context25.next=43;break}return _context25.abrupt("return");case 43:return this._pdfViewer.decreaseScale(),_context25.abrupt("break",45);case 45:return _context25.abrupt("return");case 46:if(!isInPresentationMode){_context25.next=49;break}if(!detail.focus){_context25.next=49;break}return _context25.abrupt("return");case 49:delete detail.id,delete detail.siblings,ids=siblings?[id].concat(_toConsumableArray(siblings)):[id],_iterator19=_createForOfIteratorHelper(ids);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;)elementId=_step19.value,(element=document.getElementById(elementId))?element.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:detail})):null===(_this$_pdfDocument=this._pdfDocument)||void 0===_this$_pdfDocument||_this$_pdfDocument.annotationStorage.setValue(elementId,detail)}catch(err){_iterator19.e(err)}finally{_iterator19.f()}case 54:case"end":return _context25.stop()}}),_callee24,this)}))),function(_x14){return _updateFromSandbox2.apply(this,arguments)})},{key:"_dispatchPageOpen",value:(_dispatchPageOpen2=_asyncToGenerator(regeneratorRuntime.mark((function _callee26(pageNumber){var initialize,pdfDocument,visitedPages,pageView,actionsPromise,_this27=this,_args27=arguments;return regeneratorRuntime.wrap((function(_context27){for(;;)switch(_context27.prev=_context27.next){case 0:if(initialize=_args27.length>1&&void 0!==_args27[1]&&_args27[1],pdfDocument=this._pdfDocument,visitedPages=this._visitedPages,initialize&&(this._closeCapability=(0,_pdfjsLib.createPromiseCapability)()),this._closeCapability){_context27.next=5;break}return _context27.abrupt("return");case 5:if((null==(pageView=this._pdfViewer.getPageView(pageNumber-1))?void 0:pageView.renderingState)===_ui_utils.RenderingStates.FINISHED){_context27.next=9;break}return this._pageOpenPending.add(pageNumber),_context27.abrupt("return");case 9:this._pageOpenPending.delete(pageNumber),actionsPromise=_asyncToGenerator(regeneratorRuntime.mark((function _callee25(){var _pageView$pdfPage,_this27$_scripting,actions;return regeneratorRuntime.wrap((function(_context26){for(;;)switch(_context26.prev=_context26.next){case 0:return _context26.next=2,visitedPages.has(pageNumber)?null:null===(_pageView$pdfPage=pageView.pdfPage)||void 0===_pageView$pdfPage?void 0:_pageView$pdfPage.getJSActions();case 2:if(actions=_context26.sent,pdfDocument===_this27._pdfDocument){_context26.next=5;break}return _context26.abrupt("return");case 5:return _context26.next=7,null===(_this27$_scripting=_this27._scripting)||void 0===_this27$_scripting?void 0:_this27$_scripting.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:pageNumber,actions:actions});case 7:case"end":return _context26.stop()}}),_callee25)})))(),visitedPages.set(pageNumber,actionsPromise);case 12:case"end":return _context27.stop()}}),_callee26,this)}))),function(_x15){return _dispatchPageOpen2.apply(this,arguments)})},{key:"_dispatchPageClose",value:(_dispatchPageClose2=_asyncToGenerator(regeneratorRuntime.mark((function _callee27(pageNumber){var _this$_scripting6,pdfDocument,visitedPages,actionsPromise;return regeneratorRuntime.wrap((function(_context28){for(;;)switch(_context28.prev=_context28.next){case 0:if(pdfDocument=this._pdfDocument,visitedPages=this._visitedPages,this._closeCapability){_context28.next=3;break}return _context28.abrupt("return");case 3:if(!this._pageOpenPending.has(pageNumber)){_context28.next=5;break}return _context28.abrupt("return");case 5:if(actionsPromise=visitedPages.get(pageNumber)){_context28.next=8;break}return _context28.abrupt("return");case 8:return visitedPages.set(pageNumber,null),_context28.next=11,actionsPromise;case 11:if(pdfDocument===this._pdfDocument){_context28.next=13;break}return _context28.abrupt("return");case 13:return _context28.next=15,null===(_this$_scripting6=this._scripting)||void 0===_this$_scripting6?void 0:_this$_scripting6.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:pageNumber});case 15:case"end":return _context28.stop()}}),_callee27,this)}))),function(_x16){return _dispatchPageClose2.apply(this,arguments)})},{key:"_getDocProperties",value:(_getDocProperties2=_asyncToGenerator(regeneratorRuntime.mark((function _callee28(){var _w_pdfjs_require__,docPropertiesLookup;return regeneratorRuntime.wrap((function(_context29){for(;;)switch(_context29.prev=_context29.next){case 0:if(!this._docPropertiesLookup){_context29.next=2;break}return _context29.abrupt("return",this._docPropertiesLookup(this._pdfDocument));case 2:return _w_pdfjs_require__=__w_pdfjs_require__(24),docPropertiesLookup=_w_pdfjs_require__.docPropertiesLookup,_context29.abrupt("return",docPropertiesLookup(this._pdfDocument));case 4:case"end":return _context29.stop()}}),_callee28,this)}))),function(){return _getDocProperties2.apply(this,arguments)})},{key:"_createScripting",value:function(){if(this._destroyCapability=(0,_pdfjsLib.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");return this._scriptingFactory?this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc}):new(0,__w_pdfjs_require__(24).GenericScripting)(this._sandboxBundleSrc)}},{key:"_destroyScripting",value:(_destroyScripting2=_asyncToGenerator(regeneratorRuntime.mark((function _callee29(){var _this$_destroyCapabil3,_this$_destroyCapabil2,_iterator20,_step20,_step20$value,name,listener,_iterator21,_step21,_step21$value,_name2,_listener3;return regeneratorRuntime.wrap((function(_context30){for(;;)switch(_context30.prev=_context30.next){case 0:if(this._scripting){_context30.next=4;break}return this._pdfDocument=null,null===(_this$_destroyCapabil2=this._destroyCapability)||void 0===_this$_destroyCapabil2||_this$_destroyCapabil2.resolve(),_context30.abrupt("return");case 4:if(!this._closeCapability){_context30.next=8;break}return _context30.next=7,Promise.race([this._closeCapability.promise,new Promise((function(resolve){setTimeout(resolve,1e3)}))]).catch((function(reason){}));case 7:this._closeCapability=null;case 8:return this._pdfDocument=null,_context30.prev=9,_context30.next=12,this._scripting.destroySandbox();case 12:_context30.next=16;break;case 14:_context30.prev=14,_context30.t0=_context30.catch(9);case 16:_iterator20=_createForOfIteratorHelper(this._internalEvents);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;)_step20$value=_slicedToArray(_step20.value,2),name=_step20$value[0],listener=_step20$value[1],this._eventBus._off(name,listener)}catch(err){_iterator20.e(err)}finally{_iterator20.f()}this._internalEvents.clear(),_iterator21=_createForOfIteratorHelper(this._domEvents);try{for(_iterator21.s();!(_step21=_iterator21.n()).done;)_step21$value=_slicedToArray(_step21.value,2),_name2=_step21$value[0],_listener3=_step21$value[1],window.removeEventListener(_name2,_listener3)}catch(err){_iterator21.e(err)}finally{_iterator21.f()}this._domEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,delete this._mouseState.isDown,this._ready=!1,null===(_this$_destroyCapabil3=this._destroyCapability)||void 0===_this$_destroyCapabil3||_this$_destroyCapabil3.resolve();case 28:case"end":return _context30.stop()}}),_callee29,this,[[9,14]])}))),function(){return _destroyScripting2.apply(this,arguments)})}]),PDFScriptingManager}();exports.PDFScriptingManager=PDFScriptingManager},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericScripting=void 0,exports.docPropertiesLookup=function(_x17){return _docPropertiesLookup.apply(this,arguments)};var _pdfjsLib=__w_pdfjs_require__(3);function _docPropertiesLookup(){return(_docPropertiesLookup=_asyncToGenerator(regeneratorRuntime.mark((function _callee33(pdfDocument){var url,baseUrl,_yield$pdfDocument$ge,info,metadata,contentDispositionFilename,contentLength,_yield$pdfDocument$ge2,length;return regeneratorRuntime.wrap((function(_context34){for(;;)switch(_context34.prev=_context34.next){case 0:return baseUrl=(url="").split("#")[0],_context34.next=3,pdfDocument.getMetadata();case 3:if(_yield$pdfDocument$ge=_context34.sent,info=_yield$pdfDocument$ge.info,metadata=_yield$pdfDocument$ge.metadata,contentDispositionFilename=_yield$pdfDocument$ge.contentDispositionFilename,contentLength=_yield$pdfDocument$ge.contentLength){_context34.next=14;break}return _context34.next=11,pdfDocument.getDownloadInfo();case 11:_yield$pdfDocument$ge2=_context34.sent,length=_yield$pdfDocument$ge2.length,contentLength=length;case 14:return _context34.abrupt("return",_objectSpread(_objectSpread({},info),{},{baseURL:baseUrl,filesize:contentLength,filename:contentDispositionFilename||(0,_pdfjsLib.getPdfFilenameFromUrl)(url),metadata:null==metadata?void 0:metadata.getRaw(),authors:null==metadata?void 0:metadata.get("dc:creator"),numPages:pdfDocument.numPages,URL:url}));case 15:case"end":return _context34.stop()}}),_callee33)})))).apply(this,arguments)}var GenericScripting=function(){function GenericScripting(sandboxBundleSrc){_classCallCheck(this,GenericScripting),this._ready=(0,_pdfjsLib.loadScript)(sandboxBundleSrc,!0).then((function(){return window.pdfjsSandbox.QuickJSSandbox()}))}var _destroySandbox,_dispatchEventInSandbox,_createSandbox;return _createClass(GenericScripting,[{key:"createSandbox",value:(_createSandbox=_asyncToGenerator(regeneratorRuntime.mark((function _callee30(data){return regeneratorRuntime.wrap((function(_context31){for(;;)switch(_context31.prev=_context31.next){case 0:return _context31.next=2,this._ready;case 2:_context31.sent.create(data);case 4:case"end":return _context31.stop()}}),_callee30,this)}))),function(_x18){return _createSandbox.apply(this,arguments)})},{key:"dispatchEventInSandbox",value:(_dispatchEventInSandbox=_asyncToGenerator(regeneratorRuntime.mark((function _callee31(event){var sandbox;return regeneratorRuntime.wrap((function(_context32){for(;;)switch(_context32.prev=_context32.next){case 0:return _context32.next=2,this._ready;case 2:sandbox=_context32.sent,setTimeout((function(){return sandbox.dispatchEvent(event)}),0);case 4:case"end":return _context32.stop()}}),_callee31,this)}))),function(_x19){return _dispatchEventInSandbox.apply(this,arguments)})},{key:"destroySandbox",value:(_destroySandbox=_asyncToGenerator(regeneratorRuntime.mark((function _callee32(){return regeneratorRuntime.wrap((function(_context33){for(;;)switch(_context33.prev=_context33.next){case 0:return _context33.next=2,this._ready;case 2:_context33.sent.nukeSandbox();case 4:case"end":return _context33.stop()}}),_callee32,this)}))),function(){return _destroySandbox.apply(this,arguments)})}]),GenericScripting}();exports.GenericScripting=GenericScripting}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__w_pdfjs_require__),module.exports}var __webpack_exports__={};return function(){var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return _annotation_layer_builder.AnnotationLayerBuilder}}),Object.defineProperty(exports,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return _default_factory.DefaultAnnotationLayerFactory}}),Object.defineProperty(exports,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return _default_factory.DefaultStructTreeLayerFactory}}),Object.defineProperty(exports,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return _default_factory.DefaultTextLayerFactory}}),Object.defineProperty(exports,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return _default_factory.DefaultXfaLayerFactory}}),Object.defineProperty(exports,"DownloadManager",{enumerable:!0,get:function(){return _download_manager.DownloadManager}}),Object.defineProperty(exports,"EventBus",{enumerable:!0,get:function(){return _event_utils.EventBus}}),Object.defineProperty(exports,"GenericL10n",{enumerable:!0,get:function(){return _genericl10n.GenericL10n}}),Object.defineProperty(exports,"LinkTarget",{enumerable:!0,get:function(){return _pdf_link_service.LinkTarget}}),Object.defineProperty(exports,"NullL10n",{enumerable:!0,get:function(){return _l10n_utils.NullL10n}}),Object.defineProperty(exports,"PDFFindController",{enumerable:!0,get:function(){return _pdf_find_controller.PDFFindController}}),Object.defineProperty(exports,"PDFHistory",{enumerable:!0,get:function(){return _pdf_history.PDFHistory}}),Object.defineProperty(exports,"PDFLinkService",{enumerable:!0,get:function(){return _pdf_link_service.PDFLinkService}}),Object.defineProperty(exports,"PDFPageView",{enumerable:!0,get:function(){return _pdf_page_view.PDFPageView}}),Object.defineProperty(exports,"PDFScriptingManager",{enumerable:!0,get:function(){return _pdf_scripting_manager.PDFScriptingManager}}),Object.defineProperty(exports,"PDFSinglePageViewer",{enumerable:!0,get:function(){return _pdf_viewer.PDFSinglePageViewer}}),Object.defineProperty(exports,"PDFViewer",{enumerable:!0,get:function(){return _pdf_viewer.PDFViewer}}),Object.defineProperty(exports,"ProgressBar",{enumerable:!0,get:function(){return _ui_utils.ProgressBar}}),Object.defineProperty(exports,"SimpleLinkService",{enumerable:!0,get:function(){return _pdf_link_service.SimpleLinkService}}),Object.defineProperty(exports,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return _struct_tree_layer_builder.StructTreeLayerBuilder}}),Object.defineProperty(exports,"TextLayerBuilder",{enumerable:!0,get:function(){return _text_layer_builder.TextLayerBuilder}}),Object.defineProperty(exports,"XfaLayerBuilder",{enumerable:!0,get:function(){return _xfa_layer_builder.XfaLayerBuilder}}),Object.defineProperty(exports,"parseQueryString",{enumerable:!0,get:function(){return _ui_utils.parseQueryString}}),Object.defineProperty(exports,"TextHighlighter",{enumerable:!0,get:function(){return _text_highlighter.TextHighlighter}});var _default_factory=__w_pdfjs_require__(1),_pdf_link_service=__w_pdfjs_require__(5),_ui_utils=__w_pdfjs_require__(6),_pdf_viewer=__w_pdfjs_require__(10),_annotation_layer_builder=__w_pdfjs_require__(2),_download_manager=__w_pdfjs_require__(16),_event_utils=__w_pdfjs_require__(17),_genericl10n=__w_pdfjs_require__(18),_l10n_utils=__w_pdfjs_require__(4),_pdf_find_controller=__w_pdfjs_require__(20),_pdf_history=__w_pdfjs_require__(22),_pdf_page_view=__w_pdfjs_require__(12),_pdf_scripting_manager=__w_pdfjs_require__(23),_struct_tree_layer_builder=__w_pdfjs_require__(7),_text_layer_builder=__w_pdfjs_require__(8),_xfa_layer_builder=__w_pdfjs_require__(9),_text_highlighter=__w_pdfjs_require__(15)}(),__webpack_exports__}()}));

//# sourceMappingURL=pdf_viewer.min.js.map