define(["core/templates","core/str"],function(e,n){var t="",o="",r=0,c=function(n){n.preventDefault();var t=n.target.querySelector("iframe"),o=null;null!==t?o=e.render("block_onlinesurvey/modal-iframe",{src:t.src+"&modalZoom=1",title:""}):(t=parent.document.querySelector("iframe"),o=e.render("block_onlinesurvey/modal-iframe",{src:t.src+"&modalZoom=1",title:""})),o.done(function(e,n){var t=document.createElement("div");t.innerHTML=e;var o=t.firstChild;document.body.insertBefore(o,document.body.firstChild),document.body.className+=" block_onlinesurvey_custom-modal-open";var r=function(e){e.target;document.body.className=document.body.className.replace(" block_onlinesurvey_custom-modal-open",""),function(){var e=document.getElementById("block_onlinesurvey_contentframe");if(e){var n=e.src;e.src="",e.src=n}}(),o.className+=" fading",setTimeout(function(){null!==o.parentNode&&o.parentNode.removeChild(o)},250)};o.querySelector(".block_onlinesurvey_custom-modal_close-button").addEventListener("click",function(e){return e.preventDefault(),r(e)}),o.addEventListener("click",function(e){return e.preventDefault(),e.target===o&&r(e)})})};return{init:function(e,n,a){t=e,o=n,r=a;for(var i=document.querySelectorAll("#block_onlinesurvey_surveys_content"),u=0;u<i.length;u++)i[u].addEventListener("click",c);window.EVASYS={generate_popupinfo:this.generate_popupinfo},window.evasysGeneratePopupinfo=this.generate_popupinfo},generate_popupinfo:function(){var n=sessionStorage.getItem("onlinesurvey_popupinfo");0!=n&&null!=n&&n==r||(sessionStorage.setItem("onlinesurvey_popupinfo",r),e.render("block_onlinesurvey/popupinfo",{title:t,content:o}).done(function(e,n){var t=document.createElement("div");t.innerHTML=e;var o=t.firstChild;document.body.insertBefore(o,document.body.firstChild),document.body.className+=" block_onlinesurvey_custom-modal-open popupinfo";var r=function(e){e.target;document.body.className=document.body.className.replace(" block_onlinesurvey_custom-modal-open",""),o.className+=" fading",setTimeout(function(){null!==o.parentNode&&o.parentNode.removeChild(o)},250)};o.querySelector(".block_onlinesurvey_custom-modal_close-button").addEventListener("click",function(e){return e.preventDefault(),r(e)}),o.addEventListener("click",function(e){return e.preventDefault(),e.target===o&&r(e)})}))}}});