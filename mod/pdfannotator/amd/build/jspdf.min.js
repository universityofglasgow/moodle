function _typeof2(obj){return _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof2(obj)
/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.789Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holl√§nder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */}!function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define("mod_pdfannotator/jspdf",["exports"],factory):factory((global=global||self).jspdf={})}(window,(function(exports){function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var globalObject=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}();function consoleLog(){globalObject.console&&"function"==typeof globalObject.console.log&&globalObject.console.log.apply(globalObject.console,arguments)}var console={log:consoleLog,warn:function(str){globalObject.console&&("function"==typeof globalObject.console.warn?globalObject.console.warn.apply(globalObject.console,arguments):consoleLog.call(null,arguments))},error:function(str){globalObject.console&&("function"==typeof globalObject.console.error?globalObject.console.error.apply(globalObject.console,arguments):consoleLog(str))}};function download(url,name,opts){var xhr=new XMLHttpRequest;xhr.open("GET",url),xhr.responseType="blob",xhr.onload=function(){saveAs(xhr.response,name,opts)},xhr.onerror=function(){console.error("could not download file")},xhr.send()}function corsEnabled(url){var xhr=new XMLHttpRequest;xhr.open("HEAD",url,!1);try{xhr.send()}catch(e){}return xhr.status>=200&&xhr.status<=299}function click(node){try{node.dispatchEvent(new MouseEvent("click"))}catch(e){var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),node.dispatchEvent(evt)}}var atob,btoa,saveAs=globalObject.saveAs||("object"!==("undefined"==typeof window?"undefined":_typeof(window))||window!==globalObject?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(blob,name,opts){var URL=globalObject.URL||globalObject.webkitURL,a=document.createElement("a");name=name||blob.name||"download",a.download=name,a.rel="noopener","string"==typeof blob?(a.href=blob,a.origin!==location.origin?corsEnabled(a.href)?download(blob,name,opts):click(a,a.target="_blank"):click(a)):(a.href=URL.createObjectURL(blob),setTimeout((function(){URL.revokeObjectURL(a.href)}),4e4),setTimeout((function(){click(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(blob,name,opts){if(name=name||blob.name||"download","string"==typeof blob)if(corsEnabled(blob))download(blob,name,opts);else{var a=document.createElement("a");a.href=blob,a.target="_blank",setTimeout((function(){click(a)}))}else navigator.msSaveOrOpenBlob(function(blob,opts){return void 0===opts?opts={autoBom:!1}:"object"!==_typeof(opts)&&(console.warn("Deprecated: Expected third argument to be a object"),opts={autoBom:!opts}),opts.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)?new Blob([String.fromCharCode(65279),blob],{type:blob.type}):blob}(blob,opts),name)}:function(blob,name,opts,popup){if((popup=popup||open("","_blank"))&&(popup.document.title=popup.document.body.innerText="downloading..."),"string"==typeof blob)return download(blob,name,opts);var force="application/octet-stream"===blob.type,isSafari=/constructor/i.test(globalObject.HTMLElement)||globalObject.safari,isChromeIOS=/CriOS\/[\d]+/.test(navigator.userAgent);if((isChromeIOS||force&&isSafari)&&"object"===("undefined"==typeof FileReader?"undefined":_typeof(FileReader))){var reader=new FileReader;reader.onloadend=function(){var url=reader.result;url=isChromeIOS?url:url.replace(/^data:[^;]*;/,"data:attachment/file;"),popup?popup.location.href=url:location=url,popup=null},reader.readAsDataURL(blob)}else{var URL=globalObject.URL||globalObject.webkitURL,url=URL.createObjectURL(blob);popup?popup.location=url:location.href=url,popup=null,setTimeout((function(){URL.revokeObjectURL(url)}),4e4)}});
/**
   * A class to parse color values
   * @author Stoyan Stefanov <sstoo@gmail.com>
   * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
   * @license Use it if you like it
   */function RGBColor(color_string){var channels;color_string=color_string||"",this.ok=!1,"#"==color_string.charAt(0)&&(color_string=color_string.substr(1,6));color_string={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[color_string=(color_string=color_string.replace(/ /g,"")).toLowerCase()]||color_string;for(var color_defs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(bits){return[parseInt(bits[1]),parseInt(bits[2]),parseInt(bits[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(bits){return[parseInt(bits[1],16),parseInt(bits[2],16),parseInt(bits[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(bits){return[parseInt(bits[1]+bits[1],16),parseInt(bits[2]+bits[2],16),parseInt(bits[3]+bits[3],16)]}}],i=0;i<color_defs.length;i++){var re=color_defs[i].re,processor=color_defs[i].process,bits=re.exec(color_string);bits&&(channels=processor(bits),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var r=this.r.toString(16),g=this.g.toString(16),b=this.b.toString(16);return 1==r.length&&(r="0"+r),1==g.length&&(g="0"+g),1==b.length&&(b="0"+b),"#"+r+g+b}}
/**
   * @license
   * Joseph Myers does not specify a particular license for his work.
   *
   * Author: Joseph Myers
   * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
   *
   * Modified by: Owen Leong
   */
function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936),d=ff(d,a,b,c,k[1],12,-389564586),c=ff(c,d,a,b,k[2],17,606105819),b=ff(b,c,d,a,k[3],22,-1044525330),a=ff(a,b,c,d,k[4],7,-176418897),d=ff(d,a,b,c,k[5],12,1200080426),c=ff(c,d,a,b,k[6],17,-1473231341),b=ff(b,c,d,a,k[7],22,-45705983),a=ff(a,b,c,d,k[8],7,1770035416),d=ff(d,a,b,c,k[9],12,-1958414417),c=ff(c,d,a,b,k[10],17,-42063),b=ff(b,c,d,a,k[11],22,-1990404162),a=ff(a,b,c,d,k[12],7,1804603682),d=ff(d,a,b,c,k[13],12,-40341101),c=ff(c,d,a,b,k[14],17,-1502002290),a=gg(a,b=ff(b,c,d,a,k[15],22,1236535329),c,d,k[1],5,-165796510),d=gg(d,a,b,c,k[6],9,-1069501632),c=gg(c,d,a,b,k[11],14,643717713),b=gg(b,c,d,a,k[0],20,-373897302),a=gg(a,b,c,d,k[5],5,-701558691),d=gg(d,a,b,c,k[10],9,38016083),c=gg(c,d,a,b,k[15],14,-660478335),b=gg(b,c,d,a,k[4],20,-405537848),a=gg(a,b,c,d,k[9],5,568446438),d=gg(d,a,b,c,k[14],9,-1019803690),c=gg(c,d,a,b,k[3],14,-187363961),b=gg(b,c,d,a,k[8],20,1163531501),a=gg(a,b,c,d,k[13],5,-1444681467),d=gg(d,a,b,c,k[2],9,-51403784),c=gg(c,d,a,b,k[7],14,1735328473),a=hh(a,b=gg(b,c,d,a,k[12],20,-1926607734),c,d,k[5],4,-378558),d=hh(d,a,b,c,k[8],11,-2022574463),c=hh(c,d,a,b,k[11],16,1839030562),b=hh(b,c,d,a,k[14],23,-35309556),a=hh(a,b,c,d,k[1],4,-1530992060),d=hh(d,a,b,c,k[4],11,1272893353),c=hh(c,d,a,b,k[7],16,-155497632),b=hh(b,c,d,a,k[10],23,-1094730640),a=hh(a,b,c,d,k[13],4,681279174),d=hh(d,a,b,c,k[0],11,-358537222),c=hh(c,d,a,b,k[3],16,-722521979),b=hh(b,c,d,a,k[6],23,76029189),a=hh(a,b,c,d,k[9],4,-640364487),d=hh(d,a,b,c,k[12],11,-421815835),c=hh(c,d,a,b,k[15],16,530742520),a=ii(a,b=hh(b,c,d,a,k[2],23,-995338651),c,d,k[0],6,-198630844),d=ii(d,a,b,c,k[7],10,1126891415),c=ii(c,d,a,b,k[14],15,-1416354905),b=ii(b,c,d,a,k[5],21,-57434055),a=ii(a,b,c,d,k[12],6,1700485571),d=ii(d,a,b,c,k[3],10,-1894986606),c=ii(c,d,a,b,k[10],15,-1051523),b=ii(b,c,d,a,k[1],21,-2054922799),a=ii(a,b,c,d,k[8],6,1873313359),d=ii(d,a,b,c,k[15],10,-30611744),c=ii(c,d,a,b,k[6],15,-1560198380),b=ii(b,c,d,a,k[13],21,1309151649),a=ii(a,b,c,d,k[4],6,-145523070),d=ii(d,a,b,c,k[11],10,-1120210379),c=ii(c,d,a,b,k[2],15,718787259),b=ii(b,c,d,a,k[9],21,-343485551),x[0]=add32(a,x[0]),x[1]=add32(b,x[1]),x[2]=add32(c,x[2]),x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){return a=add32(add32(a,q),add32(x,t)),add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md51(s){var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),i>55)for(md5cycle(state,tail),i=0;i<16;i++)tail[i]=0;return tail[14]=8*n,md5cycle(state,tail),state}function md5blk(s){var i,md5blks=[];for(i=0;i<64;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks}atob=globalObject.atob.bind(globalObject),btoa=globalObject.btoa.bind(globalObject);var hex_chr="0123456789abcdef".split("");function rhex(n){for(var s="",j=0;j<4;j++)s+=hex_chr[n>>8*j+4&15]+hex_chr[n>>8*j&15];return s}function singleToByteString(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function md5Bin(s){return function(x){return x.map(singleToByteString).join("")}(md51(s))}var md5Check="5d41402abc4b2a76b9719d911017c592"!=function(x){for(var i=0;i<x.length;i++)x[i]=rhex(x[i]);return x.join("")}(md51("hello"));function add32(a,b){if(md5Check){var lsw=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(lsw>>16)<<16|65535&lsw}return a+b&4294967295}
/**
   * @license
   * FPDF is released under a permissive license: there is no usage restriction.
   * You may embed it freely in your application (commercial or not), with or
   * without modifications.
   *
   * Reference: http://www.fpdf.org/en/script/script37.php
   */function rc4(key,data){var lastKey,lastState,str,num;if(key!==lastKey){for(var k=(str=key,num=1+(256/key.length>>0),new Array(num+1).join(str)),state=[],i=0;i<256;i++)state[i]=i;var j=0;for(i=0;i<256;i++){var t=state[i];j=(j+t+k.charCodeAt(i))%256,state[i]=state[j],state[j]=t}lastKey=key,lastState=state}else state=lastState;var length=data.length,a=0,b=0,out="";for(i=0;i<length;i++)b=(b+(t=state[a=(a+1)%256]))%256,state[a]=state[b],state[b]=t,k=state[(state[a]+state[b])%256],out+=String.fromCharCode(data.charCodeAt(i)^k);return out}
/**
   * @license
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   * Author: Owen Leong (@owenl131)
   * Date: 15 Oct 2020
   * References:
   * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
   * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
   * http://www.fpdf.org/en/script/script37.php
   */var permissionOptions={print:4,modify:8,copy:16,"annot-forms":32};function PDFSecurity(permissions,userPassword,ownerPassword,fileId){this.v=1,this.r=2;var protection=192;permissions.forEach((function(perm){if(void 0!==permissionOptions.perm)throw new Error("Invalid permission: "+perm);protection+=permissionOptions[perm]})),this.padding="(¬øN^Nu¬äAd\0NV√ø√∫\b..\0¬∂√êh>¬Ä/\f¬©√ædSiz";var paddedUserPassword=(userPassword+this.padding).substr(0,32),paddedOwnerPassword=(ownerPassword+this.padding).substr(0,32);this.O=this.processOwnerPassword(paddedUserPassword,paddedOwnerPassword),this.P=-(1+(255^protection)),this.encryptionKey=md5Bin(paddedUserPassword+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(fileId)).substr(0,5),this.U=rc4(this.encryptionKey,this.padding)}function toPDFName(str){if(/[^\u0000-\u00ff]/.test(str))throw new Error("Invalid PDF Name Object: "+str+", Only accept ASCII characters.");for(var result="",strLength=str.length,i=0;i<strLength;i++){var charCode=str.charCodeAt(i);if(charCode<33||35===charCode||37===charCode||40===charCode||41===charCode||47===charCode||60===charCode||62===charCode||91===charCode||93===charCode||123===charCode||125===charCode||charCode>126)result+="#"+("0"+charCode.toString(16)).slice(-2);else result+=str[i]}return result}function PubSub(context){if("object"!==_typeof(context))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var topics={};this.subscribe=function(topic,callback,once){if(once=once||!1,"string"!=typeof topic||"function"!=typeof callback||"boolean"!=typeof once)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");topics.hasOwnProperty(topic)||(topics[topic]={});var token=Math.random().toString(35);return topics[topic][token]=[callback,!!once],token},this.unsubscribe=function(token){for(var topic in topics)if(topics[topic][token])return delete topics[topic][token],0===Object.keys(topics[topic]).length&&delete topics[topic],!0;return!1},this.publish=function(topic){if(topics.hasOwnProperty(topic)){var args=Array.prototype.slice.call(arguments,1),tokens=[];for(var token in topics[topic]){var sub=topics[topic][token];try{sub[0].apply(context,args)}catch(ex){globalObject.console&&console.error("jsPDF PubSub Error",ex.message,ex)}sub[1]&&tokens.push(token)}tokens.length&&tokens.forEach(this.unsubscribe)}},this.getTopics=function(){return topics}}function GState(parameters){if(!(this instanceof GState))return new GState(parameters);var supported="opacity,stroke-opacity".split(",");for(var p in parameters)parameters.hasOwnProperty(p)&&supported.indexOf(p)>=0&&(this[p]=parameters[p]);this.id="",this.objectNumber=-1}function Pattern(gState,matrix){this.gState=gState,this.matrix=matrix,this.id="",this.objectNumber=-1}function ShadingPattern(type,coords,colors,gState,matrix){if(!(this instanceof ShadingPattern))return new ShadingPattern(type,coords,colors,gState,matrix);this.type="axial"===type?2:3,this.coords=coords,this.colors=colors,Pattern.call(this,gState,matrix)}function TilingPattern(boundingBox,xStep,yStep,gState,matrix){if(!(this instanceof TilingPattern))return new TilingPattern(boundingBox,xStep,yStep,gState,matrix);this.boundingBox=boundingBox,this.xStep=xStep,this.yStep=yStep,this.stream="",this.cloneIndex=0,Pattern.call(this,gState,matrix)}function jsPDF(options){var precision,orientation="string"==typeof arguments[0]?arguments[0]:"p",unit=arguments[1],format=arguments[2],compressPdf=arguments[3],filters=[],userUnit=1,floatPrecision=16,defaultPathOperation="S",encryptionOptions=null;"object"===_typeof(options=options||{})&&(orientation=options.orientation,unit=options.unit||unit,format=options.format||format,compressPdf=options.compress||options.compressPdf||compressPdf,null!==(encryptionOptions=options.encryption||null)&&(encryptionOptions.userPassword=encryptionOptions.userPassword||"",encryptionOptions.ownerPassword=encryptionOptions.ownerPassword||"",encryptionOptions.userPermissions=encryptionOptions.userPermissions||[]),userUnit="number"==typeof options.userUnit?Math.abs(options.userUnit):1,void 0!==options.precision&&(precision=options.precision),void 0!==options.floatPrecision&&(floatPrecision=options.floatPrecision),defaultPathOperation=options.defaultPathOperation||"S"),filters=options.filters||(!0===compressPdf?["FlateEncode"]:filters),unit=unit||"mm",orientation=(""+(orientation||"P")).toLowerCase();var putOnlyUsedFonts=options.putOnlyUsedFonts||!1,usedFonts={},API={internal:{},__private__:{}};API.__private__.PubSub=PubSub;var pdfVersion="1.3",getPdfVersion=API.__private__.getPdfVersion=function(){return pdfVersion};API.__private__.setPdfVersion=function(value){pdfVersion=value};var pageFormats={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};API.__private__.getPageFormats=function(){return pageFormats};var getPageFormat=API.__private__.getPageFormat=function(value){return pageFormats[value]};format=format||"a4";var ApiMode={COMPAT:"compat",ADVANCED:"advanced"},apiMode=ApiMode.COMPAT;function advancedAPI(){this.saveGraphicsState(),out(new Matrix(scaleFactor,0,0,-scaleFactor,0,getPageHeight()*scaleFactor).toString()+" cm"),this.setFontSize(this.getFontSize()/scaleFactor),defaultPathOperation="n",apiMode=ApiMode.ADVANCED}function compatAPI(){this.restoreGraphicsState(),defaultPathOperation="S",apiMode=ApiMode.COMPAT}var combineFontStyleAndFontWeight=API.__private__.combineFontStyleAndFontWeight=function(fontStyle,fontWeight){if("bold"==fontStyle&&"normal"==fontWeight||"bold"==fontStyle&&400==fontWeight||"normal"==fontStyle&&"italic"==fontWeight||"bold"==fontStyle&&"italic"==fontWeight)throw new Error("Invalid Combination of fontweight and fontstyle");return fontWeight&&(fontStyle=400==fontWeight||"normal"===fontWeight?"italic"===fontStyle?"italic":"normal":700!=fontWeight&&"bold"!==fontWeight||"normal"!==fontStyle?(700==fontWeight?"bold":fontWeight)+""+fontStyle:"bold"),fontStyle};API.advancedAPI=function(body){var doSwitch=apiMode===ApiMode.COMPAT;return doSwitch&&advancedAPI.call(this),"function"!=typeof body||(body(this),doSwitch&&compatAPI.call(this)),this},API.compatAPI=function(body){var doSwitch=apiMode===ApiMode.ADVANCED;return doSwitch&&compatAPI.call(this),"function"!=typeof body||(body(this),doSwitch&&advancedAPI.call(this)),this},API.isAdvancedAPI=function(){return apiMode===ApiMode.ADVANCED};var hpf,advancedApiModeTrap=function(methodName){if(apiMode!==ApiMode.ADVANCED)throw new Error(methodName+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},roundToPrecision=API.roundToPrecision=API.__private__.roundToPrecision=function(number,parmPrecision){var tmpPrecision=precision||parmPrecision;if(isNaN(number)||isNaN(tmpPrecision))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return number.toFixed(tmpPrecision).replace(/0+$/,"")};hpf=API.hpf=API.__private__.hpf="number"==typeof floatPrecision?function(number){if(isNaN(number))throw new Error("Invalid argument passed to jsPDF.hpf");return roundToPrecision(number,floatPrecision)}:"smart"===floatPrecision?function(number){if(isNaN(number))throw new Error("Invalid argument passed to jsPDF.hpf");return roundToPrecision(number,number>-1&&number<1?16:5)}:function(number){if(isNaN(number))throw new Error("Invalid argument passed to jsPDF.hpf");return roundToPrecision(number,16)};var f2=API.f2=API.__private__.f2=function(number){if(isNaN(number))throw new Error("Invalid argument passed to jsPDF.f2");return roundToPrecision(number,2)},f3=API.__private__.f3=function(number){if(isNaN(number))throw new Error("Invalid argument passed to jsPDF.f3");return roundToPrecision(number,3)},scale=API.scale=API.__private__.scale=function(number){if(isNaN(number))throw new Error("Invalid argument passed to jsPDF.scale");return apiMode===ApiMode.COMPAT?number*scaleFactor:apiMode===ApiMode.ADVANCED?number:void 0},transformY=function(y){return apiMode===ApiMode.COMPAT?getPageHeight()-y:apiMode===ApiMode.ADVANCED?y:void 0},transformScaleY=function(y){return scale(transformY(y))};API.__private__.setPrecision=API.setPrecision=function(value){"number"==typeof parseInt(value,10)&&(precision=parseInt(value,10))};var creationDate,fileId="00000000000000000000000000000000",getFileId=API.__private__.getFileId=function(){return fileId},setFileId=API.__private__.setFileId=function(value){return fileId=void 0!==value&&/^[a-fA-F0-9]{32}$/.test(value)?value.toUpperCase():fileId.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==encryptionOptions&&(encryption=new PDFSecurity(encryptionOptions.userPermissions,encryptionOptions.userPassword,encryptionOptions.ownerPassword,fileId)),fileId};API.setFileId=function(value){return setFileId(value),this},API.getFileId=function(){return getFileId()};var convertDateToPDFDate=API.__private__.convertDateToPDFDate=function(parmDate){var tzoffset=parmDate.getTimezoneOffset(),tzsign=tzoffset<0?"+":"-",tzhour=Math.floor(Math.abs(tzoffset/60)),tzmin=Math.abs(tzoffset%60),timeZoneString=[tzsign,padd2(tzhour),"'",padd2(tzmin),"'"].join("");return["D:",parmDate.getFullYear(),padd2(parmDate.getMonth()+1),padd2(parmDate.getDate()),padd2(parmDate.getHours()),padd2(parmDate.getMinutes()),padd2(parmDate.getSeconds()),timeZoneString].join("")},convertPDFDateToDate=API.__private__.convertPDFDateToDate=function(parmPDFDate){var year=parseInt(parmPDFDate.substr(2,4),10),month=parseInt(parmPDFDate.substr(6,2),10)-1,date=parseInt(parmPDFDate.substr(8,2),10),hour=parseInt(parmPDFDate.substr(10,2),10),minutes=parseInt(parmPDFDate.substr(12,2),10),seconds=parseInt(parmPDFDate.substr(14,2),10);return new Date(year,month,date,hour,minutes,seconds,0)},setCreationDate=API.__private__.setCreationDate=function(date){var tmpCreationDateString;if(void 0===date&&(date=new Date),date instanceof Date)tmpCreationDateString=convertDateToPDFDate(date);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(date))throw new Error("Invalid argument passed to jsPDF.setCreationDate");tmpCreationDateString=date}return creationDate=tmpCreationDateString},getCreationDate=API.__private__.getCreationDate=function(type){var result=creationDate;return"jsDate"===type&&(result=convertPDFDateToDate(creationDate)),result};API.setCreationDate=function(date){return setCreationDate(date),this},API.getCreationDate=function(type){return getCreationDate(type)};var currentPage,padd2=API.__private__.padd2=function(number){return("0"+parseInt(number)).slice(-2)},padd2Hex=API.__private__.padd2Hex=function(hexString){return("00"+(hexString=hexString.toString())).substr(hexString.length)},objectNumber=0,offsets=[],content=[],contentLength=0,additionalObjects=[],pages=[],hasCustomDestination=!1,outputDestination=content,resetDocument=function(){objectNumber=0,contentLength=0,content=[],offsets=[],additionalObjects=[],rootDictionaryObjId=newObjectDeferred(),resourceDictionaryObjId=newObjectDeferred()};API.__private__.setCustomOutputDestination=function(destination){hasCustomDestination=!0,outputDestination=destination};var setOutputDestination=function(destination){hasCustomDestination||(outputDestination=destination)};API.__private__.resetCustomOutputDestination=function(){hasCustomDestination=!1,outputDestination=content};var out=API.__private__.out=function(string){return string=string.toString(),contentLength+=string.length+1,outputDestination.push(string),outputDestination},write=API.__private__.write=function(value){return out(1===arguments.length?value.toString():Array.prototype.join.call(arguments," "))},getArrayBuffer=API.__private__.getArrayBuffer=function(data){for(var len=data.length,ab=new ArrayBuffer(len),u8=new Uint8Array(ab);len--;)u8[len]=data.charCodeAt(len);return ab},standardFonts=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];API.__private__.getStandardFonts=function(){return standardFonts};var activeFontSize=options.fontSize||16;API.__private__.setFontSize=API.setFontSize=function(size){return activeFontSize=apiMode===ApiMode.ADVANCED?size/scaleFactor:size,this};var zoomMode,getFontSize=API.__private__.getFontSize=API.getFontSize=function(){return apiMode===ApiMode.COMPAT?activeFontSize:activeFontSize*scaleFactor},R2L=options.R2L||!1;API.__private__.setR2L=API.setR2L=function(value){return R2L=value,this},API.__private__.getR2L=API.getR2L=function(){return R2L};var pageMode,setZoomMode=API.__private__.setZoomMode=function(zoom){var validZoomModes=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(zoom))zoomMode=zoom;else if(isNaN(zoom)){if(-1===validZoomModes.indexOf(zoom))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+zoom+'" is not recognized.');zoomMode=zoom}else zoomMode=parseInt(zoom,10)};API.__private__.getZoomMode=function(){return zoomMode};var layoutMode,setPageMode=API.__private__.setPageMode=function(pmode){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(pmode))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+pmode+'" is not recognized.');pageMode=pmode};API.__private__.getPageMode=function(){return pageMode};var setLayoutMode=API.__private__.setLayoutMode=function(layout){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(layout))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+layout+'" is not recognized.');layoutMode=layout};API.__private__.getLayoutMode=function(){return layoutMode},API.__private__.setDisplayMode=API.setDisplayMode=function(zoom,layout,pmode){return setZoomMode(zoom),setLayoutMode(layout),setPageMode(pmode),this};var documentProperties={title:"",subject:"",author:"",keywords:"",creator:""};API.__private__.getDocumentProperty=function(key){if(-1===Object.keys(documentProperties).indexOf(key))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return documentProperties[key]},API.__private__.getDocumentProperties=function(){return documentProperties},API.__private__.setDocumentProperties=API.setProperties=API.setDocumentProperties=function(properties){for(var property in documentProperties)documentProperties.hasOwnProperty(property)&&properties[property]&&(documentProperties[property]=properties[property]);return this},API.__private__.setDocumentProperty=function(key,value){if(-1===Object.keys(documentProperties).indexOf(key))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return documentProperties[key]=value};var activeFontKey,scaleFactor,pageX,pageY,pageMatrix,fonts={},fontmap={},fontStateStack=[],patterns={},patternMap={},gStates={},gStatesMap={},activeGState=null,page=0,pagesContext=[],events=new PubSub(API),hotfixes=options.hotfixes||[],renderTargets={},renderTargetMap={},renderTargetStack=[],Matrix=function Matrix(sx,shy,shx,sy,tx,ty){if(!(this instanceof Matrix))return new Matrix(sx,shy,shx,sy,tx,ty);isNaN(sx)&&(sx=1),isNaN(shy)&&(shy=0),isNaN(shx)&&(shx=0),isNaN(sy)&&(sy=1),isNaN(tx)&&(tx=0),isNaN(ty)&&(ty=0),this._matrix=[sx,shy,shx,sy,tx,ty]};Object.defineProperty(Matrix.prototype,"sx",{get:function(){return this._matrix[0]},set:function(value){this._matrix[0]=value}}),Object.defineProperty(Matrix.prototype,"shy",{get:function(){return this._matrix[1]},set:function(value){this._matrix[1]=value}}),Object.defineProperty(Matrix.prototype,"shx",{get:function(){return this._matrix[2]},set:function(value){this._matrix[2]=value}}),Object.defineProperty(Matrix.prototype,"sy",{get:function(){return this._matrix[3]},set:function(value){this._matrix[3]=value}}),Object.defineProperty(Matrix.prototype,"tx",{get:function(){return this._matrix[4]},set:function(value){this._matrix[4]=value}}),Object.defineProperty(Matrix.prototype,"ty",{get:function(){return this._matrix[5]},set:function(value){this._matrix[5]=value}}),Object.defineProperty(Matrix.prototype,"a",{get:function(){return this._matrix[0]},set:function(value){this._matrix[0]=value}}),Object.defineProperty(Matrix.prototype,"b",{get:function(){return this._matrix[1]},set:function(value){this._matrix[1]=value}}),Object.defineProperty(Matrix.prototype,"c",{get:function(){return this._matrix[2]},set:function(value){this._matrix[2]=value}}),Object.defineProperty(Matrix.prototype,"d",{get:function(){return this._matrix[3]},set:function(value){this._matrix[3]=value}}),Object.defineProperty(Matrix.prototype,"e",{get:function(){return this._matrix[4]},set:function(value){this._matrix[4]=value}}),Object.defineProperty(Matrix.prototype,"f",{get:function(){return this._matrix[5]},set:function(value){this._matrix[5]=value}}),Object.defineProperty(Matrix.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Matrix.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Matrix.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Matrix.prototype,"isIdentity",{get:function(){return 1===this.sx&&(0===this.shy&&(0===this.shx&&(1===this.sy&&(0===this.tx&&0===this.ty))))}}),Matrix.prototype.join=function(separator){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(hpf).join(separator)},Matrix.prototype.multiply=function(matrix){var sx=matrix.sx*this.sx+matrix.shy*this.shx,shy=matrix.sx*this.shy+matrix.shy*this.sy,shx=matrix.shx*this.sx+matrix.sy*this.shx,sy=matrix.shx*this.shy+matrix.sy*this.sy,tx=matrix.tx*this.sx+matrix.ty*this.shx+this.tx,ty=matrix.tx*this.shy+matrix.ty*this.sy+this.ty;return new Matrix(sx,shy,shx,sy,tx,ty)},Matrix.prototype.decompose=function(){var a=this.sx,b=this.shy,c=this.shx,d=this.sy,e=this.tx,f=this.ty,scaleX=Math.sqrt(a*a+b*b),shear=(a/=scaleX)*c+(b/=scaleX)*d;c-=a*shear,d-=b*shear;var scaleY=Math.sqrt(c*c+d*d);return shear/=scaleY,a*(d/=scaleY)<b*(c/=scaleY)&&(a=-a,b=-b,shear=-shear,scaleX=-scaleX),{scale:new Matrix(scaleX,0,0,scaleY,0,0),translate:new Matrix(1,0,0,1,e,f),rotate:new Matrix(a,b,-b,a,0,0),skew:new Matrix(1,0,shear,1,0,0)}},Matrix.prototype.toString=function(parmPrecision){return this.join(" ")},Matrix.prototype.inversed=function(){var a=this.sx,b=this.shy,c=this.shx,d=this.sy,e=this.tx,f=this.ty,quot=1/(a*d-b*c),aInv=d*quot,bInv=-b*quot,cInv=-c*quot,dInv=a*quot;return new Matrix(aInv,bInv,cInv,dInv,-aInv*e-cInv*f,-bInv*e-dInv*f)},Matrix.prototype.applyToPoint=function(pt){var x=pt.x*this.sx+pt.y*this.shx+this.tx,y=pt.x*this.shy+pt.y*this.sy+this.ty;return new Point(x,y)},Matrix.prototype.applyToRectangle=function(rect){var pt1=this.applyToPoint(rect),pt2=this.applyToPoint(new Point(rect.x+rect.w,rect.y+rect.h));return new Rectangle(pt1.x,pt1.y,pt2.x-pt1.x,pt2.y-pt1.y)},Matrix.prototype.clone=function(){var sx=this.sx,shy=this.shy,shx=this.shx,sy=this.sy,tx=this.tx,ty=this.ty;return new Matrix(sx,shy,shx,sy,tx,ty)},API.Matrix=Matrix;var matrixMult=API.matrixMult=function(m1,m2){return m2.multiply(m1)},identityMatrix=new Matrix(1,0,0,1,0,0);API.unitMatrix=API.identityMatrix=identityMatrix;var addPattern=function(key,pattern){if(!patternMap[key]){var patternKey=(pattern instanceof ShadingPattern?"Sh":"P")+(Object.keys(patterns).length+1).toString(10);pattern.id=patternKey,patternMap[key]=patternKey,patterns[patternKey]=pattern,events.publish("addPattern",pattern)}};API.ShadingPattern=ShadingPattern,API.TilingPattern=TilingPattern,API.addShadingPattern=function(key,pattern){return advancedApiModeTrap("addShadingPattern()"),addPattern(key,pattern),this},API.beginTilingPattern=function(pattern){advancedApiModeTrap("beginTilingPattern()"),beginNewRenderTarget(pattern.boundingBox[0],pattern.boundingBox[1],pattern.boundingBox[2]-pattern.boundingBox[0],pattern.boundingBox[3]-pattern.boundingBox[1],pattern.matrix)},API.endTilingPattern=function(key,pattern){advancedApiModeTrap("endTilingPattern()"),pattern.stream=pages[currentPage].join("\n"),addPattern(key,pattern),events.publish("endTilingPattern",pattern),renderTargetStack.pop().restore()};var newObject=API.__private__.newObject=function(){var oid=newObjectDeferred();return newObjectDeferredBegin(oid,!0),oid},newObjectDeferred=API.__private__.newObjectDeferred=function(){return objectNumber++,offsets[objectNumber]=function(){return contentLength},objectNumber},newObjectDeferredBegin=function(oid,doOutput){return doOutput="boolean"==typeof doOutput&&doOutput,offsets[oid]=contentLength,doOutput&&out(oid+" 0 obj"),oid},newAdditionalObject=API.__private__.newAdditionalObject=function(){var obj={objId:newObjectDeferred(),content:""};return additionalObjects.push(obj),obj},rootDictionaryObjId=newObjectDeferred(),resourceDictionaryObjId=newObjectDeferred(),decodeColorString=API.__private__.decodeColorString=function(color){var colorEncoded=color.split(" ");if(2!==colorEncoded.length||"g"!==colorEncoded[1]&&"G"!==colorEncoded[1]){if(5===colorEncoded.length&&("k"===colorEncoded[4]||"K"===colorEncoded[4])){colorEncoded=[(1-colorEncoded[0])*(1-colorEncoded[3]),(1-colorEncoded[1])*(1-colorEncoded[3]),(1-colorEncoded[2])*(1-colorEncoded[3]),"r"]}}else{var floatVal=parseFloat(colorEncoded[0]);colorEncoded=[floatVal,floatVal,floatVal,"r"]}for(var colorAsRGB="#",i=0;i<3;i++)colorAsRGB+=("0"+Math.floor(255*parseFloat(colorEncoded[i])).toString(16)).slice(-2);return colorAsRGB},encodeColorString=API.__private__.encodeColorString=function(options){var color;"string"==typeof options&&(options={ch1:options});var ch1=options.ch1,ch2=options.ch2,ch3=options.ch3,ch4=options.ch4,letterArray="draw"===options.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof ch1&&"#"!==ch1.charAt(0)){var rgbColor=new RGBColor(ch1);if(rgbColor.ok)ch1=rgbColor.toHex();else if(!/^\d*\.?\d*$/.test(ch1))throw new Error('Invalid color "'+ch1+'" passed to jsPDF.encodeColorString.')}if("string"==typeof ch1&&/^#[0-9A-Fa-f]{3}$/.test(ch1)&&(ch1="#"+ch1[1]+ch1[1]+ch1[2]+ch1[2]+ch1[3]+ch1[3]),"string"==typeof ch1&&/^#[0-9A-Fa-f]{6}$/.test(ch1)){var hex=parseInt(ch1.substr(1),16);ch1=hex>>16&255,ch2=hex>>8&255,ch3=255&hex}if(void 0===ch2||void 0===ch4&&ch1===ch2&&ch2===ch3)if("string"==typeof ch1)color=ch1+" "+letterArray[0];else if(2===options.precision)color=f2(ch1/255)+" "+letterArray[0];else color=f3(ch1/255)+" "+letterArray[0];else if(void 0===ch4||"object"===_typeof(ch4)){if(ch4&&!isNaN(ch4.a)&&0===ch4.a)return color=["1.","1.","1.",letterArray[1]].join(" ");if("string"==typeof ch1)color=[ch1,ch2,ch3,letterArray[1]].join(" ");else if(2===options.precision)color=[f2(ch1/255),f2(ch2/255),f2(ch3/255),letterArray[1]].join(" ");else color=[f3(ch1/255),f3(ch2/255),f3(ch3/255),letterArray[1]].join(" ")}else if("string"==typeof ch1)color=[ch1,ch2,ch3,ch4,letterArray[2]].join(" ");else if(2===options.precision)color=[f2(ch1),f2(ch2),f2(ch3),f2(ch4),letterArray[2]].join(" ");else color=[f3(ch1),f3(ch2),f3(ch3),f3(ch4),letterArray[2]].join(" ");return color},getFilters=API.__private__.getFilters=function(){return filters},putStream=API.__private__.putStream=function(options){var data=(options=options||{}).data||"",filters=options.filters||getFilters(),alreadyAppliedFilters=options.alreadyAppliedFilters||[],addLength1=options.addLength1||!1,valueOfLength1=data.length,objectId=options.objectId,encryptor=function(data){return data};if(null!==encryptionOptions&&void 0===objectId)throw new Error("ObjectId must be passed to putStream for file encryption");null!==encryptionOptions&&(encryptor=encryption.encryptor(objectId,0));var processedData={};!0===filters&&(filters=["FlateEncode"]);var keyValues=options.additionalKeyValues||[],filterAsString=(processedData=void 0!==jsPDF.API.processDataByFilters?jsPDF.API.processDataByFilters(data,filters):{data:data,reverseChain:[]}).reverseChain+(Array.isArray(alreadyAppliedFilters)?alreadyAppliedFilters.join(" "):alreadyAppliedFilters.toString());if(0!==processedData.data.length&&(keyValues.push({key:"Length",value:processedData.data.length}),!0===addLength1&&keyValues.push({key:"Length1",value:valueOfLength1})),0!=filterAsString.length)if(filterAsString.split("/").length-1==1)keyValues.push({key:"Filter",value:filterAsString});else{keyValues.push({key:"Filter",value:"["+filterAsString+"]"});for(var j=0;j<keyValues.length;j+=1)if("DecodeParms"===keyValues[j].key){for(var decodeParmsArray=[],i=0;i<processedData.reverseChain.split("/").length-1;i+=1)decodeParmsArray.push("null");decodeParmsArray.push(keyValues[j].value),keyValues[j].value="["+decodeParmsArray.join(" ")+"]"}}out("<<");for(var k=0;k<keyValues.length;k++)out("/"+keyValues[k].key+" "+keyValues[k].value);out(">>"),0!==processedData.data.length&&(out("stream"),out(encryptor(processedData.data)),out("endstream"))},putPage=API.__private__.putPage=function(page){var pageNumber=page.number,data=page.data,pageObjectNumber=page.objId,pageContentsObjId=page.contentsObjId;newObjectDeferredBegin(pageObjectNumber,!0),out("<</Type /Page"),out("/Parent "+page.rootDictionaryObjId+" 0 R"),out("/Resources "+page.resourceDictionaryObjId+" 0 R"),out("/MediaBox ["+parseFloat(hpf(page.mediaBox.bottomLeftX))+" "+parseFloat(hpf(page.mediaBox.bottomLeftY))+" "+hpf(page.mediaBox.topRightX)+" "+hpf(page.mediaBox.topRightY)+"]"),null!==page.cropBox&&out("/CropBox ["+hpf(page.cropBox.bottomLeftX)+" "+hpf(page.cropBox.bottomLeftY)+" "+hpf(page.cropBox.topRightX)+" "+hpf(page.cropBox.topRightY)+"]"),null!==page.bleedBox&&out("/BleedBox ["+hpf(page.bleedBox.bottomLeftX)+" "+hpf(page.bleedBox.bottomLeftY)+" "+hpf(page.bleedBox.topRightX)+" "+hpf(page.bleedBox.topRightY)+"]"),null!==page.trimBox&&out("/TrimBox ["+hpf(page.trimBox.bottomLeftX)+" "+hpf(page.trimBox.bottomLeftY)+" "+hpf(page.trimBox.topRightX)+" "+hpf(page.trimBox.topRightY)+"]"),null!==page.artBox&&out("/ArtBox ["+hpf(page.artBox.bottomLeftX)+" "+hpf(page.artBox.bottomLeftY)+" "+hpf(page.artBox.topRightX)+" "+hpf(page.artBox.topRightY)+"]"),"number"==typeof page.userUnit&&1!==page.userUnit&&out("/UserUnit "+page.userUnit),events.publish("putPage",{objId:pageObjectNumber,pageContext:pagesContext[pageNumber],pageNumber:pageNumber,page:data}),out("/Contents "+pageContentsObjId+" 0 R"),out(">>"),out("endobj");var pageContent=data.join("\n");return apiMode===ApiMode.ADVANCED&&(pageContent+="\nQ"),newObjectDeferredBegin(pageContentsObjId,!0),putStream({data:pageContent,filters:getFilters(),objectId:pageContentsObjId}),out("endobj"),pageObjectNumber},putPages=API.__private__.putPages=function(){var n,i,pageObjectNumbers=[];for(n=1;n<=page;n++)pagesContext[n].objId=newObjectDeferred(),pagesContext[n].contentsObjId=newObjectDeferred();for(n=1;n<=page;n++)pageObjectNumbers.push(putPage({number:n,data:pages[n],objId:pagesContext[n].objId,contentsObjId:pagesContext[n].contentsObjId,mediaBox:pagesContext[n].mediaBox,cropBox:pagesContext[n].cropBox,bleedBox:pagesContext[n].bleedBox,trimBox:pagesContext[n].trimBox,artBox:pagesContext[n].artBox,userUnit:pagesContext[n].userUnit,rootDictionaryObjId:rootDictionaryObjId,resourceDictionaryObjId:resourceDictionaryObjId}));newObjectDeferredBegin(rootDictionaryObjId,!0),out("<</Type /Pages");var kids="/Kids [";for(i=0;i<page;i++)kids+=pageObjectNumbers[i]+" 0 R ";out(kids+"]"),out("/Count "+page),out(">>"),out("endobj"),events.publish("postPutPages")},putFont=function(font){events.publish("putFont",{font:font,out:out,newObject:newObject,putStream:putStream}),!0!==font.isAlreadyPutted&&(font.objectNumber=newObject(),out("<<"),out("/Type /Font"),out("/BaseFont /"+toPDFName(font.postScriptName)),out("/Subtype /Type1"),"string"==typeof font.encoding&&out("/Encoding /"+font.encoding),out("/FirstChar 32"),out("/LastChar 255"),out(">>"),out("endobj"))},putFonts=function(){for(var fontKey in fonts)fonts.hasOwnProperty(fontKey)&&(!1===putOnlyUsedFonts||!0===putOnlyUsedFonts&&usedFonts.hasOwnProperty(fontKey))&&putFont(fonts[fontKey])},putXObject=function(xObject){xObject.objectNumber=newObject();var options=[];options.push({key:"Type",value:"/XObject"}),options.push({key:"Subtype",value:"/Form"}),options.push({key:"BBox",value:"["+[hpf(xObject.x),hpf(xObject.y),hpf(xObject.x+xObject.width),hpf(xObject.y+xObject.height)].join(" ")+"]"}),options.push({key:"Matrix",value:"["+xObject.matrix.toString()+"]"});var stream=xObject.pages[1].join("\n");putStream({data:stream,additionalKeyValues:options,objectId:xObject.objectNumber}),out("endobj")},putXObjects=function(){for(var xObjectKey in renderTargets)renderTargets.hasOwnProperty(xObjectKey)&&putXObject(renderTargets[xObjectKey])},interpolateAndEncodeRGBStream=function(colors,numberSamples){var t,tValues=[],dT=1/(numberSamples-1);for(t=0;t<1;t+=dT)tValues.push(t);if(tValues.push(1),0!=colors[0].offset){var c0={offset:0,color:colors[0].color};colors.unshift(c0)}if(1!=colors[colors.length-1].offset){var c1={offset:1,color:colors[colors.length-1].color};colors.push(c1)}for(var out="",index=0,i=0;i<tValues.length;i++){for(t=tValues[i];t>colors[index+1].offset;)index++;var a=colors[index].offset,d=(t-a)/(colors[index+1].offset-a),aColor=colors[index].color,bColor=colors[index+1].color;out+=padd2Hex(Math.round((1-d)*aColor[0]+d*bColor[0]).toString(16))+padd2Hex(Math.round((1-d)*aColor[1]+d*bColor[1]).toString(16))+padd2Hex(Math.round((1-d)*aColor[2]+d*bColor[2]).toString(16))}return out.trim()},putShadingPattern=function(pattern,numberSamples){numberSamples||(numberSamples=21);var funcObjectNumber=newObject(),stream=interpolateAndEncodeRGBStream(pattern.colors,numberSamples),options=[];options.push({key:"FunctionType",value:"0"}),options.push({key:"Domain",value:"[0.0 1.0]"}),options.push({key:"Size",value:"["+numberSamples+"]"}),options.push({key:"BitsPerSample",value:"8"}),options.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),options.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),putStream({data:stream,additionalKeyValues:options,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:funcObjectNumber}),out("endobj"),pattern.objectNumber=newObject(),out("<< /ShadingType "+pattern.type),out("/ColorSpace /DeviceRGB");var coords="/Coords ["+hpf(parseFloat(pattern.coords[0]))+" "+hpf(parseFloat(pattern.coords[1]))+" ";2===pattern.type?coords+=hpf(parseFloat(pattern.coords[2]))+" "+hpf(parseFloat(pattern.coords[3])):coords+=hpf(parseFloat(pattern.coords[2]))+" "+hpf(parseFloat(pattern.coords[3]))+" "+hpf(parseFloat(pattern.coords[4]))+" "+hpf(parseFloat(pattern.coords[5])),out(coords+="]"),pattern.matrix&&out("/Matrix ["+pattern.matrix.toString()+"]"),out("/Function "+funcObjectNumber+" 0 R"),out("/Extend [true true]"),out(">>"),out("endobj")},putTilingPattern=function(pattern,deferredResourceDictionaryIds){var resourcesObjectId=newObjectDeferred(),patternObjectId=newObject();deferredResourceDictionaryIds.push({resourcesOid:resourcesObjectId,objectOid:patternObjectId}),pattern.objectNumber=patternObjectId;var options=[];options.push({key:"Type",value:"/Pattern"}),options.push({key:"PatternType",value:"1"}),options.push({key:"PaintType",value:"1"}),options.push({key:"TilingType",value:"1"}),options.push({key:"BBox",value:"["+pattern.boundingBox.map(hpf).join(" ")+"]"}),options.push({key:"XStep",value:hpf(pattern.xStep)}),options.push({key:"YStep",value:hpf(pattern.yStep)}),options.push({key:"Resources",value:resourcesObjectId+" 0 R"}),pattern.matrix&&options.push({key:"Matrix",value:"["+pattern.matrix.toString()+"]"}),putStream({data:pattern.stream,additionalKeyValues:options,objectId:pattern.objectNumber}),out("endobj")},putPatterns=function(deferredResourceDictionaryIds){var patternKey;for(patternKey in patterns)patterns.hasOwnProperty(patternKey)&&(patterns[patternKey]instanceof ShadingPattern?putShadingPattern(patterns[patternKey]):patterns[patternKey]instanceof TilingPattern&&putTilingPattern(patterns[patternKey],deferredResourceDictionaryIds))},putGState=function(gState){for(var p in gState.objectNumber=newObject(),out("<<"),gState)switch(p){case"opacity":out("/ca "+f2(gState[p]));break;case"stroke-opacity":out("/CA "+f2(gState[p]))}out(">>"),out("endobj")},putGStates=function(){var gStateKey;for(gStateKey in gStates)gStates.hasOwnProperty(gStateKey)&&putGState(gStates[gStateKey])},putXobjectDict=function(){for(var xObjectKey in out("/XObject <<"),renderTargets)renderTargets.hasOwnProperty(xObjectKey)&&renderTargets[xObjectKey].objectNumber>=0&&out("/"+xObjectKey+" "+renderTargets[xObjectKey].objectNumber+" 0 R");events.publish("putXobjectDict"),out(">>")},putEncryptionDict=function(){encryption.oid=newObject(),out("<<"),out("/Filter /Standard"),out("/V "+encryption.v),out("/R "+encryption.r),out("/U <"+encryption.toHexString(encryption.U)+">"),out("/O <"+encryption.toHexString(encryption.O)+">"),out("/P "+encryption.P),out(">>"),out("endobj")},putFontDict=function(){for(var fontKey in out("/Font <<"),fonts)fonts.hasOwnProperty(fontKey)&&(!1===putOnlyUsedFonts||!0===putOnlyUsedFonts&&usedFonts.hasOwnProperty(fontKey))&&out("/"+fontKey+" "+fonts[fontKey].objectNumber+" 0 R");out(">>")},putShadingPatternDict=function(){if(Object.keys(patterns).length>0){for(var patternKey in out("/Shading <<"),patterns)patterns.hasOwnProperty(patternKey)&&patterns[patternKey]instanceof ShadingPattern&&patterns[patternKey].objectNumber>=0&&out("/"+patternKey+" "+patterns[patternKey].objectNumber+" 0 R");events.publish("putShadingPatternDict"),out(">>")}},putTilingPatternDict=function(objectOid){if(Object.keys(patterns).length>0){for(var patternKey in out("/Pattern <<"),patterns)patterns.hasOwnProperty(patternKey)&&patterns[patternKey]instanceof API.TilingPattern&&patterns[patternKey].objectNumber>=0&&patterns[patternKey].objectNumber<objectOid&&out("/"+patternKey+" "+patterns[patternKey].objectNumber+" 0 R");events.publish("putTilingPatternDict"),out(">>")}},putGStatesDict=function(){if(Object.keys(gStates).length>0){var gStateKey;for(gStateKey in out("/ExtGState <<"),gStates)gStates.hasOwnProperty(gStateKey)&&gStates[gStateKey].objectNumber>=0&&out("/"+gStateKey+" "+gStates[gStateKey].objectNumber+" 0 R");events.publish("putGStateDict"),out(">>")}},putResourceDictionary=function(objectIds){newObjectDeferredBegin(objectIds.resourcesOid,!0),out("<<"),out("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),putFontDict(),putShadingPatternDict(),putTilingPatternDict(objectIds.objectOid),putGStatesDict(),putXobjectDict(),out(">>"),out("endobj")},putResources=function(){var deferredResourceDictionaryIds=[];putFonts(),putGStates(),putXObjects(),putPatterns(deferredResourceDictionaryIds),events.publish("putResources"),deferredResourceDictionaryIds.forEach(putResourceDictionary),putResourceDictionary({resourcesOid:resourceDictionaryObjId,objectOid:Number.MAX_SAFE_INTEGER}),events.publish("postPutResources")},putAdditionalObjects=function(){events.publish("putAdditionalObjects");for(var i=0;i<additionalObjects.length;i++){var obj=additionalObjects[i];newObjectDeferredBegin(obj.objId,!0),out(obj.content),out("endobj")}events.publish("postPutAdditionalObjects")},addFontToFontDictionary=function(font){fontmap[font.fontName]=fontmap[font.fontName]||{},fontmap[font.fontName][font.fontStyle]=font.id},addFont=function(postScriptName,fontName,fontStyle,encoding,isStandardFont){var font={id:"F"+(Object.keys(fonts).length+1).toString(10),postScriptName:postScriptName,fontName:fontName,fontStyle:fontStyle,encoding:encoding,isStandardFont:isStandardFont||!1,metadata:{}};return events.publish("addFont",{font:font,instance:this}),fonts[font.id]=font,addFontToFontDictionary(font),font.id},addFonts=function(arrayOfFonts){for(var i=0,l=standardFonts.length;i<l;i++){var fontKey=addFont.call(this,arrayOfFonts[i][0],arrayOfFonts[i][1],arrayOfFonts[i][2],standardFonts[i][3],!0);!1===putOnlyUsedFonts&&(usedFonts[fontKey]=!0);var parts=arrayOfFonts[i][0].split("-");addFontToFontDictionary({id:fontKey,fontName:parts[0],fontStyle:parts[1]||""})}events.publish("addFonts",{fonts:fonts,dictionary:fontmap})},SAFE=function(fn){return fn.foo=function(){try{return fn.apply(this,arguments)}catch(e){var stack=e.stack||"";~stack.indexOf(" at ")&&(stack=stack.split(" at ")[1]);var m="Error in function "+stack.split("\n")[0].split("<")[0]+": "+e.message;if(!globalObject.console)throw new Error(m);globalObject.console.error(m,e),globalObject.alert&&alert(m)}},fn.foo.bar=fn,fn.foo},to8bitStream=function(text,flags){var i,l,sourceEncoding,encodingBlock,outputEncoding,newtext,isUnicode,ch,bch;if(sourceEncoding=(flags=flags||{}).sourceEncoding||"Unicode",outputEncoding=flags.outputEncoding,(flags.autoencode||outputEncoding)&&fonts[activeFontKey].metadata&&fonts[activeFontKey].metadata[sourceEncoding]&&fonts[activeFontKey].metadata[sourceEncoding].encoding&&(encodingBlock=fonts[activeFontKey].metadata[sourceEncoding].encoding,!outputEncoding&&fonts[activeFontKey].encoding&&(outputEncoding=fonts[activeFontKey].encoding),!outputEncoding&&encodingBlock.codePages&&(outputEncoding=encodingBlock.codePages[0]),"string"==typeof outputEncoding&&(outputEncoding=encodingBlock[outputEncoding]),outputEncoding)){for(isUnicode=!1,newtext=[],i=0,l=text.length;i<l;i++)(ch=outputEncoding[text.charCodeAt(i)])?newtext.push(String.fromCharCode(ch)):newtext.push(text[i]),newtext[i].charCodeAt(0)>>8&&(isUnicode=!0);text=newtext.join("")}for(i=text.length;void 0===isUnicode&&0!==i;)text.charCodeAt(i-1)>>8&&(isUnicode=!0),i--;if(!isUnicode)return text;for(newtext=flags.noBOM?[]:[254,255],i=0,l=text.length;i<l;i++){if((bch=(ch=text.charCodeAt(i))>>8)>>8)throw new Error("Character at position "+i+" of string '"+text+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");newtext.push(bch),newtext.push(ch-(bch<<8))}return String.fromCharCode.apply(void 0,newtext)},pdfEscape=API.__private__.pdfEscape=API.pdfEscape=function(text,flags){return to8bitStream(text,flags).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},beginPage=API.__private__.beginPage=function(format){pages[++page]=[],pagesContext[page]={objId:0,contentsObjId:0,userUnit:Number(userUnit),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(format[0]),topRightY:Number(format[1])}},_setPage(page),setOutputDestination(pages[currentPage])},_addPage=function(parmFormat,parmOrientation){var dimensions,width,height;switch(orientation=parmOrientation||orientation,"string"==typeof parmFormat&&(dimensions=getPageFormat(parmFormat.toLowerCase()),Array.isArray(dimensions)&&(width=dimensions[0],height=dimensions[1])),Array.isArray(parmFormat)&&(width=parmFormat[0]*scaleFactor,height=parmFormat[1]*scaleFactor),isNaN(width)&&(width=format[0],height=format[1]),(width>14400||height>14400)&&(console.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),width=Math.min(14400,width),height=Math.min(14400,height)),format=[width,height],orientation.substr(0,1)){case"l":height>width&&(format=[height,width]);break;case"p":width>height&&(format=[height,width])}beginPage(format),setLineWidth(lineWidth),out(strokeColor),0!==lineCapID&&out(lineCapID+" J"),0!==lineJoinID&&out(lineJoinID+" j"),events.publish("addPage",{pageNumber:page})},_deletePage=function(n){n>0&&n<=page&&(pages.splice(n,1),pagesContext.splice(n,1),page--,currentPage>page&&(currentPage=page),this.setPage(currentPage))},_setPage=function(n){n>0&&n<=page&&(currentPage=n)},getNumberOfPages=API.__private__.getNumberOfPages=API.getNumberOfPages=function(){return pages.length-1},getFont=function(fontName,fontStyle,options){var fontNameLowerCase,key=void 0;return options=options||{},fontName=void 0!==fontName?fontName:fonts[activeFontKey].fontName,fontStyle=void 0!==fontStyle?fontStyle:fonts[activeFontKey].fontStyle,fontNameLowerCase=fontName.toLowerCase(),void 0!==fontmap[fontNameLowerCase]&&void 0!==fontmap[fontNameLowerCase][fontStyle]?key=fontmap[fontNameLowerCase][fontStyle]:void 0!==fontmap[fontName]&&void 0!==fontmap[fontName][fontStyle]?key=fontmap[fontName][fontStyle]:!1===options.disableWarning&&console.warn("Unable to look up font label for font '"+fontName+"', '"+fontStyle+"'. Refer to getFontList() for available fonts."),key||options.noFallback||null==(key=fontmap.times[fontStyle])&&(key=fontmap.times.normal),key},putInfo=API.__private__.putInfo=function(){var objectId=newObject(),encryptor=function(data){return data};for(var key in null!==encryptionOptions&&(encryptor=encryption.encryptor(objectId,0)),out("<<"),out("/Producer ("+pdfEscape(encryptor("jsPDF "+jsPDF.version))+")"),documentProperties)documentProperties.hasOwnProperty(key)&&documentProperties[key]&&out("/"+key.substr(0,1).toUpperCase()+key.substr(1)+" ("+pdfEscape(encryptor(documentProperties[key]))+")");out("/CreationDate ("+pdfEscape(encryptor(creationDate))+")"),out(">>"),out("endobj")},putCatalog=API.__private__.putCatalog=function(options){var tmpRootDictionaryObjId=(options=options||{}).rootDictionaryObjId||rootDictionaryObjId;switch(newObject(),out("<<"),out("/Type /Catalog"),out("/Pages "+tmpRootDictionaryObjId+" 0 R"),zoomMode||(zoomMode="fullwidth"),zoomMode){case"fullwidth":out("/OpenAction [3 0 R /FitH null]");break;case"fullheight":out("/OpenAction [3 0 R /FitV null]");break;case"fullpage":out("/OpenAction [3 0 R /Fit]");break;case"original":out("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pcn=""+zoomMode;"%"===pcn.substr(pcn.length-1)&&(zoomMode=parseInt(zoomMode)/100),"number"==typeof zoomMode&&out("/OpenAction [3 0 R /XYZ null null "+f2(zoomMode)+"]")}switch(layoutMode||(layoutMode="continuous"),layoutMode){case"continuous":out("/PageLayout /OneColumn");break;case"single":out("/PageLayout /SinglePage");break;case"two":case"twoleft":out("/PageLayout /TwoColumnLeft");break;case"tworight":out("/PageLayout /TwoColumnRight")}pageMode&&out("/PageMode /"+pageMode),events.publish("putCatalog"),out(">>"),out("endobj")},putTrailer=API.__private__.putTrailer=function(){out("trailer"),out("<<"),out("/Size "+(objectNumber+1)),out("/Root "+objectNumber+" 0 R"),out("/Info "+(objectNumber-1)+" 0 R"),null!==encryptionOptions&&out("/Encrypt "+encryption.oid+" 0 R"),out("/ID [ <"+fileId+"> <"+fileId+"> ]"),out(">>")},putHeader=API.__private__.putHeader=function(){out("%PDF-"+pdfVersion),out("%¬∫√ü¬¨√†")},putXRef=API.__private__.putXRef=function(){var p="0000000000";out("xref"),out("0 "+(objectNumber+1)),out("0000000000 65535 f ");for(var i=1;i<=objectNumber;i++){"function"==typeof offsets[i]?out((p+offsets[i]()).slice(-10)+" 00000 n "):void 0!==offsets[i]?out((p+offsets[i]).slice(-10)+" 00000 n "):out("0000000000 00000 n ")}},buildDocument=API.__private__.buildDocument=function(){resetDocument(),setOutputDestination(content),events.publish("buildDocument"),putHeader(),putPages(),putAdditionalObjects(),putResources(),null!==encryptionOptions&&putEncryptionDict(),putInfo(),putCatalog();var offsetOfXRef=contentLength;return putXRef(),putTrailer(),out("startxref"),out(""+offsetOfXRef),out("%%EOF"),setOutputDestination(pages[currentPage]),content.join("\n")},getBlob=API.__private__.getBlob=function(data){return new Blob([getArrayBuffer(data)],{type:"application/pdf"})},output=API.output=API.__private__.output=SAFE((function(type,options){switch("string"==typeof(options=options||{})?options={filename:options}:options.filename=options.filename||"generated.pdf",type){case void 0:return buildDocument();case"save":API.save(options.filename);break;case"arraybuffer":return getArrayBuffer(buildDocument());case"blob":return getBlob(buildDocument());case"bloburi":case"bloburl":if(void 0!==globalObject.URL&&"function"==typeof globalObject.URL.createObjectURL)return globalObject.URL&&globalObject.URL.createObjectURL(getBlob(buildDocument()))||void 0;console.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var dataURI="",pdfDocument=buildDocument();try{dataURI=btoa(pdfDocument)}catch(e){dataURI=btoa(unescape(encodeURIComponent(pdfDocument)))}return"data:application/pdf;filename="+options.filename+";base64,"+dataURI;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(globalObject)){var pdfObjectUrl="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",integrity=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';options.pdfObjectUrl&&(pdfObjectUrl=options.pdfObjectUrl,integrity="");var htmlForNewWindow='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pdfObjectUrl+'"'+integrity+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(options)+");<\/script></body></html>",nW=globalObject.open();return null!==nW&&nW.document.write(htmlForNewWindow),nW}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(globalObject)){var htmlForPDFjsNewWindow='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(options.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+options.filename+'" width="500px" height="400px" /></body></html>',PDFjsNewWindow=globalObject.open();if(null!==PDFjsNewWindow){PDFjsNewWindow.document.write(htmlForPDFjsNewWindow);var scope=this;PDFjsNewWindow.document.documentElement.querySelector("#pdfViewer").onload=function(){PDFjsNewWindow.document.title=options.filename,PDFjsNewWindow.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(scope.output("bloburl"))}}return PDFjsNewWindow}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(globalObject))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var htmlForDataURLNewWindow='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",options)+'"></iframe></body></html>',dataURLNewWindow=globalObject.open();if(null!==dataURLNewWindow&&(dataURLNewWindow.document.write(htmlForDataURLNewWindow),dataURLNewWindow.document.title=options.filename),dataURLNewWindow||"undefined"==typeof safari)return dataURLNewWindow;break;case"datauri":case"dataurl":return globalObject.document.location.href=this.output("datauristring",options);default:return null}})),hasHotfix=function(hotfixName){return!0===Array.isArray(hotfixes)&&hotfixes.indexOf(hotfixName)>-1};switch(unit){case"pt":scaleFactor=1;break;case"mm":scaleFactor=72/25.4;break;case"cm":scaleFactor=72/2.54;break;case"in":scaleFactor=72;break;case"px":scaleFactor=1==hasHotfix("px_scaling")?.75:96/72;break;case"pc":case"em":scaleFactor=12;break;case"ex":scaleFactor=6;break;default:if("number"!=typeof unit)throw new Error("Invalid unit: "+unit);scaleFactor=unit}var encryption=null;setCreationDate(),setFileId();var getEncryptor=function(objectId){return null!==encryptionOptions?encryption.encryptor(objectId,0):function(data){return data}},getPageInfo=API.__private__.getPageInfo=API.getPageInfo=function(pageNumberOneBased){if(isNaN(pageNumberOneBased)||pageNumberOneBased%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pagesContext[pageNumberOneBased].objId,pageNumber:pageNumberOneBased,pageContext:pagesContext[pageNumberOneBased]}},getPageInfoByObjId=API.__private__.getPageInfoByObjId=function(objId){if(isNaN(objId)||objId%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pageNumber in pagesContext)if(pagesContext[pageNumber].objId===objId)break;return getPageInfo(pageNumber)},getCurrentPageInfo=API.__private__.getCurrentPageInfo=API.getCurrentPageInfo=function(){return{objId:pagesContext[currentPage].objId,pageNumber:currentPage,pageContext:pagesContext[currentPage]}};API.addPage=function(){return _addPage.apply(this,arguments),this},API.setPage=function(){return _setPage.apply(this,arguments),setOutputDestination.call(this,pages[currentPage]),this},API.insertPage=function(beforePage){return this.addPage(),this.movePage(currentPage,beforePage),this},API.movePage=function(targetPage,beforePage){var tmpPages,tmpPagesContext;if(targetPage>beforePage){tmpPages=pages[targetPage],tmpPagesContext=pagesContext[targetPage];for(var i=targetPage;i>beforePage;i--)pages[i]=pages[i-1],pagesContext[i]=pagesContext[i-1];pages[beforePage]=tmpPages,pagesContext[beforePage]=tmpPagesContext,this.setPage(beforePage)}else if(targetPage<beforePage){tmpPages=pages[targetPage],tmpPagesContext=pagesContext[targetPage];for(var j=targetPage;j<beforePage;j++)pages[j]=pages[j+1],pagesContext[j]=pagesContext[j+1];pages[beforePage]=tmpPages,pagesContext[beforePage]=tmpPagesContext,this.setPage(beforePage)}return this},API.deletePage=function(){return _deletePage.apply(this,arguments),this},API.__private__.text=API.text=function(text,x,y,options,transform){var payload,da,angle,align,charSpace,maxWidth,flags,horizontalScale,transformationMatrix,scope=(options=options||{}).scope||this;if("number"==typeof text&&"number"==typeof x&&("string"==typeof y||Array.isArray(y))){var tmp=y;y=x,x=text,text=tmp}if(arguments[3]instanceof Matrix==!1?(angle=arguments[4],align=arguments[5],"object"===_typeof(flags=arguments[3])&&null!==flags||("string"==typeof angle&&(align=angle,angle=null),"string"==typeof flags&&(align=flags,flags=null),"number"==typeof flags&&(angle=flags,flags=null),options={flags:flags,angle:angle,align:align})):(advancedApiModeTrap("The transform parameter of text() with a Matrix value"),transformationMatrix=transform),isNaN(x)||isNaN(y)||null==text)throw new Error("Invalid arguments passed to jsPDF.text");if(0===text.length)return scope;var xtra="",isHex=!1,lineHeight="number"==typeof options.lineHeightFactor?options.lineHeightFactor:lineHeightFactor,scaleFactor=scope.internal.scaleFactor;function ESC(s){return s=s.split("\t").join(Array(options.TabLen||9).join(" ")),pdfEscape(s,flags)}function transformTextToSpecialArray(text){for(var curDa,sa=text.concat(),da=[],len=sa.length;len--;)"string"==typeof(curDa=sa.shift())?da.push(curDa):Array.isArray(text)&&(1===curDa.length||void 0===curDa[1]&&void 0===curDa[2])?da.push(curDa[0]):da.push([curDa[0],curDa[1],curDa[2]]);return da}function processTextByFunction(text,processingFunction){var result;if("string"==typeof text)result=processingFunction(text)[0];else if(Array.isArray(text)){for(var curDa,tmpResult,sa=text.concat(),da=[],len=sa.length;len--;)"string"==typeof(curDa=sa.shift())?da.push(processingFunction(curDa)[0]):Array.isArray(curDa)&&"string"==typeof curDa[0]&&(tmpResult=processingFunction(curDa[0],curDa[1],curDa[2]),da.push([tmpResult[0],tmpResult[1],tmpResult[2]]));result=da}return result}var textIsOfTypeString=!1,tmpTextIsOfTypeString=!0;if("string"==typeof text)textIsOfTypeString=!0;else if(Array.isArray(text)){var sa=text.concat();da=[];for(var curDa,len=sa.length;len--;)("string"!=typeof(curDa=sa.shift())||Array.isArray(curDa)&&"string"!=typeof curDa[0])&&(tmpTextIsOfTypeString=!1);textIsOfTypeString=tmpTextIsOfTypeString}if(!1===textIsOfTypeString)throw new Error('Type of text must be string or Array. "'+text+'" is not recognized.');"string"==typeof text&&(text=text.match(/[\r?\n]/)?text.split(/\r\n|\r|\n/g):[text]);var height=activeFontSize/scope.internal.scaleFactor,descent=height*(lineHeight-1);switch(options.baseline){case"bottom":y-=descent;break;case"top":y+=height-descent;break;case"hanging":y+=height-2*descent;break;case"middle":y+=height/2-descent}if((maxWidth=options.maxWidth||0)>0&&("string"==typeof text?text=scope.splitTextToSize(text,maxWidth):"[object Array]"===Object.prototype.toString.call(text)&&(text=text.reduce((function(acc,textLine){return acc.concat(scope.splitTextToSize(textLine,maxWidth))}),[]))),payload={text:text,x:x,y:y,options:options,mutex:{pdfEscape:pdfEscape,activeFontKey:activeFontKey,fonts:fonts,activeFontSize:activeFontSize}},events.publish("preProcessText",payload),text=payload.text,angle=(options=payload.options).angle,transformationMatrix instanceof Matrix==!1&&angle&&"number"==typeof angle){angle*=Math.PI/180,0===options.rotationDirection&&(angle=-angle),apiMode===ApiMode.ADVANCED&&(angle=-angle);var c=Math.cos(angle),s=Math.sin(angle);transformationMatrix=new Matrix(c,s,-s,c,0,0)}else angle&&angle instanceof Matrix&&(transformationMatrix=angle);apiMode!==ApiMode.ADVANCED||transformationMatrix||(transformationMatrix=identityMatrix),void 0!==(charSpace=options.charSpace||activeCharSpace)&&(xtra+=hpf(scale(charSpace))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(horizontalScale=options.horizontalScale)&&(xtra+=hpf(100*horizontalScale)+" Tz\n");options.lang;var renderingMode=-1,parmRenderingMode=void 0!==options.renderingMode?options.renderingMode:options.stroke,pageContext=scope.internal.getCurrentPageInfo().pageContext;switch(parmRenderingMode){case 0:case!1:case"fill":renderingMode=0;break;case 1:case!0:case"stroke":renderingMode=1;break;case 2:case"fillThenStroke":renderingMode=2;break;case 3:case"invisible":renderingMode=3;break;case 4:case"fillAndAddForClipping":renderingMode=4;break;case 5:case"strokeAndAddPathForClipping":renderingMode=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":renderingMode=6;break;case 7:case"addToPathForClipping":renderingMode=7}var usedRenderingMode=void 0!==pageContext.usedRenderingMode?pageContext.usedRenderingMode:-1;-1!==renderingMode?xtra+=renderingMode+" Tr\n":-1!==usedRenderingMode&&(xtra+="0 Tr\n"),-1!==renderingMode&&(pageContext.usedRenderingMode=renderingMode),align=options.align||"left";var lineWidths,leading=activeFontSize*lineHeight,pageWidth=scope.internal.pageSize.getWidth(),activeFont=fonts[activeFontKey];charSpace=options.charSpace||activeCharSpace,maxWidth=options.maxWidth||0,flags=Object.assign({autoencode:!0,noBOM:!0},options.flags);var wordSpacingPerLine=[];if("[object Array]"===Object.prototype.toString.call(text)){var newY;da=transformTextToSpecialArray(text),"left"!==align&&(lineWidths=da.map((function(v){return scope.getStringUnitWidth(v,{font:activeFont,charSpace:charSpace,fontSize:activeFontSize,doKerning:!1})*activeFontSize/scaleFactor})));var newX,prevWidth=0;if("right"===align){x-=lineWidths[0],text=[],len=da.length;for(var i=0;i<len;i++)0===i?(newX=getHorizontalCoordinate(x),newY=getVerticalCoordinate(y)):(newX=scale(prevWidth-lineWidths[i]),newY=-leading),text.push([da[i],newX,newY]),prevWidth=lineWidths[i]}else if("center"===align){x-=lineWidths[0]/2,text=[],len=da.length;for(var j=0;j<len;j++)0===j?(newX=getHorizontalCoordinate(x),newY=getVerticalCoordinate(y)):(newX=scale((prevWidth-lineWidths[j])/2),newY=-leading),text.push([da[j],newX,newY]),prevWidth=lineWidths[j]}else if("left"===align){text=[],len=da.length;for(var h=0;h<len;h++)text.push(da[h])}else{if("justify"!==align)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');text=[],len=da.length,maxWidth=0!==maxWidth?maxWidth:pageWidth;for(var l=0;l<len;l++)newY=0===l?getVerticalCoordinate(y):-leading,newX=0===l?getHorizontalCoordinate(x):0,l<len-1?wordSpacingPerLine.push(hpf(scale((maxWidth-lineWidths[l])/(da[l].split(" ").length-1)))):wordSpacingPerLine.push(0),text.push([da[l],newX,newY])}}var doReversing="boolean"==typeof options.R2L?options.R2L:R2L;!0===doReversing&&(text=processTextByFunction(text,(function(text,posX,posY){return[text.split("").reverse().join(""),posX,posY]}))),payload={text:text,x:x,y:y,options:options,mutex:{pdfEscape:pdfEscape,activeFontKey:activeFontKey,fonts:fonts,activeFontSize:activeFontSize}},events.publish("postProcessText",payload),text=payload.text,isHex=payload.mutex.isHex||!1;var activeFontEncoding=fonts[activeFontKey].encoding;"WinAnsiEncoding"!==activeFontEncoding&&"StandardEncoding"!==activeFontEncoding||(text=processTextByFunction(text,(function(text,posX,posY){return[ESC(text),posX,posY]}))),da=transformTextToSpecialArray(text),text=[];for(var posX,posY,content,STRING=0,ARRAY=1,variant=Array.isArray(da[0])?ARRAY:STRING,wordSpacing="",generatePosition=function(parmPosX,parmPosY,parmTransformationMatrix){var position="";return parmTransformationMatrix instanceof Matrix?(parmTransformationMatrix="number"==typeof options.angle?matrixMult(parmTransformationMatrix,new Matrix(1,0,0,1,parmPosX,parmPosY)):matrixMult(new Matrix(1,0,0,1,parmPosX,parmPosY),parmTransformationMatrix),apiMode===ApiMode.ADVANCED&&(parmTransformationMatrix=matrixMult(new Matrix(1,0,0,-1,0,0),parmTransformationMatrix)),position=parmTransformationMatrix.join(" ")+" Tm\n"):position=hpf(parmPosX)+" "+hpf(parmPosY)+" Td\n",position},lineIndex=0;lineIndex<da.length;lineIndex++){switch(wordSpacing="",variant){case ARRAY:content=(isHex?"<":"(")+da[lineIndex][0]+(isHex?">":")"),posX=parseFloat(da[lineIndex][1]),posY=parseFloat(da[lineIndex][2]);break;case STRING:content=(isHex?"<":"(")+da[lineIndex]+(isHex?">":")"),posX=getHorizontalCoordinate(x),posY=getVerticalCoordinate(y)}void 0!==wordSpacingPerLine&&void 0!==wordSpacingPerLine[lineIndex]&&(wordSpacing=wordSpacingPerLine[lineIndex]+" Tw\n"),0===lineIndex?text.push(wordSpacing+generatePosition(posX,posY,transformationMatrix)+content):variant===STRING?text.push(wordSpacing+content):variant===ARRAY&&text.push(wordSpacing+generatePosition(posX,posY,transformationMatrix)+content)}text=variant===STRING?text.join(" Tj\nT* "):text.join(" Tj\n"),text+=" Tj\n";var result="BT\n/";return result+=activeFontKey+" "+activeFontSize+" Tf\n",result+=hpf(activeFontSize*lineHeight)+" TL\n",result+=textColor+"\n",result+=xtra,result+=text,out(result+="ET"),usedFonts[activeFontKey]=!0,scope};var clip=API.__private__.clip=API.clip=function(rule){return out("evenodd"===rule?"W*":"W"),this};API.clipEvenOdd=function(){return clip("evenodd")},API.__private__.discardPath=API.discardPath=function(){return out("n"),this};var isValidStyle=API.__private__.isValidStyle=function(style){var result=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(style)&&(result=!0),result};API.__private__.setDefaultPathOperation=API.setDefaultPathOperation=function(operator){return isValidStyle(operator)&&(defaultPathOperation=operator),this};var getStyle=API.__private__.getStyle=API.getStyle=function(style){var op=defaultPathOperation;switch(style){case"D":case"S":op="S";break;case"F":op="f";break;case"FD":case"DF":op="B";break;case"f":case"f*":case"B":case"B*":op=style}return op},close=API.close=function(){return out("h"),this};API.stroke=function(){return out("S"),this},API.fill=function(pattern){return fillWithOptionalPattern("f",pattern),this},API.fillEvenOdd=function(pattern){return fillWithOptionalPattern("f*",pattern),this},API.fillStroke=function(pattern){return fillWithOptionalPattern("B",pattern),this},API.fillStrokeEvenOdd=function(pattern){return fillWithOptionalPattern("B*",pattern),this};var fillWithOptionalPattern=function(style,pattern){"object"===_typeof(pattern)?fillWithPattern(pattern,style):out(style)},putStyle=function(style){null===style||apiMode===ApiMode.ADVANCED&&void 0===style||(style=getStyle(style),out(style))};function cloneTilingPattern(patternKey,boundingBox,xStep,yStep,matrix){var clone=new TilingPattern(boundingBox||this.boundingBox,xStep||this.xStep,yStep||this.yStep,this.gState,matrix||this.matrix);clone.stream=this.stream;var key=patternKey+"$$"+this.cloneIndex+++"$$";return addPattern(key,clone),clone}var fillWithPattern=function(patternData,style){var patternId=patternMap[patternData.key],pattern=patterns[patternId];if(pattern instanceof ShadingPattern)out("q"),out(clipRuleFromStyle(style)),pattern.gState&&API.setGState(pattern.gState),out(patternData.matrix.toString()+" cm"),out("/"+patternId+" sh"),out("Q");else if(pattern instanceof TilingPattern){var matrix=new Matrix(1,0,0,-1,0,getPageHeight());patternData.matrix&&(matrix=matrix.multiply(patternData.matrix||identityMatrix),patternId=cloneTilingPattern.call(pattern,patternData.key,patternData.boundingBox,patternData.xStep,patternData.yStep,matrix).id),out("q"),out("/Pattern cs"),out("/"+patternId+" scn"),pattern.gState&&API.setGState(pattern.gState),out(style),out("Q")}},clipRuleFromStyle=function(style){switch(style){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},moveTo=API.moveTo=function(x,y){return out(hpf(scale(x))+" "+hpf(transformScaleY(y))+" m"),this},lineTo=API.lineTo=function(x,y){return out(hpf(scale(x))+" "+hpf(transformScaleY(y))+" l"),this},curveTo=API.curveTo=function(x1,y1,x2,y2,x3,y3){return out([hpf(scale(x1)),hpf(transformScaleY(y1)),hpf(scale(x2)),hpf(transformScaleY(y2)),hpf(scale(x3)),hpf(transformScaleY(y3)),"c"].join(" ")),this};API.__private__.line=API.line=function(x1,y1,x2,y2,style){if(isNaN(x1)||isNaN(y1)||isNaN(x2)||isNaN(y2)||!isValidStyle(style))throw new Error("Invalid arguments passed to jsPDF.line");return apiMode===ApiMode.COMPAT?this.lines([[x2-x1,y2-y1]],x1,y1,[1,1],style||"S"):this.lines([[x2-x1,y2-y1]],x1,y1,[1,1]).stroke()},API.__private__.lines=API.lines=function(lines,x,y,scale,style,closed){var scalex,scaley,i,l,leg,x2,y2,x3,y3,x4,y4,tmp;if("number"==typeof lines&&(tmp=y,y=x,x=lines,lines=tmp),scale=scale||[1,1],closed=closed||!1,isNaN(x)||isNaN(y)||!Array.isArray(lines)||!Array.isArray(scale)||!isValidStyle(style)||"boolean"!=typeof closed)throw new Error("Invalid arguments passed to jsPDF.lines");for(moveTo(x,y),scalex=scale[0],scaley=scale[1],l=lines.length,x4=x,y4=y,i=0;i<l;i++)2===(leg=lines[i]).length?(x4=leg[0]*scalex+x4,y4=leg[1]*scaley+y4,lineTo(x4,y4)):(x2=leg[0]*scalex+x4,y2=leg[1]*scaley+y4,x3=leg[2]*scalex+x4,y3=leg[3]*scaley+y4,x4=leg[4]*scalex+x4,y4=leg[5]*scaley+y4,curveTo(x2,y2,x3,y3,x4,y4));return closed&&close(),putStyle(style),this},API.path=function(lines){for(var i=0;i<lines.length;i++){var leg=lines[i],coords=leg.c;switch(leg.op){case"m":moveTo(coords[0],coords[1]);break;case"l":lineTo(coords[0],coords[1]);break;case"c":curveTo.apply(this,coords);break;case"h":close()}}return this},API.__private__.rect=API.rect=function(x,y,w,h,style){if(isNaN(x)||isNaN(y)||isNaN(w)||isNaN(h)||!isValidStyle(style))throw new Error("Invalid arguments passed to jsPDF.rect");return apiMode===ApiMode.COMPAT&&(h=-h),out([hpf(scale(x)),hpf(transformScaleY(y)),hpf(scale(w)),hpf(scale(h)),"re"].join(" ")),putStyle(style),this},API.__private__.triangle=API.triangle=function(x1,y1,x2,y2,x3,y3,style){if(isNaN(x1)||isNaN(y1)||isNaN(x2)||isNaN(y2)||isNaN(x3)||isNaN(y3)||!isValidStyle(style))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[x2-x1,y2-y1],[x3-x2,y3-y2],[x1-x3,y1-y3]],x1,y1,[1,1],style,!0),this},API.__private__.roundedRect=API.roundedRect=function(x,y,w,h,rx,ry,style){if(isNaN(x)||isNaN(y)||isNaN(w)||isNaN(h)||isNaN(rx)||isNaN(ry)||!isValidStyle(style))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var MyArc=4/3*(Math.SQRT2-1);return rx=Math.min(rx,.5*w),ry=Math.min(ry,.5*h),this.lines([[w-2*rx,0],[rx*MyArc,0,rx,ry-ry*MyArc,rx,ry],[0,h-2*ry],[0,ry*MyArc,-rx*MyArc,ry,-rx,ry],[2*rx-w,0],[-rx*MyArc,0,-rx,-ry*MyArc,-rx,-ry],[0,2*ry-h],[0,-ry*MyArc,rx*MyArc,-ry,rx,-ry]],x+rx,y,[1,1],style,!0),this},API.__private__.ellipse=API.ellipse=function(x,y,rx,ry,style){if(isNaN(x)||isNaN(y)||isNaN(rx)||isNaN(ry)||!isValidStyle(style))throw new Error("Invalid arguments passed to jsPDF.ellipse");var lx=4/3*(Math.SQRT2-1)*rx,ly=4/3*(Math.SQRT2-1)*ry;return moveTo(x+rx,y),curveTo(x+rx,y-ly,x+lx,y-ry,x,y-ry),curveTo(x-lx,y-ry,x-rx,y-ly,x-rx,y),curveTo(x-rx,y+ly,x-lx,y+ry,x,y+ry),curveTo(x+lx,y+ry,x+rx,y+ly,x+rx,y),putStyle(style),this},API.__private__.circle=API.circle=function(x,y,r,style){if(isNaN(x)||isNaN(y)||isNaN(r)||!isValidStyle(style))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,y,r,r,style)},API.setFont=function(fontName,fontStyle,fontWeight){return fontWeight&&(fontStyle=combineFontStyleAndFontWeight(fontStyle,fontWeight)),activeFontKey=getFont(fontName,fontStyle,{disableWarning:!1}),this};var getFontEntry=API.__private__.getFont=API.getFont=function(){return fonts[getFont.apply(API,arguments)]};API.__private__.getFontList=API.getFontList=function(){var fontName,fontStyle,list={};for(fontName in fontmap)if(fontmap.hasOwnProperty(fontName))for(fontStyle in list[fontName]=[],fontmap[fontName])fontmap[fontName].hasOwnProperty(fontStyle)&&list[fontName].push(fontStyle);return list},API.addFont=function(postScriptName,fontName,fontStyle,fontWeight,encoding){var encodingOptions=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==encodingOptions.indexOf(arguments[3])?encoding=arguments[3]:arguments[3]&&-1==encodingOptions.indexOf(arguments[3])&&(fontStyle=combineFontStyleAndFontWeight(fontStyle,fontWeight)),encoding=encoding||"Identity-H",addFont.call(this,postScriptName,fontName,fontStyle,encoding)};var lineHeightFactor,lineWidth=options.lineWidth||.200025,getLineWidth=API.__private__.getLineWidth=API.getLineWidth=function(){return lineWidth},setLineWidth=API.__private__.setLineWidth=API.setLineWidth=function(width){return lineWidth=width,out(hpf(scale(width))+" w"),this};API.__private__.setLineDash=jsPDF.API.setLineDash=jsPDF.API.setLineDashPattern=function(dashArray,dashPhase){if(dashArray=dashArray||[],dashPhase=dashPhase||0,isNaN(dashPhase)||!Array.isArray(dashArray))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return dashArray=dashArray.map((function(x){return hpf(scale(x))})).join(" "),dashPhase=hpf(scale(dashPhase)),out("["+dashArray+"] "+dashPhase+" d"),this};var getLineHeight=API.__private__.getLineHeight=API.getLineHeight=function(){return activeFontSize*lineHeightFactor};API.__private__.getLineHeight=API.getLineHeight=function(){return activeFontSize*lineHeightFactor};var setLineHeightFactor=API.__private__.setLineHeightFactor=API.setLineHeightFactor=function(value){return"number"==typeof(value=value||1.15)&&(lineHeightFactor=value),this},getLineHeightFactor=API.__private__.getLineHeightFactor=API.getLineHeightFactor=function(){return lineHeightFactor};setLineHeightFactor(options.lineHeight);var getHorizontalCoordinate=API.__private__.getHorizontalCoordinate=function(value){return scale(value)},getVerticalCoordinate=API.__private__.getVerticalCoordinate=function(value){return apiMode===ApiMode.ADVANCED?value:pagesContext[currentPage].mediaBox.topRightY-pagesContext[currentPage].mediaBox.bottomLeftY-scale(value)},getHorizontalCoordinateString=API.__private__.getHorizontalCoordinateString=API.getHorizontalCoordinateString=function(value){return hpf(getHorizontalCoordinate(value))},getVerticalCoordinateString=API.__private__.getVerticalCoordinateString=API.getVerticalCoordinateString=function(value){return hpf(getVerticalCoordinate(value))},strokeColor=options.strokeColor||"0 G";API.__private__.getStrokeColor=API.getDrawColor=function(){return decodeColorString(strokeColor)},API.__private__.setStrokeColor=API.setDrawColor=function(ch1,ch2,ch3,ch4){return strokeColor=encodeColorString({ch1:ch1,ch2:ch2,ch3:ch3,ch4:ch4,pdfColorType:"draw",precision:2}),out(strokeColor),this};var fillColor=options.fillColor||"0 g";API.__private__.getFillColor=API.getFillColor=function(){return decodeColorString(fillColor)},API.__private__.setFillColor=API.setFillColor=function(ch1,ch2,ch3,ch4){return fillColor=encodeColorString({ch1:ch1,ch2:ch2,ch3:ch3,ch4:ch4,pdfColorType:"fill",precision:2}),out(fillColor),this};var textColor=options.textColor||"0 g",getTextColor=API.__private__.getTextColor=API.getTextColor=function(){return decodeColorString(textColor)};API.__private__.setTextColor=API.setTextColor=function(ch1,ch2,ch3,ch4){return textColor=encodeColorString({ch1:ch1,ch2:ch2,ch3:ch3,ch4:ch4,pdfColorType:"text",precision:3}),this};var activeCharSpace=options.charSpace,getCharSpace=API.__private__.getCharSpace=API.getCharSpace=function(){return parseFloat(activeCharSpace||0)};API.__private__.setCharSpace=API.setCharSpace=function(charSpace){if(isNaN(charSpace))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return activeCharSpace=charSpace,this};var lineCapID=0;API.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},API.__private__.setLineCap=API.setLineCap=function(style){var id=API.CapJoinStyles[style];if(void 0===id)throw new Error("Line cap style of '"+style+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lineCapID=id,out(id+" J"),this};var lineJoinID=0;API.__private__.setLineJoin=API.setLineJoin=function(style){var id=API.CapJoinStyles[style];if(void 0===id)throw new Error("Line join style of '"+style+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lineJoinID=id,out(id+" j"),this},API.__private__.setLineMiterLimit=API.__private__.setMiterLimit=API.setLineMiterLimit=API.setMiterLimit=function(length){if(length=length||0,isNaN(length))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return out(hpf(scale(length))+" M"),this},API.GState=GState,API.setGState=function(gState){(gState="string"==typeof gState?gStates[gStatesMap[gState]]:addGState(null,gState)).equals(activeGState)||(out("/"+gState.id+" gs"),activeGState=gState)};var addGState=function(key,gState){if(!key||!gStatesMap[key]){var duplicate=!1;for(var s in gStates)if(gStates.hasOwnProperty(s)&&gStates[s].equals(gState)){duplicate=!0;break}if(duplicate)gState=gStates[s];else{var gStateKey="GS"+(Object.keys(gStates).length+1).toString(10);gStates[gStateKey]=gState,gState.id=gStateKey}return key&&(gStatesMap[key]=gState.id),events.publish("addGState",gState),gState}};API.addGState=function(key,gState){return addGState(key,gState),this},API.saveGraphicsState=function(){return out("q"),fontStateStack.push({key:activeFontKey,size:activeFontSize,color:textColor}),this},API.restoreGraphicsState=function(){out("Q");var fontState=fontStateStack.pop();return activeFontKey=fontState.key,activeFontSize=fontState.size,textColor=fontState.color,activeGState=null,this},API.setCurrentTransformationMatrix=function(matrix){return out(matrix.toString()+" cm"),this},API.comment=function(text){return out("#"+text),this};var Point=function(x,y){var _x=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _x},set:function(value){isNaN(value)||(_x=parseFloat(value))}});var _y=y||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _y},set:function(value){isNaN(value)||(_y=parseFloat(value))}});var _type="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _type},set:function(value){_type=value.toString()}}),this},Rectangle=function(x,y,w,h){Point.call(this,x,y),this.type="rect";var _w=w||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _w},set:function(value){isNaN(value)||(_w=parseFloat(value))}});var _h=h||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _h},set:function(value){isNaN(value)||(_h=parseFloat(value))}}),this},RenderTarget=function(){this.page=page,this.currentPage=currentPage,this.pages=pages.slice(0),this.pagesContext=pagesContext.slice(0),this.x=pageX,this.y=pageY,this.matrix=pageMatrix,this.width=getPageWidth(currentPage),this.height=getPageHeight(currentPage),this.outputDestination=outputDestination,this.id="",this.objectNumber=-1};RenderTarget.prototype.restore=function(){page=this.page,currentPage=this.currentPage,pagesContext=this.pagesContext,pages=this.pages,pageX=this.x,pageY=this.y,pageMatrix=this.matrix,setPageWidth(currentPage,this.width),setPageHeight(currentPage,this.height),outputDestination=this.outputDestination};var beginNewRenderTarget=function(x,y,width,height,matrix){renderTargetStack.push(new RenderTarget),page=currentPage=0,pages=[],pageX=x,pageY=y,pageMatrix=matrix,beginPage([width,height])},endFormObject=function(key){if(renderTargetMap[key])renderTargetStack.pop().restore();else{var newXObject=new RenderTarget,xObjectId="Xo"+(Object.keys(renderTargets).length+1).toString(10);newXObject.id=xObjectId,renderTargetMap[key]=xObjectId,renderTargets[xObjectId]=newXObject,events.publish("addFormObject",newXObject),renderTargetStack.pop().restore()}};for(var plugin in API.beginFormObject=function(x,y,width,height,matrix){return beginNewRenderTarget(x,y,width,height,matrix),this},API.endFormObject=function(key){return endFormObject(key),this},API.doFormObject=function(key,matrix){var xObject=renderTargets[renderTargetMap[key]];return out("q"),out(matrix.toString()+" cm"),out("/"+xObject.id+" Do"),out("Q"),this},API.getFormObject=function(key){var xObject=renderTargets[renderTargetMap[key]];return{x:xObject.x,y:xObject.y,width:xObject.width,height:xObject.height,matrix:xObject.matrix}},API.save=function(filename,options){return filename=filename||"generated.pdf",(options=options||{}).returnPromise=options.returnPromise||!1,!1===options.returnPromise?(saveAs(getBlob(buildDocument()),filename),"function"==typeof saveAs.unload&&globalObject.setTimeout&&setTimeout(saveAs.unload,911),this):new Promise((function(resolve,reject){try{var result=saveAs(getBlob(buildDocument()),filename);"function"==typeof saveAs.unload&&globalObject.setTimeout&&setTimeout(saveAs.unload,911),resolve(result)}catch(e){reject(e.message)}}))},jsPDF.API)jsPDF.API.hasOwnProperty(plugin)&&("events"===plugin&&jsPDF.API.events.length?function(events,newEvents){var eventname,handler_and_args,i;for(i=newEvents.length-1;-1!==i;i--)eventname=newEvents[i][0],handler_and_args=newEvents[i][1],events.subscribe.apply(events,[eventname].concat("function"==typeof handler_and_args?[handler_and_args]:handler_and_args))}(events,jsPDF.API.events):API[plugin]=jsPDF.API[plugin]);var getPageWidth=API.getPageWidth=function(pageNumber){return(pagesContext[pageNumber=pageNumber||currentPage].mediaBox.topRightX-pagesContext[pageNumber].mediaBox.bottomLeftX)/scaleFactor},setPageWidth=API.setPageWidth=function(pageNumber,value){pagesContext[pageNumber].mediaBox.topRightX=value*scaleFactor+pagesContext[pageNumber].mediaBox.bottomLeftX},getPageHeight=API.getPageHeight=function(pageNumber){return(pagesContext[pageNumber=pageNumber||currentPage].mediaBox.topRightY-pagesContext[pageNumber].mediaBox.bottomLeftY)/scaleFactor},setPageHeight=API.setPageHeight=function(pageNumber,value){pagesContext[pageNumber].mediaBox.topRightY=value*scaleFactor+pagesContext[pageNumber].mediaBox.bottomLeftY};return API.internal={pdfEscape:pdfEscape,getStyle:getStyle,getFont:getFontEntry,getFontSize:getFontSize,getCharSpace:getCharSpace,getTextColor:getTextColor,getLineHeight:getLineHeight,getLineHeightFactor:getLineHeightFactor,getLineWidth:getLineWidth,write:write,getHorizontalCoordinate:getHorizontalCoordinate,getVerticalCoordinate:getVerticalCoordinate,getCoordinateString:getHorizontalCoordinateString,getVerticalCoordinateString:getVerticalCoordinateString,collections:{},newObject:newObject,newAdditionalObject:newAdditionalObject,newObjectDeferred:newObjectDeferred,newObjectDeferredBegin:newObjectDeferredBegin,getFilters:getFilters,putStream:putStream,events:events,scaleFactor:scaleFactor,pageSize:{getWidth:function(){return getPageWidth(currentPage)},setWidth:function(value){setPageWidth(currentPage,value)},getHeight:function(){return getPageHeight(currentPage)},setHeight:function(value){setPageHeight(currentPage,value)}},encryptionOptions:encryptionOptions,encryption:encryption,getEncryptor:getEncryptor,output:output,getNumberOfPages:getNumberOfPages,pages:pages,out:out,f2:f2,f3:f3,getPageInfo:getPageInfo,getPageInfoByObjId:getPageInfoByObjId,getCurrentPageInfo:getCurrentPageInfo,getPDFVersion:getPdfVersion,Point:Point,Rectangle:Rectangle,Matrix:Matrix,hasHotfix:hasHotfix},Object.defineProperty(API.internal.pageSize,"width",{get:function(){return getPageWidth(currentPage)},set:function(value){setPageWidth(currentPage,value)},enumerable:!0,configurable:!0}),Object.defineProperty(API.internal.pageSize,"height",{get:function(){return getPageHeight(currentPage)},set:function(value){setPageHeight(currentPage,value)},enumerable:!0,configurable:!0}),addFonts.call(API,standardFonts),activeFontKey="F1",_addPage(format,orientation),events.publish("initialized"),API}PDFSecurity.prototype.lsbFirstWord=function(data){return String.fromCharCode(data>>0&255,data>>8&255,data>>16&255,data>>24&255)},PDFSecurity.prototype.toHexString=function(byteString){return byteString.split("").map((function(byte){return("0"+(255&byte.charCodeAt(0)).toString(16)).slice(-2)})).join("")},PDFSecurity.prototype.hexToBytes=function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(String.fromCharCode(parseInt(hex.substr(c,2),16)));return bytes.join("")},PDFSecurity.prototype.processOwnerPassword=function(paddedUserPassword,paddedOwnerPassword){return rc4(md5Bin(paddedOwnerPassword).substr(0,5),paddedUserPassword)},PDFSecurity.prototype.encryptor=function(objectId,generation){var key=md5Bin(this.encryptionKey+String.fromCharCode(255&objectId,objectId>>8&255,objectId>>16&255,255&generation,generation>>8&255)).substr(0,10);return function(data){return rc4(key,data)}},GState.prototype.equals=function(other){var p,ignore="id,objectNumber,equals";if(!other||_typeof(other)!==_typeof(this))return!1;var count=0;for(p in this)if(!(ignore.indexOf(p)>=0)){if(this.hasOwnProperty(p)&&!other.hasOwnProperty(p))return!1;if(this[p]!==other[p])return!1;count++}for(p in other)other.hasOwnProperty(p)&&ignore.indexOf(p)<0&&count--;return 0===count},jsPDF.API={events:[]},jsPDF.version="2.5.1";var jsPDFAPI=jsPDF.API,scaleFactor=1,pdfEscape=function(value){return value.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pdfUnescape=function(value){return value.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},f2=function(number){return number.toFixed(2)},f5=function(number){return number.toFixed(5)};jsPDFAPI.__acroform__={};var inherit=function(child,parent){child.prototype=Object.create(parent.prototype),child.prototype.constructor=child},scale=function(x){return x*scaleFactor},createFormXObject=function(formObject){var xobj=new AcroFormXObject,height=AcroFormAppearance.internal.getHeight(formObject)||0,width=AcroFormAppearance.internal.getWidth(formObject)||0;return xobj.BBox=[0,0,Number(f2(width)),Number(f2(height))],xobj},setBit=jsPDFAPI.__acroform__.setBit=function(number,bitPosition){if(number=number||0,bitPosition=bitPosition||0,isNaN(number)||isNaN(bitPosition))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return number|=1<<bitPosition},clearBit=jsPDFAPI.__acroform__.clearBit=function(number,bitPosition){if(number=number||0,bitPosition=bitPosition||0,isNaN(number)||isNaN(bitPosition))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return number&=~(1<<bitPosition)},getBit=jsPDFAPI.__acroform__.getBit=function(number,bitPosition){if(isNaN(number)||isNaN(bitPosition))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(number&1<<bitPosition)?0:1},getBitForPdf=jsPDFAPI.__acroform__.getBitForPdf=function(number,bitPosition){if(isNaN(number)||isNaN(bitPosition))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return getBit(number,bitPosition-1)},setBitForPdf=jsPDFAPI.__acroform__.setBitForPdf=function(number,bitPosition){if(isNaN(number)||isNaN(bitPosition))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return setBit(number,bitPosition-1)},clearBitForPdf=jsPDFAPI.__acroform__.clearBitForPdf=function(number,bitPosition){if(isNaN(number)||isNaN(bitPosition))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return clearBit(number,bitPosition-1)},calculateCoordinates=jsPDFAPI.__acroform__.calculateCoordinates=function(args,scope){var getHorizontalCoordinate=scope.internal.getHorizontalCoordinate,getVerticalCoordinate=scope.internal.getVerticalCoordinate,x=args[0],y=args[1],w=args[2],h=args[3],coordinates={};return coordinates.lowerLeft_X=getHorizontalCoordinate(x)||0,coordinates.lowerLeft_Y=getVerticalCoordinate(y+h)||0,coordinates.upperRight_X=getHorizontalCoordinate(x+w)||0,coordinates.upperRight_Y=getVerticalCoordinate(y)||0,[Number(f2(coordinates.lowerLeft_X)),Number(f2(coordinates.lowerLeft_Y)),Number(f2(coordinates.upperRight_X)),Number(f2(coordinates.upperRight_Y))]},calculateAppearanceStream=function(formObject){if(formObject.appearanceStreamContent)return formObject.appearanceStreamContent;if(formObject.V||formObject.DV){var stream=[],text=formObject._V||formObject.DV,calcRes=calculateX(formObject,text),fontKey=formObject.scope.internal.getFont(formObject.fontName,formObject.fontStyle).id;stream.push("/Tx BMC"),stream.push("q"),stream.push("BT"),stream.push(formObject.scope.__private__.encodeColorString(formObject.color)),stream.push("/"+fontKey+" "+f2(calcRes.fontSize)+" Tf"),stream.push("1 0 0 1 0 0 Tm"),stream.push(calcRes.text),stream.push("ET"),stream.push("Q"),stream.push("EMC");var appearanceStreamContent=createFormXObject(formObject);return appearanceStreamContent.scope=formObject.scope,appearanceStreamContent.stream=stream.join("\n"),appearanceStreamContent}},calculateX=function(formObject,text){var maxFontSize=0===formObject.fontSize?formObject.maxFontSize:formObject.fontSize,returnValue={text:"",fontSize:""},textSplit=(text=")"==(text="("==text.substr(0,1)?text.substr(1):text).substr(text.length-1)?text.substr(0,text.length-1):text).split(" ");textSplit=formObject.multiline?textSplit.map((function(word){return word.split("\n")})):textSplit.map((function(word){return[word]}));var fontSize=maxFontSize,height=AcroFormAppearance.internal.getHeight(formObject)||0;height=height<0?-height:height;var width=AcroFormAppearance.internal.getWidth(formObject)||0;width=width<0?-width:width;var isSmallerThanWidth=function(i,lastLine,fontSize){if(i+1<textSplit.length){var tmp=lastLine+" "+textSplit[i+1][0];return calculateFontSpace(tmp,formObject,fontSize).width<=width-4}return!1};fontSize++;FontSize:for(;fontSize>0;){text="",fontSize--;var startX,lastLength,textHeight=calculateFontSpace("3",formObject,fontSize).height,startY=formObject.multiline?height-fontSize:(height-textHeight)/2,lastY=startY+=2,firstWordInLine=0,lastWordInLine=0,currWord=0;if(fontSize<=0){text="(...) Tj\n",text+="% Width of Text: "+calculateFontSpace(text,formObject,fontSize=12).width+", FieldWidth:"+width+"\n";break}for(var lastLine="",lineCount=0,i=0;i<textSplit.length;i++)if(textSplit.hasOwnProperty(i)){var isWithNewLine=!1;if(1!==textSplit[i].length&&currWord!==textSplit[i].length-1){if((textHeight+2)*(lineCount+2)+2>height)continue FontSize;lastLine+=textSplit[i][currWord],isWithNewLine=!0,lastWordInLine=i,i--}else{lastLine=" "==(lastLine+=textSplit[i][currWord]+" ").substr(lastLine.length-1)?lastLine.substr(0,lastLine.length-1):lastLine;var key=parseInt(i),nextLineIsSmaller=isSmallerThanWidth(key,lastLine,fontSize),isLastWord=i>=textSplit.length-1;if(nextLineIsSmaller&&!isLastWord){lastLine+=" ",currWord=0;continue}if(nextLineIsSmaller||isLastWord){if(isLastWord)lastWordInLine=key;else if(formObject.multiline&&(textHeight+2)*(lineCount+2)+2>height)continue FontSize}else{if(!formObject.multiline)continue FontSize;if((textHeight+2)*(lineCount+2)+2>height)continue FontSize;lastWordInLine=key}}for(var line="",x=firstWordInLine;x<=lastWordInLine;x++){var currLine=textSplit[x];if(formObject.multiline){if(x===lastWordInLine){line+=currLine[currWord]+" ",currWord=(currWord+1)%currLine.length;continue}if(x===firstWordInLine){line+=currLine[currLine.length-1]+" ";continue}}line+=currLine[0]+" "}switch(line=" "==line.substr(line.length-1)?line.substr(0,line.length-1):line,lastLength=calculateFontSpace(line,formObject,fontSize).width,formObject.textAlign){case"right":startX=width-lastLength-2;break;case"center":startX=(width-lastLength)/2;break;default:startX=2}text+=f2(startX)+" "+f2(lastY)+" Td\n",text+="("+pdfEscape(line)+") Tj\n",text+=-f2(startX)+" 0 Td\n",lastY=-(fontSize+2),lastLength=0,firstWordInLine=isWithNewLine?lastWordInLine:lastWordInLine+1,lineCount++,lastLine=""}else;break}return returnValue.text=text,returnValue.fontSize=fontSize,returnValue},calculateFontSpace=function(text,formObject,fontSize){var font=formObject.scope.internal.getFont(formObject.fontName,formObject.fontStyle),width=formObject.scope.getStringUnitWidth(text,{font:font,fontSize:parseFloat(fontSize),charSpace:0})*parseFloat(fontSize);return{height:formObject.scope.getStringUnitWidth("3",{font:font,fontSize:parseFloat(fontSize),charSpace:0})*parseFloat(fontSize)*1.5,width:width}},acroformPluginTemplate={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},createAnnotationReference=function(object,scope){var options={type:"reference",object:object};void 0===scope.internal.getPageInfo(object.page).pageContext.annotations.find((function(entry){return entry.type===options.type&&entry.object===options.object}))&&scope.internal.getPageInfo(object.page).pageContext.annotations.push(options)},createXFormObjectCallback=function(fieldArray,scope){for(var i in fieldArray)if(fieldArray.hasOwnProperty(i)){var key=i,fieldObject=fieldArray[i];scope.internal.newObjectDeferredBegin(fieldObject.objId,!0),"object"===_typeof(fieldObject)&&"function"==typeof fieldObject.putStream&&fieldObject.putStream(),delete fieldArray[key]}},initializeAcroForm=function(scope,formObject){if(formObject.scope=scope,void 0!==scope.internal&&(void 0===scope.internal.acroformPlugin||!1===scope.internal.acroformPlugin.isInitialized)){if(AcroFormField.FieldNum=0,scope.internal.acroformPlugin=JSON.parse(JSON.stringify(acroformPluginTemplate)),scope.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");scaleFactor=scope.internal.scaleFactor,scope.internal.acroformPlugin.acroFormDictionaryRoot=new AcroFormDictionary,scope.internal.acroformPlugin.acroFormDictionaryRoot.scope=scope,scope.internal.acroformPlugin.acroFormDictionaryRoot._eventID=scope.internal.events.subscribe("postPutResources",(function(){!function(scope){scope.internal.events.unsubscribe(scope.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete scope.internal.acroformPlugin.acroFormDictionaryRoot._eventID,scope.internal.acroformPlugin.printedOut=!0}(scope)})),scope.internal.events.subscribe("buildDocument",(function(){!function(scope){scope.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var fields=scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in fields)if(fields.hasOwnProperty(i)){var formObject=fields[i];formObject.objId=void 0,formObject.hasAnnotation&&createAnnotationReference(formObject,scope)}}(scope)})),scope.internal.events.subscribe("putCatalog",(function(){!function(scope){if(void 0===scope.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");scope.internal.write("/AcroForm "+scope.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(scope)})),scope.internal.events.subscribe("postPutPages",(function(fieldArray){!function(fieldArray,scope){var standardFields=!fieldArray;for(var i in fieldArray||(scope.internal.newObjectDeferredBegin(scope.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),scope.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),fieldArray=fieldArray||scope.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(fieldArray.hasOwnProperty(i)){var fieldObject=fieldArray[i],keyValueList=[],oldRect=fieldObject.Rect;if(fieldObject.Rect&&(fieldObject.Rect=calculateCoordinates(fieldObject.Rect,scope)),scope.internal.newObjectDeferredBegin(fieldObject.objId,!0),fieldObject.DA=AcroFormAppearance.createDefaultAppearanceStream(fieldObject),"object"===_typeof(fieldObject)&&"function"==typeof fieldObject.getKeyValueListForStream&&(keyValueList=fieldObject.getKeyValueListForStream()),fieldObject.Rect=oldRect,fieldObject.hasAppearanceStream&&!fieldObject.appearanceStreamContent){var appearance=calculateAppearanceStream(fieldObject);keyValueList.push({key:"AP",value:"<</N "+appearance+">>"}),scope.internal.acroformPlugin.xForms.push(appearance)}if(fieldObject.appearanceStreamContent){var appearanceStreamString="";for(var k in fieldObject.appearanceStreamContent)if(fieldObject.appearanceStreamContent.hasOwnProperty(k)){var value=fieldObject.appearanceStreamContent[k];if(appearanceStreamString+="/"+k+" ",appearanceStreamString+="<<",Object.keys(value).length>=1||Array.isArray(value)){for(var i in value)if(value.hasOwnProperty(i)){var obj=value[i];"function"==typeof obj&&(obj=obj.call(scope,fieldObject)),appearanceStreamString+="/"+i+" "+obj+" ",scope.internal.acroformPlugin.xForms.indexOf(obj)>=0||scope.internal.acroformPlugin.xForms.push(obj)}}else"function"==typeof(obj=value)&&(obj=obj.call(scope,fieldObject)),appearanceStreamString+="/"+i+" "+obj,scope.internal.acroformPlugin.xForms.indexOf(obj)>=0||scope.internal.acroformPlugin.xForms.push(obj);appearanceStreamString+=">>"}keyValueList.push({key:"AP",value:"<<\n"+appearanceStreamString+">>"})}scope.internal.putStream({additionalKeyValues:keyValueList,objectId:fieldObject.objId}),scope.internal.out("endobj")}standardFields&&createXFormObjectCallback(scope.internal.acroformPlugin.xForms,scope)}(fieldArray,scope)})),scope.internal.acroformPlugin.isInitialized=!0}},arrayToPdfArray=jsPDFAPI.__acroform__.arrayToPdfArray=function(array,objId,scope){var encryptor=function(data){return data};if(Array.isArray(array)){for(var content="[",i=0;i<array.length;i++)switch(0!==i&&(content+=" "),_typeof(array[i])){case"boolean":case"number":case"object":content+=array[i].toString();break;case"string":"/"!==array[i].substr(0,1)?(void 0!==objId&&scope&&(encryptor=scope.internal.getEncryptor(objId)),content+="("+pdfEscape(encryptor(array[i].toString()))+")"):content+=array[i].toString()}return content+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")};var toPdfString=function(string,objId,scope){var encryptor=function(data){return data};return void 0!==objId&&scope&&(encryptor=scope.internal.getEncryptor(objId)),(string=string||"").toString(),string="("+pdfEscape(encryptor(string))+")"},AcroFormPDFObject=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(value){this._objId=value}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};AcroFormPDFObject.prototype.toString=function(){return this.objId+" 0 R"},AcroFormPDFObject.prototype.putStream=function(){var keyValueList=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:keyValueList,objectId:this.objId}),this.scope.internal.out("endobj")},AcroFormPDFObject.prototype.getKeyValueListForStream=function(){var keyValueList=[],keys=Object.getOwnPropertyNames(this).filter((function(key){return"content"!=key&&"appearanceStreamContent"!=key&&"scope"!=key&&"objId"!=key&&"_"!=key.substring(0,1)}));for(var i in keys)if(!1===Object.getOwnPropertyDescriptor(this,keys[i]).configurable){var key=keys[i],value=this[key];value&&(Array.isArray(value)?keyValueList.push({key:key,value:arrayToPdfArray(value,this.objId,this.scope)}):value instanceof AcroFormPDFObject?(value.scope=this.scope,keyValueList.push({key:key,value:value.objId+" 0 R"})):"function"!=typeof value&&keyValueList.push({key:key,value:value}))}return keyValueList};var AcroFormXObject=function(){AcroFormPDFObject.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var _stream,_BBox=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return _BBox},set:function(value){_BBox=value}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(value){_stream=value.trim()},get:function(){return _stream||null}})};inherit(AcroFormXObject,AcroFormPDFObject);var AcroFormDictionary=function(){AcroFormPDFObject.call(this);var _DA,_Kids=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return _Kids.length>0?_Kids:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return _Kids}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(_DA){var encryptor=function(data){return data};return this.scope&&(encryptor=this.scope.internal.getEncryptor(this.objId)),"("+pdfEscape(encryptor(_DA))+")"}},set:function(value){_DA=value}})};inherit(AcroFormDictionary,AcroFormPDFObject);var AcroFormField=function AcroFormField(){AcroFormPDFObject.call(this);var _F=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return _F},set:function(value){if(isNaN(value))throw new Error('Invalid value "'+value+'" for attribute F supplied.');_F=value}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(_F,3))},set:function(value){!0===Boolean(value)?this.F=setBitForPdf(_F,3):this.F=clearBitForPdf(_F,3)}});var _Ff=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return _Ff},set:function(value){if(isNaN(value))throw new Error('Invalid value "'+value+'" for attribute Ff supplied.');_Ff=value}});var _Rect=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==_Rect.length)return _Rect},set:function(value){_Rect=void 0!==value?value:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!_Rect||isNaN(_Rect[0])?0:_Rect[0]},set:function(value){_Rect[0]=value}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!_Rect||isNaN(_Rect[1])?0:_Rect[1]},set:function(value){_Rect[1]=value}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!_Rect||isNaN(_Rect[2])?0:_Rect[2]},set:function(value){_Rect[2]=value}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!_Rect||isNaN(_Rect[3])?0:_Rect[3]},set:function(value){_Rect[3]=value}});var _FT="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return _FT},set:function(value){switch(value){case"/Btn":case"/Tx":case"/Ch":case"/Sig":_FT=value;break;default:throw new Error('Invalid value "'+value+'" for attribute FT supplied.')}}});var _T=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!_T||_T.length<1){if(this instanceof AcroFormChildClass)return;_T="FieldObject"+AcroFormField.FieldNum++}var encryptor=function(data){return data};return this.scope&&(encryptor=this.scope.internal.getEncryptor(this.objId)),"("+pdfEscape(encryptor(_T))+")"},set:function(value){_T=value.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return _T},set:function(value){_T=value}});var _fontName="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return _fontName},set:function(value){_fontName=value}});var _fontStyle="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return _fontStyle},set:function(value){_fontStyle=value}});var _fontSize=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return _fontSize},set:function(value){_fontSize=value}});var _maxFontSize=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===_maxFontSize?50/scaleFactor:_maxFontSize},set:function(value){_maxFontSize=value}});var _color="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return _color},set:function(value){_color=value}});var _DA="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_DA||this instanceof AcroFormChildClass||this instanceof AcroFormTextField))return toPdfString(_DA,this.objId,this.scope)},set:function(value){value=value.toString(),_DA=value}});var _DV=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_DV)return this instanceof AcroFormButton==!1?toPdfString(_DV,this.objId,this.scope):_DV},set:function(value){value=value.toString(),_DV=this instanceof AcroFormButton==!1?"("===value.substr(0,1)?pdfUnescape(value.substr(1,value.length-2)):pdfUnescape(value):value}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof AcroFormButton==!0?pdfUnescape(_DV.substr(1,_DV.length-1)):_DV},set:function(value){value=value.toString(),_DV=this instanceof AcroFormButton==!0?"/"+value:value}});var _V=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_V)return _V},set:function(value){this.V=value}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_V)return this instanceof AcroFormButton==!1?toPdfString(_V,this.objId,this.scope):_V},set:function(value){value=value.toString(),_V=this instanceof AcroFormButton==!1?"("===value.substr(0,1)?pdfUnescape(value.substr(1,value.length-2)):pdfUnescape(value):value}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof AcroFormButton==!0?pdfUnescape(_V.substr(1,_V.length-1)):_V},set:function(value){value=value.toString(),_V=this instanceof AcroFormButton==!0?"/"+value:value}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _page,_hasAppearanceStream=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _hasAppearanceStream},set:function(value){value=Boolean(value),_hasAppearanceStream=value}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_page)return _page},set:function(value){_page=value}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,1))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,1):this.Ff=clearBitForPdf(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,2))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,2):this.Ff=clearBitForPdf(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,3))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,3):this.Ff=clearBitForPdf(this.Ff,3)}});var _Q=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==_Q)return _Q},set:function(value){if(-1===[0,1,2].indexOf(value))throw new Error('Invalid value "'+value+'" for attribute Q supplied.');_Q=value}}),Object.defineProperty(this,"textAlign",{get:function(){var result;switch(_Q){case 0:default:result="left";break;case 1:result="center";break;case 2:result="right"}return result},configurable:!0,enumerable:!0,set:function(value){switch(value){case"right":case 2:_Q=2;break;case"center":case 1:_Q=1;break;default:_Q=0}}})};inherit(AcroFormField,AcroFormPDFObject);var AcroFormChoiceField=function(){AcroFormField.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var _TI=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return _TI},set:function(value){_TI=value}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return _TI},set:function(value){_TI=value}});var _Opt=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return arrayToPdfArray(_Opt,this.objId,this.scope)},set:function(value){var array,result;result=[],"string"==typeof(array=value)&&(result=function(string,regex,index){index||(index=1);for(var match,matches=[];match=regex.exec(string);)matches.push(match[index]);return matches}(array,/\((.*?)\)/g)),_Opt=result}}),this.getOptions=function(){return _Opt},this.setOptions=function(value){_Opt=value,this.sort&&_Opt.sort()},this.addOption=function(value){value=(value=value||"").toString(),_Opt.push(value),this.sort&&_Opt.sort()},this.removeOption=function(value,allEntries){for(allEntries=allEntries||!1,value=(value=value||"").toString();-1!==_Opt.indexOf(value)&&(_Opt.splice(_Opt.indexOf(value),1),!1!==allEntries););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,18))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,18):this.Ff=clearBitForPdf(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,19))},set:function(value){!0===this.combo&&(!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,19):this.Ff=clearBitForPdf(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,20))},set:function(value){!0===Boolean(value)?(this.Ff=setBitForPdf(this.Ff,20),_Opt.sort()):this.Ff=clearBitForPdf(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,22))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,22):this.Ff=clearBitForPdf(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,23))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,23):this.Ff=clearBitForPdf(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,27))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,27):this.Ff=clearBitForPdf(this.Ff,27)}}),this.hasAppearanceStream=!1};inherit(AcroFormChoiceField,AcroFormField);var AcroFormListBox=function(){AcroFormChoiceField.call(this),this.fontName="helvetica",this.combo=!1};inherit(AcroFormListBox,AcroFormChoiceField);var AcroFormComboBox=function(){AcroFormListBox.call(this),this.combo=!0};inherit(AcroFormComboBox,AcroFormListBox);var AcroFormEditBox=function(){AcroFormComboBox.call(this),this.edit=!0};inherit(AcroFormEditBox,AcroFormComboBox);var AcroFormButton=function(){AcroFormField.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,15))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,15):this.Ff=clearBitForPdf(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,16))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,16):this.Ff=clearBitForPdf(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,17))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,17):this.Ff=clearBitForPdf(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,26))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,26):this.Ff=clearBitForPdf(this.Ff,26)}});var _AS,_MK={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var encryptor=function(data){return data};if(this.scope&&(encryptor=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(_MK).length){var key,result=[];for(key in result.push("<<"),_MK)result.push("/"+key+" ("+pdfEscape(encryptor(_MK[key]))+")");return result.push(">>"),result.join("\n")}},set:function(value){"object"===_typeof(value)&&(_MK=value)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return _MK.CA||""},set:function(value){"string"==typeof value&&(_MK.CA=value)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return _AS},set:function(value){_AS=value}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return _AS.substr(1,_AS.length-1)},set:function(value){_AS="/"+value}})};inherit(AcroFormButton,AcroFormField);var AcroFormPushButton=function(){AcroFormButton.call(this),this.pushButton=!0};inherit(AcroFormPushButton,AcroFormButton);var AcroFormRadioButton=function(){AcroFormButton.call(this),this.radio=!0,this.pushButton=!1;var _Kids=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return _Kids},set:function(value){_Kids=void 0!==value?value:[]}})};inherit(AcroFormRadioButton,AcroFormButton);var AcroFormChildClass=function(){var _parent,_optionName;AcroFormField.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return _parent},set:function(value){_parent=value}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return _optionName},set:function(value){_optionName=value}});var _AS,_MK={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var encryptor=function(data){return data};this.scope&&(encryptor=this.scope.internal.getEncryptor(this.objId));var key,result=[];for(key in result.push("<<"),_MK)result.push("/"+key+" ("+pdfEscape(encryptor(_MK[key]))+")");return result.push(">>"),result.join("\n")},set:function(value){"object"===_typeof(value)&&(_MK=value)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return _MK.CA||""},set:function(value){"string"==typeof value&&(_MK.CA=value)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return _AS},set:function(value){_AS=value}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return _AS.substr(1,_AS.length-1)},set:function(value){_AS="/"+value}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=AcroFormAppearance.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};inherit(AcroFormChildClass,AcroFormField),AcroFormRadioButton.prototype.setAppearance=function(appearance){if(!("createAppearanceStream"in appearance)||!("getCA"in appearance))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var objId in this.Kids)if(this.Kids.hasOwnProperty(objId)){var child=this.Kids[objId];child.appearanceStreamContent=appearance.createAppearanceStream(child.optionName),child.caption=appearance.getCA()}},AcroFormRadioButton.prototype.createOption=function(name){var child=new AcroFormChildClass;return child.Parent=this,child.optionName=name,this.Kids.push(child),addField.call(this.scope,child),child};var AcroFormCheckBox=function(){AcroFormButton.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=AcroFormAppearance.CheckBox.createAppearanceStream()};inherit(AcroFormCheckBox,AcroFormButton);var AcroFormTextField=function(){AcroFormField.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,13))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,13):this.Ff=clearBitForPdf(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,21))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,21):this.Ff=clearBitForPdf(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,23))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,23):this.Ff=clearBitForPdf(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,24))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,24):this.Ff=clearBitForPdf(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,25))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,25):this.Ff=clearBitForPdf(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,26))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,26):this.Ff=clearBitForPdf(this.Ff,26)}});var _MaxLen=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return _MaxLen},set:function(value){_MaxLen=value}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return _MaxLen},set:function(value){Number.isInteger(value)&&(_MaxLen=value)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};inherit(AcroFormTextField,AcroFormField);var AcroFormPasswordField=function(){AcroFormTextField.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(getBitForPdf(this.Ff,14))},set:function(value){!0===Boolean(value)?this.Ff=setBitForPdf(this.Ff,14):this.Ff=clearBitForPdf(this.Ff,14)}}),this.password=!0};inherit(AcroFormPasswordField,AcroFormTextField);var AcroFormAppearance={CheckBox:{createAppearanceStream:function(){return{N:{On:AcroFormAppearance.CheckBox.YesNormal},D:{On:AcroFormAppearance.CheckBox.YesPushDown,Off:AcroFormAppearance.CheckBox.OffPushDown}}},YesPushDown:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var stream=[],fontKey=formObject.scope.internal.getFont(formObject.fontName,formObject.fontStyle).id,encodedColor=formObject.scope.__private__.encodeColorString(formObject.color),calcRes=calculateX(formObject,formObject.caption);return stream.push("0.749023 g"),stream.push("0 0 "+f2(AcroFormAppearance.internal.getWidth(formObject))+" "+f2(AcroFormAppearance.internal.getHeight(formObject))+" re"),stream.push("f"),stream.push("BMC"),stream.push("q"),stream.push("0 0 1 rg"),stream.push("/"+fontKey+" "+f2(calcRes.fontSize)+" Tf "+encodedColor),stream.push("BT"),stream.push(calcRes.text),stream.push("ET"),stream.push("Q"),stream.push("EMC"),xobj.stream=stream.join("\n"),xobj},YesNormal:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var fontKey=formObject.scope.internal.getFont(formObject.fontName,formObject.fontStyle).id,encodedColor=formObject.scope.__private__.encodeColorString(formObject.color),stream=[],height=AcroFormAppearance.internal.getHeight(formObject),width=AcroFormAppearance.internal.getWidth(formObject),calcRes=calculateX(formObject,formObject.caption);return stream.push("1 g"),stream.push("0 0 "+f2(width)+" "+f2(height)+" re"),stream.push("f"),stream.push("q"),stream.push("0 0 1 rg"),stream.push("0 0 "+f2(width-1)+" "+f2(height-1)+" re"),stream.push("W"),stream.push("n"),stream.push("0 g"),stream.push("BT"),stream.push("/"+fontKey+" "+f2(calcRes.fontSize)+" Tf "+encodedColor),stream.push(calcRes.text),stream.push("ET"),stream.push("Q"),xobj.stream=stream.join("\n"),xobj},OffPushDown:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var stream=[];return stream.push("0.749023 g"),stream.push("0 0 "+f2(AcroFormAppearance.internal.getWidth(formObject))+" "+f2(AcroFormAppearance.internal.getHeight(formObject))+" re"),stream.push("f"),xobj.stream=stream.join("\n"),xobj}},RadioButton:{Circle:{createAppearanceStream:function(name){var appearanceStreamContent={D:{Off:AcroFormAppearance.RadioButton.Circle.OffPushDown},N:{}};return appearanceStreamContent.N[name]=AcroFormAppearance.RadioButton.Circle.YesNormal,appearanceStreamContent.D[name]=AcroFormAppearance.RadioButton.Circle.YesPushDown,appearanceStreamContent},getCA:function(){return"l"},YesNormal:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var stream=[],DotRadius=AcroFormAppearance.internal.getWidth(formObject)<=AcroFormAppearance.internal.getHeight(formObject)?AcroFormAppearance.internal.getWidth(formObject)/4:AcroFormAppearance.internal.getHeight(formObject)/4;DotRadius=Number((.9*DotRadius).toFixed(5));var c=AcroFormAppearance.internal.Bezier_C,DotRadiusBezier=Number((DotRadius*c).toFixed(5));return stream.push("q"),stream.push("1 0 0 1 "+f5(AcroFormAppearance.internal.getWidth(formObject)/2)+" "+f5(AcroFormAppearance.internal.getHeight(formObject)/2)+" cm"),stream.push(DotRadius+" 0 m"),stream.push(DotRadius+" "+DotRadiusBezier+" "+DotRadiusBezier+" "+DotRadius+" 0 "+DotRadius+" c"),stream.push("-"+DotRadiusBezier+" "+DotRadius+" -"+DotRadius+" "+DotRadiusBezier+" -"+DotRadius+" 0 c"),stream.push("-"+DotRadius+" -"+DotRadiusBezier+" -"+DotRadiusBezier+" -"+DotRadius+" 0 -"+DotRadius+" c"),stream.push(DotRadiusBezier+" -"+DotRadius+" "+DotRadius+" -"+DotRadiusBezier+" "+DotRadius+" 0 c"),stream.push("f"),stream.push("Q"),xobj.stream=stream.join("\n"),xobj},YesPushDown:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var stream=[],DotRadius=AcroFormAppearance.internal.getWidth(formObject)<=AcroFormAppearance.internal.getHeight(formObject)?AcroFormAppearance.internal.getWidth(formObject)/4:AcroFormAppearance.internal.getHeight(formObject)/4;DotRadius=Number((.9*DotRadius).toFixed(5));var k=Number((2*DotRadius).toFixed(5)),kc=Number((k*AcroFormAppearance.internal.Bezier_C).toFixed(5)),dc=Number((DotRadius*AcroFormAppearance.internal.Bezier_C).toFixed(5));return stream.push("0.749023 g"),stream.push("q"),stream.push("1 0 0 1 "+f5(AcroFormAppearance.internal.getWidth(formObject)/2)+" "+f5(AcroFormAppearance.internal.getHeight(formObject)/2)+" cm"),stream.push(k+" 0 m"),stream.push(k+" "+kc+" "+kc+" "+k+" 0 "+k+" c"),stream.push("-"+kc+" "+k+" -"+k+" "+kc+" -"+k+" 0 c"),stream.push("-"+k+" -"+kc+" -"+kc+" -"+k+" 0 -"+k+" c"),stream.push(kc+" -"+k+" "+k+" -"+kc+" "+k+" 0 c"),stream.push("f"),stream.push("Q"),stream.push("0 g"),stream.push("q"),stream.push("1 0 0 1 "+f5(AcroFormAppearance.internal.getWidth(formObject)/2)+" "+f5(AcroFormAppearance.internal.getHeight(formObject)/2)+" cm"),stream.push(DotRadius+" 0 m"),stream.push(DotRadius+" "+dc+" "+dc+" "+DotRadius+" 0 "+DotRadius+" c"),stream.push("-"+dc+" "+DotRadius+" -"+DotRadius+" "+dc+" -"+DotRadius+" 0 c"),stream.push("-"+DotRadius+" -"+dc+" -"+dc+" -"+DotRadius+" 0 -"+DotRadius+" c"),stream.push(dc+" -"+DotRadius+" "+DotRadius+" -"+dc+" "+DotRadius+" 0 c"),stream.push("f"),stream.push("Q"),xobj.stream=stream.join("\n"),xobj},OffPushDown:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var stream=[],DotRadius=AcroFormAppearance.internal.getWidth(formObject)<=AcroFormAppearance.internal.getHeight(formObject)?AcroFormAppearance.internal.getWidth(formObject)/4:AcroFormAppearance.internal.getHeight(formObject)/4;DotRadius=Number((.9*DotRadius).toFixed(5));var k=Number((2*DotRadius).toFixed(5)),kc=Number((k*AcroFormAppearance.internal.Bezier_C).toFixed(5));return stream.push("0.749023 g"),stream.push("q"),stream.push("1 0 0 1 "+f5(AcroFormAppearance.internal.getWidth(formObject)/2)+" "+f5(AcroFormAppearance.internal.getHeight(formObject)/2)+" cm"),stream.push(k+" 0 m"),stream.push(k+" "+kc+" "+kc+" "+k+" 0 "+k+" c"),stream.push("-"+kc+" "+k+" -"+k+" "+kc+" -"+k+" 0 c"),stream.push("-"+k+" -"+kc+" -"+kc+" -"+k+" 0 -"+k+" c"),stream.push(kc+" -"+k+" "+k+" -"+kc+" "+k+" 0 c"),stream.push("f"),stream.push("Q"),xobj.stream=stream.join("\n"),xobj}},Cross:{createAppearanceStream:function(name){var appearanceStreamContent={D:{Off:AcroFormAppearance.RadioButton.Cross.OffPushDown},N:{}};return appearanceStreamContent.N[name]=AcroFormAppearance.RadioButton.Cross.YesNormal,appearanceStreamContent.D[name]=AcroFormAppearance.RadioButton.Cross.YesPushDown,appearanceStreamContent},getCA:function(){return"8"},YesNormal:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var stream=[],cross=AcroFormAppearance.internal.calculateCross(formObject);return stream.push("q"),stream.push("1 1 "+f2(AcroFormAppearance.internal.getWidth(formObject)-2)+" "+f2(AcroFormAppearance.internal.getHeight(formObject)-2)+" re"),stream.push("W"),stream.push("n"),stream.push(f2(cross.x1.x)+" "+f2(cross.x1.y)+" m"),stream.push(f2(cross.x2.x)+" "+f2(cross.x2.y)+" l"),stream.push(f2(cross.x4.x)+" "+f2(cross.x4.y)+" m"),stream.push(f2(cross.x3.x)+" "+f2(cross.x3.y)+" l"),stream.push("s"),stream.push("Q"),xobj.stream=stream.join("\n"),xobj},YesPushDown:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var cross=AcroFormAppearance.internal.calculateCross(formObject),stream=[];return stream.push("0.749023 g"),stream.push("0 0 "+f2(AcroFormAppearance.internal.getWidth(formObject))+" "+f2(AcroFormAppearance.internal.getHeight(formObject))+" re"),stream.push("f"),stream.push("q"),stream.push("1 1 "+f2(AcroFormAppearance.internal.getWidth(formObject)-2)+" "+f2(AcroFormAppearance.internal.getHeight(formObject)-2)+" re"),stream.push("W"),stream.push("n"),stream.push(f2(cross.x1.x)+" "+f2(cross.x1.y)+" m"),stream.push(f2(cross.x2.x)+" "+f2(cross.x2.y)+" l"),stream.push(f2(cross.x4.x)+" "+f2(cross.x4.y)+" m"),stream.push(f2(cross.x3.x)+" "+f2(cross.x3.y)+" l"),stream.push("s"),stream.push("Q"),xobj.stream=stream.join("\n"),xobj},OffPushDown:function(formObject){var xobj=createFormXObject(formObject);xobj.scope=formObject.scope;var stream=[];return stream.push("0.749023 g"),stream.push("0 0 "+f2(AcroFormAppearance.internal.getWidth(formObject))+" "+f2(AcroFormAppearance.internal.getHeight(formObject))+" re"),stream.push("f"),xobj.stream=stream.join("\n"),xobj}}},createDefaultAppearanceStream:function(formObject){var fontKey=formObject.scope.internal.getFont(formObject.fontName,formObject.fontStyle).id,encodedColor=formObject.scope.__private__.encodeColorString(formObject.color);return"/"+fontKey+" "+formObject.fontSize+" Tf "+encodedColor}};AcroFormAppearance.internal={Bezier_C:.551915024494,calculateCross:function(formObject){var width=AcroFormAppearance.internal.getWidth(formObject),height=AcroFormAppearance.internal.getHeight(formObject),a=Math.min(width,height);return{x1:{x:(width-a)/2,y:(height-a)/2+a},x2:{x:(width-a)/2+a,y:(height-a)/2},x3:{x:(width-a)/2,y:(height-a)/2},x4:{x:(width-a)/2+a,y:(height-a)/2+a}}}},AcroFormAppearance.internal.getWidth=function(formObject){var result=0;return"object"===_typeof(formObject)&&(result=scale(formObject.Rect[2])),result},AcroFormAppearance.internal.getHeight=function(formObject){var result=0;return"object"===_typeof(formObject)&&(result=scale(formObject.Rect[3])),result};var addField=jsPDFAPI.addField=function(fieldObject){if(initializeAcroForm(this,fieldObject),!(fieldObject instanceof AcroFormField))throw new Error("Invalid argument passed to jsPDF.addField.");var formObject;return(formObject=fieldObject).scope.internal.acroformPlugin.printedOut&&(formObject.scope.internal.acroformPlugin.printedOut=!1,formObject.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),formObject.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(formObject),fieldObject.page=fieldObject.scope.internal.getCurrentPageInfo().pageNumber,this};jsPDFAPI.AcroFormChoiceField=AcroFormChoiceField,jsPDFAPI.AcroFormListBox=AcroFormListBox,jsPDFAPI.AcroFormComboBox=AcroFormComboBox,jsPDFAPI.AcroFormEditBox=AcroFormEditBox,jsPDFAPI.AcroFormButton=AcroFormButton,jsPDFAPI.AcroFormPushButton=AcroFormPushButton,jsPDFAPI.AcroFormRadioButton=AcroFormRadioButton,jsPDFAPI.AcroFormCheckBox=AcroFormCheckBox,jsPDFAPI.AcroFormTextField=AcroFormTextField,jsPDFAPI.AcroFormPasswordField=AcroFormPasswordField,jsPDFAPI.AcroFormAppearance=AcroFormAppearance,jsPDFAPI.AcroForm={ChoiceField:AcroFormChoiceField,ListBox:AcroFormListBox,ComboBox:AcroFormComboBox,EditBox:AcroFormEditBox,Button:AcroFormButton,PushButton:AcroFormPushButton,RadioButton:AcroFormRadioButton,CheckBox:AcroFormCheckBox,TextField:AcroFormTextField,PasswordField:AcroFormPasswordField,Appearance:AcroFormAppearance},jsPDF.AcroForm={ChoiceField:AcroFormChoiceField,ListBox:AcroFormListBox,ComboBox:AcroFormComboBox,EditBox:AcroFormEditBox,Button:AcroFormButton,PushButton:AcroFormPushButton,RadioButton:AcroFormRadioButton,CheckBox:AcroFormCheckBox,TextField:AcroFormTextField,PasswordField:AcroFormPasswordField,Appearance:AcroFormAppearance};var AcroForm=jsPDF.AcroForm;function toLookup(arr){return arr.reduce((function(lookup,name,index){return lookup[name]=index,lookup}),{})}!function(jsPDFAPI){jsPDFAPI.__addimage__={};var UNKNOWN="UNKNOWN",imageFileTypeHeaders={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},getImageFileTypeByImageData=jsPDFAPI.__addimage__.getImageFileTypeByImageData=function(imageData,fallbackFormat){var i,j,headerSchemata,compareResult,fileType,result=UNKNOWN;if("RGBA"===(fallbackFormat=fallbackFormat||UNKNOWN)||void 0!==imageData.data&&imageData.data instanceof Uint8ClampedArray&&"height"in imageData&&"width"in imageData)return"RGBA";if(isArrayBufferView(imageData))for(fileType in imageFileTypeHeaders)for(headerSchemata=imageFileTypeHeaders[fileType],i=0;i<headerSchemata.length;i+=1){for(compareResult=!0,j=0;j<headerSchemata[i].length;j+=1)if(void 0!==headerSchemata[i][j]&&headerSchemata[i][j]!==imageData[j]){compareResult=!1;break}if(!0===compareResult){result=fileType;break}}else for(fileType in imageFileTypeHeaders)for(headerSchemata=imageFileTypeHeaders[fileType],i=0;i<headerSchemata.length;i+=1){for(compareResult=!0,j=0;j<headerSchemata[i].length;j+=1)if(void 0!==headerSchemata[i][j]&&headerSchemata[i][j]!==imageData.charCodeAt(j)){compareResult=!1;break}if(!0===compareResult){result=fileType;break}}return result===UNKNOWN&&fallbackFormat!==UNKNOWN&&(result=fallbackFormat),result},putImage=function putImage(image){for(var out=this.internal.write,putStream=this.internal.putStream,filter=(0,this.internal.getFilters)();-1!==filter.indexOf("FlateEncode");)filter.splice(filter.indexOf("FlateEncode"),1);image.objectId=this.internal.newObject();var additionalKeyValues=[];if(additionalKeyValues.push({key:"Type",value:"/XObject"}),additionalKeyValues.push({key:"Subtype",value:"/Image"}),additionalKeyValues.push({key:"Width",value:image.width}),additionalKeyValues.push({key:"Height",value:image.height}),image.colorSpace===color_spaces.INDEXED?additionalKeyValues.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(image.palette.length/3-1)+" "+("sMask"in image&&void 0!==image.sMask?image.objectId+2:image.objectId+1)+" 0 R]"}):(additionalKeyValues.push({key:"ColorSpace",value:"/"+image.colorSpace}),image.colorSpace===color_spaces.DEVICE_CMYK&&additionalKeyValues.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),additionalKeyValues.push({key:"BitsPerComponent",value:image.bitsPerComponent}),"decodeParameters"in image&&void 0!==image.decodeParameters&&additionalKeyValues.push({key:"DecodeParms",value:"<<"+image.decodeParameters+">>"}),"transparency"in image&&Array.isArray(image.transparency)){for(var transparency="",i=0,len=image.transparency.length;i<len;i++)transparency+=image.transparency[i]+" "+image.transparency[i]+" ";additionalKeyValues.push({key:"Mask",value:"["+transparency+"]"})}void 0!==image.sMask&&additionalKeyValues.push({key:"SMask",value:image.objectId+1+" 0 R"});var alreadyAppliedFilters=void 0!==image.filter?["/"+image.filter]:void 0;if(putStream({data:image.data,additionalKeyValues:additionalKeyValues,alreadyAppliedFilters:alreadyAppliedFilters,objectId:image.objectId}),out("endobj"),"sMask"in image&&void 0!==image.sMask){var decodeParameters="/Predictor "+image.predictor+" /Colors 1 /BitsPerComponent "+image.bitsPerComponent+" /Columns "+image.width,sMask={width:image.width,height:image.height,colorSpace:"DeviceGray",bitsPerComponent:image.bitsPerComponent,decodeParameters:decodeParameters,data:image.sMask};"filter"in image&&(sMask.filter=image.filter),putImage.call(this,sMask)}if(image.colorSpace===color_spaces.INDEXED){var objId=this.internal.newObject();putStream({data:arrayBufferToBinaryString(new Uint8Array(image.palette)),objectId:objId}),out("endobj")}},putResourcesCallback=function(){var images=this.internal.collections.addImage_images;for(var i in images)putImage.call(this,images[i])},putXObjectsDictCallback=function(){var image,images=this.internal.collections.addImage_images,out=this.internal.write;for(var i in images)out("/I"+(image=images[i]).index,image.objectId,"0","R")},initialize=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",putResourcesCallback),this.internal.events.subscribe("putXobjectDict",putXObjectsDictCallback))},getImages=function(){var images=this.internal.collections.addImage_images;return initialize.call(this),images},getImageIndex=function(){return Object.keys(this.internal.collections.addImage_images).length},isImageTypeSupported=function(type){return"function"==typeof jsPDFAPI["process"+type.toUpperCase()]},isDOMElement=function(object){return"object"===_typeof(object)&&1===object.nodeType},getImageDataFromElement=function(element,format){if("IMG"===element.nodeName&&element.hasAttribute("src")){var src=""+element.getAttribute("src");if(0===src.indexOf("data:image/"))return atob(unescape(src).split("base64,").pop());var tmpImageData=jsPDFAPI.loadFile(src,!0);if(void 0!==tmpImageData)return tmpImageData}if("CANVAS"===element.nodeName){if(0===element.width||0===element.height)throw new Error("Given canvas must have data. Canvas width: "+element.width+", height: "+element.height);var mimeType;switch(format){case"PNG":mimeType="image/png";break;case"WEBP":mimeType="image/webp";break;default:mimeType="image/jpeg"}return atob(element.toDataURL(mimeType,1).split("base64,").pop())}},checkImagesForAlias=function(alias){var images=this.internal.collections.addImage_images;if(images)for(var e in images)if(alias===images[e].alias)return images[e]},determineWidthAndHeight=function(width,height,image){return width||height||(width=-96,height=-96),width<0&&(width=-1*image.width*72/width/this.internal.scaleFactor),height<0&&(height=-1*image.height*72/height/this.internal.scaleFactor),0===width&&(width=height*image.width/image.height),0===height&&(height=width*image.height/image.width),[width,height]},writeImageToPDF=function(x,y,width,height,image,rotation){var dims=determineWidthAndHeight.call(this,width,height,image),coord=this.internal.getCoordinateString,vcoord=this.internal.getVerticalCoordinateString,images=getImages.call(this);if(width=dims[0],height=dims[1],images[image.index]=image,rotation){rotation*=Math.PI/180;var c=Math.cos(rotation),s=Math.sin(rotation),f4=function(number){return number.toFixed(4)},rotationTransformationMatrix=[f4(c),f4(s),f4(-1*s),f4(c),0,0,"cm"]}this.internal.write("q"),rotation?(this.internal.write([1,"0","0",1,coord(x),vcoord(y+height),"cm"].join(" ")),this.internal.write(rotationTransformationMatrix.join(" ")),this.internal.write([coord(width),"0","0",coord(height),"0","0","cm"].join(" "))):this.internal.write([coord(width),"0","0",coord(height),coord(x),vcoord(y+height),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+image.index+" Do"),this.internal.write("Q")},color_spaces=jsPDFAPI.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};jsPDFAPI.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var image_compression=jsPDFAPI.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},sHashCode=jsPDFAPI.__addimage__.sHashCode=function(data){var i,len,hash=0;if("string"==typeof data)for(len=data.length,i=0;i<len;i++)hash=(hash<<5)-hash+data.charCodeAt(i),hash|=0;else if(isArrayBufferView(data))for(len=data.byteLength/2,i=0;i<len;i++)hash=(hash<<5)-hash+data[i],hash|=0;return hash},validateStringAsBase64=jsPDFAPI.__addimage__.validateStringAsBase64=function(possibleBase64String){(possibleBase64String=possibleBase64String||"").toString().trim();var result=!0;return 0===possibleBase64String.length&&(result=!1),possibleBase64String.length%4!=0&&(result=!1),!1===/^[A-Za-z0-9+/]+$/.test(possibleBase64String.substr(0,possibleBase64String.length-2))&&(result=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(possibleBase64String.substr(-2))&&(result=!1),result},extractImageFromDataUrl=jsPDFAPI.__addimage__.extractImageFromDataUrl=function(dataUrl){var dataUrlParts=(dataUrl=dataUrl||"").split("base64,"),result=null;if(2===dataUrlParts.length){var extractedInfo=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(dataUrlParts[0]);Array.isArray(extractedInfo)&&(result={mimeType:extractedInfo[1],charset:extractedInfo[2],data:dataUrlParts[1]})}return result},supportsArrayBuffer=jsPDFAPI.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};jsPDFAPI.__addimage__.isArrayBuffer=function(object){return supportsArrayBuffer()&&object instanceof ArrayBuffer};var isArrayBufferView=jsPDFAPI.__addimage__.isArrayBufferView=function(object){return supportsArrayBuffer()&&"undefined"!=typeof Uint32Array&&(object instanceof Int8Array||object instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&object instanceof Uint8ClampedArray||object instanceof Int16Array||object instanceof Uint16Array||object instanceof Int32Array||object instanceof Uint32Array||object instanceof Float32Array||object instanceof Float64Array)},binaryStringToUint8Array=jsPDFAPI.__addimage__.binaryStringToUint8Array=function(binary_string){for(var len=binary_string.length,bytes=new Uint8Array(len),i=0;i<len;i++)bytes[i]=binary_string.charCodeAt(i);return bytes},arrayBufferToBinaryString=jsPDFAPI.__addimage__.arrayBufferToBinaryString=function(buffer){for(var out="",buf=isArrayBufferView(buffer)?buffer:new Uint8Array(buffer),i=0;i<buf.length;i+=8192)out+=String.fromCharCode.apply(null,buf.subarray(i,i+8192));return out};jsPDFAPI.addImage=function(){var imageData,format,x,y,w,h,alias,compression,rotation;if("number"==typeof arguments[1]?(format=UNKNOWN,x=arguments[1],y=arguments[2],w=arguments[3],h=arguments[4],alias=arguments[5],compression=arguments[6],rotation=arguments[7]):(format=arguments[1],x=arguments[2],y=arguments[3],w=arguments[4],h=arguments[5],alias=arguments[6],compression=arguments[7],rotation=arguments[8]),"object"===_typeof(imageData=arguments[0])&&!isDOMElement(imageData)&&"imageData"in imageData){var options=imageData;imageData=options.imageData,format=options.format||format||UNKNOWN,x=options.x||x||0,y=options.y||y||0,w=options.w||options.width||w,h=options.h||options.height||h,alias=options.alias||alias,compression=options.compression||compression,rotation=options.rotation||options.angle||rotation}var filter=this.internal.getFilters();if(void 0===compression&&-1!==filter.indexOf("FlateEncode")&&(compression="SLOW"),isNaN(x)||isNaN(y))throw new Error("Invalid coordinates passed to jsPDF.addImage");initialize.call(this);var image=processImageData.call(this,imageData,format,alias,compression);return writeImageToPDF.call(this,x,y,w,h,image,rotation),this};var processImageData=function(imageData,format,alias,compression){var result,dataAsBinaryString,value;if("string"==typeof imageData&&getImageFileTypeByImageData(imageData)===UNKNOWN){imageData=unescape(imageData);var tmpImageData=convertBase64ToBinaryString(imageData,!1);(""!==tmpImageData||void 0!==(tmpImageData=jsPDFAPI.loadFile(imageData,!0)))&&(imageData=tmpImageData)}if(isDOMElement(imageData)&&(imageData=getImageDataFromElement(imageData,format)),format=getImageFileTypeByImageData(imageData,format),!isImageTypeSupported(format))throw new Error("addImage does not support files of type '"+format+"', please ensure that a plugin for '"+format+"' support is added.");if((null==(value=alias)||0===value.length)&&(alias=function(imageData){return"string"==typeof imageData||isArrayBufferView(imageData)?sHashCode(imageData):isArrayBufferView(imageData.data)?sHashCode(imageData.data):null}(imageData)),(result=checkImagesForAlias.call(this,alias))||(supportsArrayBuffer()&&(imageData instanceof Uint8Array||"RGBA"===format||(dataAsBinaryString=imageData,imageData=binaryStringToUint8Array(imageData))),result=this["process"+format.toUpperCase()](imageData,getImageIndex.call(this),alias,function(value){return value&&"string"==typeof value&&(value=value.toUpperCase()),value in jsPDFAPI.image_compression?value:image_compression.NONE}(compression),dataAsBinaryString)),!result)throw new Error("An unknown error occurred whilst processing the image.");return result},convertBase64ToBinaryString=jsPDFAPI.__addimage__.convertBase64ToBinaryString=function(stringData,throwError){var base64Info;throwError="boolean"!=typeof throwError||throwError;var rawData,imageData="";if("string"==typeof stringData){rawData=null!==(base64Info=extractImageFromDataUrl(stringData))?base64Info.data:stringData;try{imageData=atob(rawData)}catch(e){if(throwError)throw validateStringAsBase64(rawData)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return imageData};jsPDFAPI.getImageProperties=function(imageData){var image,format,tmpImageData="";if(isDOMElement(imageData)&&(imageData=getImageDataFromElement(imageData)),"string"==typeof imageData&&getImageFileTypeByImageData(imageData)===UNKNOWN&&(""===(tmpImageData=convertBase64ToBinaryString(imageData,!1))&&(tmpImageData=jsPDFAPI.loadFile(imageData)||""),imageData=tmpImageData),format=getImageFileTypeByImageData(imageData),!isImageTypeSupported(format))throw new Error("addImage does not support files of type '"+format+"', please ensure that a plugin for '"+format+"' support is added.");if(!supportsArrayBuffer()||imageData instanceof Uint8Array||(imageData=binaryStringToUint8Array(imageData)),!(image=this["process"+format.toUpperCase()](imageData)))throw new Error("An unknown error occurred whilst processing the image");return image.fileType=format,image}}(jsPDF.API),
/**
   * @license
   * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){var notEmpty=function(obj){if(void 0!==obj&&""!=obj)return!0};jsPDF.API.events.push(["addPage",function(addPageData){this.internal.getPageInfo(addPageData.pageNumber).pageContext.annotations=[]}]),jsPDFAPI.events.push(["putPage",function(putPageData){for(var anno,rect,line,getHorizontalCoordinateString=this.internal.getCoordinateString,getVerticalCoordinateString=this.internal.getVerticalCoordinateString,pageInfo=this.internal.getPageInfoByObjId(putPageData.objId),pageAnnos=putPageData.pageContext.annotations,found=!1,a=0;a<pageAnnos.length&&!found;a++)switch((anno=pageAnnos[a]).type){case"link":(notEmpty(anno.options.url)||notEmpty(anno.options.pageNumber))&&(found=!0);break;case"reference":case"text":case"freetext":found=!0}if(0!=found){this.internal.write("/Annots [");for(var i=0;i<pageAnnos.length;i++){anno=pageAnnos[i];var escape=this.internal.pdfEscape,encryptor=this.internal.getEncryptor(putPageData.objId);switch(anno.type){case"reference":this.internal.write(" "+anno.object.objId+" 0 R ");break;case"text":var objText=this.internal.newAdditionalObject(),objPopup=this.internal.newAdditionalObject(),encryptorText=this.internal.getEncryptor(objText.objId),title=anno.title||"Note";line="<</Type /Annot /Subtype /Text "+(rect="/Rect ["+getHorizontalCoordinateString(anno.bounds.x)+" "+getVerticalCoordinateString(anno.bounds.y+anno.bounds.h)+" "+getHorizontalCoordinateString(anno.bounds.x+anno.bounds.w)+" "+getVerticalCoordinateString(anno.bounds.y)+"] ")+"/Contents ("+escape(encryptorText(anno.contents))+")",line+=" /Popup "+objPopup.objId+" 0 R",line+=" /P "+pageInfo.objId+" 0 R",line+=" /T ("+escape(encryptorText(title))+") >>",objText.content=line;var parent=objText.objId+" 0 R";line="<</Type /Annot /Subtype /Popup "+(rect="/Rect ["+getHorizontalCoordinateString(anno.bounds.x+30)+" "+getVerticalCoordinateString(anno.bounds.y+anno.bounds.h)+" "+getHorizontalCoordinateString(anno.bounds.x+anno.bounds.w+30)+" "+getVerticalCoordinateString(anno.bounds.y)+"] ")+" /Parent "+parent,anno.open&&(line+=" /Open true"),line+=" >>",objPopup.content=line,this.internal.write(objText.objId,"0 R",objPopup.objId,"0 R");break;case"freetext":rect="/Rect ["+getHorizontalCoordinateString(anno.bounds.x)+" "+getVerticalCoordinateString(anno.bounds.y)+" "+getHorizontalCoordinateString(anno.bounds.x+anno.bounds.w)+" "+getVerticalCoordinateString(anno.bounds.y+anno.bounds.h)+"] ";var color=anno.color||"#000000";line="<</Type /Annot /Subtype /FreeText "+rect+"/Contents ("+escape(encryptor(anno.contents))+")",line+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+color+")",line+=" /Border [0 0 0]",line+=" >>",this.internal.write(line);break;case"link":if(anno.options.name){var loc=this.annotations._nameMap[anno.options.name];anno.options.pageNumber=loc.page,anno.options.top=loc.y}else anno.options.top||(anno.options.top=0);if(rect="/Rect ["+anno.finalBounds.x+" "+anno.finalBounds.y+" "+anno.finalBounds.w+" "+anno.finalBounds.h+"] ",line="",anno.options.url)line="<</Type /Annot /Subtype /Link "+rect+"/Border [0 0 0] /A <</S /URI /URI ("+escape(encryptor(anno.options.url))+") >>";else if(anno.options.pageNumber){switch(line="<</Type /Annot /Subtype /Link "+rect+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(anno.options.pageNumber).objId+" 0 R",anno.options.magFactor=anno.options.magFactor||"XYZ",anno.options.magFactor){case"Fit":line+=" /Fit]";break;case"FitH":line+=" /FitH "+anno.options.top+"]";break;case"FitV":anno.options.left=anno.options.left||0,line+=" /FitV "+anno.options.left+"]";break;default:var top=getVerticalCoordinateString(anno.options.top);anno.options.left=anno.options.left||0,void 0===anno.options.zoom&&(anno.options.zoom=0),line+=" /XYZ "+anno.options.left+" "+top+" "+anno.options.zoom+"]"}}""!=line&&(line+=" >>",this.internal.write(line))}}this.internal.write("]")}}]),jsPDFAPI.createAnnotation=function(options){var pageInfo=this.internal.getCurrentPageInfo();switch(options.type){case"link":this.link(options.bounds.x,options.bounds.y,options.bounds.w,options.bounds.h,options);break;case"text":case"freetext":pageInfo.pageContext.annotations.push(options)}},jsPDFAPI.link=function(x,y,w,h,options){var pageInfo=this.internal.getCurrentPageInfo(),getHorizontalCoordinateString=this.internal.getCoordinateString,getVerticalCoordinateString=this.internal.getVerticalCoordinateString;pageInfo.pageContext.annotations.push({finalBounds:{x:getHorizontalCoordinateString(x),y:getVerticalCoordinateString(y),w:getHorizontalCoordinateString(x+w),h:getVerticalCoordinateString(y+h)},options:options,type:"link"})},jsPDFAPI.textWithLink=function(text,x,y,options){var linkHeight,linkWidth,totalLineWidth=this.getTextWidth(text),lineHeight=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==options.maxWidth){linkWidth=options.maxWidth;var numOfLines=this.splitTextToSize(text,linkWidth).length;linkHeight=Math.ceil(lineHeight*numOfLines)}else linkWidth=totalLineWidth,linkHeight=lineHeight;return this.text(text,x,y,options),y+=.2*lineHeight,"center"===options.align&&(x-=totalLineWidth/2),"right"===options.align&&(x-=totalLineWidth),this.link(x,y-lineHeight,linkWidth,linkHeight,options),totalLineWidth},jsPDFAPI.getTextWidth=function(text){var fontSize=this.internal.getFontSize();return this.getStringUnitWidth(text)*fontSize/this.internal.scaleFactor}}(jsPDF.API),
/**
   * @license
   * Copyright (c) 2017 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){var arabicSubstitionA={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},ligatures={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},arabic_diacritics={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},alfletter=[1570,1571,1573,1575];jsPDFAPI.__arabicParser__={};var isInArabicSubstitutionA=jsPDFAPI.__arabicParser__.isInArabicSubstitutionA=function(letter){return void 0!==arabicSubstitionA[letter.charCodeAt(0)]},isArabicLetter=jsPDFAPI.__arabicParser__.isArabicLetter=function(letter){return"string"==typeof letter&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(letter)},isArabicEndLetter=jsPDFAPI.__arabicParser__.isArabicEndLetter=function(letter){return isArabicLetter(letter)&&isInArabicSubstitutionA(letter)&&arabicSubstitionA[letter.charCodeAt(0)].length<=2},isArabicAlfLetter=jsPDFAPI.__arabicParser__.isArabicAlfLetter=function(letter){return isArabicLetter(letter)&&alfletter.indexOf(letter.charCodeAt(0))>=0};jsPDFAPI.__arabicParser__.arabicLetterHasIsolatedForm=function(letter){return isArabicLetter(letter)&&isInArabicSubstitutionA(letter)&&arabicSubstitionA[letter.charCodeAt(0)].length>=1};var arabicLetterHasFinalForm=jsPDFAPI.__arabicParser__.arabicLetterHasFinalForm=function(letter){return isArabicLetter(letter)&&isInArabicSubstitutionA(letter)&&arabicSubstitionA[letter.charCodeAt(0)].length>=2};jsPDFAPI.__arabicParser__.arabicLetterHasInitialForm=function(letter){return isArabicLetter(letter)&&isInArabicSubstitutionA(letter)&&arabicSubstitionA[letter.charCodeAt(0)].length>=3};var arabicLetterHasMedialForm=jsPDFAPI.__arabicParser__.arabicLetterHasMedialForm=function(letter){return isArabicLetter(letter)&&isInArabicSubstitutionA(letter)&&4==arabicSubstitionA[letter.charCodeAt(0)].length},resolveLigatures=jsPDFAPI.__arabicParser__.resolveLigatures=function(letters){var i=0,tmpLigatures=ligatures,result="",effectedLetters=0;for(i=0;i<letters.length;i+=1)void 0!==tmpLigatures[letters.charCodeAt(i)]?(effectedLetters++,"number"==typeof(tmpLigatures=tmpLigatures[letters.charCodeAt(i)])&&(result+=String.fromCharCode(tmpLigatures),tmpLigatures=ligatures,effectedLetters=0),i===letters.length-1&&(tmpLigatures=ligatures,result+=letters.charAt(i-(effectedLetters-1)),i-=effectedLetters-1,effectedLetters=0)):(tmpLigatures=ligatures,result+=letters.charAt(i-effectedLetters),i-=effectedLetters,effectedLetters=0);return result};jsPDFAPI.__arabicParser__.isArabicDiacritic=function(letter){return void 0!==letter&&void 0!==arabic_diacritics[letter.charCodeAt(0)]};var getCorrectForm=jsPDFAPI.__arabicParser__.getCorrectForm=function(currentChar,beforeChar,nextChar){return isArabicLetter(currentChar)?!1===isInArabicSubstitutionA(currentChar)?-1:!arabicLetterHasFinalForm(currentChar)||!isArabicLetter(beforeChar)&&!isArabicLetter(nextChar)||!isArabicLetter(nextChar)&&isArabicEndLetter(beforeChar)||isArabicEndLetter(currentChar)&&!isArabicLetter(beforeChar)||isArabicEndLetter(currentChar)&&isArabicAlfLetter(beforeChar)||isArabicEndLetter(currentChar)&&isArabicEndLetter(beforeChar)?0:arabicLetterHasMedialForm(currentChar)&&isArabicLetter(beforeChar)&&!isArabicEndLetter(beforeChar)&&isArabicLetter(nextChar)&&arabicLetterHasFinalForm(nextChar)?3:isArabicEndLetter(currentChar)||!isArabicLetter(nextChar)?1:2:-1},parseArabic=function(text){var i=0,j=0,position=0,currentLetter="",prevLetter="",nextLetter="",words=(text=text||"").split("\\s+"),newWords=[];for(i=0;i<words.length;i+=1){for(newWords.push(""),j=0;j<words[i].length;j+=1)currentLetter=words[i][j],prevLetter=words[i][j-1],nextLetter=words[i][j+1],isArabicLetter(currentLetter)?(position=getCorrectForm(currentLetter,prevLetter,nextLetter),newWords[i]+=-1!==position?String.fromCharCode(arabicSubstitionA[currentLetter.charCodeAt(0)][position]):currentLetter):newWords[i]+=currentLetter;newWords[i]=resolveLigatures(newWords[i])}return newWords.join(" ")},processArabic=jsPDFAPI.__arabicParser__.processArabic=jsPDFAPI.processArabic=function(){var result,text="string"==typeof arguments[0]?arguments[0]:arguments[0].text,tmpText=[];if(Array.isArray(text)){var i=0;for(tmpText=[],i=0;i<text.length;i+=1)Array.isArray(text[i])?tmpText.push([parseArabic(text[i][0]),text[i][1],text[i][2]]):tmpText.push([parseArabic(text[i])]);result=tmpText}else result=parseArabic(text);return"string"==typeof arguments[0]?result:(arguments[0].text=result,arguments[0])};jsPDFAPI.events.push(["preProcessText",processArabic])}(jsPDF.API),
/** @license
   * jsPDF Autoprint Plugin
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){jsPDFAPI.autoPrint=function(options){var refAutoPrintTag;if((options=options||{}).variant=options.variant||"non-conform","javascript"===options.variant)this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){refAutoPrintTag=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+refAutoPrintTag+" 0 R")}));return this}}(jsPDF.API),
/**
   * @license
   * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){var Canvas=function(){var jsPdfInstance=void 0;Object.defineProperty(this,"pdf",{get:function(){return jsPdfInstance},set:function(value){jsPdfInstance=value}});var _width=150;Object.defineProperty(this,"width",{get:function(){return _width},set:function(value){_width=isNaN(value)||!1===Number.isInteger(value)||value<0?150:value,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=_width+1)}});var _height=300;Object.defineProperty(this,"height",{get:function(){return _height},set:function(value){_height=isNaN(value)||!1===Number.isInteger(value)||value<0?300:value,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=_height+1)}});var _childNodes=[];Object.defineProperty(this,"childNodes",{get:function(){return _childNodes},set:function(value){_childNodes=value}});var _style={};Object.defineProperty(this,"style",{get:function(){return _style},set:function(value){_style=value}}),Object.defineProperty(this,"parentNode",{})};Canvas.prototype.getContext=function(contextType,contextAttributes){var key;if("2d"!==(contextType=contextType||"2d"))return null;for(key in contextAttributes)this.pdf.context2d.hasOwnProperty(key)&&(this.pdf.context2d[key]=contextAttributes[key]);return this.pdf.context2d._canvas=this,this.pdf.context2d},Canvas.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},jsPDFAPI.events.push(["initialized",function(){this.canvas=new Canvas,this.canvas.pdf=this}])}(jsPDF.API),function(jsPDFAPI){var NO_MARGINS={left:0,top:0,bottom:0,right:0},printingHeaderRow=!1,_initialize=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},NO_MARGINS),this.internal.__cell__.margins.width=this.getPageWidth(),_reset.call(this))},_reset=function(){this.internal.__cell__.lastCell=new Cell,this.internal.__cell__.pages=1},Cell=function(){var _x=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _x},set:function(value){_x=value}});var _y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _y},set:function(value){_y=value}});var _width=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return _width},set:function(value){_width=value}});var _height=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _height},set:function(value){_height=value}});var _text=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _text},set:function(value){_text=value}});var _lineNumber=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _lineNumber},set:function(value){_lineNumber=value}});var _align=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _align},set:function(value){_align=value}}),this};Cell.prototype.clone=function(){return new Cell(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Cell.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},jsPDFAPI.setHeaderFunction=function(func){return _initialize.call(this),this.internal.__cell__.headerFunction="function"==typeof func?func:void 0,this},jsPDFAPI.getTextDimensions=function(text,options){_initialize.call(this);var fontSize=(options=options||{}).fontSize||this.getFontSize(),font=options.font||this.getFont(),scaleFactor=options.scaleFactor||this.internal.scaleFactor,width=0,amountOfLines=0,tempWidth=0,scope=this;if(!Array.isArray(text)&&"string"!=typeof text){if("number"!=typeof text)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");text=String(text)}var maxWidth=options.maxWidth;maxWidth>0?"string"==typeof text?text=this.splitTextToSize(text,maxWidth):"[object Array]"===Object.prototype.toString.call(text)&&(text=text.reduce((function(acc,textLine){return acc.concat(scope.splitTextToSize(textLine,maxWidth))}),[])):text=Array.isArray(text)?text:[text];for(var i=0;i<text.length;i++)width<(tempWidth=this.getStringUnitWidth(text[i],{font:font})*fontSize)&&(width=tempWidth);return 0!==width&&(amountOfLines=text.length),{w:width/=scaleFactor,h:Math.max((amountOfLines*fontSize*this.getLineHeightFactor()-fontSize*(this.getLineHeightFactor()-1))/scaleFactor,0)}},jsPDFAPI.cellAddPage=function(){_initialize.call(this),this.addPage();var margins=this.internal.__cell__.margins||NO_MARGINS;return this.internal.__cell__.lastCell=new Cell(margins.left,margins.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var cell=jsPDFAPI.cell=function(){var currentCell;currentCell=arguments[0]instanceof Cell?arguments[0]:new Cell(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),_initialize.call(this);var lastCell=this.internal.__cell__.lastCell,padding=this.internal.__cell__.padding,margins=this.internal.__cell__.margins||NO_MARGINS,tableHeaderRow=this.internal.__cell__.tableHeaderRow,printHeaders=this.internal.__cell__.printHeaders;return void 0!==lastCell.lineNumber&&(lastCell.lineNumber===currentCell.lineNumber?(currentCell.x=(lastCell.x||0)+(lastCell.width||0),currentCell.y=lastCell.y||0):lastCell.y+lastCell.height+currentCell.height+margins.bottom>this.getPageHeight()?(this.cellAddPage(),currentCell.y=margins.top,printHeaders&&tableHeaderRow&&(this.printHeaderRow(currentCell.lineNumber,!0),currentCell.y+=tableHeaderRow[0].height)):currentCell.y=lastCell.y+lastCell.height||currentCell.y),void 0!==currentCell.text[0]&&(this.rect(currentCell.x,currentCell.y,currentCell.width,currentCell.height,!0===printingHeaderRow?"FD":void 0),"right"===currentCell.align?this.text(currentCell.text,currentCell.x+currentCell.width-padding,currentCell.y+padding,{align:"right",baseline:"top"}):"center"===currentCell.align?this.text(currentCell.text,currentCell.x+currentCell.width/2,currentCell.y+padding,{align:"center",baseline:"top",maxWidth:currentCell.width-padding-padding}):this.text(currentCell.text,currentCell.x+padding,currentCell.y+padding,{align:"left",baseline:"top",maxWidth:currentCell.width-padding-padding})),this.internal.__cell__.lastCell=currentCell,this};jsPDFAPI.table=function(x,y,data,headers,config){if(_initialize.call(this),!data)throw new Error("No data for PDF table.");var i,column,j,headerName,headerNames=[],headerLabels=[],headerAligns=[],columnMatrix={},columnWidths={},columnMinWidths=[],tableHeaderConfigs=[],autoSize=(config=config||{}).autoSize||!1,printHeaders=!1!==config.printHeaders,fontSize=config.css&&void 0!==config.css["font-size"]?16*config.css["font-size"]:config.fontSize||12,margins=config.margins||Object.assign({width:this.getPageWidth()},NO_MARGINS),padding="number"==typeof config.padding?config.padding:3,headerBackgroundColor=config.headerBackgroundColor||"#c8c8c8",headerTextColor=config.headerTextColor||"#000";if(_reset.call(this),this.internal.__cell__.printHeaders=printHeaders,this.internal.__cell__.margins=margins,this.internal.__cell__.table_font_size=fontSize,this.internal.__cell__.padding=padding,this.internal.__cell__.headerBackgroundColor=headerBackgroundColor,this.internal.__cell__.headerTextColor=headerTextColor,this.setFontSize(fontSize),null==headers)headerLabels=headerNames=Object.keys(data[0]),headerAligns=headerNames.map((function(){return"left"}));else if(Array.isArray(headers)&&"object"===_typeof(headers[0]))for(headerNames=headers.map((function(header){return header.name})),headerLabels=headers.map((function(header){return header.prompt||header.name||""})),headerAligns=headers.map((function(header){return header.align||"left"})),i=0;i<headers.length;i+=1)columnWidths[headers[i].name]=.7499990551181103*headers[i].width;else Array.isArray(headers)&&"string"==typeof headers[0]&&(headerLabels=headerNames=headers,headerAligns=headerNames.map((function(){return"left"})));if(autoSize||Array.isArray(headers)&&"string"==typeof headers[0])for(i=0;i<headerNames.length;i+=1){for(columnMatrix[headerName=headerNames[i]]=data.map((function(rec){return rec[headerName]})),this.setFont(void 0,"bold"),columnMinWidths.push(this.getTextDimensions(headerLabels[i],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),column=columnMatrix[headerName],this.setFont(void 0,"normal"),j=0;j<column.length;j+=1)columnMinWidths.push(this.getTextDimensions(column[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);columnWidths[headerName]=Math.max.apply(null,columnMinWidths)+padding+padding,columnMinWidths=[]}if(printHeaders){var row={};for(i=0;i<headerNames.length;i+=1)row[headerNames[i]]={},row[headerNames[i]].text=headerLabels[i],row[headerNames[i]].align=headerAligns[i];var rowHeight=calculateLineHeight.call(this,row,columnWidths);tableHeaderConfigs=headerNames.map((function(value){return new Cell(x,y,columnWidths[value],rowHeight,row[value].text,void 0,row[value].align)})),this.setTableHeaderRow(tableHeaderConfigs),this.printHeaderRow(1,!1)}var align=headers.reduce((function(pv,cv){return pv[cv.name]=cv.align,pv}),{});for(i=0;i<data.length;i+=1){"rowStart"in config&&config.rowStart instanceof Function&&config.rowStart({row:i,data:data[i]},this);var lineHeight=calculateLineHeight.call(this,data[i],columnWidths);for(j=0;j<headerNames.length;j+=1){var cellData=data[i][headerNames[j]];"cellStart"in config&&config.cellStart instanceof Function&&config.cellStart({row:i,col:j,data:cellData},this),cell.call(this,new Cell(x,y,columnWidths[headerNames[j]],lineHeight,cellData,i+2,align[headerNames[j]]))}}return this.internal.__cell__.table_x=x,this.internal.__cell__.table_y=y,this};var calculateLineHeight=function(model,columnWidths){var padding=this.internal.__cell__.padding,fontSize=this.internal.__cell__.table_font_size,scaleFactor=this.internal.scaleFactor;return Object.keys(model).map((function(key){var value=model[key];return this.splitTextToSize(value.hasOwnProperty("text")?value.text:value,columnWidths[key]-padding-padding)}),this).map((function(value){return this.getLineHeightFactor()*value.length*fontSize/scaleFactor+padding+padding}),this).reduce((function(pv,cv){return Math.max(pv,cv)}),0)};jsPDFAPI.setTableHeaderRow=function(config){_initialize.call(this),this.internal.__cell__.tableHeaderRow=config},jsPDFAPI.printHeaderRow=function(lineNumber,new_page){if(_initialize.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var tableHeaderCell;if(printingHeaderRow=!0,"function"==typeof this.internal.__cell__.headerFunction){var position=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Cell(position[0],position[1],position[2],position[3],void 0,-1)}this.setFont(void 0,"bold");for(var tempHeaderConf=[],i=0;i<this.internal.__cell__.tableHeaderRow.length;i+=1){tableHeaderCell=this.internal.__cell__.tableHeaderRow[i].clone(),new_page&&(tableHeaderCell.y=this.internal.__cell__.margins.top||0,tempHeaderConf.push(tableHeaderCell)),tableHeaderCell.lineNumber=lineNumber;var currentTextColor=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),cell.call(this,tableHeaderCell),this.setTextColor(currentTextColor)}tempHeaderConf.length>0&&this.setTableHeaderRow(tempHeaderConf),this.setFont(void 0,"normal"),printingHeaderRow=!1}}(jsPDF.API);var fontStyleOrder={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},fontStretchOrder=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],fontStretchLookup=toLookup(fontStretchOrder),fontWeights=[100,200,300,400,500,600,700,800,900],fontWeightsLookup=toLookup(fontWeights);function normalizeFontFace(fontFace){var family=fontFace.family.replace(/"|'/g,"").toLowerCase(),style=function(style){return fontStyleOrder[style=style||"normal"]?style:"normal"}(fontFace.style),weight=function(weight){return weight?"number"==typeof weight?weight>=100&&weight<=900&&weight%100==0?weight:400:/^\d00$/.test(weight)?parseInt(weight):"bold"===weight?700:400:400}(fontFace.weight),stretch=function(stretch){return"number"==typeof fontStretchLookup[stretch=stretch||"normal"]?stretch:"normal"}(fontFace.stretch);return{family:family,style:style,weight:weight,stretch:stretch,src:fontFace.src||[],ref:fontFace.ref||{name:family,style:[stretch,style,weight].join(" ")}}}function searchFromPivot(matchingSet,order,pivot,dir){var i;for(i=pivot;i>=0&&i<order.length;i+=dir)if(matchingSet[order[i]])return matchingSet[order[i]];for(i=pivot;i>=0&&i<order.length;i-=dir)if(matchingSet[order[i]])return matchingSet[order[i]]}var defaultGenericFontFamilies={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},systemFonts={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ruleToString(rule){return[rule.stretch,rule.style,rule.weight,rule.family].join(" ")}function resolveFontFace(fontFaceMap,rules,opts){for(var defaultFontFamily=(opts=opts||{}).defaultFontFamily||"times",genericFontFamilies=Object.assign({},defaultGenericFontFamilies,opts.genericFontFamilies||{}),rule=null,matches=null,i=0;i<rules.length;++i)if(genericFontFamilies[(rule=normalizeFontFace(rules[i])).family]&&(rule.family=genericFontFamilies[rule.family]),fontFaceMap.hasOwnProperty(rule.family)){matches=fontFaceMap[rule.family];break}if(!(matches=matches||fontFaceMap[defaultFontFamily]))throw new Error("Could not find a font-family for the rule '"+ruleToString(rule)+"' and default family '"+defaultFontFamily+"'.");if(matches=function(stretch,matchingSet){if(matchingSet[stretch])return matchingSet[stretch];var pivot=fontStretchLookup[stretch],dir=pivot<=fontStretchLookup.normal?-1:1,match=searchFromPivot(matchingSet,fontStretchOrder,pivot,dir);if(!match)throw new Error("Could not find a matching font-stretch value for "+stretch);return match}(rule.stretch,matches),matches=function(fontStyle,matchingSet){if(matchingSet[fontStyle])return matchingSet[fontStyle];for(var ordering=fontStyleOrder[fontStyle],i=0;i<ordering.length;++i)if(matchingSet[ordering[i]])return matchingSet[ordering[i]];throw new Error("Could not find a matching font-style for "+fontStyle)}(rule.style,matches),!(matches=function(weight,matchingSet){if(matchingSet[weight])return matchingSet[weight];if(400===weight&&matchingSet[500])return matchingSet[500];if(500===weight&&matchingSet[400])return matchingSet[400];var pivot=fontWeightsLookup[weight],match=searchFromPivot(matchingSet,fontWeights,pivot,weight<400?-1:1);if(!match)throw new Error("Could not find a matching font-weight for value "+weight);return match}(rule.weight,matches)))throw new Error("Failed to resolve a font for the rule '"+ruleToString(rule)+"'.");return matches}function eatWhiteSpace(input){return input.trimLeft()}function parseQuotedFontFamily(input,quote){for(var index=0;index<input.length;){if(input.charAt(index)===quote)return[input.substring(0,index),input.substring(index+1)];index+=1}return null}function parseNonQuotedFontFamily(input){var match=input.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===match?null:[match[0],input.substring(match[0].length)]}var defaultFont=["times"];!function(jsPDFAPI){var f2,getHorizontalCoordinateString,getVerticalCoordinateString,getHorizontalCoordinate,getVerticalCoordinate,Point,Rectangle,Matrix,_ctx,ContextLayer=function(ctx){return ctx=ctx||{},this.isStrokeTransparent=ctx.isStrokeTransparent||!1,this.strokeOpacity=ctx.strokeOpacity||1,this.strokeStyle=ctx.strokeStyle||"#000000",this.fillStyle=ctx.fillStyle||"#000000",this.isFillTransparent=ctx.isFillTransparent||!1,this.fillOpacity=ctx.fillOpacity||1,this.font=ctx.font||"10px sans-serif",this.textBaseline=ctx.textBaseline||"alphabetic",this.textAlign=ctx.textAlign||"left",this.lineWidth=ctx.lineWidth||1,this.lineJoin=ctx.lineJoin||"miter",this.lineCap=ctx.lineCap||"butt",this.path=ctx.path||[],this.transform=void 0!==ctx.transform?ctx.transform.clone():new Matrix,this.globalCompositeOperation=ctx.globalCompositeOperation||"normal",this.globalAlpha=ctx.globalAlpha||1,this.clip_path=ctx.clip_path||[],this.currentPoint=ctx.currentPoint||new Point,this.miterLimit=ctx.miterLimit||10,this.lastPoint=ctx.lastPoint||new Point,this.lineDashOffset=ctx.lineDashOffset||0,this.lineDash=ctx.lineDash||[],this.margin=ctx.margin||[0,0,0,0],this.prevPageLastElemOffset=ctx.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof ctx.ignoreClearRect||ctx.ignoreClearRect,this};jsPDFAPI.events.push(["initialized",function(){this.context2d=new Context2D(this),f2=this.internal.f2,getHorizontalCoordinateString=this.internal.getCoordinateString,getVerticalCoordinateString=this.internal.getVerticalCoordinateString,getHorizontalCoordinate=this.internal.getHorizontalCoordinate,getVerticalCoordinate=this.internal.getVerticalCoordinate,Point=this.internal.Point,Rectangle=this.internal.Rectangle,Matrix=this.internal.Matrix,_ctx=new ContextLayer}]);var Context2D=function(pdf){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var _pdf=pdf;Object.defineProperty(this,"pdf",{get:function(){return _pdf}});var _pageWrapXEnabled=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return _pageWrapXEnabled},set:function(value){_pageWrapXEnabled=Boolean(value)}});var _pageWrapYEnabled=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return _pageWrapYEnabled},set:function(value){_pageWrapYEnabled=Boolean(value)}});var _posX=0;Object.defineProperty(this,"posX",{get:function(){return _posX},set:function(value){isNaN(value)||(_posX=value)}});var _posY=0;Object.defineProperty(this,"posY",{get:function(){return _posY},set:function(value){isNaN(value)||(_posY=value)}}),Object.defineProperty(this,"margin",{get:function(){return _ctx.margin},set:function(value){var margin;"number"==typeof value?margin=[value,value,value,value]:((margin=new Array(4))[0]=value[0],margin[1]=value.length>=2?value[1]:margin[0],margin[2]=value.length>=3?value[2]:margin[0],margin[3]=value.length>=4?value[3]:margin[1]),_ctx.margin=margin}});var _autoPaging=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _autoPaging},set:function(value){_autoPaging=value}});var lastBreak=0;Object.defineProperty(this,"lastBreak",{get:function(){return lastBreak},set:function(value){lastBreak=value}});var pageBreaks=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pageBreaks},set:function(value){pageBreaks=value}}),Object.defineProperty(this,"ctx",{get:function(){return _ctx},set:function(value){value instanceof ContextLayer&&(_ctx=value)}}),Object.defineProperty(this,"path",{get:function(){return _ctx.path},set:function(value){_ctx.path=value}});var _ctxStack=[];Object.defineProperty(this,"ctxStack",{get:function(){return _ctxStack},set:function(value){_ctxStack=value}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(value){var rgba;rgba=getRGBA(value),this.ctx.fillStyle=rgba.style,this.ctx.isFillTransparent=0===rgba.a,this.ctx.fillOpacity=rgba.a,this.pdf.setFillColor(rgba.r,rgba.g,rgba.b,{a:rgba.a}),this.pdf.setTextColor(rgba.r,rgba.g,rgba.b,{a:rgba.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(value){var rgba=getRGBA(value);this.ctx.strokeStyle=rgba.style,this.ctx.isStrokeTransparent=0===rgba.a,this.ctx.strokeOpacity=rgba.a,0===rgba.a?this.pdf.setDrawColor(255,255,255):(rgba.a,this.pdf.setDrawColor(rgba.r,rgba.g,rgba.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(value){-1!==["butt","round","square"].indexOf(value)&&(this.ctx.lineCap=value,this.pdf.setLineCap(value))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(value){isNaN(value)||(this.ctx.lineWidth=value,this.pdf.setLineWidth(value))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(value){-1!==["bevel","round","miter"].indexOf(value)&&(this.ctx.lineJoin=value,this.pdf.setLineJoin(value))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(value){isNaN(value)||(this.ctx.miterLimit=value,this.pdf.setMiterLimit(value))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(value){this.ctx.textBaseline=value}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(value){-1!==["right","end","center","left","start"].indexOf(value)&&(this.ctx.textAlign=value)}});var _fontFaceMap=null;function getFontFaceMap(pdf,fontFaces){if(null===_fontFaceMap){var convertedFontFaces=function(fontMap){var fontFaces=[];return Object.keys(fontMap).forEach((function(family){fontMap[family].forEach((function(style){var fontFace=null;switch(style){case"bold":fontFace={family:family,weight:"bold"};break;case"italic":fontFace={family:family,style:"italic"};break;case"bolditalic":fontFace={family:family,weight:"bold",style:"italic"};break;case"":case"normal":fontFace={family:family}}null!==fontFace&&(fontFace.ref={name:family,style:style},fontFaces.push(fontFace))}))})),fontFaces}(pdf.getFontList());_fontFaceMap=function(fontFaces){for(var map={},i=0;i<fontFaces.length;++i){var normalized=normalizeFontFace(fontFaces[i]),name=normalized.family,stretch=normalized.stretch,style=normalized.style,weight=normalized.weight;map[name]=map[name]||{},map[name][stretch]=map[name][stretch]||{},map[name][stretch][style]=map[name][stretch][style]||{},map[name][stretch][style][weight]=normalized}return map}(convertedFontFaces.concat(fontFaces))}return _fontFaceMap}var _fontFaces=null;Object.defineProperty(this,"fontFaces",{get:function(){return _fontFaces},set:function(value){_fontFaceMap=null,_fontFaces=value}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(value){var matches;if(this.ctx.font=value,null!==(matches=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(value))){var fontStyle=matches[1],fontWeight=(matches[2],matches[3]),fontSize=matches[4],fontFamily=(matches[5],matches[6]),fontSizeUnit=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(fontSize)[2];fontSize="px"===fontSizeUnit?Math.floor(parseFloat(fontSize)*this.pdf.internal.scaleFactor):"em"===fontSizeUnit?Math.floor(parseFloat(fontSize)*this.pdf.getFontSize()):Math.floor(parseFloat(fontSize)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(fontSize);var parts=function(input){var ch,parsed,result=[],remaining=input.trim();if(""===remaining)return defaultFont;if(remaining in systemFonts)return[systemFonts[remaining]];for(;""!==remaining;){switch(parsed=null,ch=(remaining=eatWhiteSpace(remaining)).charAt(0)){case'"':case"'":parsed=parseQuotedFontFamily(remaining.substring(1),ch);break;default:parsed=parseNonQuotedFontFamily(remaining)}if(null===parsed)return defaultFont;if(result.push(parsed[0]),""!==(remaining=eatWhiteSpace(parsed[1]))&&","!==remaining.charAt(0))return defaultFont;remaining=remaining.replace(/^,/,"")}return result}(fontFamily);if(this.fontFaces){var fontFaceMap=getFontFaceMap(this.pdf,this.fontFaces),rules=parts.map((function(ff){return{family:ff,stretch:"normal",weight:fontWeight,style:fontStyle}})),font=resolveFontFace(fontFaceMap,rules);this.pdf.setFont(font.ref.name,font.ref.style)}else{var style="";("bold"===fontWeight||parseInt(fontWeight,10)>=700||"bold"===fontStyle)&&(style="bold"),"italic"===fontStyle&&(style+="italic"),0===style.length&&(style="normal");for(var jsPdfFontName="",fallbackFonts={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},i=0;i<parts.length;i++){if(void 0!==this.pdf.internal.getFont(parts[i],style,{noFallback:!0,disableWarning:!0})){jsPdfFontName=parts[i];break}if("bolditalic"===style&&void 0!==this.pdf.internal.getFont(parts[i],"bold",{noFallback:!0,disableWarning:!0}))jsPdfFontName=parts[i],style="bold";else if(void 0!==this.pdf.internal.getFont(parts[i],"normal",{noFallback:!0,disableWarning:!0})){jsPdfFontName=parts[i],style="normal";break}}if(""===jsPdfFontName)for(var j=0;j<parts.length;j++)if(fallbackFonts[parts[j]]){jsPdfFontName=fallbackFonts[parts[j]];break}jsPdfFontName=""===jsPdfFontName?"Times":jsPdfFontName,this.pdf.setFont(jsPdfFontName,style)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(value){this.ctx.globalCompositeOperation=value}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(value){this.ctx.globalAlpha=value}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(value){this.ctx.lineDashOffset=value,setLineDash.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(value){this.ctx.lineDash=value,setLineDash.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(value){this.ctx.ignoreClearRect=Boolean(value)}})};Context2D.prototype.setLineDash=function(dashArray){this.lineDash=dashArray},Context2D.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Context2D.prototype.fill=function(){pathPreProcess.call(this,"fill",!1)},Context2D.prototype.stroke=function(){pathPreProcess.call(this,"stroke",!1)},Context2D.prototype.beginPath=function(){this.path=[{type:"begin"}]},Context2D.prototype.moveTo=function(x,y){if(isNaN(x)||isNaN(y))throw console.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var pt=this.ctx.transform.applyToPoint(new Point(x,y));this.path.push({type:"mt",x:pt.x,y:pt.y}),this.ctx.lastPoint=new Point(x,y)},Context2D.prototype.closePath=function(){var pathBegin=new Point(0,0),i=0;for(i=this.path.length-1;-1!==i;i--)if("begin"===this.path[i].type&&"object"===_typeof(this.path[i+1])&&"number"==typeof this.path[i+1].x){pathBegin=new Point(this.path[i+1].x,this.path[i+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Point(pathBegin.x,pathBegin.y)},Context2D.prototype.lineTo=function(x,y){if(isNaN(x)||isNaN(y))throw console.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var pt=this.ctx.transform.applyToPoint(new Point(x,y));this.path.push({type:"lt",x:pt.x,y:pt.y}),this.ctx.lastPoint=new Point(pt.x,pt.y)},Context2D.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),pathPreProcess.call(this,null,!0)},Context2D.prototype.quadraticCurveTo=function(cpx,cpy,x,y){if(isNaN(x)||isNaN(y)||isNaN(cpx)||isNaN(cpy))throw console.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pt0=this.ctx.transform.applyToPoint(new Point(x,y)),pt1=this.ctx.transform.applyToPoint(new Point(cpx,cpy));this.path.push({type:"qct",x1:pt1.x,y1:pt1.y,x:pt0.x,y:pt0.y}),this.ctx.lastPoint=new Point(pt0.x,pt0.y)},Context2D.prototype.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){if(isNaN(x)||isNaN(y)||isNaN(cp1x)||isNaN(cp1y)||isNaN(cp2x)||isNaN(cp2y))throw console.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pt0=this.ctx.transform.applyToPoint(new Point(x,y)),pt1=this.ctx.transform.applyToPoint(new Point(cp1x,cp1y)),pt2=this.ctx.transform.applyToPoint(new Point(cp2x,cp2y));this.path.push({type:"bct",x1:pt1.x,y1:pt1.y,x2:pt2.x,y2:pt2.y,x:pt0.x,y:pt0.y}),this.ctx.lastPoint=new Point(pt0.x,pt0.y)},Context2D.prototype.arc=function(x,y,radius,startAngle,endAngle,counterclockwise){if(isNaN(x)||isNaN(y)||isNaN(radius)||isNaN(startAngle)||isNaN(endAngle))throw console.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(counterclockwise=Boolean(counterclockwise),!this.ctx.transform.isIdentity){var xpt=this.ctx.transform.applyToPoint(new Point(x,y));x=xpt.x,y=xpt.y;var x_radPt=this.ctx.transform.applyToPoint(new Point(0,radius)),x_radPt0=this.ctx.transform.applyToPoint(new Point(0,0));radius=Math.sqrt(Math.pow(x_radPt.x-x_radPt0.x,2)+Math.pow(x_radPt.y-x_radPt0.y,2))}Math.abs(endAngle-startAngle)>=2*Math.PI&&(startAngle=0,endAngle=2*Math.PI),this.path.push({type:"arc",x:x,y:y,radius:radius,startAngle:startAngle,endAngle:endAngle,counterclockwise:counterclockwise})},Context2D.prototype.arcTo=function(x1,y1,x2,y2,radius){throw new Error("arcTo not implemented.")},Context2D.prototype.rect=function(x,y,w,h){if(isNaN(x)||isNaN(y)||isNaN(w)||isNaN(h))throw console.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(x,y),this.lineTo(x+w,y),this.lineTo(x+w,y+h),this.lineTo(x,y+h),this.lineTo(x,y),this.lineTo(x+w,y),this.lineTo(x,y)},Context2D.prototype.fillRect=function(x,y,w,h){if(isNaN(x)||isNaN(y)||isNaN(w)||isNaN(h))throw console.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!isFillTransparent.call(this)){var tmp={};"butt"!==this.lineCap&&(tmp.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(tmp.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(x,y,w,h),this.fill(),tmp.hasOwnProperty("lineCap")&&(this.lineCap=tmp.lineCap),tmp.hasOwnProperty("lineJoin")&&(this.lineJoin=tmp.lineJoin)}},Context2D.prototype.strokeRect=function(x,y,w,h){if(isNaN(x)||isNaN(y)||isNaN(w)||isNaN(h))throw console.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");isStrokeTransparent.call(this)||(this.beginPath(),this.rect(x,y,w,h),this.stroke())},Context2D.prototype.clearRect=function(x,y,w,h){if(isNaN(x)||isNaN(y)||isNaN(w)||isNaN(h))throw console.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(x,y,w,h))},Context2D.prototype.save=function(doStackPush){doStackPush="boolean"!=typeof doStackPush||doStackPush;for(var tmpPageNumber=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("q");if(this.pdf.setPage(tmpPageNumber),doStackPush){this.ctx.fontSize=this.pdf.internal.getFontSize();var ctx=new ContextLayer(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ctx}},Context2D.prototype.restore=function(doStackPop){doStackPop="boolean"!=typeof doStackPop||doStackPop;for(var tmpPageNumber=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("Q");this.pdf.setPage(tmpPageNumber),doStackPop&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Context2D.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var getRGBA=function(style){var r,g,b,a;if(!0===style.isCanvasGradient&&(style=style.getColor()),!style)return{r:0,g:0,b:0,a:0,style:style};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(style))r=0,g=0,b=0,a=0;else{var matches=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(style);if(null!==matches)r=parseInt(matches[1]),g=parseInt(matches[2]),b=parseInt(matches[3]),a=1;else if(null!==(matches=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(style)))r=parseInt(matches[1]),g=parseInt(matches[2]),b=parseInt(matches[3]),a=parseFloat(matches[4]);else{if(a=1,"string"==typeof style&&"#"!==style.charAt(0)){var rgbColor=new RGBColor(style);style=rgbColor.ok?rgbColor.toHex():"#000000"}4===style.length?(r=style.substring(1,2),r+=r,g=style.substring(2,3),g+=g,b=style.substring(3,4),b+=b):(r=style.substring(1,3),g=style.substring(3,5),b=style.substring(5,7)),r=parseInt(r,16),g=parseInt(g,16),b=parseInt(b,16)}}return{r:r,g:g,b:b,a:a,style:style}},isFillTransparent=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},isStrokeTransparent=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};Context2D.prototype.fillText=function(text,x,y,maxWidth){if(isNaN(x)||isNaN(y)||"string"!=typeof text)throw console.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(maxWidth=isNaN(maxWidth)?void 0:maxWidth,!isFillTransparent.call(this)){var degs=rad2deg(this.ctx.transform.rotation),scale=this.ctx.transform.scaleX;putText.call(this,{text:text,x:x,y:y,scale:scale,angle:degs,align:this.textAlign,maxWidth:maxWidth})}},Context2D.prototype.strokeText=function(text,x,y,maxWidth){if(isNaN(x)||isNaN(y)||"string"!=typeof text)throw console.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!isStrokeTransparent.call(this)){maxWidth=isNaN(maxWidth)?void 0:maxWidth;var degs=rad2deg(this.ctx.transform.rotation),scale=this.ctx.transform.scaleX;putText.call(this,{text:text,x:x,y:y,scale:scale,renderingMode:"stroke",angle:degs,align:this.textAlign,maxWidth:maxWidth})}},Context2D.prototype.measureText=function(text){if("string"!=typeof text)throw console.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var pdf=this.pdf,k=this.pdf.internal.scaleFactor,fontSize=pdf.internal.getFontSize(),txtWidth=pdf.getStringUnitWidth(text)*fontSize/pdf.internal.scaleFactor,TextMetrics=function(options){var _width=(options=options||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _width}}),this};return new TextMetrics({width:txtWidth*=Math.round(96*k/72*1e4)/1e4})},Context2D.prototype.scale=function(scalewidth,scaleheight){if(isNaN(scalewidth)||isNaN(scaleheight))throw console.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var matrix=new Matrix(scalewidth,0,0,scaleheight,0,0);this.ctx.transform=this.ctx.transform.multiply(matrix)},Context2D.prototype.rotate=function(angle){if(isNaN(angle))throw console.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var matrix=new Matrix(Math.cos(angle),Math.sin(angle),-Math.sin(angle),Math.cos(angle),0,0);this.ctx.transform=this.ctx.transform.multiply(matrix)},Context2D.prototype.translate=function(x,y){if(isNaN(x)||isNaN(y))throw console.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var matrix=new Matrix(1,0,0,1,x,y);this.ctx.transform=this.ctx.transform.multiply(matrix)},Context2D.prototype.transform=function(a,b,c,d,e,f){if(isNaN(a)||isNaN(b)||isNaN(c)||isNaN(d)||isNaN(e)||isNaN(f))throw console.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var matrix=new Matrix(a,b,c,d,e,f);this.ctx.transform=this.ctx.transform.multiply(matrix)},Context2D.prototype.setTransform=function(a,b,c,d,e,f){a=isNaN(a)?1:a,b=isNaN(b)?0:b,c=isNaN(c)?0:c,d=isNaN(d)?1:d,e=isNaN(e)?0:e,f=isNaN(f)?0:f,this.ctx.transform=new Matrix(a,b,c,d,e,f)};var hasMargins=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Context2D.prototype.drawImage=function(img,sx,sy,swidth,sheight,x,y,width,height){var imageProperties=this.pdf.getImageProperties(img),factorX=1,factorY=1,clipFactorX=1,clipFactorY=1;void 0!==swidth&&void 0!==width&&(clipFactorX=width/swidth,clipFactorY=height/sheight,factorX=imageProperties.width/swidth*width/swidth,factorY=imageProperties.height/sheight*height/sheight),void 0===x&&(x=sx,y=sy,sx=0,sy=0),void 0!==swidth&&void 0===width&&(width=swidth,height=sheight),void 0===swidth&&void 0===width&&(width=imageProperties.width,height=imageProperties.height);for(var clipPath,decomposedTransformationMatrix=this.ctx.transform.decompose(),angle=rad2deg(decomposedTransformationMatrix.rotate.shx),matrix=new Matrix,xRect=(matrix=(matrix=(matrix=matrix.multiply(decomposedTransformationMatrix.translate)).multiply(decomposedTransformationMatrix.skew)).multiply(decomposedTransformationMatrix.scale)).applyToRectangle(new Rectangle(x-sx*clipFactorX,y-sy*clipFactorY,swidth*factorX,sheight*factorY)),pageArray=getPagesByPath.call(this,xRect),pages=[],ii=0;ii<pageArray.length;ii+=1)-1===pages.indexOf(pageArray[ii])&&pages.push(pageArray[ii]);if(sortPages(pages),this.autoPaging)for(var min=pages[0],max=pages[pages.length-1],i=min;i<max+1;i++){this.pdf.setPage(i);var pageWidthMinusMargins=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],topMargin=1===i?this.posY+this.margin[0]:this.margin[0],firstPageHeight=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pageHeightMinusMargins=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],previousPageHeightSum=1===i?0:firstPageHeight+(i-2)*pageHeightMinusMargins;if(0!==this.ctx.clip_path.length){var tmpPaths=this.path;clipPath=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=pathPositionRedo(clipPath,this.posX+this.margin[3],-previousPageHeightSum+topMargin+this.ctx.prevPageLastElemOffset),drawPaths.call(this,"fill",!0),this.path=tmpPaths}var tmpRect=JSON.parse(JSON.stringify(xRect));tmpRect=pathPositionRedo([tmpRect],this.posX+this.margin[3],-previousPageHeightSum+topMargin+this.ctx.prevPageLastElemOffset)[0];var needsClipping=(i>min||i<max)&&hasMargins.call(this);needsClipping&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pageWidthMinusMargins,pageHeightMinusMargins,null).clip().discardPath()),this.pdf.addImage(img,"JPEG",tmpRect.x,tmpRect.y,tmpRect.w,tmpRect.h,null,null,angle),needsClipping&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(img,"JPEG",xRect.x,xRect.y,xRect.w,xRect.h,null,null,angle)};var getPagesByPath=function(path,pageWrapX,pageWrapY){var result=[];pageWrapX=pageWrapX||this.pdf.internal.pageSize.width,pageWrapY=pageWrapY||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var yOffset=this.posY+this.ctx.prevPageLastElemOffset;switch(path.type){default:case"mt":case"lt":result.push(Math.floor((path.y+yOffset)/pageWrapY)+1);break;case"arc":result.push(Math.floor((path.y+yOffset-path.radius)/pageWrapY)+1),result.push(Math.floor((path.y+yOffset+path.radius)/pageWrapY)+1);break;case"qct":var rectOfQuadraticCurve=getQuadraticCurveBoundary(this.ctx.lastPoint.x,this.ctx.lastPoint.y,path.x1,path.y1,path.x,path.y);result.push(Math.floor((rectOfQuadraticCurve.y+yOffset)/pageWrapY)+1),result.push(Math.floor((rectOfQuadraticCurve.y+rectOfQuadraticCurve.h+yOffset)/pageWrapY)+1);break;case"bct":var rectOfBezierCurve=getBezierCurveBoundary(this.ctx.lastPoint.x,this.ctx.lastPoint.y,path.x1,path.y1,path.x2,path.y2,path.x,path.y);result.push(Math.floor((rectOfBezierCurve.y+yOffset)/pageWrapY)+1),result.push(Math.floor((rectOfBezierCurve.y+rectOfBezierCurve.h+yOffset)/pageWrapY)+1);break;case"rect":result.push(Math.floor((path.y+yOffset)/pageWrapY)+1),result.push(Math.floor((path.y+path.h+yOffset)/pageWrapY)+1)}for(var i=0;i<result.length;i+=1)for(;this.pdf.internal.getNumberOfPages()<result[i];)addPage.call(this);return result},addPage=function(){var fillStyle=this.fillStyle,strokeStyle=this.strokeStyle,font=this.font,lineCap=this.lineCap,lineWidth=this.lineWidth,lineJoin=this.lineJoin;this.pdf.addPage(),this.fillStyle=fillStyle,this.strokeStyle=strokeStyle,this.font=font,this.lineCap=lineCap,this.lineWidth=lineWidth,this.lineJoin=lineJoin},pathPositionRedo=function(paths,x,y){for(var i=0;i<paths.length;i++)switch(paths[i].type){case"bct":paths[i].x2+=x,paths[i].y2+=y;case"qct":paths[i].x1+=x,paths[i].y1+=y;default:paths[i].x+=x,paths[i].y+=y}return paths},sortPages=function(pages){return pages.sort((function(a,b){return a-b}))},pathPreProcess=function(rule,isClip){for(var clipPath,tmpPath,fillStyle=this.fillStyle,strokeStyle=this.strokeStyle,lineCap=this.lineCap,oldLineWidth=this.lineWidth,lineWidth=Math.abs(oldLineWidth*this.ctx.transform.scaleX),lineJoin=this.lineJoin,origPath=JSON.parse(JSON.stringify(this.path)),xPath=JSON.parse(JSON.stringify(this.path)),pages=[],i=0;i<xPath.length;i++)if(void 0!==xPath[i].x)for(var page=getPagesByPath.call(this,xPath[i]),ii=0;ii<page.length;ii+=1)-1===pages.indexOf(page[ii])&&pages.push(page[ii]);for(var j=0;j<pages.length;j++)for(;this.pdf.internal.getNumberOfPages()<pages[j];)addPage.call(this);if(sortPages(pages),this.autoPaging)for(var min=pages[0],max=pages[pages.length-1],k=min;k<max+1;k++){this.pdf.setPage(k),this.fillStyle=fillStyle,this.strokeStyle=strokeStyle,this.lineCap=lineCap,this.lineWidth=lineWidth,this.lineJoin=lineJoin;var pageWidthMinusMargins=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],topMargin=1===k?this.posY+this.margin[0]:this.margin[0],firstPageHeight=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pageHeightMinusMargins=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],previousPageHeightSum=1===k?0:firstPageHeight+(k-2)*pageHeightMinusMargins;if(0!==this.ctx.clip_path.length){var tmpPaths=this.path;clipPath=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=pathPositionRedo(clipPath,this.posX+this.margin[3],-previousPageHeightSum+topMargin+this.ctx.prevPageLastElemOffset),drawPaths.call(this,rule,!0),this.path=tmpPaths}if(tmpPath=JSON.parse(JSON.stringify(origPath)),this.path=pathPositionRedo(tmpPath,this.posX+this.margin[3],-previousPageHeightSum+topMargin+this.ctx.prevPageLastElemOffset),!1===isClip||0===k){var needsClipping=(k>min||k<max)&&hasMargins.call(this);needsClipping&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pageWidthMinusMargins,pageHeightMinusMargins,null).clip().discardPath()),drawPaths.call(this,rule,isClip),needsClipping&&this.pdf.restoreGraphicsState()}this.lineWidth=oldLineWidth}else this.lineWidth=lineWidth,drawPaths.call(this,rule,isClip),this.lineWidth=oldLineWidth;this.path=origPath},drawPaths=function(rule,isClip){if(("stroke"!==rule||isClip||!isStrokeTransparent.call(this))&&("stroke"===rule||isClip||!isFillTransparent.call(this))){for(var delta,style,moves=[],xPath=this.path,i=0;i<xPath.length;i++){var pt=xPath[i];switch(pt.type){case"begin":moves.push({begin:!0});break;case"close":moves.push({close:!0});break;case"mt":moves.push({start:pt,deltas:[],abs:[]});break;case"lt":var iii=moves.length;if(xPath[i-1]&&!isNaN(xPath[i-1].x)&&(delta=[pt.x-xPath[i-1].x,pt.y-xPath[i-1].y],iii>0))for(;iii>=0;iii--)if(!0!==moves[iii-1].close&&!0!==moves[iii-1].begin){moves[iii-1].deltas.push(delta),moves[iii-1].abs.push(pt);break}break;case"bct":delta=[pt.x1-xPath[i-1].x,pt.y1-xPath[i-1].y,pt.x2-xPath[i-1].x,pt.y2-xPath[i-1].y,pt.x-xPath[i-1].x,pt.y-xPath[i-1].y],moves[moves.length-1].deltas.push(delta);break;case"qct":var x1=xPath[i-1].x+2/3*(pt.x1-xPath[i-1].x),y1=xPath[i-1].y+2/3*(pt.y1-xPath[i-1].y),x2=pt.x+2/3*(pt.x1-pt.x),y2=pt.y+2/3*(pt.y1-pt.y),x3=pt.x,y3=pt.y;delta=[x1-xPath[i-1].x,y1-xPath[i-1].y,x2-xPath[i-1].x,y2-xPath[i-1].y,x3-xPath[i-1].x,y3-xPath[i-1].y],moves[moves.length-1].deltas.push(delta);break;case"arc":moves.push({deltas:[],abs:[],arc:!0}),Array.isArray(moves[moves.length-1].abs)&&moves[moves.length-1].abs.push(pt)}}style=isClip?null:"stroke"===rule?"stroke":"fill";for(var began=!1,k=0;k<moves.length;k++)if(moves[k].arc)for(var arcs=moves[k].abs,ii=0;ii<arcs.length;ii++){var arc=arcs[ii];"arc"===arc.type?drawArc.call(this,arc.x,arc.y,arc.radius,arc.startAngle,arc.endAngle,arc.counterclockwise,void 0,isClip,!began):drawLine.call(this,arc.x,arc.y),began=!0}else if(!0===moves[k].close)this.pdf.internal.out("h"),began=!1;else if(!0!==moves[k].begin){var x=moves[k].start.x,y=moves[k].start.y;drawLines.call(this,moves[k].deltas,x,y),began=!0}style&&putStyle.call(this,style),isClip&&doClip.call(this)}},getBaseline=function(y){var height=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,descent=height*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return y-descent;case"top":return y+height-descent;case"hanging":return y+height-2*descent;case"middle":return y+height/2-descent;default:return y}},getTextBottom=function(yBaseLine){return yBaseLine+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Context2D.prototype.createLinearGradient=function(){var canvasGradient=function(){};return canvasGradient.colorStops=[],canvasGradient.addColorStop=function(offset,color){this.colorStops.push([offset,color])},canvasGradient.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},canvasGradient.isCanvasGradient=!0,canvasGradient},Context2D.prototype.createPattern=function(){return this.createLinearGradient()},Context2D.prototype.createRadialGradient=function(){return this.createLinearGradient()};var drawArc=function(x,y,r,a1,a2,counterclockwise,style,isClip,includeMove){for(var curves=createArc.call(this,r,a1,a2,counterclockwise),i=0;i<curves.length;i++){var curve=curves[i];0===i&&(includeMove?doMove.call(this,curve.x1+x,curve.y1+y):drawLine.call(this,curve.x1+x,curve.y1+y)),drawCurve.call(this,x,y,curve.x2,curve.y2,curve.x3,curve.y3,curve.x4,curve.y4)}isClip?doClip.call(this):putStyle.call(this,style)},putStyle=function(style){switch(style){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},doClip=function(){this.pdf.clip(),this.pdf.discardPath()},doMove=function(x,y){this.pdf.internal.out(getHorizontalCoordinateString(x)+" "+getVerticalCoordinateString(y)+" m")},putText=function(options){var textAlign;switch(options.align){case"right":case"end":textAlign="right";break;case"center":textAlign="center";break;default:textAlign="left"}var textDimensions=this.pdf.getTextDimensions(options.text),yBaseLine=getBaseline.call(this,options.y),yTop=getTextBottom.call(this,yBaseLine)-textDimensions.h,pt=this.ctx.transform.applyToPoint(new Point(options.x,yBaseLine)),decomposedTransformationMatrix=this.ctx.transform.decompose(),matrix=new Matrix;matrix=(matrix=(matrix=matrix.multiply(decomposedTransformationMatrix.translate)).multiply(decomposedTransformationMatrix.skew)).multiply(decomposedTransformationMatrix.scale);for(var clipPath,oldSize,oldLineWidth,baselineRect=this.ctx.transform.applyToRectangle(new Rectangle(options.x,yBaseLine,textDimensions.w,textDimensions.h)),textBounds=matrix.applyToRectangle(new Rectangle(options.x,yTop,textDimensions.w,textDimensions.h)),pageArray=getPagesByPath.call(this,textBounds),pages=[],ii=0;ii<pageArray.length;ii+=1)-1===pages.indexOf(pageArray[ii])&&pages.push(pageArray[ii]);if(sortPages(pages),this.autoPaging)for(var min=pages[0],max=pages[pages.length-1],i=min;i<max+1;i++){this.pdf.setPage(i);var topMargin=1===i?this.posY+this.margin[0]:this.margin[0],firstPageHeight=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pageHeightMinusBottomMargin=this.pdf.internal.pageSize.height-this.margin[2],pageHeightMinusMargins=pageHeightMinusBottomMargin-this.margin[0],pageWidthMinusRightMargin=this.pdf.internal.pageSize.width-this.margin[1],pageWidthMinusMargins=pageWidthMinusRightMargin-this.margin[3],previousPageHeightSum=1===i?0:firstPageHeight+(i-2)*pageHeightMinusMargins;if(0!==this.ctx.clip_path.length){var tmpPaths=this.path;clipPath=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=pathPositionRedo(clipPath,this.posX+this.margin[3],-1*previousPageHeightSum+topMargin),drawPaths.call(this,"fill",!0),this.path=tmpPaths}var textBoundsOnPage=pathPositionRedo([JSON.parse(JSON.stringify(textBounds))],this.posX+this.margin[3],-previousPageHeightSum+topMargin+this.ctx.prevPageLastElemOffset)[0];options.scale>=.01&&(oldSize=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oldSize*options.scale),oldLineWidth=this.lineWidth,this.lineWidth=oldLineWidth*options.scale);var doSlice="text"!==this.autoPaging;if(doSlice||textBoundsOnPage.y+textBoundsOnPage.h<=pageHeightMinusBottomMargin){if(doSlice||textBoundsOnPage.y>=topMargin&&textBoundsOnPage.x<=pageWidthMinusRightMargin){var croppedText=doSlice?options.text:this.pdf.splitTextToSize(options.text,options.maxWidth||pageWidthMinusRightMargin-textBoundsOnPage.x)[0],baseLineRectOnPage=pathPositionRedo([JSON.parse(JSON.stringify(baselineRect))],this.posX+this.margin[3],-previousPageHeightSum+topMargin+this.ctx.prevPageLastElemOffset)[0],needsClipping=doSlice&&(i>min||i<max)&&hasMargins.call(this);needsClipping&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pageWidthMinusMargins,pageHeightMinusMargins,null).clip().discardPath()),this.pdf.text(croppedText,baseLineRectOnPage.x,baseLineRectOnPage.y,{angle:options.angle,align:textAlign,renderingMode:options.renderingMode}),needsClipping&&this.pdf.restoreGraphicsState()}}else textBoundsOnPage.y<pageHeightMinusBottomMargin&&(this.ctx.prevPageLastElemOffset+=pageHeightMinusBottomMargin-textBoundsOnPage.y);options.scale>=.01&&(this.pdf.setFontSize(oldSize),this.lineWidth=oldLineWidth)}else options.scale>=.01&&(oldSize=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oldSize*options.scale),oldLineWidth=this.lineWidth,this.lineWidth=oldLineWidth*options.scale),this.pdf.text(options.text,pt.x+this.posX,pt.y+this.posY,{angle:options.angle,align:textAlign,renderingMode:options.renderingMode,maxWidth:options.maxWidth}),options.scale>=.01&&(this.pdf.setFontSize(oldSize),this.lineWidth=oldLineWidth)},drawLine=function(x,y,prevX,prevY){prevX=prevX||0,prevY=prevY||0,this.pdf.internal.out(getHorizontalCoordinateString(x+prevX)+" "+getVerticalCoordinateString(y+prevY)+" l")},drawLines=function(lines,x,y){return this.pdf.lines(lines,x,y,null,null)},drawCurve=function(x,y,x1,y1,x2,y2,x3,y3){this.pdf.internal.out([f2(getHorizontalCoordinate(x1+x)),f2(getVerticalCoordinate(y1+y)),f2(getHorizontalCoordinate(x2+x)),f2(getVerticalCoordinate(y2+y)),f2(getHorizontalCoordinate(x3+x)),f2(getVerticalCoordinate(y3+y)),"c"].join(" "))},createArc=function(radius,startAngle,endAngle,anticlockwise){for(var twoPi=2*Math.PI,halfPi=Math.PI/2;startAngle>endAngle;)startAngle-=twoPi;var totalAngle=Math.abs(endAngle-startAngle);totalAngle<twoPi&&anticlockwise&&(totalAngle=twoPi-totalAngle);for(var curves=[],sgn=anticlockwise?-1:1,a1=startAngle;totalAngle>1e-5;){var a2=a1+sgn*Math.min(totalAngle,halfPi);curves.push(createSmallArc.call(this,radius,a1,a2)),totalAngle-=Math.abs(a2-a1),a1=a2}return curves},createSmallArc=function(r,a1,a2){var a=(a2-a1)/2,x4=r*Math.cos(a),y4=r*Math.sin(a),x1=x4,y1=-y4,q1=x1*x1+y1*y1,q2=q1+x1*x4+y1*y4,k2=4/3*(Math.sqrt(2*q1*q2)-q2)/(x1*y4-y1*x4),x2=x1-k2*y1,y2=y1+k2*x1,x3=x2,y3=-y2,ar=a+a1,cos_ar=Math.cos(ar),sin_ar=Math.sin(ar);return{x1:r*Math.cos(a1),y1:r*Math.sin(a1),x2:x2*cos_ar-y2*sin_ar,y2:x2*sin_ar+y2*cos_ar,x3:x3*cos_ar-y3*sin_ar,y3:x3*sin_ar+y3*cos_ar,x4:r*Math.cos(a2),y4:r*Math.sin(a2)}},rad2deg=function(value){return 180*value/Math.PI},getQuadraticCurveBoundary=function(sx,sy,cpx,cpy,ex,ey){var midX1=sx+.5*(cpx-sx),midY1=sy+.5*(cpy-sy),midX2=ex+.5*(cpx-ex),midY2=ey+.5*(cpy-ey),resultX1=Math.min(sx,ex,midX1,midX2),resultX2=Math.max(sx,ex,midX1,midX2),resultY1=Math.min(sy,ey,midY1,midY2),resultY2=Math.max(sy,ey,midY1,midY2);return new Rectangle(resultX1,resultY1,resultX2-resultX1,resultY2-resultY1)},getBezierCurveBoundary=function(ax,ay,bx,by,cx,cy,dx,dy){var d,i,px,py,qx,qy,sx,sy,x,y,minx,miny,maxx,maxy,tobx=bx-ax,toby=by-ay,tocx=cx-bx,tocy=cy-by,todx=dx-cx,tody=dy-cy;for(i=0;i<41;i++)x=(sx=(px=ax+(d=i/40)*tobx)+d*((qx=bx+d*tocx)-px))+d*(qx+d*(cx+d*todx-qx)-sx),y=(sy=(py=ay+d*toby)+d*((qy=by+d*tocy)-py))+d*(qy+d*(cy+d*tody-qy)-sy),0==i?(minx=x,miny=y,maxx=x,maxy=y):(minx=Math.min(minx,x),miny=Math.min(miny,y),maxx=Math.max(maxx,x),maxy=Math.max(maxy,y));return new Rectangle(Math.round(minx),Math.round(miny),Math.round(maxx-minx),Math.round(maxy-miny))},setLineDash=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var lineDash,lineDashOffset,nextLineDash=(lineDash=this.ctx.lineDash,lineDashOffset=this.ctx.lineDashOffset,JSON.stringify({lineDash:lineDash,lineDashOffset:lineDashOffset}));this.prevLineDash!==nextLineDash&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=nextLineDash)}}}(jsPDF.API);try{require("worker_threads").Worker}catch(e){}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(eb,start){for(var b=new u16(31),i=0;i<31;++i)b[i]=start+=1<<eb[i-1];var r=new u32(b[30]);for(i=1;i<30;++i)for(var j=b[i];j<b[i+1];++j)r[j]=j-b[i]<<5|i;return[b,r]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;for(var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768),i=0;i<32768;++i){var x=(43690&i)>>>1|(21845&i)<<1;x=(61680&(x=(52428&x)>>>2|(13107&x)<<2))>>>4|(3855&x)<<4,rev[i]=((65280&x)>>>8|(255&x)<<8)>>>1}var hMap=function(cd,mb,r){for(var s=cd.length,i=0,l=new u16(mb);i<s;++i)++l[cd[i]-1];var co,le=new u16(mb);for(i=0;i<mb;++i)le[i]=le[i-1]+l[i-1]<<1;if(r){co=new u16(1<<mb);var rvb=15-mb;for(i=0;i<s;++i)if(cd[i])for(var sv=i<<4|cd[i],r_1=mb-cd[i],v=le[cd[i]-1]++<<r_1,m=v|(1<<r_1)-1;v<=m;++v)co[rev[v]>>>rvb]=sv}else for(co=new u16(s),i=0;i<s;++i)co[i]=rev[le[cd[i]-1]++]>>>15-cd[i];return co},flt=new u8(288);for(i=0;i<144;++i)flt[i]=8;for(i=144;i<256;++i)flt[i]=9;for(i=256;i<280;++i)flt[i]=7;for(i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(i=0;i<32;++i)fdt[i]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(a){for(var m=a[0],i=1;i<a.length;++i)a[i]>m&&(m=a[i]);return m},bits=function(d,p,m){var o=p/8>>0;return(d[o]|d[o+1]<<8)>>>(7&p)&m},bits16=function(d,p){var o=p/8>>0;return(d[o]|d[o+1]<<8|d[o+2]<<16)>>>(7&p)},shft=function(p){return(p/8>>0)+(7&p&&1)},slc=function(v,s,e){(null==s||s<0)&&(s=0),(null==e||e>v.length)&&(e=v.length);var n=new(v instanceof u16?u16:v instanceof u32?u32:u8)(e-s);return n.set(v.subarray(s,e)),n},wbits=function(d,p,v){v<<=7&p;var o=p/8>>0;d[o]|=v,d[o+1]|=v>>>8},wbits16=function(d,p,v){v<<=7&p;var o=p/8>>0;d[o]|=v,d[o+1]|=v>>>8,d[o+2]|=v>>>16},hTree=function(d,mb){for(var t=[],i=0;i<d.length;++i)d[i]&&t.push({s:i,f:d[i]});var s=t.length,t2=t.slice();if(!s)return[new u8(0),0];if(1==s){var v=new u8(t[0].s+1);return v[t[0].s]=1,[v,1]}t.sort((function(a,b){return a.f-b.f})),t.push({s:-1,f:25001});var l=t[0],r=t[1],i0=0,i1=1,i2=2;for(t[0]={s:-1,f:l.f+r.f,l:l,r:r};i1!=s-1;)l=t[t[i0].f<t[i2].f?i0++:i2++],r=t[i0!=i1&&t[i0].f<t[i2].f?i0++:i2++],t[i1++]={s:-1,f:l.f+r.f,l:l,r:r};var maxSym=t2[0].s;for(i=1;i<s;++i)t2[i].s>maxSym&&(maxSym=t2[i].s);var tr=new u16(maxSym+1),mbt=ln(t[i1-1],tr,0);if(mbt>mb){i=0;var dt=0,lft=mbt-mb,cst=1<<lft;for(t2.sort((function(a,b){return tr[b.s]-tr[a.s]||a.f-b.f}));i<s;++i){var i2_1=t2[i].s;if(!(tr[i2_1]>mb))break;dt+=cst-(1<<mbt-tr[i2_1]),tr[i2_1]=mb}for(dt>>>=lft;dt>0;){var i2_2=t2[i].s;tr[i2_2]<mb?dt-=1<<mb-tr[i2_2]++-1:++i}for(;i>=0&&dt;--i){var i2_3=t2[i].s;tr[i2_3]==mb&&(--tr[i2_3],++dt)}mbt=mb}return[new u8(tr),mbt]},ln=function ln(n,l,d){return-1==n.s?Math.max(ln(n.l,l,d+1),ln(n.r,l,d+1)):l[n.s]=d},lc=function(c){for(var s=c.length;s&&!c[--s];);for(var cl=new u16(++s),cli=0,cln=c[0],cls=1,w=function(v){cl[cli++]=v},i=1;i<=s;++i)if(c[i]==cln&&i!=s)++cls;else{if(!cln&&cls>2){for(;cls>138;cls-=138)w(32754);cls>2&&(w(cls>10?cls-11<<5|28690:cls-3<<5|12305),cls=0)}else if(cls>3){for(w(cln),--cls;cls>6;cls-=6)w(8304);cls>2&&(w(cls-3<<5|8208),cls=0)}for(;cls--;)w(cln);cls=1,cln=c[i]}return[cl.subarray(0,cli),s]},clen=function(cf,cl){for(var l=0,i=0;i<cl.length;++i)l+=cf[i]*cl[i];return l},wfblk=function(out,pos,dat){var s=dat.length,o=shft(pos+2);out[o]=255&s,out[o+1]=s>>>8,out[o+2]=255^out[o],out[o+3]=255^out[o+1];for(var i=0;i<s;++i)out[o+i+4]=dat[i];return 8*(o+4+s)},wblk=function(dat,out,final,syms,lf,df,eb,li,bs,bl,p){wbits(out,p++,final),++lf[256];for(var _a=hTree(lf,15),dlt=_a[0],mlb=_a[1],_b=hTree(df,15),ddt=_b[0],mdb=_b[1],_c=lc(dlt),lclt=_c[0],nlc=_c[1],_d=lc(ddt),lcdt=_d[0],ndc=_d[1],lcfreq=new u16(19),i=0;i<lclt.length;++i)lcfreq[31&lclt[i]]++;for(i=0;i<lcdt.length;++i)lcfreq[31&lcdt[i]]++;for(var _e=hTree(lcfreq,7),lct=_e[0],mlcb=_e[1],nlcc=19;nlcc>4&&!lct[clim[nlcc-1]];--nlcc);var lm,ll,dm,dl,flen=bl+5<<3,ftlen=clen(lf,flt)+clen(df,fdt)+eb,dtlen=clen(lf,dlt)+clen(df,ddt)+eb+14+3*nlcc+clen(lcfreq,lct)+(2*lcfreq[16]+3*lcfreq[17]+7*lcfreq[18]);if(flen<=ftlen&&flen<=dtlen)return wfblk(out,p,dat.subarray(bs,bs+bl));if(wbits(out,p,1+(dtlen<ftlen)),p+=2,dtlen<ftlen){lm=hMap(dlt,mlb,0),ll=dlt,dm=hMap(ddt,mdb,0),dl=ddt;var llm=hMap(lct,mlcb,0);wbits(out,p,nlc-257),wbits(out,p+5,ndc-1),wbits(out,p+10,nlcc-4),p+=14;for(i=0;i<nlcc;++i)wbits(out,p+3*i,lct[clim[i]]);p+=3*nlcc;for(var lcts=[lclt,lcdt],it=0;it<2;++it){var clct=lcts[it];for(i=0;i<clct.length;++i){var len=31&clct[i];wbits(out,p,llm[len]),p+=lct[len],len>15&&(wbits(out,p,clct[i]>>>5&127),p+=clct[i]>>>12)}}}else lm=flm,ll=flt,dm=fdm,dl=fdt;for(i=0;i<li;++i)if(syms[i]>255){len=syms[i]>>>18&31;wbits16(out,p,lm[len+257]),p+=ll[len+257],len>7&&(wbits(out,p,syms[i]>>>23&31),p+=fleb[len]);var dst=31&syms[i];wbits16(out,p,dm[dst]),p+=dl[dst],dst>3&&(wbits16(out,p,syms[i]>>>5&8191),p+=fdeb[dst])}else wbits16(out,p,lm[syms[i]]),p+=ll[syms[i]];return wbits16(out,p,lm[256]),p+ll[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dopt=function(dat,opt,pre,post,st){return function(dat,lvl,plvl,pre,post,lst){var s=dat.length,o=new u8(pre+s+5*(1+Math.floor(s/7e3))+post),w=o.subarray(pre,o.length-post),pos=0;if(!lvl||s<8)for(var i=0;i<=s;i+=65535){var e=i+65535;e<s?pos=wfblk(w,pos,dat.subarray(i,e)):(w[i]=lst,pos=wfblk(w,pos,dat.subarray(i,s)))}else{for(var opt=deo[lvl-1],n=opt>>>13,c=8191&opt,msk_1=(1<<plvl)-1,prev=new u16(32768),head=new u16(msk_1+1),bs1_1=Math.ceil(plvl/3),bs2_1=2*bs1_1,hsh=function(i){return(dat[i]^dat[i+1]<<bs1_1^dat[i+2]<<bs2_1)&msk_1},syms=new u32(25e3),lf=new u16(288),df=new u16(32),lc_1=0,eb=0,li=(i=0,0),wi=0,bs=0;i<s;++i){var hv=hsh(i),imod=32767&i,pimod=head[hv];if(prev[imod]=pimod,head[hv]=imod,wi<=i){var rem=s-i;if((lc_1>7e3||li>24576)&&rem>423){pos=wblk(dat,w,0,syms,lf,df,eb,li,bs,i-bs,pos),li=lc_1=eb=0,bs=i;for(var j=0;j<286;++j)lf[j]=0;for(j=0;j<30;++j)df[j]=0}var l=2,d=0,ch_1=c,dif=imod-pimod&32767;if(rem>2&&hv==hsh(i-dif))for(var maxn=Math.min(n,rem)-1,maxd=Math.min(32767,i),ml=Math.min(258,rem);dif<=maxd&&--ch_1&&imod!=pimod;){if(dat[i+l]==dat[i+l-dif]){for(var nl=0;nl<ml&&dat[i+nl]==dat[i+nl-dif];++nl);if(nl>l){if(l=nl,d=dif,nl>maxn)break;var mmd=Math.min(dif,nl-2),md=0;for(j=0;j<mmd;++j){var ti=i-dif+j+32768&32767,cd=ti-prev[ti]+32768&32767;cd>md&&(md=cd,pimod=ti)}}}dif+=(imod=pimod)-(pimod=prev[imod])+32768&32767}if(d){syms[li++]=268435456|revfl[l]<<18|revfd[d];var lin=31&revfl[l],din=31&revfd[d];eb+=fleb[lin]+fdeb[din],++lf[257+lin],++df[din],wi=i+l,++lc_1}else syms[li++]=dat[i],++lf[dat[i]]}}pos=wblk(dat,w,lst,syms,lf,df,eb,li,bs,i-bs,pos),lst||(pos=wfblk(w,pos,et))}return slc(o,0,pre+shft(pos)+post)}(dat,null==opt.level?6:opt.level,null==opt.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(dat.length)))):12+opt.mem,pre,post,!st)};function zlibSync(data,opts){void 0===opts&&(opts={});var a=function(){var a=1,b=0;return{p:function(d){for(var n=a,m=b,l=d.length,i=0;i!=l;){for(var e=Math.min(i+5552,l);i<e;++i)m+=n+=d[i];n%=65521,m%=65521}a=n,b=m},d:function(){return(a>>>8<<16|(255&b)<<8|b>>>8)+2*((255&a)<<23)}}}();a.p(data);var d=dopt(data,opts,2,4);return function(c,o){var lv=o.level,fl=0==lv?0:lv<6?1:9==lv?3:2;c[0]=120,c[1]=fl<<6|(fl?32-2*fl:1)}(d,opts),function(d,b,v){for(;v;++b)d[b]=v,v>>>=8}(d,d.length-4,a.d()),d}function unzlibSync(data,out){return function(dat,buf,st){var sl=dat.length,noBuf=!buf||st,noSt=!st||st.i;st||(st={}),buf||(buf=new u8(3*sl));var cbuf=function(l){var bl=buf.length;if(l>bl){var nbuf=new u8(Math.max(2*bl,l));nbuf.set(buf),buf=nbuf}},final=st.f||0,pos=st.p||0,bt=st.b||0,lm=st.l,dm=st.d,lbt=st.m,dbt=st.n,tbts=8*sl;do{if(!lm){st.f=final=bits(dat,pos,1);var type=bits(dat,pos+1,3);if(pos+=3,!type){var l=dat[(s=shft(pos)+4)-4]|dat[s-3]<<8,t=s+l;if(t>sl){if(noSt)throw"unexpected EOF";break}noBuf&&cbuf(bt+l),buf.set(dat.subarray(s,t),bt),st.b=bt+=l,st.p=pos=8*t;continue}if(1==type)lm=flrm,dm=fdrm,lbt=9,dbt=5;else{if(2!=type)throw"invalid block type";var hLit=bits(dat,pos,31)+257,hcLen=bits(dat,pos+10,15)+4,tl=hLit+bits(dat,pos+5,31)+1;pos+=14;for(var ldt=new u8(tl),clt=new u8(19),i=0;i<hcLen;++i)clt[clim[i]]=bits(dat,pos+3*i,7);pos+=3*hcLen;var clb=max(clt),clbmsk=(1<<clb)-1;if(!noSt&&pos+tl*(clb+7)>tbts)break;var clm=hMap(clt,clb,1);for(i=0;i<tl;){var s,r=clm[bits(dat,pos,clbmsk)];if(pos+=15&r,(s=r>>>4)<16)ldt[i++]=s;else{var c=0,n=0;for(16==s?(n=3+bits(dat,pos,3),pos+=2,c=ldt[i-1]):17==s?(n=3+bits(dat,pos,7),pos+=3):18==s&&(n=11+bits(dat,pos,127),pos+=7);n--;)ldt[i++]=c}}var lt=ldt.subarray(0,hLit),dt=ldt.subarray(hLit);lbt=max(lt),dbt=max(dt),lm=hMap(lt,lbt,1),dm=hMap(dt,dbt,1)}if(pos>tbts)throw"unexpected EOF"}noBuf&&cbuf(bt+131072);for(var lms=(1<<lbt)-1,dms=(1<<dbt)-1,mxa=lbt+dbt+18;noSt||pos+mxa<tbts;){var sym=(c=lm[bits16(dat,pos)&lms])>>>4;if((pos+=15&c)>tbts)throw"unexpected EOF";if(!c)throw"invalid length/literal";if(sym<256)buf[bt++]=sym;else{if(256==sym){lm=null;break}var add=sym-254;if(sym>264){var b=fleb[i=sym-257];add=bits(dat,pos,(1<<b)-1)+fl[i],pos+=b}var d=dm[bits16(dat,pos)&dms],dsym=d>>>4;if(!d)throw"invalid distance";if(pos+=15&d,dt=fd[dsym],dsym>3&&(b=fdeb[dsym],dt+=bits16(dat,pos)&(1<<b)-1,pos+=b),pos>tbts)throw"unexpected EOF";noBuf&&cbuf(bt+131072);for(var end=bt+add;bt<end;bt+=4)buf[bt]=buf[bt-dt],buf[bt+1]=buf[bt+1-dt],buf[bt+2]=buf[bt+2-dt],buf[bt+3]=buf[bt+3-dt];bt=end}}st.l=lm,st.p=pos,st.b=bt,lm&&(final=1,st.m=lbt,st.d=dm,st.n=dbt)}while(!final);return bt==buf.length?buf:slc(buf,0,bt)}((function(d){if(8!=(15&d[0])||d[0]>>>4>7||(d[0]<<8|d[1])%31)throw"invalid zlib data";if(32&d[1])throw"invalid zlib data: preset dictionaries not supported"}(data),data.subarray(2,-4)),out)}
/**
   * @license
   * jsPDF filters PlugIn
   * Copyright (c) 2014 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */!function(jsPDFAPI){var ASCII85Encode=function(a){var b,c,d,e,f,g,h,i,j,k;for(/[^\x00-\xFF]/.test(a),c=[],d=0,e=(a+=b="\0\0\0\0".slice(a.length%4||4)).length;e>d;d+=4)0!==(f=(a.charCodeAt(d)<<24)+(a.charCodeAt(d+1)<<16)+(a.charCodeAt(d+2)<<8)+a.charCodeAt(d+3))?(g=(f=((f=((f=((f=(f-(k=f%85))/85)-(j=f%85))/85)-(i=f%85))/85)-(h=f%85))/85)%85,c.push(g+33,h+33,i+33,j+33,k+33)):c.push(122);return function(a,b){for(var c=b;c>0;c--)a.pop()}(c,b.length),String.fromCharCode.apply(String,c)+"~>"},ASCII85Decode=function(a){var c,d,e,f,g,h=String,l="length",w=255,x="charCodeAt",y="slice",z="replace";for(a[y](-2),a=a[y](0,-2)[z](/\s/g,"")[z]("z","!!!!!"),e=[],f=0,g=(a+=c="uuuuu"[y](a[l]%5||5))[l];g>f;f+=5)d=52200625*(a[x](f)-33)+614125*(a[x](f+1)-33)+7225*(a[x](f+2)-33)+85*(a[x](f+3)-33)+(a[x](f+4)-33),e.push(w&d>>24,w&d>>16,w&d>>8,w&d);return function(a,b){for(var c=b;c>0;c--)a.pop()}(e,c[l]),h.fromCharCode.apply(h,e)},ASCIIHexDecode=function(value){var regexCheckIfHex=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(value=value.replace(/\s/g,"")).indexOf(">")&&(value=value.substr(0,value.indexOf(">"))),value.length%2&&(value+="0"),!1===regexCheckIfHex.test(value))return"";for(var result="",i=0;i<value.length;i+=2)result+=String.fromCharCode("0x"+(value[i]+value[i+1]));return result},FlateEncode=function(data){for(var arr=new Uint8Array(data.length),i=data.length;i--;)arr[i]=data.charCodeAt(i);return data=(arr=zlibSync(arr)).reduce((function(data,byte){return data+String.fromCharCode(byte)}),"")};jsPDFAPI.processDataByFilters=function(origData,filterChain){var i=0,data=origData||"",reverseChain=[];for("string"==typeof(filterChain=filterChain||[])&&(filterChain=[filterChain]),i=0;i<filterChain.length;i+=1)switch(filterChain[i]){case"ASCII85Decode":case"/ASCII85Decode":data=ASCII85Decode(data),reverseChain.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":data=ASCII85Encode(data),reverseChain.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":data=ASCIIHexDecode(data),reverseChain.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":data=data.split("").map((function(value){return("0"+value.charCodeAt().toString(16)).slice(-2)})).join("")+">",reverseChain.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":data=FlateEncode(data),reverseChain.push("/FlateDecode");break;default:throw new Error('The filter: "'+filterChain[i]+'" is not implemented')}return{data:data,reverseChain:reverseChain.reverse().join(" ")}}}(jsPDF.API),
/**
   * @license
   * jsPDF fileloading PlugIn
   * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){jsPDFAPI.loadFile=function(url,sync,callback){return function(url,sync,callback){sync=!1!==sync,callback="function"==typeof callback?callback:function(){};var result=void 0,xhr=function(url,sync,callback){var request=new XMLHttpRequest,i=0,sanitizeUnicode=function(data){var dataLength=data.length,charArray=[],StringFromCharCode=String.fromCharCode;for(i=0;i<dataLength;i+=1)charArray.push(StringFromCharCode(255&data.charCodeAt(i)));return charArray.join("")};if(request.open("GET",url,!sync),request.overrideMimeType("text/plain; charset=x-user-defined"),!1===sync&&(request.onload=function(){200===request.status?callback(sanitizeUnicode(this.responseText)):callback(void 0)}),request.send(null),sync&&200===request.status)return sanitizeUnicode(request.responseText)};try{result=xhr(url,sync,callback)}catch(e){}return result}(url,sync,callback)},jsPDFAPI.loadImageFile=jsPDFAPI.loadFile}(jsPDF.API),function(jsPDFAPI){function loadHtml2Canvas(){return(globalObject.html2canvas?Promise.resolve(globalObject.html2canvas):"object"===(void 0===exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?new Promise((function(resolve,reject){try{resolve(require("html2canvas"))}catch(e){reject(e)}})):"function"==typeof define&&define.amd?new Promise((function(resolve,reject){try{require(["html2canvas"],resolve)}catch(e){reject(e)}})):Promise.reject(new Error("Could not load html2canvas"))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(html2canvas){return html2canvas.default?html2canvas.default:html2canvas}))}function loadDomPurify(){return(globalObject.DOMPurify?Promise.resolve(globalObject.DOMPurify):"object"===(void 0===exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?new Promise((function(resolve,reject){try{resolve(require("dompurify"))}catch(e){reject(e)}})):"function"==typeof define&&define.amd?new Promise((function(resolve,reject){try{require(["dompurify"],resolve)}catch(e){reject(e)}})):Promise.reject(new Error("Could not load dompurify"))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(dompurify){return dompurify.default?dompurify.default:dompurify}))}var objType=function(obj){var type=_typeof(obj);return"undefined"===type?"undefined":"string"===type||obj instanceof String?"string":"number"===type||obj instanceof Number?"number":"function"===type||obj instanceof Function?"function":obj&&obj.constructor===Array?"array":obj&&1===obj.nodeType?"element":"object"===type?"object":"unknown"},createElement=function(tagName,opt){var el=document.createElement(tagName);for(var key in opt.className&&(el.className=opt.className),opt.innerHTML&&opt.dompurify&&(el.innerHTML=opt.dompurify.sanitize(opt.innerHTML)),opt.style)el.style[key]=opt.style[key];return el},cloneNode=function cloneNode(node,javascriptEnabled){for(var clone=3===node.nodeType?document.createTextNode(node.nodeValue):node.cloneNode(!1),child=node.firstChild;child;child=child.nextSibling)!0!==javascriptEnabled&&1===child.nodeType&&"SCRIPT"===child.nodeName||clone.appendChild(cloneNode(child,javascriptEnabled));return 1===node.nodeType&&("CANVAS"===node.nodeName?(clone.width=node.width,clone.height=node.height,clone.getContext("2d").drawImage(node,0,0)):"TEXTAREA"!==node.nodeName&&"SELECT"!==node.nodeName||(clone.value=node.value),clone.addEventListener("load",(function(){clone.scrollTop=node.scrollTop,clone.scrollLeft=node.scrollLeft}),!0)),clone},Worker=function Worker(opt){var root=Object.assign(Worker.convert(Promise.resolve()),JSON.parse(JSON.stringify(Worker.template))),self=Worker.convert(Promise.resolve(),root);return self=(self=self.setProgress(1,Worker,1,[Worker])).set(opt)};(Worker.prototype=Object.create(Promise.prototype)).constructor=Worker,Worker.convert=function(promise,inherit){return promise.__proto__=inherit||Worker.prototype,promise},Worker.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Worker.prototype.from=function(src,type){return this.then((function(){switch(type=type||function(src){switch(objType(src)){case"string":return"string";case"element":return"canvas"===src.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(src),type){case"string":return this.then(loadDomPurify).then((function(dompurify){return this.set({src:createElement("div",{innerHTML:src,dompurify:dompurify})})}));case"element":return this.set({src:src});case"canvas":return this.set({canvas:src});case"img":return this.set({img:src});default:return this.error("Unknown source type.")}}))},Worker.prototype.to=function(target){switch(target){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Worker.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var containerCSS={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},source=cloneNode(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===source.tagName&&(containerCSS.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=createElement("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=createElement("div",{className:"html2pdf__container",style:containerCSS}),this.prop.container.appendChild(source),this.prop.container.firstChild.appendChild(createElement("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},Worker.prototype.toCanvas=function(){var prereqs=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(prereqs).then(loadHtml2Canvas).then((function(html2canvas){var options=Object.assign({},this.opt.html2canvas);return delete options.onrendered,html2canvas(this.prop.container,options)})).then((function(canvas){(this.opt.html2canvas.onrendered||function(){})(canvas),this.prop.canvas=canvas,document.body.removeChild(this.prop.overlay)}))},Worker.prototype.toContext2d=function(){var prereqs=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(prereqs).then(loadHtml2Canvas).then((function(html2canvas){var pdf=this.opt.jsPDF,fontFaces=this.opt.fontFaces,scale="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,options=Object.assign({async:!0,allowTaint:!0,scale:scale,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete options.onrendered,pdf.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,pdf.context2d.posX=this.opt.x,pdf.context2d.posY=this.opt.y,pdf.context2d.margin=this.opt.margin,pdf.context2d.fontFaces=fontFaces,fontFaces)for(var i=0;i<fontFaces.length;++i){var font=fontFaces[i],src=font.src.find((function(src){return"truetype"===src.format}));src&&pdf.addFont(src.url,font.ref.name,font.ref.style)}return options.windowHeight=options.windowHeight||0,options.windowHeight=0==options.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):options.windowHeight,pdf.context2d.save(!0),html2canvas(this.prop.container,options)})).then((function(canvas){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(canvas),this.prop.canvas=canvas,document.body.removeChild(this.prop.overlay)}))},Worker.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var imgData=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=imgData}))},Worker.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},Worker.prototype.output=function(type,options,src){return"img"===(src=src||"pdf").toLowerCase()||"image"===src.toLowerCase()?this.outputImg(type,options):this.outputPdf(type,options)},Worker.prototype.outputPdf=function(type,options){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(type,options)}))},Worker.prototype.outputImg=function(type){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(type){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+type+'" is not supported.'}}))},Worker.prototype.save=function(filename){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(filename?{filename:filename}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},Worker.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},Worker.prototype.set=function(opt){if("object"!==objType(opt))return this;var fns=Object.keys(opt||{}).map((function(key){if(key in Worker.template.prop)return function(){this.prop[key]=opt[key]};switch(key){case"margin":return this.setMargin.bind(this,opt.margin);case"jsPDF":return function(){return this.opt.jsPDF=opt.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,opt.pageSize);default:return function(){this.opt[key]=opt[key]}}}),this);return this.then((function(){return this.thenList(fns)}))},Worker.prototype.get=function(key,cbk){return this.then((function(){var val=key in Worker.template.prop?this.prop[key]:this.opt[key];return cbk?cbk(val):val}))},Worker.prototype.setMargin=function(margin){return this.then((function(){switch(objType(margin)){case"number":margin=[margin,margin,margin,margin];case"array":if(2===margin.length&&(margin=[margin[0],margin[1],margin[0],margin[1]]),4===margin.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=margin})).then(this.setPageSize)},Worker.prototype.setPageSize=function(pageSize){function toPx(val,k){return Math.floor(val*k/72*96)}return this.then((function(){(pageSize=pageSize||jsPDF.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(pageSize.inner={width:pageSize.width-this.opt.margin[1]-this.opt.margin[3],height:pageSize.height-this.opt.margin[0]-this.opt.margin[2]},pageSize.inner.px={width:toPx(pageSize.inner.width,pageSize.k),height:toPx(pageSize.inner.height,pageSize.k)},pageSize.inner.ratio=pageSize.inner.height/pageSize.inner.width),this.prop.pageSize=pageSize}))},Worker.prototype.setProgress=function(val,state,n,stack){return null!=val&&(this.progress.val=val),null!=state&&(this.progress.state=state),null!=n&&(this.progress.n=n),null!=stack&&(this.progress.stack=stack),this.progress.ratio=this.progress.val/this.progress.state,this},Worker.prototype.updateProgress=function(val,state,n,stack){return this.setProgress(val?this.progress.val+val:null,state||null,n?this.progress.n+n:null,stack?this.progress.stack.concat(stack):null)},Worker.prototype.then=function(onFulfilled,onRejected){var self=this;return this.thenCore(onFulfilled,onRejected,(function(onFulfilled,onRejected){return self.updateProgress(null,null,1,[onFulfilled]),Promise.prototype.then.call(this,(function(val){return self.updateProgress(null,onFulfilled),val})).then(onFulfilled,onRejected).then((function(val){return self.updateProgress(1),val}))}))},Worker.prototype.thenCore=function(onFulfilled,onRejected,thenBase){thenBase=thenBase||Promise.prototype.then;onFulfilled&&(onFulfilled=onFulfilled.bind(this)),onRejected&&(onRejected=onRejected.bind(this));var selfPromise=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:Worker.convert(Object.assign({},this),Promise.prototype),returnVal=thenBase.call(selfPromise,onFulfilled,onRejected);return Worker.convert(returnVal,this.__proto__)},Worker.prototype.thenExternal=function(onFulfilled,onRejected){return Promise.prototype.then.call(this,onFulfilled,onRejected)},Worker.prototype.thenList=function(fns){var self=this;return fns.forEach((function(fn){self=self.thenCore(fn)})),self},Worker.prototype.catch=function(onRejected){onRejected&&(onRejected=onRejected.bind(this));var returnVal=Promise.prototype.catch.call(this,onRejected);return Worker.convert(returnVal,this)},Worker.prototype.catchExternal=function(onRejected){return Promise.prototype.catch.call(this,onRejected)},Worker.prototype.error=function(msg){return this.then((function(){throw new Error(msg)}))},Worker.prototype.using=Worker.prototype.set,Worker.prototype.saveAs=Worker.prototype.save,Worker.prototype.export=Worker.prototype.output,Worker.prototype.run=Worker.prototype.then,jsPDF.getPageSize=function(orientation,unit,format){if("object"===_typeof(orientation)){var options=orientation;orientation=options.orientation,unit=options.unit||unit,format=options.format||format}unit=unit||"mm",format=format||"a4",orientation=(""+(orientation||"P")).toLowerCase();var k,format_as_string=(""+format).toLowerCase(),pageFormats={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(unit){case"pt":k=1;break;case"mm":k=72/25.4;break;case"cm":k=72/2.54;break;case"in":k=72;break;case"px":k=.75;break;case"pc":case"em":k=12;break;case"ex":k=6;break;default:throw"Invalid unit: "+unit}var tmp,pageHeight=0,pageWidth=0;if(pageFormats.hasOwnProperty(format_as_string))pageHeight=pageFormats[format_as_string][1]/k,pageWidth=pageFormats[format_as_string][0]/k;else try{pageHeight=format[1],pageWidth=format[0]}catch(err){throw new Error("Invalid format: "+format)}if("p"===orientation||"portrait"===orientation)orientation="p",pageWidth>pageHeight&&(tmp=pageWidth,pageWidth=pageHeight,pageHeight=tmp);else{if("l"!==orientation&&"landscape"!==orientation)throw"Invalid orientation: "+orientation;orientation="l",pageHeight>pageWidth&&(tmp=pageWidth,pageWidth=pageHeight,pageHeight=tmp)}return{width:pageWidth,height:pageHeight,unit:unit,k:k,orientation:orientation}},jsPDFAPI.html=function(src,options){(options=options||{}).callback=options.callback||function(){},options.html2canvas=options.html2canvas||{},options.html2canvas.canvas=options.html2canvas.canvas||this.canvas,options.jsPDF=options.jsPDF||this,options.fontFaces=options.fontFaces?options.fontFaces.map(normalizeFontFace):null;var worker=new Worker(options);return options.worker?worker:worker.from(src).doCallback()}}(jsPDF.API),
/**
   * @license
   * ====================================================================
   * Copyright (c) 2013 Youssef Beddad, youssef.beddad@gmail.com
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */
function(jsPDFAPI){var jsNamesObj,jsJsObj,text;jsPDFAPI.addJS=function(javascript){return text=javascript,this.internal.events.subscribe("postPutResources",(function(){jsNamesObj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(jsNamesObj+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jsJsObj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+text+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==jsNamesObj&&void 0!==jsJsObj&&this.internal.out("/Names <</JavaScript "+jsNamesObj+" 0 R>>")})),this}}(jsPDF.API),
/**
   * @license
   * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){var namesOid;jsPDFAPI.events.push(["postPutResources",function(){var pdf=this,rx=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var lines=pdf.outline.render().split(/\r\n/),i=0;i<lines.length;i++){var line=lines[i],m=rx.exec(line);if(null!=m){var oid=m[1];pdf.internal.newObjectDeferredBegin(oid,!1)}pdf.internal.write(line)}if(this.outline.createNamedDestinations){var totalPages=this.internal.pages.length,dests=[];for(i=0;i<totalPages;i++){var id=pdf.internal.newObject();dests.push(id);var info=pdf.internal.getPageInfo(i+1);pdf.internal.write("<< /D["+info.objId+" 0 R /XYZ null null null]>> endobj")}var names2Oid=pdf.internal.newObject();pdf.internal.write("<< /Names [ ");for(i=0;i<dests.length;i++)pdf.internal.write("(page_"+(i+1)+")"+dests[i]+" 0 R");pdf.internal.write(" ] >>","endobj"),namesOid=pdf.internal.newObject(),pdf.internal.write("<< /Dests "+names2Oid+" 0 R"),pdf.internal.write(">>","endobj")}}]),jsPDFAPI.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+namesOid+" 0 R"))}]),jsPDFAPI.events.push(["initialized",function(){var pdf=this;pdf.outline={createNamedDestinations:!1,root:{children:[]}},pdf.outline.add=function(parent,title,options){var item={title:title,options:options,children:[]};return null==parent&&(parent=this.root),parent.children.push(item),item},pdf.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=pdf,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},pdf.outline.genIds_r=function(node){node.id=pdf.internal.newObjectDeferred();for(var i=0;i<node.children.length;i++)this.genIds_r(node.children[i])},pdf.outline.renderRoot=function(node){this.objStart(node),this.line("/Type /Outlines"),node.children.length>0&&(this.line("/First "+this.makeRef(node.children[0])),this.line("/Last "+this.makeRef(node.children[node.children.length-1]))),this.line("/Count "+this.count_r({count:0},node)),this.objEnd()},pdf.outline.renderItems=function(node){for(var getVerticalCoordinateString=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<node.children.length;i++){var item=node.children[i];this.objStart(item),this.line("/Title "+this.makeString(item.title)),this.line("/Parent "+this.makeRef(node)),i>0&&this.line("/Prev "+this.makeRef(node.children[i-1])),i<node.children.length-1&&this.line("/Next "+this.makeRef(node.children[i+1])),item.children.length>0&&(this.line("/First "+this.makeRef(item.children[0])),this.line("/Last "+this.makeRef(item.children[item.children.length-1])));var count=this.count=this.count_r({count:0},item);if(count>0&&this.line("/Count "+count),item.options&&item.options.pageNumber){var info=pdf.internal.getPageInfo(item.options.pageNumber);this.line("/Dest ["+info.objId+" 0 R /XYZ 0 "+getVerticalCoordinateString(0)+" 0]")}this.objEnd()}for(var z=0;z<node.children.length;z++)this.renderItems(node.children[z])},pdf.outline.line=function(text){this.ctx.val+=text+"\r\n"},pdf.outline.makeRef=function(node){return node.id+" 0 R"},pdf.outline.makeString=function(val){return"("+pdf.internal.pdfEscape(val)+")"},pdf.outline.objStart=function(node){this.ctx.val+="\r\n"+node.id+" 0 obj\r\n<<\r\n"},pdf.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},pdf.outline.count_r=function(ctx,node){for(var i=0;i<node.children.length;i++)ctx.count++,this.count_r(ctx,node.children[i]);return ctx.count}}])}(jsPDF.API),
/**
   * @license
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){var markers=[192,193,194,195,196,197,198,199];jsPDFAPI.processJPEG=function(data,index,alias,compression,dataAsBinaryString,colorSpace){var dims,filter=this.decode.DCT_DECODE,result=null;if("string"==typeof data||this.__addimage__.isArrayBuffer(data)||this.__addimage__.isArrayBufferView(data)){switch(data=dataAsBinaryString||data,data=this.__addimage__.isArrayBuffer(data)?new Uint8Array(data):data,dims=function(imgData){for(var height,blockLength=256*imgData.charCodeAt(4)+imgData.charCodeAt(5),len=imgData.length,result={width:0,height:0,numcomponents:1},i=4;i<len;i+=2){if(i+=blockLength,-1!==markers.indexOf(imgData.charCodeAt(i+1))){height=256*imgData.charCodeAt(i+5)+imgData.charCodeAt(i+6),result={width:256*imgData.charCodeAt(i+7)+imgData.charCodeAt(i+8),height:height,numcomponents:imgData.charCodeAt(i+9)};break}blockLength=256*imgData.charCodeAt(i+2)+imgData.charCodeAt(i+3)}return result}(data=this.__addimage__.isArrayBufferView(data)?this.__addimage__.arrayBufferToBinaryString(data):data),dims.numcomponents){case 1:colorSpace=this.color_spaces.DEVICE_GRAY;break;case 4:colorSpace=this.color_spaces.DEVICE_CMYK;break;case 3:colorSpace=this.color_spaces.DEVICE_RGB}result={data:data,width:dims.width,height:dims.height,colorSpace:colorSpace,bitsPerComponent:8,filter:filter,index:index,alias:alias}}return result}}(jsPDF.API);var API,getCharWidthsArray,getStringUnitWidth,splitLongWord,splitParagraphIntoLines,PNG=function(){var makeImage,scratchCanvas,scratchCtx;function PNG(data){var chunkSize,colors,palLen,delayDen,delayNum,frame,index,key,section,palShort,text,_i,_j,_ref;for(this.data=data,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},frame=null;;){switch(chunkSize=this.readUInt32(),section=function(){var _i,_results;for(_results=[],_i=0;_i<4;++_i)_results.push(String.fromCharCode(this.data[this.pos++]));return _results}.call(this).join(""),section){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(chunkSize);break;case"fcTL":frame&&this.animation.frames.push(frame),this.pos+=4,frame={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},delayNum=this.readUInt16(),delayDen=this.readUInt16()||100,frame.delay=1e3*delayNum/delayDen,frame.disposeOp=this.data[this.pos++],frame.blendOp=this.data[this.pos++],frame.data=[];break;case"IDAT":case"fdAT":for("fdAT"===section&&(this.pos+=4,chunkSize-=4),data=(null!=frame?frame.data:void 0)||this.imgData,_i=0;0<=chunkSize?_i<chunkSize:_i>chunkSize;0<=chunkSize?++_i:--_i)data.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(palLen=this.palette.length/3,this.transparency.indexed=this.read(chunkSize),this.transparency.indexed.length>palLen)throw new Error("More transparent colors than palette size");if((palShort=palLen-this.transparency.indexed.length)>0)for(_j=0;0<=palShort?_j<palShort:_j>palShort;0<=palShort?++_j:--_j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(chunkSize)[0];break;case 2:this.transparency.rgb=this.read(chunkSize)}break;case"tEXt":index=(text=this.read(chunkSize)).indexOf(0),key=String.fromCharCode.apply(String,text.slice(0,index)),this.text[key]=String.fromCharCode.apply(String,text.slice(index+1));break;case"IEND":return frame&&this.animation.frames.push(frame),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(_ref=this.colorType)||6===_ref,colors=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*colors,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=chunkSize}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}PNG.prototype.read=function(bytes){var _i,_results;for(_results=[],_i=0;0<=bytes?_i<bytes:_i>bytes;0<=bytes?++_i:--_i)_results.push(this.data[this.pos++]);return _results},PNG.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},PNG.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},PNG.prototype.decodePixels=function(data){var pixelBytes=this.pixelBitlength/8,fullPixels=new Uint8Array(this.width*this.height*pixelBytes),pos=0,_this=this;if(null==data&&(data=this.imgData),0===data.length)return new Uint8Array(0);function pass(x0,y0,dx,dy){var abyte,c,col,i,left,length,p,pa,paeth,pb,pc,pixels,row,scanlineLength,upper,upperLeft,_i,_j,_k,_l,_m,w=Math.ceil((_this.width-x0)/dx),h=Math.ceil((_this.height-y0)/dy),isFull=_this.width==w&&_this.height==h;for(scanlineLength=pixelBytes*w,pixels=isFull?fullPixels:new Uint8Array(scanlineLength*h),length=data.length,row=0,c=0;row<h&&pos<length;){switch(data[pos++]){case 0:for(i=_i=0;_i<scanlineLength;i=_i+=1)pixels[c++]=data[pos++];break;case 1:for(i=_j=0;_j<scanlineLength;i=_j+=1)abyte=data[pos++],left=i<pixelBytes?0:pixels[c-pixelBytes],pixels[c++]=(abyte+left)%256;break;case 2:for(i=_k=0;_k<scanlineLength;i=_k+=1)abyte=data[pos++],col=(i-i%pixelBytes)/pixelBytes,upper=row&&pixels[(row-1)*scanlineLength+col*pixelBytes+i%pixelBytes],pixels[c++]=(upper+abyte)%256;break;case 3:for(i=_l=0;_l<scanlineLength;i=_l+=1)abyte=data[pos++],col=(i-i%pixelBytes)/pixelBytes,left=i<pixelBytes?0:pixels[c-pixelBytes],upper=row&&pixels[(row-1)*scanlineLength+col*pixelBytes+i%pixelBytes],pixels[c++]=(abyte+Math.floor((left+upper)/2))%256;break;case 4:for(i=_m=0;_m<scanlineLength;i=_m+=1)abyte=data[pos++],col=(i-i%pixelBytes)/pixelBytes,left=i<pixelBytes?0:pixels[c-pixelBytes],0===row?upper=upperLeft=0:(upper=pixels[(row-1)*scanlineLength+col*pixelBytes+i%pixelBytes],upperLeft=col&&pixels[(row-1)*scanlineLength+(col-1)*pixelBytes+i%pixelBytes]),p=left+upper-upperLeft,pa=Math.abs(p-left),pb=Math.abs(p-upper),pc=Math.abs(p-upperLeft),paeth=pa<=pb&&pa<=pc?left:pb<=pc?upper:upperLeft,pixels[c++]=(abyte+paeth)%256;break;default:throw new Error("Invalid filter algorithm: "+data[pos-1])}if(!isFull){var fullPos=((y0+row*dy)*_this.width+x0)*pixelBytes,partPos=row*scanlineLength;for(i=0;i<w;i+=1){for(var j=0;j<pixelBytes;j+=1)fullPixels[fullPos++]=pixels[partPos++];fullPos+=(dx-1)*pixelBytes}}row++}}return data=unzlibSync(data),1==_this.interlaceMethod?(pass(0,0,8,8),pass(4,0,8,8),pass(0,4,4,8),pass(2,0,4,4),pass(0,2,2,4),pass(1,0,2,2),pass(0,1,1,2)):pass(0,0,1,1),fullPixels},PNG.prototype.decodePalette=function(){var c,i,palette,pos,ret,transparency,_i,_ref,_ref1;for(palette=this.palette,transparency=this.transparency.indexed||[],ret=new Uint8Array((transparency.length||0)+palette.length),pos=0,c=0,i=_i=0,_ref=palette.length;_i<_ref;i=_i+=3)ret[pos++]=palette[i],ret[pos++]=palette[i+1],ret[pos++]=palette[i+2],ret[pos++]=null!=(_ref1=transparency[c++])?_ref1:255;return ret},PNG.prototype.copyToImageData=function(imageData,pixels){var alpha,colors,data,i,input,j,k,length,palette,v,_ref;if(colors=this.colors,palette=null,alpha=this.hasAlphaChannel,this.palette.length&&(palette=null!=(_ref=this._decodedPalette)?_ref:this._decodedPalette=this.decodePalette(),colors=4,alpha=!0),length=(data=imageData.data||imageData).length,input=palette||pixels,i=j=0,1===colors)for(;i<length;)k=palette?4*pixels[i/4]:j,v=input[k++],data[i++]=v,data[i++]=v,data[i++]=v,data[i++]=alpha?input[k++]:255,j=k;else for(;i<length;)k=palette?4*pixels[i/4]:j,data[i++]=input[k++],data[i++]=input[k++],data[i++]=input[k++],data[i++]=alpha?input[k++]:255,j=k},PNG.prototype.decode=function(){var ret;return ret=new Uint8Array(this.width*this.height*4),this.copyToImageData(ret,this.decodePixels()),ret};var hasBrowserCanvas=function(){if("[object Window]"===Object.prototype.toString.call(globalObject)){try{scratchCanvas=globalObject.document.createElement("canvas"),scratchCtx=scratchCanvas.getContext("2d")}catch(e){return!1}return!0}return!1};return hasBrowserCanvas(),makeImage=function(imageData){var img;if(!0===hasBrowserCanvas())return scratchCtx.width=imageData.width,scratchCtx.height=imageData.height,scratchCtx.clearRect(0,0,imageData.width,imageData.height),scratchCtx.putImageData(imageData,0,0),(img=new Image).src=scratchCanvas.toDataURL(),img;throw new Error("This method requires a Browser with Canvas-capability.")},PNG.prototype.decodeFrames=function(ctx){var frame,i,imageData,pixels,_i,_len,_ref,_results;if(this.animation){for(_results=[],i=_i=0,_len=(_ref=this.animation.frames).length;_i<_len;i=++_i)frame=_ref[i],imageData=ctx.createImageData(frame.width,frame.height),pixels=this.decodePixels(new Uint8Array(frame.data)),this.copyToImageData(imageData,pixels),frame.imageData=imageData,_results.push(frame.image=makeImage(imageData));return _results}},PNG.prototype.renderFrame=function(ctx,number){var frame,frames,prev;return frame=(frames=this.animation.frames)[number],prev=frames[number-1],0===number&&ctx.clearRect(0,0,this.width,this.height),1===(null!=prev?prev.disposeOp:void 0)?ctx.clearRect(prev.xOffset,prev.yOffset,prev.width,prev.height):2===(null!=prev?prev.disposeOp:void 0)&&ctx.putImageData(prev.imageData,prev.xOffset,prev.yOffset),0===frame.blendOp&&ctx.clearRect(frame.xOffset,frame.yOffset,frame.width,frame.height),ctx.drawImage(frame.image,frame.xOffset,frame.yOffset)},PNG.prototype.animate=function(ctx){var _doFrame,frameNumber,frames,numFrames,numPlays,_ref,_this=this;return frameNumber=0,_ref=this.animation,numFrames=_ref.numFrames,frames=_ref.frames,numPlays=_ref.numPlays,(_doFrame=function(){var f,frame;if(f=frameNumber++%numFrames,frame=frames[f],_this.renderFrame(ctx,f),numFrames>1&&frameNumber/numFrames<numPlays)return _this.animation._timeout=setTimeout(_doFrame,frame.delay)})()},PNG.prototype.stopAnimation=function(){var _ref;return clearTimeout(null!=(_ref=this.animation)?_ref._timeout:void 0)},PNG.prototype.render=function(canvas){var ctx,data;return canvas._png&&canvas._png.stopAnimation(),canvas._png=this,canvas.width=this.width,canvas.height=this.height,ctx=canvas.getContext("2d"),this.animation?(this.decodeFrames(ctx),this.animate(ctx)):(data=ctx.createImageData(this.width,this.height),this.copyToImageData(data,this.decodePixels()),ctx.putImageData(data,0,0))},PNG}();
/**
   * @license
   *
   * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */
/**
   * @license
   * (c) Dean McNamee <dean@gmail.com>, 2013.
   *
   * https://github.com/deanm/omggif
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to
   * deal in the Software without restriction, including without limitation the
   * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
   * sell copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
   * IN THE SOFTWARE.
   *
   * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
   * including animation and compression.  It does not rely on any specific
   * underlying system, so should run in the browser, Node, or Plask.
   */
function GifReader(buf){var p=0;if(71!==buf[p++]||73!==buf[p++]||70!==buf[p++]||56!==buf[p++]||56!=(buf[p++]+1&253)||97!==buf[p++])throw new Error("Invalid GIF 87a/89a header.");var width=buf[p++]|buf[p++]<<8,height=buf[p++]|buf[p++]<<8,pf0=buf[p++],global_palette_flag=pf0>>7,num_global_colors=1<<(7&pf0)+1;buf[p++];buf[p++];var global_palette_offset=null,global_palette_size=null;global_palette_flag&&(global_palette_offset=p,global_palette_size=num_global_colors,p+=3*num_global_colors);var no_eof=!0,frames=[],delay=0,transparent_index=null,disposal=0,loop_count=null;for(this.width=width,this.height=height;no_eof&&p<buf.length;)switch(buf[p++]){case 33:switch(buf[p++]){case 255:if(11!==buf[p]||78==buf[p+1]&&69==buf[p+2]&&84==buf[p+3]&&83==buf[p+4]&&67==buf[p+5]&&65==buf[p+6]&&80==buf[p+7]&&69==buf[p+8]&&50==buf[p+9]&&46==buf[p+10]&&48==buf[p+11]&&3==buf[p+12]&&1==buf[p+13]&&0==buf[p+16])p+=14,loop_count=buf[p++]|buf[p++]<<8,p++;else for(p+=12;;){if(!((block_size=buf[p++])>=0))throw Error("Invalid block size");if(0===block_size)break;p+=block_size}break;case 249:if(4!==buf[p++]||0!==buf[p+4])throw new Error("Invalid graphics extension block.");var pf1=buf[p++];delay=buf[p++]|buf[p++]<<8,transparent_index=buf[p++],0==(1&pf1)&&(transparent_index=null),disposal=pf1>>2&7,p++;break;case 254:for(;;){if(!((block_size=buf[p++])>=0))throw Error("Invalid block size");if(0===block_size)break;p+=block_size}break;default:throw new Error("Unknown graphic control label: 0x"+buf[p-1].toString(16))}break;case 44:var x=buf[p++]|buf[p++]<<8,y=buf[p++]|buf[p++]<<8,w=buf[p++]|buf[p++]<<8,h=buf[p++]|buf[p++]<<8,pf2=buf[p++],interlace_flag=pf2>>6&1,num_local_colors=1<<(7&pf2)+1,palette_offset=global_palette_offset,palette_size=global_palette_size,has_local_palette=!1;if(pf2>>7){has_local_palette=!0;palette_offset=p,palette_size=num_local_colors,p+=3*num_local_colors}var data_offset=p;for(p++;;){var block_size;if(!((block_size=buf[p++])>=0))throw Error("Invalid block size");if(0===block_size)break;p+=block_size}frames.push({x:x,y:y,width:w,height:h,has_local_palette:has_local_palette,palette_offset:palette_offset,palette_size:palette_size,data_offset:data_offset,data_length:p-data_offset,transparent_index:transparent_index,interlaced:!!interlace_flag,delay:delay,disposal:disposal});break;case 59:no_eof=!1;break;default:throw new Error("Unknown gif block: 0x"+buf[p-1].toString(16))}this.numFrames=function(){return frames.length},this.loopCount=function(){return loop_count},this.frameInfo=function(frame_num){if(frame_num<0||frame_num>=frames.length)throw new Error("Frame index out of range.");return frames[frame_num]},this.decodeAndBlitFrameBGRA=function(frame_num,pixels){var frame=this.frameInfo(frame_num),num_pixels=frame.width*frame.height,index_stream=new Uint8Array(num_pixels);GifReaderLZWOutputIndexStream(buf,frame.data_offset,index_stream,num_pixels);var palette_offset=frame.palette_offset,trans=frame.transparent_index;null===trans&&(trans=256);var framewidth=frame.width,framestride=width-framewidth,xleft=framewidth,opbeg=4*(frame.y*width+frame.x),opend=4*((frame.y+frame.height)*width+frame.x),op=opbeg,scanstride=4*framestride;!0===frame.interlaced&&(scanstride+=4*width*7);for(var interlaceskip=8,i=0,il=index_stream.length;i<il;++i){var index=index_stream[i];if(0===xleft&&(xleft=framewidth,(op+=scanstride)>=opend&&(scanstride=4*framestride+4*width*(interlaceskip-1),op=opbeg+(framewidth+framestride)*(interlaceskip<<1),interlaceskip>>=1)),index===trans)op+=4;else{var r=buf[palette_offset+3*index],g=buf[palette_offset+3*index+1],b=buf[palette_offset+3*index+2];pixels[op++]=b,pixels[op++]=g,pixels[op++]=r,pixels[op++]=255}--xleft}},this.decodeAndBlitFrameRGBA=function(frame_num,pixels){var frame=this.frameInfo(frame_num),num_pixels=frame.width*frame.height,index_stream=new Uint8Array(num_pixels);GifReaderLZWOutputIndexStream(buf,frame.data_offset,index_stream,num_pixels);var palette_offset=frame.palette_offset,trans=frame.transparent_index;null===trans&&(trans=256);var framewidth=frame.width,framestride=width-framewidth,xleft=framewidth,opbeg=4*(frame.y*width+frame.x),opend=4*((frame.y+frame.height)*width+frame.x),op=opbeg,scanstride=4*framestride;!0===frame.interlaced&&(scanstride+=4*width*7);for(var interlaceskip=8,i=0,il=index_stream.length;i<il;++i){var index=index_stream[i];if(0===xleft&&(xleft=framewidth,(op+=scanstride)>=opend&&(scanstride=4*framestride+4*width*(interlaceskip-1),op=opbeg+(framewidth+framestride)*(interlaceskip<<1),interlaceskip>>=1)),index===trans)op+=4;else{var r=buf[palette_offset+3*index],g=buf[palette_offset+3*index+1],b=buf[palette_offset+3*index+2];pixels[op++]=r,pixels[op++]=g,pixels[op++]=b,pixels[op++]=255}--xleft}}}function GifReaderLZWOutputIndexStream(code_stream,p,output,output_length){for(var min_code_size=code_stream[p++],clear_code=1<<min_code_size,eoi_code=clear_code+1,next_code=eoi_code+1,cur_code_size=min_code_size+1,code_mask=(1<<cur_code_size)-1,cur_shift=0,cur=0,op=0,subblock_size=code_stream[p++],code_table=new Int32Array(4096),prev_code=null;;){for(;cur_shift<16&&0!==subblock_size;)cur|=code_stream[p++]<<cur_shift,cur_shift+=8,1===subblock_size?subblock_size=code_stream[p++]:--subblock_size;if(cur_shift<cur_code_size)break;var code=cur&code_mask;if(cur>>=cur_code_size,cur_shift-=cur_code_size,code!==clear_code){if(code===eoi_code)break;for(var chase_code=code<next_code?code:prev_code,chase_length=0,chase=chase_code;chase>clear_code;)chase=code_table[chase]>>8,++chase_length;var k=chase;if(op+chase_length+(chase_code!==code?1:0)>output_length)return void console.log("Warning, gif stream longer than expected.");output[op++]=k;var b=op+=chase_length;for(chase_code!==code&&(output[op++]=k),chase=chase_code;chase_length--;)chase=code_table[chase],output[--b]=255&chase,chase>>=8;null!==prev_code&&next_code<4096&&(code_table[next_code++]=prev_code<<8|k,next_code>=code_mask+1&&cur_code_size<12&&(++cur_code_size,code_mask=code_mask<<1|1)),prev_code=code}else next_code=eoi_code+1,code_mask=(1<<(cur_code_size=min_code_size+1))-1,prev_code=null}return op!==output_length&&console.log("Warning, gif stream shorter than expected."),output}
/**
   * @license
    Copyright (c) 2008, Adobe Systems Incorporated
    All rights reserved.
     Redistribution and use in source and binary forms, with or without 
    modification, are permitted provided that the following conditions are
    met:
     * Redistributions of source code must retain the above copyright notice, 
      this list of conditions and the following disclaimer.
    
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the 
      documentation and/or other materials provided with the distribution.
    
    * Neither the name of Adobe Systems Incorporated nor the names of its 
      contributors may be used to endorse or promote products derived from 
      this software without specific prior written permission.
     THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
    IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
    THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
    PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
    CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
    EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
    PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
    PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
    LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */function JPEGEncoder(quality){var YDC_HT,UVDC_HT,YAC_HT,UVAC_HT,currentQuality,ffloor=Math.floor,YTable=new Array(64),UVTable=new Array(64),fdtbl_Y=new Array(64),fdtbl_UV=new Array(64),bitcode=new Array(65535),category=new Array(65535),outputfDCTQuant=new Array(64),DU=new Array(64),byteout=[],bytenew=0,bytepos=7,YDU=new Array(64),UDU=new Array(64),VDU=new Array(64),clt=new Array(256),RGB_YUV_TABLE=new Array(2048),ZigZag=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],std_dc_luminance_nrcodes=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],std_dc_luminance_values=[0,1,2,3,4,5,6,7,8,9,10,11],std_ac_luminance_nrcodes=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],std_ac_luminance_values=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],std_dc_chrominance_nrcodes=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],std_dc_chrominance_values=[0,1,2,3,4,5,6,7,8,9,10,11],std_ac_chrominance_nrcodes=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],std_ac_chrominance_values=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function computeHuffmanTbl(nrcodes,std_table){for(var codevalue=0,pos_in_table=0,HT=new Array,k=1;k<=16;k++){for(var j=1;j<=nrcodes[k];j++)HT[std_table[pos_in_table]]=[],HT[std_table[pos_in_table]][0]=codevalue,HT[std_table[pos_in_table]][1]=k,pos_in_table++,codevalue++;codevalue*=2}return HT}function writeBits(bs){for(var value=bs[0],posval=bs[1]-1;posval>=0;)value&1<<posval&&(bytenew|=1<<bytepos),posval--,--bytepos<0&&(255==bytenew?(writeByte(255),writeByte(0)):writeByte(bytenew),bytepos=7,bytenew=0)}function writeByte(value){byteout.push(value)}function writeWord(value){writeByte(value>>8&255),writeByte(255&value)}function processDU(CDU,fdtbl,DC,HTDC,HTAC){for(var pos,EOB=HTAC[0],M16zeroes=HTAC[240],DU_DCT=function(data,fdtbl){var d0,d1,d2,d3,d4,d5,d6,d7,i,fDCTQuant,dataOff=0;for(i=0;i<8;++i){d0=data[dataOff],d1=data[dataOff+1],d2=data[dataOff+2],d3=data[dataOff+3],d4=data[dataOff+4],d5=data[dataOff+5],d6=data[dataOff+6];var tmp0=d0+(d7=data[dataOff+7]),tmp7=d0-d7,tmp1=d1+d6,tmp6=d1-d6,tmp2=d2+d5,tmp5=d2-d5,tmp3=d3+d4,tmp4=d3-d4,tmp10=tmp0+tmp3,tmp13=tmp0-tmp3,tmp11=tmp1+tmp2,tmp12=tmp1-tmp2;data[dataOff]=tmp10+tmp11,data[dataOff+4]=tmp10-tmp11;var z1=.707106781*(tmp12+tmp13);data[dataOff+2]=tmp13+z1,data[dataOff+6]=tmp13-z1;var z5=.382683433*((tmp10=tmp4+tmp5)-(tmp12=tmp6+tmp7)),z2=.5411961*tmp10+z5,z4=1.306562965*tmp12+z5,z3=.707106781*(tmp11=tmp5+tmp6),z11=tmp7+z3,z13=tmp7-z3;data[dataOff+5]=z13+z2,data[dataOff+3]=z13-z2,data[dataOff+1]=z11+z4,data[dataOff+7]=z11-z4,dataOff+=8}for(dataOff=0,i=0;i<8;++i){d0=data[dataOff],d1=data[dataOff+8],d2=data[dataOff+16],d3=data[dataOff+24],d4=data[dataOff+32],d5=data[dataOff+40],d6=data[dataOff+48];var tmp0p2=d0+(d7=data[dataOff+56]),tmp7p2=d0-d7,tmp1p2=d1+d6,tmp6p2=d1-d6,tmp2p2=d2+d5,tmp5p2=d2-d5,tmp3p2=d3+d4,tmp4p2=d3-d4,tmp10p2=tmp0p2+tmp3p2,tmp13p2=tmp0p2-tmp3p2,tmp11p2=tmp1p2+tmp2p2,tmp12p2=tmp1p2-tmp2p2;data[dataOff]=tmp10p2+tmp11p2,data[dataOff+32]=tmp10p2-tmp11p2;var z1p2=.707106781*(tmp12p2+tmp13p2);data[dataOff+16]=tmp13p2+z1p2,data[dataOff+48]=tmp13p2-z1p2;var z5p2=.382683433*((tmp10p2=tmp4p2+tmp5p2)-(tmp12p2=tmp6p2+tmp7p2)),z2p2=.5411961*tmp10p2+z5p2,z4p2=1.306562965*tmp12p2+z5p2,z3p2=.707106781*(tmp11p2=tmp5p2+tmp6p2),z11p2=tmp7p2+z3p2,z13p2=tmp7p2-z3p2;data[dataOff+40]=z13p2+z2p2,data[dataOff+24]=z13p2-z2p2,data[dataOff+8]=z11p2+z4p2,data[dataOff+56]=z11p2-z4p2,dataOff++}for(i=0;i<64;++i)fDCTQuant=data[i]*fdtbl[i],outputfDCTQuant[i]=fDCTQuant>0?fDCTQuant+.5|0:fDCTQuant-.5|0;return outputfDCTQuant}(CDU,fdtbl),j=0;j<64;++j)DU[ZigZag[j]]=DU_DCT[j];var Diff=DU[0]-DC;DC=DU[0],0==Diff?writeBits(HTDC[0]):(writeBits(HTDC[category[pos=32767+Diff]]),writeBits(bitcode[pos]));for(var end0pos=63;end0pos>0&&0==DU[end0pos];)end0pos--;if(0==end0pos)return writeBits(EOB),DC;for(var lng,i=1;i<=end0pos;){for(var startpos=i;0==DU[i]&&i<=end0pos;)++i;var nrzeroes=i-startpos;if(nrzeroes>=16){lng=nrzeroes>>4;for(var nrmarker=1;nrmarker<=lng;++nrmarker)writeBits(M16zeroes);nrzeroes&=15}pos=32767+DU[i],writeBits(HTAC[(nrzeroes<<4)+category[pos]]),writeBits(bitcode[pos]),i++}return 63!=end0pos&&writeBits(EOB),DC}function setQuality(quality){(quality=Math.min(Math.max(quality,1),100),currentQuality!=quality)&&(!function(sf){for(var YQT=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],i=0;i<64;i++){var t=ffloor((YQT[i]*sf+50)/100);t=Math.min(Math.max(t,1),255),YTable[ZigZag[i]]=t}for(var UVQT=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],j=0;j<64;j++){var u=ffloor((UVQT[j]*sf+50)/100);u=Math.min(Math.max(u,1),255),UVTable[ZigZag[j]]=u}for(var aasf=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],k=0,row=0;row<8;row++)for(var col=0;col<8;col++)fdtbl_Y[k]=1/(YTable[ZigZag[k]]*aasf[row]*aasf[col]*8),fdtbl_UV[k]=1/(UVTable[ZigZag[k]]*aasf[row]*aasf[col]*8),k++}(quality<50?Math.floor(5e3/quality):Math.floor(200-2*quality)),currentQuality=quality)}this.encode=function(image,quality){quality&&setQuality(quality),byteout=new Array,bytenew=0,bytepos=7,writeWord(65496),writeWord(65504),writeWord(16),writeByte(74),writeByte(70),writeByte(73),writeByte(70),writeByte(0),writeByte(1),writeByte(1),writeByte(0),writeWord(1),writeWord(1),writeByte(0),writeByte(0),function(){writeWord(65499),writeWord(132),writeByte(0);for(var i=0;i<64;i++)writeByte(YTable[i]);writeByte(1);for(var j=0;j<64;j++)writeByte(UVTable[j])}(),function(width,height){writeWord(65472),writeWord(17),writeByte(8),writeWord(height),writeWord(width),writeByte(3),writeByte(1),writeByte(17),writeByte(0),writeByte(2),writeByte(17),writeByte(1),writeByte(3),writeByte(17),writeByte(1)}(image.width,image.height),function(){writeWord(65476),writeWord(418),writeByte(0);for(var i=0;i<16;i++)writeByte(std_dc_luminance_nrcodes[i+1]);for(var j=0;j<=11;j++)writeByte(std_dc_luminance_values[j]);writeByte(16);for(var k=0;k<16;k++)writeByte(std_ac_luminance_nrcodes[k+1]);for(var l=0;l<=161;l++)writeByte(std_ac_luminance_values[l]);writeByte(1);for(var m=0;m<16;m++)writeByte(std_dc_chrominance_nrcodes[m+1]);for(var n=0;n<=11;n++)writeByte(std_dc_chrominance_values[n]);writeByte(17);for(var o=0;o<16;o++)writeByte(std_ac_chrominance_nrcodes[o+1]);for(var p=0;p<=161;p++)writeByte(std_ac_chrominance_values[p])}(),writeWord(65498),writeWord(12),writeByte(3),writeByte(1),writeByte(0),writeByte(2),writeByte(17),writeByte(3),writeByte(17),writeByte(0),writeByte(63),writeByte(0);var DCY=0,DCU=0,DCV=0;bytenew=0,bytepos=7,this.encode.displayName="_encode_";for(var x,r,g,b,start,p,col,row,pos,imageData=image.data,width=image.width,height=image.height,quadWidth=4*width,y=0;y<height;){for(x=0;x<quadWidth;){for(start=quadWidth*y+x,col=-1,row=0,pos=0;pos<64;pos++)p=start+(row=pos>>3)*quadWidth+(col=4*(7&pos)),y+row>=height&&(p-=quadWidth*(y+1+row-height)),x+col>=quadWidth&&(p-=x+col-quadWidth+4),r=imageData[p++],g=imageData[p++],b=imageData[p++],YDU[pos]=(RGB_YUV_TABLE[r]+RGB_YUV_TABLE[g+256>>0]+RGB_YUV_TABLE[b+512>>0]>>16)-128,UDU[pos]=(RGB_YUV_TABLE[r+768>>0]+RGB_YUV_TABLE[g+1024>>0]+RGB_YUV_TABLE[b+1280>>0]>>16)-128,VDU[pos]=(RGB_YUV_TABLE[r+1280>>0]+RGB_YUV_TABLE[g+1536>>0]+RGB_YUV_TABLE[b+1792>>0]>>16)-128;DCY=processDU(YDU,fdtbl_Y,DCY,YDC_HT,YAC_HT),DCU=processDU(UDU,fdtbl_UV,DCU,UVDC_HT,UVAC_HT),DCV=processDU(VDU,fdtbl_UV,DCV,UVDC_HT,UVAC_HT),x+=32}y+=8}if(bytepos>=0){var fillbits=[];fillbits[1]=bytepos+1,fillbits[0]=(1<<bytepos+1)-1,writeBits(fillbits)}return writeWord(65497),new Uint8Array(byteout)},quality=quality||50,function(){for(var sfcc=String.fromCharCode,i=0;i<256;i++)clt[i]=sfcc(i)}(),YDC_HT=computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values),UVDC_HT=computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values),YAC_HT=computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values),UVAC_HT=computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values),function(){for(var nrlower=1,nrupper=2,cat=1;cat<=15;cat++){for(var nr=nrlower;nr<nrupper;nr++)category[32767+nr]=cat,bitcode[32767+nr]=[],bitcode[32767+nr][1]=cat,bitcode[32767+nr][0]=nr;for(var nrneg=-(nrupper-1);nrneg<=-nrlower;nrneg++)category[32767+nrneg]=cat,bitcode[32767+nrneg]=[],bitcode[32767+nrneg][1]=cat,bitcode[32767+nrneg][0]=nrupper-1+nrneg;nrlower<<=1,nrupper<<=1}}(),function(){for(var i=0;i<256;i++)RGB_YUV_TABLE[i]=19595*i,RGB_YUV_TABLE[i+256>>0]=38470*i,RGB_YUV_TABLE[i+512>>0]=7471*i+32768,RGB_YUV_TABLE[i+768>>0]=-11059*i,RGB_YUV_TABLE[i+1024>>0]=-21709*i,RGB_YUV_TABLE[i+1280>>0]=32768*i+8421375,RGB_YUV_TABLE[i+1536>>0]=-27439*i,RGB_YUV_TABLE[i+1792>>0]=-5329*i}(),setQuality(quality)}
/**
   * @license
   * Copyright (c) 2017 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */function BmpDecoder(buffer,is_with_alpha){if(this.pos=0,this.buffer=buffer,this.datav=new DataView(buffer.buffer),this.is_with_alpha=!!is_with_alpha,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function WebPDecoder(imageData){function x(F){if(!F)throw Error("assert :P")}function fa(F,L,J){for(var H=0;4>H;H++)if(F[L+H]!=J.charCodeAt(H))return!0;return!1}function I(F,L,J,H,Z){for(var O=0;O<Z;O++)F[L+O]=J[H+O]}function M(F,L,J,H){for(var Z=0;Z<H;Z++)F[L+Z]=J}function V(F){return new Int32Array(F)}function wa(F,L){for(var J=[],H=0;H<F;H++)J.push(new L);return J}function Ed(F,L){var H=[];return function J(H,O,F){for(var Z=F[O],ma=0;ma<Z&&(H.push(F.length>O+1?[]:new L),!(F.length<O+1));ma++)J(H[ma],O+1,F)}(H,0,F),H}var _WebPDecoder=function(){var self=this;function L(a,b){for(var c=1<<b-1>>>0;a&c;)c>>>=1;return c?(a&c-1)+c:a}function J(a,b,c,d,e){x(!(d%c));do{a[b+(d-=c)]=e}while(0<d)}function Z(a,b,c,d,e){if(x(2328>=e),512>=e)var f=V(512);else if(null==(f=V(e)))return 0;return function(a,b,c,d,e,f){var k,l,g=b,h=1<<c,m=V(16),n=V(16);for(x(0!=e),x(null!=d),x(null!=a),x(0<c),l=0;l<e;++l){if(15<d[l])return 0;++m[d[l]]}if(m[0]==e)return 0;for(n[1]=0,k=1;15>k;++k){if(m[k]>1<<k)return 0;n[k+1]=n[k]+m[k]}for(l=0;l<e;++l)k=d[l],0<d[l]&&(f[n[k]++]=l);if(1==n[15])return(d=new O).g=0,d.value=f[0],J(a,g,1,h,d),h;var u,r=-1,q=h-1,t=0,v=1,p=1,w=1<<c;for(l=0,k=1,e=2;k<=c;++k,e<<=1){if(v+=p<<=1,0>(p-=m[k]))return 0;for(;0<m[k];--m[k])(d=new O).g=k,d.value=f[l++],J(a,g+t,e,w,d),t=L(t,k)}for(k=c+1,e=2;15>=k;++k,e<<=1){if(v+=p<<=1,0>(p-=m[k]))return 0;for(;0<m[k];--m[k]){if(d=new O,(t&q)!=r){for(g+=w,u=1<<(r=k)-c;15>r&&!(0>=(u-=m[r]));)++r,u<<=1;h+=w=1<<(u=r-c),a[b+(r=t&q)].g=u+c,a[b+r].value=g-b-r}d.g=k-c,d.value=f[l++],J(a,g+(t>>c),e,w,d),t=L(t,k)}}return v!=2*n[15]-1?0:h}(a,b,c,d,e,f)}function O(){this.value=this.g=0}function Fd(){this.value=this.g=0}function Ub(){this.G=wa(5,O),this.H=V(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=wa(xb,Fd)}function ma(a,b,c,d){x(null!=a),x(null!=b),x(2147483648>d),a.Ca=254,a.I=0,a.b=-8,a.Ka=0,a.oa=b,a.pa=c,a.Jd=b,a.Yc=c+d,a.Zc=4<=d?c+d-4+1:c,Qa(a)}function na(a,b){for(var c=0;0<b--;)c|=K(a,128)<<b;return c}function ca(a,b){var c=na(a,b);return G(a)?-c:c}function cb(a,b,c,d){var e,f=0;for(x(null!=a),x(null!=b),x(4294967288>d),a.Sb=d,a.Ra=0,a.u=0,a.h=0,4<d&&(d=4),e=0;e<d;++e)f+=b[c+e]<<8*e;a.Ra=f,a.bb=d,a.oa=b,a.pa=c}function Vb(a){for(;8<=a.u&&a.bb<a.Sb;)a.Ra>>>=8,a.Ra+=a.oa[a.pa+a.bb]<<ob-8>>>0,++a.bb,a.u-=8;db(a)&&(a.h=1,a.u=0)}function D(a,b){if(x(0<=b),!a.h&&b<=Gd){var c=pb(a)&Hd[b];return a.u+=b,Vb(a),c}return a.h=1,a.u=0}function Wb(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ra(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function pb(a){return a.Ra>>>(a.u&ob-1)>>>0}function db(a){return x(a.bb<=a.Sb),a.h||a.bb==a.Sb&&a.u>ob}function qb(a,b){a.u=b,a.h=db(a)}function Sa(a){a.u>=Xb&&(x(a.u>=Xb),Vb(a))}function Qa(a){x(null!=a&&null!=a.oa),a.pa<a.Zc?(a.I=(a.oa[a.pa++]|a.I<<8)>>>0,a.b+=8):(x(null!=a&&null!=a.oa),a.pa<a.Yc?(a.b+=8,a.I=a.oa[a.pa++]|a.I<<8):a.Ka?a.b=0:(a.I<<=8,a.b+=8,a.Ka=1))}function G(a){return na(a,1)}function K(a,b){var c=a.Ca;0>a.b&&Qa(a);var d=a.b,e=c*b>>>8,f=(a.I>>>d>e)+0;for(f?(c-=e,a.I-=e+1<<d>>>0):c=e+1,d=c,e=0;256<=d;)e+=8,d>>=8;return d=7^e+Id[d],a.b-=d,a.Ca=(c<<d)-1,f}function ra(a,b,c){a[b+0]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=c>>0&255}function Ta(a,b){return a[b+0]<<0|a[b+1]<<8}function Yb(a,b){return Ta(a,b)|a[b+2]<<16}function Ha(a,b){return Ta(a,b)|Ta(a,b+2)<<16}function Zb(a,b){var c=1<<b;return x(null!=a),x(0<b),a.X=V(c),null==a.X?0:(a.Mb=32-b,a.Xa=b,1)}function $b(a,b){x(null!=a),x(null!=b),x(a.Xa==b.Xa),I(b.X,0,a.X,0,1<<b.Xa)}function ac(){this.X=[],this.Xa=this.Mb=0}function bc(a,b,c,d){x(null!=c),x(null!=d);var e=c[0],f=d[0];return 0==e&&(e=(a*f+b/2)/b),0==f&&(f=(b*e+a/2)/a),0>=e||0>=f?0:(c[0]=e,d[0]=f,1)}function xa(a,b){return a+(1<<b)-1>>>b}function yb(a,b){return((4278255360&a)+(4278255360&b)>>>0&4278255360)+((16711935&a)+(16711935&b)>>>0&16711935)>>>0}function X(a,b){self[b]=function(b,d,e,f,g,h,k){var c;for(c=0;c<g;++c){var m=self[a](h[k+c-1],e,f+c);h[k+c]=yb(b[d+c],m)}}}function Jd(){this.ud=this.hd=this.jd=0}function aa(a,b){return((4278124286&(a^b))>>>1)+(a&b)>>>0}function sa(a){return 0<=a&&256>a?a:0>a?0:255<a?255:void 0}function eb(a,b){return sa(a+(a-b+.5>>1))}function Ia(a,b,c){return Math.abs(b-c)-Math.abs(a-c)}function cc(a,b,c,d,e,f,g){for(d=f[g-1],c=0;c<e;++c)f[g+c]=d=yb(a[b+c],d)}function Kd(a,b,c,d,e){var f;for(f=0;f<c;++f){var g=a[b+f],h=g>>8&255,k=16711935&(k=(k=16711935&g)+((h<<16)+h));d[e+f]=(4278255360&g)+k>>>0}}function dc(a,b){b.jd=a>>0&255,b.hd=a>>8&255,b.ud=a>>16&255}function Ld(a,b,c,d,e,f){var g;for(g=0;g<d;++g){var h=b[c+g],k=h>>>8,m=h,l=255&(l=(l=h>>>16)+((a.jd<<24>>24)*(k<<24>>24)>>>5));m=255&(m=(m=m+((a.hd<<24>>24)*(k<<24>>24)>>>5))+((a.ud<<24>>24)*(l<<24>>24)>>>5));e[f+g]=(4278255360&h)+(l<<16)+m}}function ec(a,b,c,d,e){self[b]=function(a,b,c,k,l,m,n,r,q){for(k=n;k<r;++k)for(n=0;n<q;++n)l[m++]=e(c[d(a[b++])])},self[a]=function(a,b,h,k,l,m,n){var f=8>>a.b,g=a.Ea,t=a.K[0],v=a.w;if(8>f)for(a=(1<<a.b)-1,v=(1<<f)-1;b<h;++b){var u,p=0;for(u=0;u<g;++u)u&a||(p=d(k[l++])),m[n++]=e(t[p&v]),p>>=f}else self["VP8LMapColor"+c](k,l,t,v,m,n,b,h,g)}}function Md(a,b,c,d,e){for(c=b+c;b<c;){var f=a[b++];d[e++]=f>>16&255,d[e++]=f>>8&255,d[e++]=f>>0&255}}function Nd(a,b,c,d,e){for(c=b+c;b<c;){var f=a[b++];d[e++]=f>>16&255,d[e++]=f>>8&255,d[e++]=f>>0&255,d[e++]=f>>24&255}}function Od(a,b,c,d,e){for(c=b+c;b<c;){var g=(f=a[b++])>>16&240|f>>12&15,f=f>>0&240|f>>28&15;d[e++]=g,d[e++]=f}}function Pd(a,b,c,d,e){for(c=b+c;b<c;){var g=(f=a[b++])>>16&248|f>>13&7,f=f>>5&224|f>>3&31;d[e++]=g,d[e++]=f}}function Qd(a,b,c,d,e){for(c=b+c;b<c;){var f=a[b++];d[e++]=f>>0&255,d[e++]=f>>8&255,d[e++]=f>>16&255}}function fb(a,b,c,d,e,f){if(0==f)for(c=b+c;b<c;)ra(d,((f=a[b++])[0]>>24|f[1]>>8&65280|f[2]<<8&16711680|f[3]<<24)>>>0),e+=32;else I(d,e,a,b,c)}function gb(a,b){self[b][0]=self[a+"0"],self[b][1]=self[a+"1"],self[b][2]=self[a+"2"],self[b][3]=self[a+"3"],self[b][4]=self[a+"4"],self[b][5]=self[a+"5"],self[b][6]=self[a+"6"],self[b][7]=self[a+"7"],self[b][8]=self[a+"8"],self[b][9]=self[a+"9"],self[b][10]=self[a+"10"],self[b][11]=self[a+"11"],self[b][12]=self[a+"12"],self[b][13]=self[a+"13"],self[b][14]=self[a+"0"],self[b][15]=self[a+"0"]}function hb(a){return a==zb||a==Ab||a==Ja||a==Bb}function Rd(){this.eb=[],this.size=this.A=this.fb=0}function Sd(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Cb(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Rd,this.f.kb=new Sd,this.sd=null}function Td(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ud(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Vd(a){return alert("todo:WebPSamplerProcessPlane"),a.T}function Wd(a,b){var c=a.T,d=b.ba.f.RGBA,e=d.eb,f=d.fb+a.ka*d.A,g=P[b.ba.S],h=a.y,k=a.O,l=a.f,m=a.N,n=a.ea,r=a.W,q=b.cc,t=b.dc,v=b.Mc,p=b.Nc,u=a.ka,w=a.ka+a.T,y=a.U,A=y+1>>1;for(0==u?g(h,k,null,null,l,m,n,r,l,m,n,r,e,f,null,null,y):(g(b.ec,b.fc,h,k,q,t,v,p,l,m,n,r,e,f-d.A,e,f,y),++c);u+2<w;u+=2)q=l,t=m,v=n,p=r,m+=a.Rc,r+=a.Rc,f+=2*d.A,g(h,(k+=2*a.fa)-a.fa,h,k,q,t,v,p,l,m,n,r,e,f-d.A,e,f,y);return k+=a.fa,a.j+w<a.o?(I(b.ec,b.fc,h,k,y),I(b.cc,b.dc,l,m,A),I(b.Mc,b.Nc,n,r,A),c--):1&w||g(h,k,null,null,l,m,n,r,l,m,n,r,e,f+d.A,null,null,y),c}function Xd(a,b,c){var d=a.F,e=[a.J];if(null!=d){var f=a.U,g=b.ba.S,h=g==ya||g==Ja;b=b.ba.f.RGBA;var k=[0],l=a.ka;k[0]=a.T,a.Kb&&(0==l?--k[0]:(--l,e[0]-=a.width),a.j+a.ka+a.T==a.o&&(k[0]=a.o-a.j-l));var m=b.eb;l=b.fb+l*b.A;a=fc(d,e[0],a.width,f,k,m,l+(h?0:3),b.A),x(c==k),a&&hb(g)&&za(m,l,h,f,k,b.A)}return 0}function gc(a){var b=a.ma,c=b.ba.S,d=11>c,e=c==Ua||c==Va||c==ya||c==Db||12==c||hb(c);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!hc(b.Oa,a,e?11:12))return 0;if(e&&hb(c)&&ic(),a.da)alert("todo:use_scaling");else{if(d){if(b.Ib=Vd,a.Kb){if(c=a.U+1>>1,b.memory=V(a.U+2*c),null==b.memory)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+a.U,b.Mc=b.cc,b.Nc=b.dc+c,b.Ib=Wd,ic()}}else alert("todo:EmitYUV");e&&(b.Jb=Xd,d&&Aa())}if(d&&!jc){for(a=0;256>a;++a)Yd[a]=89858*(a-128)+Ba>>Wa,Zd[a]=-22014*(a-128)+Ba,$d[a]=-45773*(a-128),ae[a]=113618*(a-128)+Ba>>Wa;for(a=ta;a<Eb;++a)b=76283*(a-16)+Ba>>Wa,be[a-ta]=ga(b,255),ce[a-ta]=ga(b+8>>4,15);jc=1}return 1}function kc(a){var b=a.ma,c=a.U,d=a.T;return x(!(1&a.ka)),0>=c||0>=d?0:(c=b.Ib(a,b),null!=b.Jb&&b.Jb(a,b,c),b.Dc+=c,1)}function lc(a){a.ma.memory=null}function mc(a,b,c,d){return 47!=D(a,8)?0:(b[0]=D(a,14)+1,c[0]=D(a,14)+1,d[0]=D(a,1),0!=D(a,3)?0:!a.h)}function ib(a,b){if(4>a)return a+1;var c=a-2>>1;return(2+(1&a)<<c)+D(b,c)+1}function nc(a,b){return 120<b?b-120:1<=(c=((c=de[b-1])>>4)*a+(8-(15&c)))?c:1;var c}function ua(a,b,c){var d=pb(c),e=a[b+=255&d].g-8;return 0<e&&(qb(c,c.u+8),d=pb(c),b+=a[b].value,b+=d&(1<<e)-1),qb(c,c.u+a[b].g),a[b].value}function ub(a,b,c){return c.g+=a.g,c.value+=a.value<<b>>>0,x(8>=c.g),a.g}function ha(a,b,c){var d=a.xc;return x((b=0==d?0:a.vc[a.md*(c>>d)+(b>>d)])<a.Wb),a.Ya[b]}function oc(a,b,c,d){var e=a.ab,f=a.c*b,g=a.C;b=g+b;var h=c,k=d;for(d=a.Ta,c=a.Ua;0<e--;){var l=a.gc[e],m=g,n=b,r=h,q=k,t=(k=d,h=c,l.Ea);switch(x(m<n),x(n<=l.nc),l.hc){case 2:pc(r,q,(n-m)*t,k,h);break;case 0:var p=m,u=n,w=k,y=h,A=(v=l).Ea;0==p&&(ee(r,q,null,null,1,w,y),cc(r,q+1,0,0,A-1,w,y+1),q+=A,y+=A,++p);for(var E=1<<v.b,B=E-1,C=xa(A,v.b),N=v.K,v=v.w+(p>>v.b)*C;p<u;){var z=N,Q=v,S=1;for(fe(r,q,w,y-A,1,w,y);S<A;){var D=(S&~B)+E;D>A&&(D=A),(0,qc[z[Q++]>>8&15])(r,q+ +S,w,y+S-A,D-S,w,y+S),S=D}q+=A,y+=A,++p&B||(v+=C)}n!=l.nc&&I(k,h-t,k,h+(n-m-1)*t,t);break;case 1:for(t=r,u=q,A=(r=l.Ea)-(y=r&~(w=(q=1<<l.b)-1)),p=xa(r,l.b),E=l.K,l=l.w+(m>>l.b)*p;m<n;){for(B=E,C=l,N=new Jd,v=u+y,z=u+r;u<v;)dc(B[C++],N),Fb(N,t,u,q,k,h),u+=q,h+=q;u<z&&(dc(B[C++],N),Fb(N,t,u,A,k,h),u+=A,h+=A),++m&w||(l+=p)}break;case 3:if(r==k&&q==h&&0<l.b){for(u=k,r=t=h+(n-m)*t-(y=(n-m)*xa(l.Ea,l.b)),q=k,w=h,p=[],y=(A=y)-1;0<=y;--y)p[y]=q[w+y];for(y=A-1;0<=y;--y)u[r+y]=p[y];rc(l,m,n,k,t,k,h)}else rc(l,m,n,r,q,k,h)}h=d,k=c}k!=c&&I(d,c,h,k,f)}function ge(a,b){var c=a.V,d=a.Ba+a.c*a.C,e=b-a.C;if(x(b<=a.l.o),x(16>=e),0<e){var f=a.l,g=a.Ta,h=a.Ua,k=f.width;if(oc(a,e,c,d),e=h=[h],x((c=a.C)<(d=b)),x(f.v<f.va),d>f.o&&(d=f.o),c<f.j){var l=f.j-c;c=f.j;e[0]+=l*k}if(c>=d?c=0:(e[0]+=4*f.v,f.ka=c-f.j,f.U=f.va-f.v,f.T=d-c,c=1),c){if(h=h[0],11>(c=a.ca).S){var m=c.f.RGBA,n=(d=c.S,e=f.U,f=f.T,l=m.eb,m.A),r=f;for(m=m.fb+a.Ma*m.A;0<r--;){var q=g,t=h,v=e,p=l,u=m;switch(d){case Ca:sc(q,t,v,p,u);break;case Ua:Gb(q,t,v,p,u);break;case zb:Gb(q,t,v,p,u),za(p,u,0,v,1,0);break;case tc:uc(q,t,v,p,u);break;case Va:fb(q,t,v,p,u,1);break;case Ab:fb(q,t,v,p,u,1),za(p,u,0,v,1,0);break;case ya:fb(q,t,v,p,u,0);break;case Ja:fb(q,t,v,p,u,0),za(p,u,1,v,1,0);break;case Db:Hb(q,t,v,p,u);break;case Bb:Hb(q,t,v,p,u),vc(p,u,v,1,0);break;case wc:xc(q,t,v,p,u);break;default:x(0)}h+=k,m+=n}a.Ma+=f}else alert("todo:EmitRescaledRowsYUVA");x(a.Ma<=c.height)}}a.C=b,x(a.C<=a.i)}function yc(a){var b;if(0<a.ua)return 0;for(b=0;b<a.Wb;++b){var c=a.Ya[b].G,d=a.Ya[b].H;if(0<c[1][d[1]+0].g||0<c[2][d[2]+0].g||0<c[3][d[3]+0].g)return 0}return 1}function zc(a,b,c,d,e,f){if(0!=a.Z){var g=a.qd,h=a.rd;for(x(null!=ia[a.Z]);b<c;++b)ia[a.Z](g,h,d,e,d,e,f),g=d,h=e,e+=f;a.qd=g,a.rd=h}}function Ib(a,b){var c=a.l.ma,d=0==c.Z||1==c.Z?a.l.j:a.C;d=a.C<d?d:a.C;if(x(b<=a.l.o),b>d){var e=a.l.width,f=c.ca,g=c.tb+e*d,h=a.V,k=a.Ba+a.c*d,l=a.gc;x(1==a.ab),x(3==l[0].hc),he(l[0],d,b,h,k,f,g),zc(c,d,b,f,g,e)}a.C=a.Ma=b}function Jb(a,b,c,d,e,f,g){var h=a.$/d,k=a.$%d,l=a.m,m=a.s,n=c+a.$,r=n;e=c+d*e;var q=c+d*f,t=280+m.ua,v=a.Pb?h:16777216,p=0<m.ua?m.Wa:null,u=m.wc,w=n<q?ha(m,k,h):null;x(a.C<f),x(q<=e);var y=!1;a:for(;;){for(;y||n<q;){var A=0;if(h>=v){var E=n-c;x((v=a).Pb),v.wd=v.m,v.xd=E,0<v.s.ua&&$b(v.s.Wa,v.s.vb),v=h+ie}if(k&u||(w=ha(m,k,h)),x(null!=w),w.Qb&&(b[n]=w.qb,y=!0),!y)if(Sa(l),w.jc){A=l,E=b;var B=n,C=w.pd[pb(A)&xb-1];x(w.jc),256>C.g?(qb(A,A.u+C.g),E[B]=C.value,A=0):(qb(A,A.u+C.g-256),x(256<=C.value),A=C.value),0==A&&(y=!0)}else A=ua(w.G[0],w.H[0],l);if(l.h)break;if(y||256>A){if(!y)if(w.nd)b[n]=(w.qb|A<<8)>>>0;else{if(Sa(l),y=ua(w.G[1],w.H[1],l),Sa(l),E=ua(w.G[2],w.H[2],l),B=ua(w.G[3],w.H[3],l),l.h)break;b[n]=(B<<24|y<<16|A<<8|E)>>>0}if(y=!1,++n,++k>=d&&(k=0,++h,null!=g&&h<=f&&!(h%16)&&g(a,h),null!=p))for(;r<n;)A=b[r++],p.X[(506832829*A&4294967295)>>>p.Mb]=A}else if(280>A){if(A=ib(A-256,l),E=ua(w.G[4],w.H[4],l),Sa(l),E=nc(d,E=ib(E,l)),l.h)break;if(n-c<E||e-n<A)break a;for(B=0;B<A;++B)b[n+B]=b[n+B-E];for(n+=A,k+=A;k>=d;)k-=d,++h,null!=g&&h<=f&&!(h%16)&&g(a,h);if(x(n<=e),k&u&&(w=ha(m,k,h)),null!=p)for(;r<n;)A=b[r++],p.X[(506832829*A&4294967295)>>>p.Mb]=A}else{if(!(A<t))break a;for(y=A-280,x(null!=p);r<n;)A=b[r++],p.X[(506832829*A&4294967295)>>>p.Mb]=A;A=n,x(!(y>>>(E=p).Xa)),b[A]=E.X[y],y=!0}y||x(l.h==db(l))}if(a.Pb&&l.h&&n<e)x(a.m.h),a.a=5,a.m=a.wd,a.$=a.xd,0<a.s.ua&&$b(a.s.vb,a.s.Wa);else{if(l.h)break a;null!=g&&g(a,h>f?f:h),a.a=0,a.$=n-c}return 1}return a.a=3,0}function Ac(a){x(null!=a),a.vc=null,a.yc=null,a.Ya=null;var b=a.Wa;null!=b&&(b.X=null),a.vb=null,x(null!=a)}function Bc(){var a=new je;return null==a?null:(a.a=0,a.xb=Cc,gb("Predictor","VP8LPredictors"),gb("Predictor","VP8LPredictors_C"),gb("PredictorAdd","VP8LPredictorsAdd"),gb("PredictorAdd","VP8LPredictorsAdd_C"),pc=Kd,Fb=Ld,sc=Md,Gb=Nd,Hb=Od,xc=Pd,uc=Qd,self.VP8LMapColor32b=ke,self.VP8LMapColor8b=le,a)}function rb(a,b,c,d,e){var f=1,g=[a],h=[b],k=d.m,l=d.s,m=null,n=0;a:for(;;){if(c)for(;f&&D(k,1);){var r=g,q=h,t=d,v=1,p=t.m,u=t.gc[t.ab],w=D(p,2);if(t.Oc&1<<w)f=0;else{switch(t.Oc|=1<<w,u.hc=w,u.Ea=r[0],u.nc=q[0],u.K=[null],++t.ab,x(4>=t.ab),w){case 0:case 1:u.b=D(p,3)+2,v=rb(xa(u.Ea,u.b),xa(u.nc,u.b),0,t,u.K),u.K=u.K[0];break;case 3:var E,y=D(p,8)+1,A=16<y?0:4<y?1:2<y?2:3;if(r[0]=xa(u.Ea,A),u.b=A,E=v=rb(y,1,0,t,u.K)){var B,C=y,N=u,z=1<<(8>>N.b),Q=V(z);if(null==Q)E=0;else{var S=N.K[0],K=N.w;for(Q[0]=N.K[0][0],B=1;B<1*C;++B)Q[B]=yb(S[K+B],Q[B-1]);for(;B<4*z;++B)Q[B]=0;N.K[0]=null,N.K[0]=Q,E=1}}v=E;break;case 2:break;default:x(0)}f=v}}if(g=g[0],h=h[0],f&&D(k,1)&&!(f=1<=(n=D(k,4))&&11>=n)){d.a=3;break a}var H;if(H=f)b:{var Da,ba,U,F=d,G=g,L=h,J=n,T=c,X=F.m,R=F.s,P=[null],W=1,aa=0,na=me[J];c:for(;;){if(T&&D(X,1)){var ca=D(X,3)+2,ga=xa(G,ca),ka=xa(L,ca),qa=ga*ka;if(!rb(ga,ka,0,F,P))break c;for(P=P[0],R.xc=ca,Da=0;Da<qa;++Da){var ia=P[Da]>>8&65535;P[Da]=ia,ia>=W&&(W=ia+1)}}if(X.h)break c;for(ba=0;5>ba;++ba){var Y=Dc[ba];!ba&&0<J&&(Y+=1<<J),aa<Y&&(aa=Y)}var ma=wa(W*na,O),ua=W,va=wa(ua,Ub);if(null==va)var la=null;else x(65536>=ua),la=va;var ha=V(aa);if(null==la||null==ha||null==ma){F.a=1;break c}var pa=ma;for(Da=U=0;Da<W;++Da){var ja=la[Da],da=ja.G,ea=ja.H,Fa=0,ra=1,Ha=0;for(ba=0;5>ba;++ba){Y=Dc[ba],da[ba]=pa,ea[ba]=U,!ba&&0<J&&(Y+=1<<J);d:{var sa,za=Y,ta=F,oa=ha,db=pa,eb=U,Ia=0,Ka=ta.m,fb=D(Ka,1);if(M(oa,0,0,za),fb){var gb=D(Ka,1)+1,hb=D(Ka,1),Ja=D(Ka,0==hb?1:8);oa[Ja]=1,2==gb&&(oa[Ja=D(Ka,8)]=1);var ya=1}else{var Ua=V(19),Va=D(Ka,4)+4;if(19<Va){ta.a=3;var Aa=0;break d}for(sa=0;sa<Va;++sa)Ua[ne[sa]]=D(Ka,3);var Ba=void 0,sb=void 0,Wa=ta,ib=Ua,Ca=za,Xa=oa,Oa=0,La=Wa.m,Ya=8,Za=wa(128,O);e:for(;Z(Za,0,7,ib,19);){if(D(La,1)){var kb=2+2*D(La,3);if((Ba=2+D(La,kb))>Ca)break e}else Ba=Ca;for(sb=0;sb<Ca&&Ba--;){Sa(La);var $a=Za[0+(127&pb(La))];qb(La,La.u+$a.g);var jb=$a.value;if(16>jb)Xa[sb++]=jb,0!=jb&&(Ya=jb);else{var lb=16==jb,ab=jb-16,mb=oe[ab],bb=D(La,pe[ab])+mb;if(sb+bb>Ca)break e;for(var nb=lb?Ya:0;0<bb--;)Xa[sb++]=nb}}Oa=1;break e}Oa||(Wa.a=3),ya=Oa}(ya=ya&&!Ka.h)&&(Ia=Z(db,eb,8,oa,za)),ya&&0!=Ia?Aa=Ia:(ta.a=3,Aa=0)}if(0==Aa)break c;if(ra&&1==qe[ba]&&(ra=0==pa[U].g),Fa+=pa[U].g,U+=Aa,3>=ba){var tb,Pa=ha[0];for(tb=1;tb<Y;++tb)ha[tb]>Pa&&(Pa=ha[tb]);Ha+=Pa}}if(ja.nd=ra,ja.Qb=0,ra&&(ja.qb=(da[3][ea[3]+0].value<<24|da[1][ea[1]+0].value<<16|da[2][ea[2]+0].value)>>>0,0==Fa&&256>da[0][ea[0]+0].value&&(ja.Qb=1,ja.qb+=da[0][ea[0]+0].value<<8)),ja.jc=!ja.Qb&&6>Ha,ja.jc){var Ga,Ea=ja;for(Ga=0;Ga<xb;++Ga){var Ma=Ga,Na=Ea.pd[Ma],vb=Ea.G[0][Ea.H[0]+Ma];256<=vb.value?(Na.g=vb.g+256,Na.value=vb.value):(Na.g=0,Na.value=0,Ma>>=ub(vb,8,Na),Ma>>=ub(Ea.G[1][Ea.H[1]+Ma],16,Na),Ma>>=ub(Ea.G[2][Ea.H[2]+Ma],0,Na),ub(Ea.G[3][Ea.H[3]+Ma],24,Na))}}}R.vc=P,R.Wb=W,R.Ya=la,R.yc=ma,H=1;break b}H=0}if(!(f=H)){d.a=3;break a}if(0<n){if(l.ua=1<<n,!Zb(l.Wa,n)){d.a=1,f=0;break a}}else l.ua=0;var Qa=d,cb=g,ob=h,Ra=Qa.s,Ta=Ra.xc;if(Qa.c=cb,Qa.i=ob,Ra.md=xa(cb,Ta),Ra.wc=0==Ta?-1:(1<<Ta)-1,c){d.xb=re;break a}if(null==(m=V(g*h))){d.a=1,f=0;break a}f=(f=Jb(d,m,0,g,h,h,null))&&!k.h;break a}return f?(null!=e?e[0]=m:(x(null==m),x(c)),d.$=0,c||Ac(l)):Ac(l),f}function Ec(a,b){var c=a.c*a.i,d=c+b+16*b;return x(a.c<=b),a.V=V(d),null==a.V?(a.Ta=null,a.Ua=0,a.a=1,0):(a.Ta=a.V,a.Ua=a.Ba+c+b,1)}function se(a,b){var c=a.C,d=b-c,e=a.V,f=a.Ba+a.c*c;for(x(b<=a.l.o);0<d;){var g=16<d?16:d,h=a.l.ma,k=a.l.width,l=k*g,m=h.ca,n=h.tb+k*c,r=a.Ta,q=a.Ua;oc(a,g,e,f),Fc(r,q,m,n,l),zc(h,c,c+g,m,n,k),d-=g,e+=g*a.c,c+=g}x(c==b),a.C=a.Ma=b}function ue(){this.ub=this.yd=this.td=this.Rb=0}function ve(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function we(){this.Fb=this.Bb=this.Cb=0,this.Zb=V(4),this.Lb=V(4)}function Gc(){this.Yb=function(){var L=[];return function F(J,H,Z){for(var O=Z[H],L=0;L<O&&(J.push(Z.length>H+1?[]:0),!(Z.length<H+1));L++)F(J[L],H+1,Z)}(L,0,[3,11]),L}()}function xe(){this.jb=V(3),this.Wc=Ed([4,8],Gc),this.Xc=Ed([4,17],Gc)}function ye(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new V(4),this.od=new V(4)}function Xa(){this.ld=this.La=this.dd=this.tc=0}function Hc(){this.Na=this.la=0}function ze(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Kb(){this.ad=V(384),this.Za=0,this.Ob=V(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ae(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xa),this.Y=0,this.ya=Array(new Kb),this.aa=0,this.l=new Oa}function Ic(){this.y=V(16),this.f=V(8),this.ea=V(8)}function Be(){this.cb=this.a=0,this.sc="",this.m=new Wb,this.Od=new ue,this.Kc=new ve,this.ed=new ye,this.Qa=new we,this.Ic=this.$c=this.Aa=0,this.D=new Ae,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=wa(8,Wb),this.ia=0,this.pb=wa(4,ze),this.Pa=new xe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ic),this.Hd=0,this.rb=Array(new Hc),this.sb=0,this.wa=Array(new Xa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Kb),this.L=this.aa=0,this.gd=Ed([4,2],Xa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ga(a,b){return 0>a?0:a>b?b:a}function Oa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ce(){var a=new Be;return null!=a&&(a.a=0,a.sc="OK",a.cb=0,a.Xb=0,oa||(oa=De)),a}function T(a,b,c){return 0==a.a&&(a.a=b,a.sc=c,a.cb=0),0}function Jc(a,b,c){return 3<=c&&157==a[b+0]&&1==a[b+1]&&42==a[b+2]}function Kc(a,b){if(null==a)return 0;if(a.a=0,a.sc="OK",null==b)return T(a,2,"null VP8Io passed to VP8GetHeaders()");var c=b.data,d=b.w,e=b.ha;if(4>e)return T(a,7,"Truncated header.");var f=c[d+0]|c[d+1]<<8|c[d+2]<<16,g=a.Od;if(g.Rb=!(1&f),g.td=f>>1&7,g.yd=f>>4&1,g.ub=f>>5,3<g.td)return T(a,3,"Incorrect keyframe parameters.");if(!g.yd)return T(a,4,"Frame not displayable.");d+=3,e-=3;var h=a.Kc;if(g.Rb){if(7>e)return T(a,7,"cannot parse picture header");if(!Jc(c,d,e))return T(a,3,"Bad code word");h.c=16383&(c[d+4]<<8|c[d+3]),h.Td=c[d+4]>>6,h.i=16383&(c[d+6]<<8|c[d+5]),h.Ud=c[d+6]>>6,d+=7,e-=7,a.za=h.c+15>>4,a.Ub=h.i+15>>4,b.width=h.c,b.height=h.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,M((f=a.Pa).jb,0,255,f.jb.length),x(null!=(f=a.Qa)),f.Cb=0,f.Bb=0,f.Fb=1,M(f.Zb,0,0,f.Zb.length),M(f.Lb,0,0,f.Lb)}if(g.ub>e)return T(a,7,"bad partition length");ma(f=a.m,c,d,g.ub),d+=g.ub,e-=g.ub,g.Rb&&(h.Ld=G(f),h.Kd=G(f)),h=a.Qa;var l,k=a.Pa;if(x(null!=f),x(null!=h),h.Cb=G(f),h.Cb){if(h.Bb=G(f),G(f)){for(h.Fb=G(f),l=0;4>l;++l)h.Zb[l]=G(f)?ca(f,7):0;for(l=0;4>l;++l)h.Lb[l]=G(f)?ca(f,6):0}if(h.Bb)for(l=0;3>l;++l)k.jb[l]=G(f)?na(f,8):255}else h.Bb=0;if(f.Ka)return T(a,3,"cannot parse segment header");if((h=a.ed).zd=G(f),h.Tb=na(f,6),h.wb=na(f,3),h.Pc=G(f),h.Pc&&G(f)){for(k=0;4>k;++k)G(f)&&(h.vd[k]=ca(f,6));for(k=0;4>k;++k)G(f)&&(h.od[k]=ca(f,6))}if(a.L=0==h.Tb?0:h.zd?1:2,f.Ka)return T(a,3,"cannot parse filter header");var m=e;if(e=l=d,d=l+m,h=m,a.Xb=(1<<na(a.m,2))-1,m<3*(k=a.Xb))c=7;else{for(l+=3*k,h-=3*k,m=0;m<k;++m){var n=c[e+0]|c[e+1]<<8|c[e+2]<<16;n>h&&(n=h),ma(a.Jc[+m],c,l,n),l+=n,h-=n,e+=3}ma(a.Jc[+k],c,l,h),c=l<d?0:5}if(0!=c)return T(a,c,"cannot parse partitions");for(c=na(l=a.m,7),e=G(l)?ca(l,4):0,d=G(l)?ca(l,4):0,h=G(l)?ca(l,4):0,k=G(l)?ca(l,4):0,l=G(l)?ca(l,4):0,m=a.Qa,n=0;4>n;++n){if(m.Cb){var r=m.Zb[n];m.Fb||(r+=c)}else{if(0<n){a.pb[n]=a.pb[0];continue}r=c}var q=a.pb[n];q.Sc[0]=Lb[ga(r+e,127)],q.Sc[1]=Mb[ga(r+0,127)],q.Eb[0]=2*Lb[ga(r+d,127)],q.Eb[1]=101581*Mb[ga(r+h,127)]>>16,8>q.Eb[1]&&(q.Eb[1]=8),q.Qc[0]=Lb[ga(r+k,117)],q.Qc[1]=Mb[ga(r+l,127)],q.lc=r+l}if(!g.Rb)return T(a,4,"Not a key frame.");for(G(f),g=a.Pa,c=0;4>c;++c){for(e=0;8>e;++e)for(d=0;3>d;++d)for(h=0;11>h;++h)k=K(f,Ee[c][e][d][h])?na(f,8):Fe[c][e][d][h],g.Wc[c][e].Yb[d][h]=k;for(e=0;17>e;++e)g.Xc[c][e]=g.Wc[c][Ge[e]]}return a.kc=G(f),a.kc&&(a.Bd=na(f,8)),a.cb=1}function De(a,b,c,d,e,f,g){var h=b[e].Yb[c];for(c=0;16>e;++e){if(!K(a,h[c+0]))return e;for(;!K(a,h[c+1]);)if(h=b[++e].Yb[0],c=0,16==e)return 16;var k=b[e+1].Yb;if(K(a,h[c+2])){var l=a,r=0;if(K(l,(m=h)[(n=c)+3]))if(K(l,m[n+6])){for(h=0,n=2*(r=K(l,m[n+8]))+(m=K(l,m[n+9+r])),r=0,m=He[n];m[h];++h)r+=r+K(l,m[h]);r+=3+(8<<n)}else K(l,m[n+7])?(r=7+2*K(l,165),r+=K(l,145)):r=5+K(l,159);else r=K(l,m[n+4])?3+K(l,m[n+5]):2;h=k[2]}else r=1,h=k[1];k=g+Ie[e],0>(l=a).b&&Qa(l);var n,m=l.b,q=(n=l.Ca>>1)-(l.I>>m)>>31;--l.b,l.Ca+=q,l.Ca|=1,l.I-=(n+1&q)<<m,f[k]=((r^q)-q)*d[(0<e)+0]}return 16}function Lc(a){var b=a.rb[a.sb-1];b.la=0,b.Na=0,M(a.zc,0,0,a.zc.length),a.ja=0}function Me(a,b){if(null==a)return 0;if(null==b)return T(a,2,"NULL VP8Io parameter in VP8Decode().");if(!a.cb&&!Kc(a,b))return 0;if(x(a.cb),null==b.ac||b.ac(b)){b.ob&&(a.L=0);var c=Ya[a.L];if(2==a.L?(a.yb=0,a.zb=0):(a.yb=b.v-c>>4,a.zb=b.j-c>>4,0>a.yb&&(a.yb=0),0>a.zb&&(a.zb=0)),a.Va=b.o+15+c>>4,a.Hb=b.va+15+c>>4,a.Hb>a.za&&(a.Hb=a.za),a.Va>a.Ub&&(a.Va=a.Ub),0<a.L){var d=a.ed;for(c=0;4>c;++c){var e;if(a.Qa.Cb){var f=a.Qa.Lb[c];a.Qa.Fb||(f+=d.Tb)}else f=d.Tb;for(e=0;1>=e;++e){var g=a.gd[c][e],h=f;if(d.Pc&&(h+=d.vd[0],e&&(h+=d.od[0])),0<(h=0>h?0:63<h?63:h)){var k=h;0<d.wb&&((k=4<d.wb?k>>2:k>>1)>9-d.wb&&(k=9-d.wb)),1>k&&(k=1),g.dd=k,g.tc=2*h+k,g.ld=40<=h?2:15<=h?1:0}else g.tc=0;g.La=e}}}c=0}else T(a,6,"Frame setup failed"),c=a.a;if(c=0==c){if(c){a.$c=0,0<a.Aa||(a.Ic=Ne);b:{c=a.Ic;d=4*(k=a.za);var l=32*k,m=k+1,n=0<a.L?k*(0<a.Aa?2:1):0,r=(2==a.Aa?2:1)*k;if((g=d+832+(e=3*(16*c+Ya[a.L])/2*l)+(f=null!=a.Fa&&0<a.Fa.length?a.Kc.c*a.Kc.i:0))!=g)c=0;else{if(g>a.Vb){if(a.Vb=0,a.Ec=V(g),a.Fc=0,null==a.Ec){c=T(a,1,"no memory during frame initialization.");break b}a.Vb=g}g=a.Ec,h=a.Fc,a.Ac=g,a.Bc=h,h+=d,a.Gd=wa(l,Ic),a.Hd=0,a.rb=wa(m+1,Hc),a.sb=1,a.wa=n?wa(n,Xa):null,a.Y=0,a.D.Nb=0,a.D.wa=a.wa,a.D.Y=a.Y,0<a.Aa&&(a.D.Y+=k),x(!0),a.oc=g,a.pc=h,h+=832,a.ya=wa(r,Kb),a.aa=0,a.D.ya=a.ya,a.D.aa=a.aa,2==a.Aa&&(a.D.aa+=k),a.R=16*k,a.B=8*k,k=(l=Ya[a.L])*a.R,l=l/2*a.B,a.sa=g,a.ta=h+k,a.qa=a.sa,a.ra=a.ta+16*c*a.R+l,a.Ha=a.qa,a.Ia=a.ra+8*c*a.B+l,a.$c=0,h+=e,a.mb=f?g:null,a.nb=f?h:null,x(h+f<=a.Fc+a.Vb),Lc(a),M(a.Ac,a.Bc,0,d),c=1}}if(c){if(b.ka=0,b.y=a.sa,b.O=a.ta,b.f=a.qa,b.N=a.ra,b.ea=a.Ha,b.Vd=a.Ia,b.fa=a.R,b.Rc=a.B,b.F=null,b.J=0,!ad){for(c=-255;255>=c;++c)bd[255+c]=0>c?-c:c;for(c=-1020;1020>=c;++c)cd[1020+c]=-128>c?-128:127<c?127:c;for(c=-112;112>=c;++c)dd[112+c]=-16>c?-16:15<c?15:c;for(c=-255;510>=c;++c)ed[255+c]=0>c?0:255<c?255:c;ad=1}Nc=Oe,Za=Pe,Nb=Qe,pa=Re,Ob=Se,fd=Te,Xc=Ue,Tc=Ve,Yc=We,Uc=Xe,Zc=Ye,Vc=Ze,$c=$e,Wc=af,Rc=gd,Pc=hd,Sc=bf,Qc=cf,W[0]=df,W[1]=ef,W[2]=ff,W[3]=gf,W[4]=hf,W[5]=jf,W[6]=kf,W[7]=lf,W[8]=mf,W[9]=nf,Y[0]=of,Y[1]=pf,Y[2]=qf,Y[3]=rf,Y[4]=sf,Y[5]=tf,Y[6]=uf,ka[0]=vf,ka[1]=wf,ka[2]=xf,ka[3]=yf,ka[4]=zf,ka[5]=Af,ka[6]=Bf,c=1}else c=0}c&&(c=function(a,b){for(a.M=0;a.M<a.Va;++a.M){var f,c=a.Jc[a.M&a.Xb],d=a.m,e=a;for(f=0;f<e.za;++f){var g=d,h=e,k=h.Ac,l=h.Bc+4*f,m=h.zc,n=h.ya[h.aa+f];if(h.Qa.Bb?n.$b=K(g,h.Pa.jb[0])?2+K(g,h.Pa.jb[2]):K(g,h.Pa.jb[1]):n.$b=0,h.kc&&(n.Ad=K(g,h.Bd)),n.Za=!K(g,145)+0,n.Za){var r=n.Ob,q=0;for(h=0;4>h;++h){var v,t=m[0+h];for(v=0;4>v;++v){t=Ke[k[l+v]][t];for(var p=Mc[K(g,t[0])];0<p;)p=Mc[2*p+K(g,t[p])];t=-p,k[l+v]=t}I(r,q,k,l,4),q+=4,m[0+h]=t}}else t=K(g,156)?K(g,128)?1:3:K(g,163)?2:0,n.Ob[0]=t,M(k,l,t,4),M(m,0,t,4);n.Dd=K(g,142)?K(g,114)?K(g,183)?1:3:2:0}if(e.m.Ka)return T(a,7,"Premature end-of-partition0 encountered.");for(;a.ja<a.za;++a.ja){if(e=c,g=(d=a).rb[d.sb-1],k=d.rb[d.sb+d.ja],f=d.ya[d.aa+d.ja],l=d.kc?f.Ad:0)g.la=k.la=0,f.Za||(g.Na=k.Na=0),f.Hc=0,f.Gc=0,f.ia=0;else{var u,w;if(g=k,k=e,l=d.Pa.Xc,m=d.ya[d.aa+d.ja],n=d.pb[m.$b],h=m.ad,r=0,q=d.rb[d.sb-1],t=v=0,M(h,r,0,384),m.Za)var y=0,A=l[3];else{p=V(16);var E=g.Na+q.Na;if(E=oa(k,l[1],E,n.Eb,0,p,0),g.Na=q.Na=(0<E)+0,1<E)Nc(p,0,h,r);else{var B=p[0]+3>>3;for(p=0;256>p;p+=16)h[r+p]=B}y=1,A=l[0]}var C=15&g.la,N=15&q.la;for(p=0;4>p;++p){var z=1&N;for(B=w=0;4>B;++B)C=C>>1|(z=(E=oa(k,A,E=z+(1&C),n.Sc,y,h,r))>y)<<7,w=w<<2|(3<E?3:1<E?2:0!=h[r+0]),r+=16;C>>=4,N=N>>1|z<<7,v=(v<<8|w)>>>0}for(A=C,y=N>>4,u=0;4>u;u+=2){for(w=0,C=g.la>>4+u,N=q.la>>4+u,p=0;2>p;++p){for(z=1&N,B=0;2>B;++B)E=z+(1&C),C=C>>1|(z=0<(E=oa(k,l[2],E,n.Qc,0,h,r)))<<3,w=w<<2|(3<E?3:1<E?2:0!=h[r+0]),r+=16;C>>=2,N=N>>1|z<<5}t|=w<<4*u,A|=C<<4<<u,y|=(240&N)<<u}g.la=A,q.la=y,m.Hc=v,m.Gc=t,m.ia=43690&t?0:n.ia,l=!(v|t)}if(0<d.L&&(d.wa[d.Y+d.ja]=d.gd[f.$b][f.Za],d.wa[d.Y+d.ja].La|=!l),e.Ka)return T(a,7,"Premature end-of-file encountered.")}if(Lc(a),d=b,e=1,f=(c=a).D,g=0<c.L&&c.M>=c.zb&&c.M<=c.Va,0==c.Aa)a:{if(f.M=c.M,f.uc=g,Oc(c,f),e=1,f=(w=c.D).Nb,g=(t=Ya[c.L])*c.R,k=t/2*c.B,p=16*f*c.R,B=8*f*c.B,l=c.sa,m=c.ta-g+p,n=c.qa,h=c.ra-k+B,r=c.Ha,q=c.Ia-k+B,N=0==(C=w.M),v=C>=c.Va-1,2==c.Aa&&Oc(c,w),w.uc)for(z=(E=c).D.M,x(E.D.uc),w=E.yb;w<E.Hb;++w){y=w,A=z;var D=(S=(Q=E).D).Nb;u=Q.R;var S=S.wa[S.Y+y],F=Q.sa,H=Q.ta+16*D*u+16*y,J=S.dd,G=S.tc;if(0!=G)if(x(3<=G),1==Q.L)0<y&&Pc(F,H,u,G+4),S.La&&Qc(F,H,u,G),0<A&&Rc(F,H,u,G+4),S.La&&Sc(F,H,u,G);else{var L=Q.B,O=Q.qa,P=Q.ra+8*D*L+8*y,R=Q.Ha,Q=Q.Ia+8*D*L+8*y;D=S.ld,0<y&&(Tc(F,H,u,G+4,J,D),Uc(O,P,R,Q,L,G+4,J,D)),S.La&&(Vc(F,H,u,G,J,D),Wc(O,P,R,Q,L,G,J,D)),0<A&&(Xc(F,H,u,G+4,J,D),Yc(O,P,R,Q,L,G+4,J,D)),S.La&&(Zc(F,H,u,G,J,D),$c(O,P,R,Q,L,G,J,D))}}if(c.ia&&alert("todo:DitherRow"),null!=d.put){if(w=16*C,C=16*(C+1),N?(d.y=c.sa,d.O=c.ta+p,d.f=c.qa,d.N=c.ra+B,d.ea=c.Ha,d.W=c.Ia+B):(w-=t,d.y=l,d.O=m,d.f=n,d.N=h,d.ea=r,d.W=q),v||(C-=t),C>d.o&&(C=d.o),d.F=null,d.J=null,null!=c.Fa&&0<c.Fa.length&&w<C&&(d.J=Le(c,d,w,C-w),d.F=c.mb,null==d.F&&0==d.F.length)){e=T(c,3,"Could not decode alpha data.");break a}w<d.j&&(t=d.j-w,w=d.j,x(!(1&t)),d.O+=c.R*t,d.N+=c.B*(t>>1),d.W+=c.B*(t>>1),null!=d.F&&(d.J+=d.width*t)),w<C&&(d.O+=d.v,d.N+=d.v>>1,d.W+=d.v>>1,null!=d.F&&(d.J+=d.v),d.ka=w-d.j,d.U=d.va-d.v,d.T=C-w,e=d.put(d))}f+1!=c.Ic||v||(I(c.sa,c.ta-g,l,m+16*c.R,g),I(c.qa,c.ra-k,n,h+8*c.B,k),I(c.Ha,c.Ia-k,r,q+8*c.B,k))}if(!e)return T(a,6,"Output aborted.")}return 1}(a,b)),null!=b.bc&&b.bc(b),c&=1}return c?(a.cb=0,c):0}function qa(a,b,c,d,e){e=a[b+c+32*d]+(e>>3),a[b+c+32*d]=-256&e?0>e?0:255:e}function kb(a,b,c,d,e,f){qa(a,b,0,c,d+e),qa(a,b,1,c,d+f),qa(a,b,2,c,d-f),qa(a,b,3,c,d-e)}function da(a){return(20091*a>>16)+a}function id(a,b,c,d){var f,e=0,g=V(16);for(f=0;4>f;++f){var h=a[b+0]+a[b+8],k=a[b+0]-a[b+8],l=(35468*a[b+4]>>16)-da(a[b+12]),m=da(a[b+4])+(35468*a[b+12]>>16);g[e+0]=h+m,g[e+1]=k+l,g[e+2]=k-l,g[e+3]=h-m,e+=4,b++}for(f=e=0;4>f;++f)h=(a=g[e+0]+4)+g[e+8],k=a-g[e+8],l=(35468*g[e+4]>>16)-da(g[e+12]),qa(c,d,0,0,h+(m=da(g[e+4])+(35468*g[e+12]>>16))),qa(c,d,1,0,k+l),qa(c,d,2,0,k-l),qa(c,d,3,0,h-m),e++,d+=32}function Te(a,b,c,d){var e=a[b+0]+4,f=35468*a[b+4]>>16,g=da(a[b+4]),h=35468*a[b+1]>>16;kb(c,d,0,e+g,a=da(a[b+1]),h),kb(c,d,1,e+f,a,h),kb(c,d,2,e-f,a,h),kb(c,d,3,e-g,a,h)}function Pe(a,b,c,d,e){id(a,b,c,d),e&&id(a,b+16,c,d+4)}function Qe(a,b,c,d){Za(a,b+0,c,d,1),Za(a,b+32,c,d+128,1)}function Re(a,b,c,d){var e;for(a=a[b+0]+4,e=0;4>e;++e)for(b=0;4>b;++b)qa(c,d,b,e,a)}function Se(a,b,c,d){a[b+0]&&pa(a,b+0,c,d),a[b+16]&&pa(a,b+16,c,d+4),a[b+32]&&pa(a,b+32,c,d+128),a[b+48]&&pa(a,b+48,c,d+128+4)}function Oe(a,b,c,d){var f,e=V(16);for(f=0;4>f;++f){var g=a[b+0+f]+a[b+12+f],h=a[b+4+f]+a[b+8+f],k=a[b+4+f]-a[b+8+f],l=a[b+0+f]-a[b+12+f];e[0+f]=g+h,e[8+f]=g-h,e[4+f]=l+k,e[12+f]=l-k}for(f=0;4>f;++f)g=(a=e[0+4*f]+3)+e[3+4*f],h=e[1+4*f]+e[2+4*f],k=e[1+4*f]-e[2+4*f],l=a-e[3+4*f],c[d+0]=g+h>>3,c[d+16]=l+k>>3,c[d+32]=g-h>>3,c[d+48]=l-k>>3,d+=64}function Pb(a,b,c){var g,d=b-32,e=R,f=255-a[d-1];for(g=0;g<c;++g){var l,h=e,k=f+a[b-1];for(l=0;l<c;++l)a[b+l]=h[k+a[d+l]];b+=32}}function ef(a,b){Pb(a,b,4)}function wf(a,b){Pb(a,b,8)}function pf(a,b){Pb(a,b,16)}function qf(a,b){var c;for(c=0;16>c;++c)I(a,b+32*c,a,b-32,16)}function rf(a,b){var c;for(c=16;0<c;--c)M(a,b,a[b-1],16),b+=32}function $a(a,b,c){var d;for(d=0;16>d;++d)M(b,c+32*d,a,16)}function of(a,b){var d,c=16;for(d=0;16>d;++d)c+=a[b-1+32*d]+a[b+d-32];$a(c>>5,a,b)}function sf(a,b){var d,c=8;for(d=0;16>d;++d)c+=a[b-1+32*d];$a(c>>4,a,b)}function tf(a,b){var d,c=8;for(d=0;16>d;++d)c+=a[b+d-32];$a(c>>4,a,b)}function uf(a,b){$a(128,a,b)}function z(a,b,c){return a+2*b+c+2>>2}function ff(a,b){var d,c=b-32;c=new Uint8Array([z(a[c-1],a[c+0],a[c+1]),z(a[c+0],a[c+1],a[c+2]),z(a[c+1],a[c+2],a[c+3]),z(a[c+2],a[c+3],a[c+4])]);for(d=0;4>d;++d)I(a,b+32*d,c,0,c.length)}function gf(a,b){var c=a[b-1],d=a[b-1+32],e=a[b-1+64],f=a[b-1+96];ra(a,b+0,16843009*z(a[b-1-32],c,d)),ra(a,b+32,16843009*z(c,d,e)),ra(a,b+64,16843009*z(d,e,f)),ra(a,b+96,16843009*z(e,f,f))}function df(a,b){var d,c=4;for(d=0;4>d;++d)c+=a[b+d-32]+a[b-1+32*d];for(c>>=3,d=0;4>d;++d)M(a,b+32*d,c,4)}function hf(a,b){var c=a[b-1+0],d=a[b-1+32],e=a[b-1+64],f=a[b-1-32],g=a[b+0-32],h=a[b+1-32],k=a[b+2-32],l=a[b+3-32];a[b+0+96]=z(d,e,a[b-1+96]),a[b+1+96]=a[b+0+64]=z(c,d,e),a[b+2+96]=a[b+1+64]=a[b+0+32]=z(f,c,d),a[b+3+96]=a[b+2+64]=a[b+1+32]=a[b+0+0]=z(g,f,c),a[b+3+64]=a[b+2+32]=a[b+1+0]=z(h,g,f),a[b+3+32]=a[b+2+0]=z(k,h,g),a[b+3+0]=z(l,k,h)}function kf(a,b){var c=a[b+1-32],d=a[b+2-32],e=a[b+3-32],f=a[b+4-32],g=a[b+5-32],h=a[b+6-32],k=a[b+7-32];a[b+0+0]=z(a[b+0-32],c,d),a[b+1+0]=a[b+0+32]=z(c,d,e),a[b+2+0]=a[b+1+32]=a[b+0+64]=z(d,e,f),a[b+3+0]=a[b+2+32]=a[b+1+64]=a[b+0+96]=z(e,f,g),a[b+3+32]=a[b+2+64]=a[b+1+96]=z(f,g,h),a[b+3+64]=a[b+2+96]=z(g,h,k),a[b+3+96]=z(h,k,k)}function jf(a,b){var c=a[b-1+0],d=a[b-1+32],e=a[b-1+64],f=a[b-1-32],g=a[b+0-32],h=a[b+1-32],k=a[b+2-32],l=a[b+3-32];a[b+0+0]=a[b+1+64]=f+g+1>>1,a[b+1+0]=a[b+2+64]=g+h+1>>1,a[b+2+0]=a[b+3+64]=h+k+1>>1,a[b+3+0]=k+l+1>>1,a[b+0+96]=z(e,d,c),a[b+0+64]=z(d,c,f),a[b+0+32]=a[b+1+96]=z(c,f,g),a[b+1+32]=a[b+2+96]=z(f,g,h),a[b+2+32]=a[b+3+96]=z(g,h,k),a[b+3+32]=z(h,k,l)}function lf(a,b){var c=a[b+0-32],d=a[b+1-32],e=a[b+2-32],f=a[b+3-32],g=a[b+4-32],h=a[b+5-32],k=a[b+6-32],l=a[b+7-32];a[b+0+0]=c+d+1>>1,a[b+1+0]=a[b+0+64]=d+e+1>>1,a[b+2+0]=a[b+1+64]=e+f+1>>1,a[b+3+0]=a[b+2+64]=f+g+1>>1,a[b+0+32]=z(c,d,e),a[b+1+32]=a[b+0+96]=z(d,e,f),a[b+2+32]=a[b+1+96]=z(e,f,g),a[b+3+32]=a[b+2+96]=z(f,g,h),a[b+3+64]=z(g,h,k),a[b+3+96]=z(h,k,l)}function nf(a,b){var c=a[b-1+0],d=a[b-1+32],e=a[b-1+64],f=a[b-1+96];a[b+0+0]=c+d+1>>1,a[b+2+0]=a[b+0+32]=d+e+1>>1,a[b+2+32]=a[b+0+64]=e+f+1>>1,a[b+1+0]=z(c,d,e),a[b+3+0]=a[b+1+32]=z(d,e,f),a[b+3+32]=a[b+1+64]=z(e,f,f),a[b+3+64]=a[b+2+64]=a[b+0+96]=a[b+1+96]=a[b+2+96]=a[b+3+96]=f}function mf(a,b){var c=a[b-1+0],d=a[b-1+32],e=a[b-1+64],f=a[b-1+96],g=a[b-1-32],h=a[b+0-32],k=a[b+1-32],l=a[b+2-32];a[b+0+0]=a[b+2+32]=c+g+1>>1,a[b+0+32]=a[b+2+64]=d+c+1>>1,a[b+0+64]=a[b+2+96]=e+d+1>>1,a[b+0+96]=f+e+1>>1,a[b+3+0]=z(h,k,l),a[b+2+0]=z(g,h,k),a[b+1+0]=a[b+3+32]=z(c,g,h),a[b+1+32]=a[b+3+64]=z(d,c,g),a[b+1+64]=a[b+3+96]=z(e,d,c),a[b+1+96]=z(f,e,d)}function xf(a,b){var c;for(c=0;8>c;++c)I(a,b+32*c,a,b-32,8)}function yf(a,b){var c;for(c=0;8>c;++c)M(a,b,a[b-1],8),b+=32}function lb(a,b,c){var d;for(d=0;8>d;++d)M(b,c+32*d,a,8)}function vf(a,b){var d,c=8;for(d=0;8>d;++d)c+=a[b+d-32]+a[b-1+32*d];lb(c>>4,a,b)}function Af(a,b){var d,c=4;for(d=0;8>d;++d)c+=a[b+d-32];lb(c>>3,a,b)}function zf(a,b){var d,c=4;for(d=0;8>d;++d)c+=a[b-1+32*d];lb(c>>3,a,b)}function Bf(a,b){lb(128,a,b)}function ab(a,b,c){var d=a[b-c],e=a[b+0],f=3*(e-d)+Qb[1020+a[b-2*c]-a[b+c]],g=mb[112+(f+4>>3)];a[b-c]=R[255+d+mb[112+(f+3>>3)]],a[b+0]=R[255+e-g]}function jd(a,b,c,d){var e=a[b+0],f=a[b+c];return U[255+a[b-2*c]-a[b-c]]>d||U[255+f-e]>d}function kd(a,b,c,d){return 4*U[255+a[b-c]-a[b+0]]+U[255+a[b-2*c]-a[b+c]]<=d}function ld(a,b,c,d,e){var f=a[b-3*c],g=a[b-2*c],h=a[b-c],k=a[b+0],l=a[b+c],m=a[b+2*c],n=a[b+3*c];return 4*U[255+h-k]+U[255+g-l]>d?0:U[255+a[b-4*c]-f]<=e&&U[255+f-g]<=e&&U[255+g-h]<=e&&U[255+n-m]<=e&&U[255+m-l]<=e&&U[255+l-k]<=e}function gd(a,b,c,d){var e=2*d+1;for(d=0;16>d;++d)kd(a,b+d,c,e)&&ab(a,b+d,c)}function hd(a,b,c,d){var e=2*d+1;for(d=0;16>d;++d)kd(a,b+d*c,1,e)&&ab(a,b+d*c,1)}function bf(a,b,c,d){var e;for(e=3;0<e;--e)gd(a,b+=4*c,c,d)}function cf(a,b,c,d){var e;for(e=3;0<e;--e)hd(a,b+=4,c,d)}function ea(a,b,c,d,e,f,g,h){for(f=2*f+1;0<e--;){if(ld(a,b,c,f,g))if(jd(a,b,c,h))ab(a,b,c);else{var k=a,l=b,m=c,n=k[l-2*m],r=k[l-m],q=k[l+0],t=k[l+m],v=k[l+2*m],u=27*(p=Qb[1020+3*(q-r)+Qb[1020+n-t]])+63>>7,w=18*p+63>>7,p=9*p+63>>7;k[l-3*m]=R[255+k[l-3*m]+p],k[l-2*m]=R[255+n+w],k[l-m]=R[255+r+u],k[l+0]=R[255+q-u],k[l+m]=R[255+t-w],k[l+2*m]=R[255+v-p]}b+=d}}function Fa(a,b,c,d,e,f,g,h){for(f=2*f+1;0<e--;){if(ld(a,b,c,f,g))if(jd(a,b,c,h))ab(a,b,c);else{var k=a,l=b,m=c,n=k[l-m],r=k[l+0],q=k[l+m],v=mb[112+((t=3*(r-n))+4>>3)],t=mb[112+(t+3>>3)],p=v+1>>1;k[l-2*m]=R[255+k[l-2*m]+p],k[l-m]=R[255+n+t],k[l+0]=R[255+r-v],k[l+m]=R[255+q-p]}b+=d}}function Ue(a,b,c,d,e,f){ea(a,b,c,1,16,d,e,f)}function Ve(a,b,c,d,e,f){ea(a,b,1,c,16,d,e,f)}function Ye(a,b,c,d,e,f){var g;for(g=3;0<g;--g)Fa(a,b+=4*c,c,1,16,d,e,f)}function Ze(a,b,c,d,e,f){var g;for(g=3;0<g;--g)Fa(a,b+=4,1,c,16,d,e,f)}function We(a,b,c,d,e,f,g,h){ea(a,b,e,1,8,f,g,h),ea(c,d,e,1,8,f,g,h)}function Xe(a,b,c,d,e,f,g,h){ea(a,b,1,e,8,f,g,h),ea(c,d,1,e,8,f,g,h)}function $e(a,b,c,d,e,f,g,h){Fa(a,b+4*e,e,1,8,f,g,h),Fa(c,d+4*e,e,1,8,f,g,h)}function af(a,b,c,d,e,f,g,h){Fa(a,b+4,1,e,8,f,g,h),Fa(c,d+4,1,e,8,f,g,h)}function Cf(){this.ba=new Cb,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ud,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function md(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Df(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ef(){this.ua=0,this.Wa=new ac,this.vb=new ac,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ub,this.yc=new O}function je(){this.xb=this.a=0,this.l=new Oa,this.ca=new Cb,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ra,this.Pb=0,this.wd=new Ra,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ef,this.ab=0,this.gc=wa(4,Df),this.Oc=0}function Ff(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Oa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Rb(a,b,c,d,e,f,g){for(a=null==a?0:a[b+0],b=0;b<g;++b)e[f+b]=a+c[d+b]&255,a=e[f+b]}function Gf(a,b,c,d,e,f,g){var h;if(null==a)Rb(null,null,c,d,e,f,g);else for(h=0;h<g;++h)e[f+h]=a[b+h]+c[d+h]&255}function Hf(a,b,c,d,e,f,g){if(null==a)Rb(null,null,c,d,e,f,g);else{var m,h=a[b+0],k=h,l=h;for(m=0;m<g;++m)k=l+(h=a[b+m])-k,l=c[d+m]+(-256&k?0>k?0:255:k)&255,k=h,e[f+m]=l}}function Le(a,b,c,d){var e=b.width,f=b.o;if(x(null!=a&&null!=b),0>c||0>=d||c+d>f)return null;if(!a.Cc){if(null==a.ga){var g;if(a.ga=new Ff,(g=null==a.ga)||(g=b.width*b.o,x(0==a.Gb.length),a.Gb=V(g),a.Uc=0,null==a.Gb?g=0:(a.mb=a.Gb,a.nb=a.Uc,a.rc=null,g=1),g=!g),!g){g=a.ga;var h=a.Fa,k=a.P,l=a.qc,m=a.mb,n=a.nb,r=k+1,q=l-1,t=g.l;if(x(null!=h&&null!=m&&null!=b),ia[0]=null,ia[1]=Rb,ia[2]=Gf,ia[3]=Hf,g.ca=m,g.tb=n,g.c=b.width,g.i=b.height,x(0<g.c&&0<g.i),1>=l)b=0;else if(g.$a=h[k+0]>>0&3,g.Z=h[k+0]>>2&3,g.Lc=h[k+0]>>4&3,k=h[k+0]>>6&3,0>g.$a||1<g.$a||4<=g.Z||1<g.Lc||k)b=0;else if(t.put=kc,t.ac=gc,t.bc=lc,t.ma=g,t.width=b.width,t.height=b.height,t.Da=b.Da,t.v=b.v,t.va=b.va,t.j=b.j,t.o=b.o,g.$a)b:{x(1==g.$a),b=Bc();c:for(;;){if(null==b){b=0;break b}if(x(null!=g),g.mc=b,b.c=g.c,b.i=g.i,b.l=g.l,b.l.ma=g,b.l.width=g.c,b.l.height=g.i,b.a=0,cb(b.m,h,r,q),!rb(g.c,g.i,1,b,null))break c;if(1==b.ab&&3==b.gc[0].hc&&yc(b.s)?(g.ic=1,h=b.c*b.i,b.Ta=null,b.Ua=0,b.V=V(h),b.Ba=0,null==b.V?(b.a=1,b=0):b=1):(g.ic=0,b=Ec(b,g.c)),!b)break c;b=1;break b}g.mc=null,b=0}else b=q>=g.c*g.i;g=!b}if(g)return null;1!=a.ga.Lc?a.Ga=0:d=f-c}x(null!=a.ga),x(c+d<=f);a:{if(b=(h=a.ga).c,f=h.l.o,0==h.$a){if(r=a.rc,q=a.Vc,t=a.Fa,k=a.P+1+c*b,l=a.mb,m=a.nb+c*b,x(k<=a.P+a.qc),0!=h.Z)for(x(null!=ia[h.Z]),g=0;g<d;++g)ia[h.Z](r,q,t,k,l,m,b),r=l,q=m,m+=b,k+=b;else for(g=0;g<d;++g)I(l,m,t,k,b),r=l,q=m,m+=b,k+=b;a.rc=r,a.Vc=q}else{if(x(null!=h.mc),b=c+d,x(null!=(g=h.mc)),x(b<=g.i),g.C>=b)b=1;else if(h.ic||Aa(),h.ic){h=g.V,r=g.Ba,q=g.c;var v=g.i,p=(t=1,k=g.$/q,l=g.$%q,m=g.m,n=g.s,g.$),u=q*v,w=q*b,y=n.wc,A=p<w?ha(n,l,k):null;x(p<=u),x(b<=v),x(yc(n));c:for(;;){for(;!m.h&&p<w;){if(l&y||(A=ha(n,l,k)),x(null!=A),Sa(m),256>(v=ua(A.G[0],A.H[0],m)))h[r+p]=v,++p,++l>=q&&(l=0,++k<=b&&!(k%16)&&Ib(g,k));else{if(!(280>v)){t=0;break c}v=ib(v-256,m);var B,E=ua(A.G[4],A.H[4],m);if(Sa(m),!(p>=(E=nc(q,E=ib(E,m)))&&u-p>=v)){t=0;break c}for(B=0;B<v;++B)h[r+p+B]=h[r+p+B-E];for(p+=v,l+=v;l>=q;)l-=q,++k<=b&&!(k%16)&&Ib(g,k);p<w&&l&y&&(A=ha(n,l,k))}x(m.h==db(m))}Ib(g,k>b?b:k);break c}!t||m.h&&p<u?(t=0,g.a=m.h?5:3):g.$=p,b=t}else b=Jb(g,g.V,g.Ba,g.c,g.i,b,se);if(!b){d=0;break a}}c+d>=f&&(a.Cc=1),d=1}if(!d)return null;if(a.Cc&&(null!=(d=a.ga)&&(d.mc=null),a.ga=null,0<a.Ga))return alert("todo:WebPDequantizeLevels"),null}return a.nb+c*e}function If(a,b,c,d,e,f){for(;0<e--;){var m,g=a,h=b+(c?1:0),k=a,l=b+(c?0:3);for(m=0;m<d;++m){var n=k[l+4*m];255!=n&&(n*=32897,g[h+4*m+0]=g[h+4*m+0]*n>>23,g[h+4*m+1]=g[h+4*m+1]*n>>23,g[h+4*m+2]=g[h+4*m+2]*n>>23)}b+=f}}function Jf(a,b,c,d,e){for(;0<d--;){var f;for(f=0;f<c;++f){var g=a[b+2*f+0],k=15&(h=a[b+2*f+1]),l=4369*k,h=(240&h|h>>4)*l>>16;a[b+2*f+0]=(240&g|g>>4)*l>>16&240|(15&g|g<<4)*l>>16>>4&15,a[b+2*f+1]=240&h|k}b+=e}}function Kf(a,b,c,d,e,f,g,h){var l,m,k=255;for(m=0;m<e;++m){for(l=0;l<d;++l){var n=a[b+l];f[g+4*l]=n,k&=n}b+=c,g+=h}return 255!=k}function Lf(a,b,c,d,e){var f;for(f=0;f<e;++f)c[d+f]=a[b+f]>>8}function Aa(){za=If,vc=Jf,fc=Kf,Fc=Lf}function va(a,b,c){self[a]=function(a,e,f,g,h,k,l,m,n,r,q,t,v,p,u,w,y){var d,E=y-1>>1,B=h[k+0]|l[m+0]<<16,C=n[r+0]|q[t+0]<<16;x(null!=a);var z=3*B+C+131074>>2;for(b(a[e+0],255&z,z>>16,v,p),null!=f&&(z=3*C+B+131074>>2,b(f[g+0],255&z,z>>16,u,w)),d=1;d<=E;++d){var D=h[k+d]|l[m+d]<<16,G=n[r+d]|q[t+d]<<16,F=B+D+C+G+524296,H=F+2*(D+C)>>3;z=H+B>>1,B=(F=F+2*(B+G)>>3)+D>>1,b(a[e+2*d-1],255&z,z>>16,v,p+(2*d-1)*c),b(a[e+2*d-0],255&B,B>>16,v,p+(2*d-0)*c),null!=f&&(z=F+C>>1,B=H+G>>1,b(f[g+2*d-1],255&z,z>>16,u,w+(2*d-1)*c),b(f[g+2*d+0],255&B,B>>16,u,w+(2*d+0)*c)),B=D,C=G}1&y||(z=3*B+C+131074>>2,b(a[e+y-1],255&z,z>>16,v,p+(y-1)*c),null!=f&&(z=3*C+B+131074>>2,b(f[g+y-1],255&z,z>>16,u,w+(y-1)*c)))}}function ic(){P[Ca]=Mf,P[Ua]=nd,P[tc]=Nf,P[Va]=od,P[ya]=pd,P[Db]=qd,P[wc]=Of,P[zb]=nd,P[Ab]=od,P[Ja]=pd,P[Bb]=qd}function Sb(a){return a&~Pf?0>a?0:255:a>>rd}function bb(a,b){return Sb((19077*a>>8)+(26149*b>>8)-14234)}function nb(a,b,c){return Sb((19077*a>>8)-(6419*b>>8)-(13320*c>>8)+8708)}function Pa(a,b){return Sb((19077*a>>8)+(33050*b>>8)-17685)}function Ga(a,b,c,d,e){d[e+0]=bb(a,c),d[e+1]=nb(a,b,c),d[e+2]=Pa(a,b)}function Tb(a,b,c,d,e){d[e+0]=Pa(a,b),d[e+1]=nb(a,b,c),d[e+2]=bb(a,c)}function sd(a,b,c,d,e){var f=nb(a,b,c);b=f<<3&224|Pa(a,b)>>3,d[e+0]=248&bb(a,c)|f>>5,d[e+1]=b}function td(a,b,c,d,e){var f=240&Pa(a,b)|15;d[e+0]=240&bb(a,c)|nb(a,b,c)>>4,d[e+1]=f}function ud(a,b,c,d,e){d[e+0]=255,Ga(a,b,c,d,e+1)}function vd(a,b,c,d,e){Tb(a,b,c,d,e),d[e+3]=255}function wd(a,b,c,d,e){Ga(a,b,c,d,e),d[e+3]=255}function ga(a,b){return 0>a?0:a>b?b:a}function la(a,b,c){self[a]=function(a,e,f,g,h,k,l,m,n){for(var d=m+(-2&n)*c;m!=d;)b(a[e+0],f[g+0],h[k+0],l,m),b(a[e+1],f[g+0],h[k+0],l,m+c),e+=2,++g,++k,m+=2*c;1&n&&b(a[e+0],f[g+0],h[k+0],l,m)}}function xd(a,b,c){return 0==c?0==a?0==b?6:5:0==b?4:0:c}function yd(a,b,c,d,e){switch(a>>>30){case 3:Za(b,c,d,e,0);break;case 2:fd(b,c,d,e);break;case 1:pa(b,c,d,e)}}function Oc(a,b){var c,d,e=b.M,f=b.Nb,g=a.oc,h=a.pc+40,k=a.oc,l=a.pc+584,m=a.oc,n=a.pc+600;for(c=0;16>c;++c)g[h+32*c-1]=129;for(c=0;8>c;++c)k[l+32*c-1]=129,m[n+32*c-1]=129;for(0<e?g[h-1-32]=k[l-1-32]=m[n-1-32]=129:(M(g,h-32-1,127,21),M(k,l-32-1,127,9),M(m,n-32-1,127,9)),d=0;d<a.za;++d){var r=b.ya[b.aa+d];if(0<d){for(c=-1;16>c;++c)I(g,h+32*c-4,g,h+32*c+12,4);for(c=-1;8>c;++c)I(k,l+32*c-4,k,l+32*c+4,4),I(m,n+32*c-4,m,n+32*c+4,4)}var q=a.Gd,t=a.Hd+d,v=r.ad,p=r.Hc;if(0<e&&(I(g,h-32,q[t].y,0,16),I(k,l-32,q[t].f,0,8),I(m,n-32,q[t].ea,0,8)),r.Za){var u=g,w=h-32+16;for(0<e&&(d>=a.za-1?M(u,w,q[t].y[15],4):I(u,w,q[t+1].y,0,4)),c=0;4>c;c++)u[w+128+c]=u[w+256+c]=u[w+384+c]=u[w+0+c];for(c=0;16>c;++c,p<<=2)u=g,w=h+zd[c],W[r.Ob[c]](u,w),yd(p,v,16*+c,u,w)}else if(u=xd(d,e,r.Ob[0]),Y[u](g,h),0!=p)for(c=0;16>c;++c,p<<=2)yd(p,v,16*+c,g,h+zd[c]);for(c=r.Gc,u=xd(d,e,r.Dd),ka[u](k,l),ka[u](m,n),p=v,u=k,w=l,255&(r=c>>0)&&(170&r?Nb(p,256,u,w):Ob(p,256,u,w)),r=m,p=n,255&(c>>=8)&&(170&c?Nb(v,320,r,p):Ob(v,320,r,p)),e<a.Ub-1&&(I(q[t].y,0,g,h+480,16),I(q[t].f,0,k,l+224,8),I(q[t].ea,0,m,n+224,8)),c=8*f*a.B,q=a.sa,t=a.ta+16*d+16*f*a.R,v=a.qa,r=a.ra+8*d+c,p=a.Ha,u=a.Ia+8*d+c,c=0;16>c;++c)I(q,t+c*a.R,g,h+32*c,16);for(c=0;8>c;++c)I(v,r+c*a.B,k,l+32*c,8),I(p,u+c*a.B,m,n+32*c,8)}}function Ad(a,b,c,d,e,f,g,h,k){var l=[0],m=[0],n=0,r=null!=k?k.kd:0,q=null!=k?k:new md;if(null==a||12>c)return 7;q.data=a,q.w=b,q.ha=c,b=[b],c=[c],q.gb=[q.gb];a:{var t=b,v=c,p=q.gb;if(x(null!=a),x(null!=v),x(null!=p),p[0]=0,12<=v[0]&&!fa(a,t[0],"RIFF")){if(fa(a,t[0]+8,"WEBP")){p=3;break a}var u=Ha(a,t[0]+4);if(12>u||4294967286<u){p=3;break a}if(r&&u>v[0]-8){p=7;break a}p[0]=u,t[0]+=12,v[0]-=12}p=0}if(0!=p)return p;for(u=0<q.gb[0],c=c[0];;){a:{var w=a;v=b,p=c;var A=l,z=m,B=t=[0];if((y=n=[n])[0]=0,8>p[0])p=7;else{if(!fa(w,v[0],"VP8X")){if(10!=Ha(w,v[0]+4)){p=3;break a}if(18>p[0]){p=7;break a}var C=Ha(w,v[0]+8),D=1+Yb(w,v[0]+12);if(2147483648<=D*(w=1+Yb(w,v[0]+15))){p=3;break a}null!=B&&(B[0]=C),null!=A&&(A[0]=D),null!=z&&(z[0]=w),v[0]+=18,p[0]-=18,y[0]=1}p=0}}if(n=n[0],t=t[0],0!=p)return p;if(v=!!(2&t),!u&&n)return 3;if(null!=f&&(f[0]=!!(16&t)),null!=g&&(g[0]=v),null!=h&&(h[0]=0),g=l[0],t=m[0],n&&v&&null==k){p=0;break}if(4>c){p=7;break}if(u&&n||!u&&!n&&!fa(a,b[0],"ALPH")){c=[c],q.na=[q.na],q.P=[q.P],q.Sa=[q.Sa];a:{C=a,p=b,u=c;var y=q.gb;A=q.na,z=q.P,B=q.Sa;D=22,x(null!=C),x(null!=u),w=p[0];var F=u[0];for(x(null!=A),x(null!=B),A[0]=null,z[0]=null,B[0]=0;;){if(p[0]=w,u[0]=F,8>F){p=7;break a}var G=Ha(C,w+4);if(4294967286<G){p=3;break a}var H=8+G+1&-2;if(D+=H,0<y&&D>y){p=3;break a}if(!fa(C,w,"VP8 ")||!fa(C,w,"VP8L")){p=0;break a}if(F[0]<H){p=7;break a}fa(C,w,"ALPH")||(A[0]=C,z[0]=w+8,B[0]=G),w+=H,F-=H}}if(c=c[0],q.na=q.na[0],q.P=q.P[0],q.Sa=q.Sa[0],0!=p)break}c=[c],q.Ja=[q.Ja],q.xa=[q.xa];a:if(y=a,p=b,u=c,A=q.gb[0],z=q.Ja,B=q.xa,C=p[0],w=!fa(y,C,"VP8 "),D=!fa(y,C,"VP8L"),x(null!=y),x(null!=u),x(null!=z),x(null!=B),8>u[0])p=7;else{if(w||D){if(y=Ha(y,C+4),12<=A&&y>A-12){p=3;break a}if(r&&y>u[0]-8){p=7;break a}z[0]=y,p[0]+=8,u[0]-=8,B[0]=D}else B[0]=5<=u[0]&&47==y[C+0]&&!(y[C+4]>>5),z[0]=u[0];p=0}if(c=c[0],q.Ja=q.Ja[0],q.xa=q.xa[0],b=b[0],0!=p)break;if(4294967286<q.Ja)return 3;if(null==h||v||(h[0]=q.xa?2:1),g=[g],t=[t],q.xa){if(5>c){p=7;break}h=g,r=t,v=f,null==a||5>c?a=0:5<=c&&47==a[b+0]&&!(a[b+4]>>5)?(u=[0],y=[0],A=[0],cb(z=new Ra,a,b,c),mc(z,u,y,A)?(null!=h&&(h[0]=u[0]),null!=r&&(r[0]=y[0]),null!=v&&(v[0]=A[0]),a=1):a=0):a=0}else{if(10>c){p=7;break}h=t,null==a||10>c||!Jc(a,b+3,c-3)?a=0:(r=a[b+0]|a[b+1]<<8|a[b+2]<<16,v=16383&(a[b+7]<<8|a[b+6]),a=16383&(a[b+9]<<8|a[b+8]),1&r||3<(r>>1&7)||!(r>>4&1)||r>>5>=q.Ja||!v||!a?a=0:(g&&(g[0]=v),h&&(h[0]=a),a=1))}if(!a)return 3;if(g=g[0],t=t[0],n&&(l[0]!=g||m[0]!=t))return 3;null!=k&&(k[0]=q,k.offset=b-k.w,x(4294967286>b-k.w),x(k.offset==k.ha-c));break}return 0==p||7==p&&n&&null==k?(null!=f&&(f[0]|=null!=q.na&&0<q.na.length),null!=d&&(d[0]=g),null!=e&&(e[0]=t),0):p}function hc(a,b,c){var d=b.width,e=b.height,f=0,g=0,h=d,k=e;if(b.Da=null!=a&&0<a.Da,b.Da&&(h=a.cd,k=a.bd,f=a.v,g=a.j,11>c||(f&=-2,g&=-2),0>f||0>g||0>=h||0>=k||f+h>d||g+k>e))return 0;if(b.v=f,b.j=g,b.va=f+h,b.o=g+k,b.U=h,b.T=k,b.da=null!=a&&0<a.da,b.da){if(!bc(h,k,c=[a.ib],f=[a.hb]))return 0;b.ib=c[0],b.hb=f[0]}return b.ob=null!=a&&a.ob,b.Kb=null==a||!a.Sd,b.da&&(b.ob=b.ib<3*d/4&&b.hb<3*e/4,b.Kb=0),1}function Bd(a){if(null==a)return 2;if(11>a.S){var b=a.f.RGBA;b.fb+=(a.height-1)*b.A,b.A=-b.A}else b=a.f.kb,a=a.height,b.O+=(a-1)*b.fa,b.fa=-b.fa,b.N+=(a-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(a-1>>1)*b.Db,b.Db=-b.Db,null!=b.F&&(b.J+=(a-1)*b.lb,b.lb=-b.lb);return 0}function Cd(a,b,c,d){if(null==d||0>=a||0>=b)return 2;if(null!=c){if(c.Da){var e=c.cd,f=c.bd,g=-2&c.v,h=-2&c.j;if(0>g||0>h||0>=e||0>=f||g+e>a||h+f>b)return 2;a=e,b=f}if(c.da){if(!bc(a,b,e=[c.ib],f=[c.hb]))return 2;a=e[0],b=f[0]}}d.width=a,d.height=b;a:{var k=d.width,l=d.height;if(a=d.S,0>=k||0>=l||!(a>=Ca&&13>a))a=2;else{if(0>=d.Rd&&null==d.sd){g=f=e=b=0;var m=(h=k*Dd[a])*l;if(11>a||(f=(l+1)/2*(b=(k+1)/2),12==a&&(g=(e=k)*l)),null==(l=V(m+2*f+g))){a=1;break a}d.sd=l,11>a?((k=d.f.RGBA).eb=l,k.fb=0,k.A=h,k.size=m):((k=d.f.kb).y=l,k.O=0,k.fa=h,k.Fd=m,k.f=l,k.N=0+m,k.Ab=b,k.Cd=f,k.ea=l,k.W=0+m+f,k.Db=b,k.Ed=f,12==a&&(k.F=l,k.J=0+m+2*f),k.Tc=g,k.lb=e)}if(b=1,e=d.S,f=d.width,g=d.height,e>=Ca&&13>e)if(11>e)a=d.f.RGBA,b&=(h=Math.abs(a.A))*(g-1)+f<=a.size,b&=h>=f*Dd[e],b&=null!=a.eb;else{a=d.f.kb,h=(f+1)/2,m=(g+1)/2,k=Math.abs(a.fa);l=Math.abs(a.Ab);var n=Math.abs(a.Db),r=Math.abs(a.lb),q=r*(g-1)+f;b&=k*(g-1)+f<=a.Fd,b&=l*(m-1)+h<=a.Cd,b=(b&=n*(m-1)+h<=a.Ed)&k>=f&l>=h&n>=h,b&=null!=a.y,b&=null!=a.f,b&=null!=a.ea,12==e&&(b&=r>=f,b&=q<=a.Tc,b&=null!=a.F)}else b=0;a=b?0:2}}return 0!=a||null!=c&&c.fd&&(a=Bd(d)),a}var xb=64,Hd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gd=24,ob=32,Xb=8,Id=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];X("Predictor0","PredictorAdd0"),self.Predictor0=function(){return 4278190080},self.Predictor1=function(a){return a},self.Predictor2=function(a,b,c){return b[c+0]},self.Predictor3=function(a,b,c){return b[c+1]},self.Predictor4=function(a,b,c){return b[c-1]},self.Predictor5=function(a,b,c){return aa(aa(a,b[c+1]),b[c+0])},self.Predictor6=function(a,b,c){return aa(a,b[c-1])},self.Predictor7=function(a,b,c){return aa(a,b[c+0])},self.Predictor8=function(a,b,c){return aa(b[c-1],b[c+0])},self.Predictor9=function(a,b,c){return aa(b[c+0],b[c+1])},self.Predictor10=function(a,b,c){return aa(aa(a,b[c-1]),aa(b[c+0],b[c+1]))},self.Predictor11=function(a,b,c){var d=b[c+0];return 0>=Ia(d>>24&255,a>>24&255,(b=b[c-1])>>24&255)+Ia(d>>16&255,a>>16&255,b>>16&255)+Ia(d>>8&255,a>>8&255,b>>8&255)+Ia(255&d,255&a,255&b)?d:a},self.Predictor12=function(a,b,c){var d=b[c+0];return(sa((a>>24&255)+(d>>24&255)-((b=b[c-1])>>24&255))<<24|sa((a>>16&255)+(d>>16&255)-(b>>16&255))<<16|sa((a>>8&255)+(d>>8&255)-(b>>8&255))<<8|sa((255&a)+(255&d)-(255&b)))>>>0},self.Predictor13=function(a,b,c){var d=b[c-1];return(eb((a=aa(a,b[c+0]))>>24&255,d>>24&255)<<24|eb(a>>16&255,d>>16&255)<<16|eb(a>>8&255,d>>8&255)<<8|eb(a>>0&255,d>>0&255))>>>0};var ee=self.PredictorAdd0;self.PredictorAdd1=cc,X("Predictor2","PredictorAdd2"),X("Predictor3","PredictorAdd3"),X("Predictor4","PredictorAdd4"),X("Predictor5","PredictorAdd5"),X("Predictor6","PredictorAdd6"),X("Predictor7","PredictorAdd7"),X("Predictor8","PredictorAdd8"),X("Predictor9","PredictorAdd9"),X("Predictor10","PredictorAdd10"),X("Predictor11","PredictorAdd11"),X("Predictor12","PredictorAdd12"),X("Predictor13","PredictorAdd13");var fe=self.PredictorAdd2;ec("ColorIndexInverseTransform","MapARGB","32b",(function(a){return a>>8&255}),(function(a){return a})),ec("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(a){return a}),(function(a){return a>>8&255}));var pc,rc=self.ColorIndexInverseTransform,ke=self.MapARGB,he=self.VP8LColorIndexInverseTransformAlpha,le=self.MapAlpha,qc=self.VP8LPredictorsAdd=[];qc.length=16,(self.VP8LPredictors=[]).length=16,(self.VP8LPredictorsAdd_C=[]).length=16,(self.VP8LPredictors_C=[]).length=16;var Fb,sc,Gb,Hb,xc,uc,Nc,Za,fd,Nb,pa,Ob,Xc,Tc,Yc,Uc,Zc,Vc,$c,Wc,Rc,Pc,Sc,Qc,za,vc,fc,Fc,bd=V(511),cd=V(2041),dd=V(225),ed=V(767),ad=0,Qb=cd,mb=dd,R=ed,U=bd,Ca=0,Ua=1,tc=2,Va=3,ya=4,Db=5,wc=6,zb=7,Ab=8,Ja=9,Bb=10,pe=[2,3,7],oe=[3,3,11],Dc=[280,256,256,256,40],qe=[0,1,1,1,0],ne=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],de=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],me=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ie=8,Lb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Mb=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],oa=null,He=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ie=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Mc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Fe=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ke=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ee=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ge=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Y=[],W=[],ka=[],re=1,Cc=2,ia=[],P=[];va("UpsampleRgbLinePair",Ga,3),va("UpsampleBgrLinePair",Tb,3),va("UpsampleRgbaLinePair",wd,4),va("UpsampleBgraLinePair",vd,4),va("UpsampleArgbLinePair",ud,4),va("UpsampleRgba4444LinePair",td,2),va("UpsampleRgb565LinePair",sd,2);var Mf=self.UpsampleRgbLinePair,Nf=self.UpsampleBgrLinePair,nd=self.UpsampleRgbaLinePair,od=self.UpsampleBgraLinePair,pd=self.UpsampleArgbLinePair,qd=self.UpsampleRgba4444LinePair,Of=self.UpsampleRgb565LinePair,Wa=16,Ba=1<<Wa-1,ta=-227,Eb=482,rd=6,Pf=(256<<rd)-1,jc=0,Yd=V(256),ae=V(256),$d=V(256),Zd=V(256),be=V(Eb-ta),ce=V(Eb-ta);la("YuvToRgbRow",Ga,3),la("YuvToBgrRow",Tb,3),la("YuvToRgbaRow",wd,4),la("YuvToBgraRow",vd,4),la("YuvToArgbRow",ud,4),la("YuvToRgba4444Row",td,2),la("YuvToRgb565Row",sd,2);var zd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ya=[0,2,8],Qf=[8,7,6,4,4,2,2,2,1,1,1,1],Ne=1;this.WebPDecodeRGBA=function(a,b,c,d,e){var f=Ua,g=new Cf,h=new Cb;g.ba=h,h.S=f,h.width=[h.width],h.height=[h.height];var k=h.width,l=h.height,m=new Td;if(null==m||null==a)var n=2;else x(null!=m),n=Ad(a,b,c,m.width,m.height,m.Pd,m.Qd,m.format,null);if(0!=n?k=0:(null!=k&&(k[0]=m.width[0]),null!=l&&(l[0]=m.height[0]),k=1),k){h.width=h.width[0],h.height=h.height[0],null!=d&&(d[0]=h.width),null!=e&&(e[0]=h.height);b:{if(d=new Oa,(e=new md).data=a,e.w=b,e.ha=c,e.kd=1,b=[0],x(null!=e),(0==(a=Ad(e.data,e.w,e.ha,null,null,null,b,null,e))||7==a)&&b[0]&&(a=4),0==(b=a)){if(x(null!=g),d.data=e.data,d.w=e.w+e.offset,d.ha=e.ha-e.offset,d.put=kc,d.ac=gc,d.bc=lc,d.ma=g,e.xa){if(null==(a=Bc())){g=1;break b}if(function(a,b){var c=[0],d=[0],e=[0];a:for(;;){if(null==a)return 0;if(null==b)return a.a=2,0;if(a.l=b,a.a=0,cb(a.m,b.data,b.w,b.ha),!mc(a.m,c,d,e)){a.a=3;break a}if(a.xb=Cc,b.width=c[0],b.height=d[0],!rb(c[0],d[0],1,a,null))break a;return 1}return x(0!=a.a),0}(a,d)){if(d=0==(b=Cd(d.width,d.height,g.Oa,g.ba))){c:{d=a;d:for(;;){if(null==d){d=0;break c}if(x(null!=d.s.yc),x(null!=d.s.Ya),x(0<d.s.Wb),x(null!=(c=d.l)),x(null!=(e=c.ma)),0!=d.xb){if(d.ca=e.ba,d.tb=e.tb,x(null!=d.ca),!hc(e.Oa,c,Va)){d.a=2;break d}if(!Ec(d,c.width))break d;if(c.da)break d;if((c.da||hb(d.ca.S))&&Aa(),11>d.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=d.ca.f.kb.F&&Aa()),d.Pb&&0<d.s.ua&&null==d.s.vb.X&&!Zb(d.s.vb,d.s.Wa.Xa)){d.a=1;break d}d.xb=0}if(!Jb(d,d.V,d.Ba,d.c,d.i,c.o,ge))break d;e.Dc=d.Ma,d=1;break c}x(0!=d.a),d=0}d=!d}d&&(b=a.a)}else b=a.a}else{if(null==(a=new Ce)){g=1;break b}if(a.Fa=e.na,a.P=e.P,a.qc=e.Sa,Kc(a,d)){if(0==(b=Cd(d.width,d.height,g.Oa,g.ba))){if(a.Aa=0,c=g.Oa,x(null!=(e=a)),null!=c){if(0<(k=0>(k=c.Md)?0:100<k?255:255*k/100)){for(l=m=0;4>l;++l)12>(n=e.pb[l]).lc&&(n.ia=k*Qf[0>n.lc?0:n.lc]>>3),m|=n.ia;m&&(alert("todo:VP8InitRandom"),e.ia=1)}e.Ga=c.Id,100<e.Ga?e.Ga=100:0>e.Ga&&(e.Ga=0)}Me(a,d)||(b=a.a)}}else b=a.a}0==b&&null!=g.Oa&&g.Oa.fd&&(b=Bd(g.ba))}g=b}f=0!=g?null:11>f?h.f.RGBA.eb:h.f.kb.y}else f=null;return f};var Dd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function GetTag(data,data_off){for(var str="",i=0;i<4;i++)str+=String.fromCharCode(data[data_off++]);return str}function GetLE24(data,data_off){return(data[data_off+0]<<0|data[data_off+1]<<8|data[data_off+2]<<16)>>>0}function GetLE32(data,data_off){return(data[data_off+0]<<0|data[data_off+1]<<8|data[data_off+2]<<16|data[data_off+3]<<24)>>>0}new _WebPDecoder;var height=[0],width=[0],pixels=[],webpdecoder=new _WebPDecoder,response=imageData,imagearray=function(src,src_off){var imagearray={},i=0,alpha_chunk=!1,alpha_size=0,alpha_offset=0;if(imagearray.frames=[],!
/** @license
     * Copyright (c) 2017 Dominik Homberger
    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
    https://webpjs.appspot.com
    WebPRiffParser dominikhlbg@gmail.com
    */
function(data,data_off,str,size){for(var i=0;i<size;i++)if(data[data_off+i]!=str.charCodeAt(i))return!0;return!1}(src,src_off,"RIFF",4)){var data,data_off;GetLE32(src,src_off+=4);for(src_off+=8;src_off<src.length;){var fourcc=GetTag(src,src_off),payload_size=GetLE32(src,src_off+=4);src_off+=4;var payload_size_padded=payload_size+(1&payload_size);switch(fourcc){case"VP8 ":case"VP8L":void 0===imagearray.frames[i]&&(imagearray.frames[i]={});(obj=imagearray.frames[i]).src_off=alpha_chunk?alpha_offset:src_off-8,obj.src_size=alpha_size+payload_size+8,i++,alpha_chunk&&(alpha_chunk=!1,alpha_size=0,alpha_offset=0);break;case"VP8X":(obj=imagearray.header={}).feature_flags=src[src_off];var src_off_=src_off+4;obj.canvas_width=1+GetLE24(src,src_off_);src_off_+=3;obj.canvas_height=1+GetLE24(src,src_off_);src_off_+=3;break;case"ALPH":alpha_chunk=!0,alpha_size=payload_size_padded+8,alpha_offset=src_off-8;break;case"ANIM":(obj=imagearray.header).bgcolor=GetLE32(src,src_off);src_off_=src_off+4;obj.loop_count=(data=src)[(data_off=src_off_)+0]<<0|data[data_off+1]<<8;src_off_+=2;break;case"ANMF":var temp,obj;(obj=imagearray.frames[i]={}).offset_x=2*GetLE24(src,src_off),src_off+=3,obj.offset_y=2*GetLE24(src,src_off),src_off+=3,obj.width=1+GetLE24(src,src_off),src_off+=3,obj.height=1+GetLE24(src,src_off),src_off+=3,obj.duration=GetLE24(src,src_off),src_off+=3,temp=src[src_off++],obj.dispose=1&temp,obj.blend=temp>>1&1}"ANMF"!=fourcc&&(src_off+=payload_size_padded)}return imagearray}}(response,0);imagearray.response=response,imagearray.rgbaoutput=!0,imagearray.dataurl=!1;var header=imagearray.header?imagearray.header:null,frames=imagearray.frames?imagearray.frames:null;if(header){header.loop_counter=header.loop_count,height=[header.canvas_height],width=[header.canvas_width];for(var f=0;f<frames.length&&0!=frames[f].blend;f++);}var frame=frames[0],rgba=webpdecoder.WebPDecodeRGBA(response,frame.src_off,frame.src_size,width,height);frame.rgba=rgba,frame.imgwidth=width[0],frame.imgheight=height[0];for(var i=0;i<width[0]*height[0]*4;i++)pixels[i]=rgba[i];return this.width=width,this.height=height,this.data=pixels,this}!function(jsPDFAPI){var hasCompressionJS=function(){return!0},compressBytes=function(bytes,lineLength,colorsPerPixel,compression){var level=4,filter_method=filterUp;switch(compression){case jsPDFAPI.image_compression.FAST:level=1,filter_method=filterSub;break;case jsPDFAPI.image_compression.MEDIUM:level=6,filter_method=filterAverage;break;case jsPDFAPI.image_compression.SLOW:level=9,filter_method=filterPaeth}var dat=zlibSync(bytes=applyPngFilterMethod(bytes,lineLength,colorsPerPixel,filter_method),{level:level});return jsPDFAPI.__addimage__.arrayBufferToBinaryString(dat)},applyPngFilterMethod=function(bytes,lineLength,colorsPerPixel,filter_method){for(var line,prevLine,offset,lines=bytes.length/lineLength,result=new Uint8Array(bytes.length+lines),filter_methods=getFilterMethods(),i=0;i<lines;i+=1){if(offset=i*lineLength,line=bytes.subarray(offset,offset+lineLength),filter_method)result.set(filter_method(line,colorsPerPixel,prevLine),offset+i);else{for(var j,len=filter_methods.length,results=[];j<len;j+=1)results[j]=filter_methods[j](line,colorsPerPixel,prevLine);var ind=getIndexOfSmallestSum(results.concat());result.set(results[ind],offset+i)}prevLine=line}return result},filterNone=function(line){var result=Array.apply([],line);return result.unshift(0),result},filterSub=function(line,colorsPerPixel){var left,result=[],len=line.length;result[0]=1;for(var i=0;i<len;i+=1)left=line[i-colorsPerPixel]||0,result[i+1]=line[i]-left+256&255;return result},filterUp=function(line,colorsPerPixel,prevLine){var up,result=[],len=line.length;result[0]=2;for(var i=0;i<len;i+=1)up=prevLine&&prevLine[i]||0,result[i+1]=line[i]-up+256&255;return result},filterAverage=function(line,colorsPerPixel,prevLine){var left,up,result=[],len=line.length;result[0]=3;for(var i=0;i<len;i+=1)left=line[i-colorsPerPixel]||0,up=prevLine&&prevLine[i]||0,result[i+1]=line[i]+256-(left+up>>>1)&255;return result},filterPaeth=function(line,colorsPerPixel,prevLine){var left,up,upLeft,paeth,result=[],len=line.length;result[0]=4;for(var i=0;i<len;i+=1)left=line[i-colorsPerPixel]||0,up=prevLine&&prevLine[i]||0,upLeft=prevLine&&prevLine[i-colorsPerPixel]||0,paeth=paethPredictor(left,up,upLeft),result[i+1]=line[i]-paeth+256&255;return result},paethPredictor=function(left,up,upLeft){if(left===up&&up===upLeft)return left;var pLeft=Math.abs(up-upLeft),pUp=Math.abs(left-upLeft),pUpLeft=Math.abs(left+up-upLeft-upLeft);return pLeft<=pUp&&pLeft<=pUpLeft?left:pUp<=pUpLeft?up:upLeft},getFilterMethods=function(){return[filterNone,filterSub,filterUp,filterAverage,filterPaeth]},getIndexOfSmallestSum=function(arrays){var sum=arrays.map((function(value){return value.reduce((function(pv,cv){return pv+Math.abs(cv)}),0)}));return sum.indexOf(Math.min.apply(null,sum))};jsPDFAPI.processPNG=function(imageData,index,alias,compression){var colorSpace,bitsPerComponent,image,trns,colors,pal,smask,pixels,len,alphaData,imgData,hasColors,pixel,i,n,filter=this.decode.FLATE_DECODE,decodeParameters="";if(this.__addimage__.isArrayBuffer(imageData)&&(imageData=new Uint8Array(imageData)),this.__addimage__.isArrayBufferView(imageData)){if(imageData=(image=new PNG(imageData)).imgData,bitsPerComponent=image.bits,colorSpace=image.colorSpace,colors=image.colors,-1!==[4,6].indexOf(image.colorType)){if(8===image.bits){len=(pixels=32==image.pixelBitlength?new Uint32Array(image.decodePixels().buffer):16==image.pixelBitlength?new Uint16Array(image.decodePixels().buffer):new Uint8Array(image.decodePixels().buffer)).length,imgData=new Uint8Array(len*image.colors),alphaData=new Uint8Array(len);var pbl,pDiff=image.pixelBitlength-image.bits;for(i=0,n=0;i<len;i++){for(pixel=pixels[i],pbl=0;pbl<pDiff;)imgData[n++]=pixel>>>pbl&255,pbl+=image.bits;alphaData[i]=pixel>>>pbl&255}}if(16===image.bits){len=(pixels=new Uint32Array(image.decodePixels().buffer)).length,imgData=new Uint8Array(len*(32/image.pixelBitlength)*image.colors),alphaData=new Uint8Array(len*(32/image.pixelBitlength)),hasColors=image.colors>1,i=0,n=0;for(var a=0;i<len;)pixel=pixels[i++],imgData[n++]=pixel>>>0&255,hasColors&&(imgData[n++]=pixel>>>16&255,pixel=pixels[i++],imgData[n++]=pixel>>>0&255),alphaData[a++]=pixel>>>16&255;bitsPerComponent=8}compression!==jsPDFAPI.image_compression.NONE&&hasCompressionJS()?(imageData=compressBytes(imgData,image.width*image.colors,image.colors,compression),smask=compressBytes(alphaData,image.width,1,compression)):(imageData=imgData,smask=alphaData,filter=void 0)}if(3===image.colorType&&(colorSpace=this.color_spaces.INDEXED,pal=image.palette,image.transparency.indexed)){var trans=image.transparency.indexed,total=0;for(i=0,len=trans.length;i<len;++i)total+=trans[i];if((total/=255)===len-1&&-1!==trans.indexOf(0))trns=[trans.indexOf(0)];else if(total!==len){for(pixels=image.decodePixels(),alphaData=new Uint8Array(pixels.length),i=0,len=pixels.length;i<len;i++)alphaData[i]=trans[pixels[i]];smask=compressBytes(alphaData,image.width,1)}}var predictor=function(compression){var predictor;switch(compression){case jsPDFAPI.image_compression.FAST:predictor=11;break;case jsPDFAPI.image_compression.MEDIUM:predictor=13;break;case jsPDFAPI.image_compression.SLOW:predictor=14;break;default:predictor=12}return predictor}(compression);return filter===this.decode.FLATE_DECODE&&(decodeParameters="/Predictor "+predictor+" "),decodeParameters+="/Colors "+colors+" /BitsPerComponent "+bitsPerComponent+" /Columns "+image.width,(this.__addimage__.isArrayBuffer(imageData)||this.__addimage__.isArrayBufferView(imageData))&&(imageData=this.__addimage__.arrayBufferToBinaryString(imageData)),(smask&&this.__addimage__.isArrayBuffer(smask)||this.__addimage__.isArrayBufferView(smask))&&(smask=this.__addimage__.arrayBufferToBinaryString(smask)),{alias:alias,data:imageData,index:index,filter:filter,decodeParameters:decodeParameters,transparency:trns,palette:pal,sMask:smask,predictor:predictor,width:image.width,height:image.height,bitsPerComponent:bitsPerComponent,colorSpace:colorSpace}}}}(jsPDF.API),function(jsPDFAPI){jsPDFAPI.processGIF89A=function(imageData,index,alias,compression){var reader=new GifReader(imageData),width=reader.width,height=reader.height,pixels=[];reader.decodeAndBlitFrameRGBA(0,pixels);var rawImageData={data:pixels,width:width,height:height},data=new JPEGEncoder(100).encode(rawImageData,100);return jsPDFAPI.processJPEG.call(this,data,index,alias,compression)},jsPDFAPI.processGIF87A=jsPDFAPI.processGIF89A}(jsPDF.API),BmpDecoder.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var len=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(len);for(var i=0;i<len;i++){var blue=this.datav.getUint8(this.pos++,!0),green=this.datav.getUint8(this.pos++,!0),red=this.datav.getUint8(this.pos++,!0),quad=this.datav.getUint8(this.pos++,!0);this.palette[i]={red:red,green:green,blue:blue,quad:quad}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},BmpDecoder.prototype.parseBGR=function(){this.pos=this.offset;try{var bitn="bit"+this.bitPP,len=this.width*this.height*4;this.data=new Uint8Array(len),this[bitn]()}catch(e){console.log("bit decode error:"+e)}},BmpDecoder.prototype.bit1=function(){var y,xlen=Math.ceil(this.width/8),mode=xlen%4;for(y=this.height-1;y>=0;y--){for(var line=this.bottom_up?y:this.height-1-y,x=0;x<xlen;x++)for(var b=this.datav.getUint8(this.pos++,!0),location=line*this.width*4+8*x*4,i=0;i<8&&8*x+i<this.width;i++){var rgb=this.palette[b>>7-i&1];this.data[location+4*i]=rgb.blue,this.data[location+4*i+1]=rgb.green,this.data[location+4*i+2]=rgb.red,this.data[location+4*i+3]=255}0!==mode&&(this.pos+=4-mode)}},BmpDecoder.prototype.bit4=function(){for(var xlen=Math.ceil(this.width/2),mode=xlen%4,y=this.height-1;y>=0;y--){for(var line=this.bottom_up?y:this.height-1-y,x=0;x<xlen;x++){var b=this.datav.getUint8(this.pos++,!0),location=line*this.width*4+2*x*4,before=b>>4,after=15&b,rgb=this.palette[before];if(this.data[location]=rgb.blue,this.data[location+1]=rgb.green,this.data[location+2]=rgb.red,this.data[location+3]=255,2*x+1>=this.width)break;rgb=this.palette[after],this.data[location+4]=rgb.blue,this.data[location+4+1]=rgb.green,this.data[location+4+2]=rgb.red,this.data[location+4+3]=255}0!==mode&&(this.pos+=4-mode)}},BmpDecoder.prototype.bit8=function(){for(var mode=this.width%4,y=this.height-1;y>=0;y--){for(var line=this.bottom_up?y:this.height-1-y,x=0;x<this.width;x++){var b=this.datav.getUint8(this.pos++,!0),location=line*this.width*4+4*x;if(b<this.palette.length){var rgb=this.palette[b];this.data[location]=rgb.red,this.data[location+1]=rgb.green,this.data[location+2]=rgb.blue,this.data[location+3]=255}else this.data[location]=255,this.data[location+1]=255,this.data[location+2]=255,this.data[location+3]=255}0!==mode&&(this.pos+=4-mode)}},BmpDecoder.prototype.bit15=function(){for(var dif_w=this.width%3,_1_5=parseInt("11111",2),y=this.height-1;y>=0;y--){for(var line=this.bottom_up?y:this.height-1-y,x=0;x<this.width;x++){var B=this.datav.getUint16(this.pos,!0);this.pos+=2;var blue=(B&_1_5)/_1_5*255|0,green=(B>>5&_1_5)/_1_5*255|0,red=(B>>10&_1_5)/_1_5*255|0,alpha=B>>15?255:0,location=line*this.width*4+4*x;this.data[location]=red,this.data[location+1]=green,this.data[location+2]=blue,this.data[location+3]=alpha}this.pos+=dif_w}},BmpDecoder.prototype.bit16=function(){for(var dif_w=this.width%3,_1_5=parseInt("11111",2),_1_6=parseInt("111111",2),y=this.height-1;y>=0;y--){for(var line=this.bottom_up?y:this.height-1-y,x=0;x<this.width;x++){var B=this.datav.getUint16(this.pos,!0);this.pos+=2;var blue=(B&_1_5)/_1_5*255|0,green=(B>>5&_1_6)/_1_6*255|0,red=(B>>11)/_1_5*255|0,location=line*this.width*4+4*x;this.data[location]=red,this.data[location+1]=green,this.data[location+2]=blue,this.data[location+3]=255}this.pos+=dif_w}},BmpDecoder.prototype.bit24=function(){for(var y=this.height-1;y>=0;y--){for(var line=this.bottom_up?y:this.height-1-y,x=0;x<this.width;x++){var blue=this.datav.getUint8(this.pos++,!0),green=this.datav.getUint8(this.pos++,!0),red=this.datav.getUint8(this.pos++,!0),location=line*this.width*4+4*x;this.data[location]=red,this.data[location+1]=green,this.data[location+2]=blue,this.data[location+3]=255}this.pos+=this.width%4}},BmpDecoder.prototype.bit32=function(){for(var y=this.height-1;y>=0;y--)for(var line=this.bottom_up?y:this.height-1-y,x=0;x<this.width;x++){var blue=this.datav.getUint8(this.pos++,!0),green=this.datav.getUint8(this.pos++,!0),red=this.datav.getUint8(this.pos++,!0),alpha=this.datav.getUint8(this.pos++,!0),location=line*this.width*4+4*x;this.data[location]=red,this.data[location+1]=green,this.data[location+2]=blue,this.data[location+3]=alpha}},BmpDecoder.prototype.getData=function(){return this.data},
/**
   * @license
   * Copyright (c) 2018 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){jsPDFAPI.processBMP=function(imageData,index,alias,compression){var reader=new BmpDecoder(imageData,!1),width=reader.width,height=reader.height,rawImageData={data:reader.getData(),width:width,height:height},data=new JPEGEncoder(100).encode(rawImageData,100);return jsPDFAPI.processJPEG.call(this,data,index,alias,compression)}}(jsPDF.API),WebPDecoder.prototype.getData=function(){return this.data},
/**
   * @license
   * Copyright (c) 2019 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){jsPDFAPI.processWEBP=function(imageData,index,alias,compression){var reader=new WebPDecoder(imageData,!1),width=reader.width,height=reader.height,rawImageData={data:reader.getData(),width:width,height:height},data=new JPEGEncoder(100).encode(rawImageData,100);return jsPDFAPI.processJPEG.call(this,data,index,alias,compression)}}(jsPDF.API),
/**
   * @license
   *
   * Copyright (c) 2021 Antti Palola, https://github.com/Pantura
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */
function(jsPDFAPI){jsPDFAPI.processRGBA=function(imageData,index,alias){for(var imagePixels=imageData.data,length=imagePixels.length,rgbOut=new Uint8Array(length/4*3),alphaOut=new Uint8Array(length/4),outIndex=0,alphaIndex=0,i=0;i<length;i+=4){var r=imagePixels[i],g=imagePixels[i+1],b=imagePixels[i+2],alpha=imagePixels[i+3];rgbOut[outIndex++]=r,rgbOut[outIndex++]=g,rgbOut[outIndex++]=b,alphaOut[alphaIndex++]=alpha}var rgbData=this.__addimage__.arrayBufferToBinaryString(rgbOut);return{alpha:this.__addimage__.arrayBufferToBinaryString(alphaOut),data:rgbData,index:index,alias:alias,colorSpace:"DeviceRGB",bitsPerComponent:8,width:imageData.width,height:imageData.height}}}(jsPDF.API),
/**
   * @license
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){jsPDFAPI.setLanguage=function(langCode){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[langCode]&&(this.internal.languageSettings.languageCode=langCode,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this}}(jsPDF.API),API=jsPDF.API,getCharWidthsArray=API.getCharWidthsArray=function(text,options){var i,char_code,activeFont=(options=options||{}).font||this.internal.getFont(),fontSize=options.fontSize||this.internal.getFontSize(),charSpace=options.charSpace||this.internal.getCharSpace(),widths=options.widths?options.widths:activeFont.metadata.Unicode.widths,widthsFractionOf=widths.fof?widths.fof:1,kerning=options.kerning?options.kerning:activeFont.metadata.Unicode.kerning,kerningFractionOf=kerning.fof?kerning.fof:1,doKerning=!1!==options.doKerning,kerningValue=0,length=text.length,prior_char_code=0,default_char_width=widths[0]||widthsFractionOf,output=[];for(i=0;i<length;i++)char_code=text.charCodeAt(i),"function"==typeof activeFont.metadata.widthOfString?output.push((activeFont.metadata.widthOfGlyph(activeFont.metadata.characterToGlyph(char_code))+charSpace*(1e3/fontSize)||0)/1e3):(kerningValue=doKerning&&"object"===_typeof(kerning[char_code])&&!isNaN(parseInt(kerning[char_code][prior_char_code],10))?kerning[char_code][prior_char_code]/kerningFractionOf:0,output.push((widths[char_code]||default_char_width)/widthsFractionOf+kerningValue)),prior_char_code=char_code;return output},getStringUnitWidth=API.getStringUnitWidth=function(text,options){var fontSize=(options=options||{}).fontSize||this.internal.getFontSize(),font=options.font||this.internal.getFont(),charSpace=options.charSpace||this.internal.getCharSpace();return API.processArabic&&(text=API.processArabic(text)),"function"==typeof font.metadata.widthOfString?font.metadata.widthOfString(text,fontSize,charSpace)/fontSize:getCharWidthsArray.apply(this,arguments).reduce((function(pv,cv){return pv+cv}),0)},splitLongWord=function(word,widths_array,firstLineMaxLen,maxLen){for(var answer=[],i=0,l=word.length,workingLen=0;i!==l&&workingLen+widths_array[i]<firstLineMaxLen;)workingLen+=widths_array[i],i++;answer.push(word.slice(0,i));var startOfLine=i;for(workingLen=0;i!==l;)workingLen+widths_array[i]>maxLen&&(answer.push(word.slice(startOfLine,i)),workingLen=0,startOfLine=i),workingLen+=widths_array[i],i++;return startOfLine!==i&&answer.push(word.slice(startOfLine,i)),answer},splitParagraphIntoLines=function(text,maxlen,options){options||(options={});var word,widths_array,i,l,tmp,lineIndent,postProcess,line=[],lines=[line],line_length=options.textIndent||0,separator_length=0,current_word_length=0,words=text.split(" "),spaceCharWidth=getCharWidthsArray.apply(this,[" ",options])[0];if(lineIndent=-1===options.lineIndent?words[0].length+2:options.lineIndent||0){var pad=Array(lineIndent).join(" "),wrds=[];words.map((function(wrd){(wrd=wrd.split(/\s*\n/)).length>1?wrds=wrds.concat(wrd.map((function(wrd,idx){return(idx&&wrd.length?"\n":"")+wrd}))):wrds.push(wrd[0])})),words=wrds,lineIndent=getStringUnitWidth.apply(this,[pad,options])}for(i=0,l=words.length;i<l;i++){var force=0;if(word=words[i],lineIndent&&"\n"==word[0]&&(word=word.substr(1),force=1),line_length+separator_length+(current_word_length=(widths_array=getCharWidthsArray.apply(this,[word,options])).reduce((function(pv,cv){return pv+cv}),0))>maxlen||force){if(current_word_length>maxlen){for(tmp=splitLongWord.apply(this,[word,widths_array,maxlen-(line_length+separator_length),maxlen]),line.push(tmp.shift()),line=[tmp.pop()];tmp.length;)lines.push([tmp.shift()]);current_word_length=widths_array.slice(word.length-(line[0]?line[0].length:0)).reduce((function(pv,cv){return pv+cv}),0)}else line=[word];lines.push(line),line_length=current_word_length+lineIndent,separator_length=spaceCharWidth}else line.push(word),line_length+=separator_length+current_word_length,separator_length=spaceCharWidth}return postProcess=lineIndent?function(ln,idx){return(idx?pad:"")+ln.join(" ")}:function(ln){return ln.join(" ")},lines.map(postProcess)},API.splitTextToSize=function(text,maxlen,options){var paragraphs,fsize=(options=options||{}).fontSize||this.internal.getFontSize(),newOptions=function(options){if(options.widths&&options.kerning)return{widths:options.widths,kerning:options.kerning};var f=this.internal.getFont(options.fontName,options.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,options);paragraphs=Array.isArray(text)?text:String(text).split(/\r?\n/);var fontUnit_maxLen=1*this.internal.scaleFactor*maxlen/fsize;newOptions.textIndent=options.textIndent?1*options.textIndent*this.internal.scaleFactor/fsize:0,newOptions.lineIndent=options.lineIndent;var i,l,output=[];for(i=0,l=paragraphs.length;i<l;i++)output=output.concat(splitParagraphIntoLines.apply(this,[paragraphs[i],fontUnit_maxLen,newOptions]));return output},function(API){API.__fontmetrics__=API.__fontmetrics__||{};for(var encoded="klmnopqrstuvwxyz",mappingUncompress={},mappingCompress={},i=0;i<encoded.length;i++)mappingUncompress[encoded[i]]="0123456789abcdef"[i],mappingCompress["0123456789abcdef"[i]]=encoded[i];var hex=function(value){return"0x"+parseInt(value,10).toString(16)},compress=API.__fontmetrics__.compress=function(data){var value,keystring,valuestring,numberprefix,vals=["{"];for(var key in data){if(value=data[key],isNaN(parseInt(key,10))?keystring="'"+key+"'":(key=parseInt(key,10),keystring=(keystring=hex(key).slice(2)).slice(0,-1)+mappingCompress[keystring.slice(-1)]),"number"==typeof value)value<0?(valuestring=hex(value).slice(3),numberprefix="-"):(valuestring=hex(value).slice(2),numberprefix=""),valuestring=numberprefix+valuestring.slice(0,-1)+mappingCompress[valuestring.slice(-1)];else{if("object"!==_typeof(value))throw new Error("Don't know what to do with value type "+_typeof(value)+".");valuestring=compress(value)}vals.push(keystring+valuestring)}return vals.push("}"),vals.join("")},uncompress=API.__fontmetrics__.uncompress=function(data){if("string"!=typeof data)throw new Error("Invalid argument passed to uncompress.");for(var stringparts,parent_key_pair,key,ch,output={},sign=1,activeobject=output,parentchain=[],keyparts="",valueparts="",datalen=data.length-1,i=1;i<datalen;i+=1)"'"==(ch=data[i])?stringparts?(key=stringparts.join(""),stringparts=void 0):stringparts=[]:stringparts?stringparts.push(ch):"{"==ch?(parentchain.push([activeobject,key]),activeobject={},key=void 0):"}"==ch?((parent_key_pair=parentchain.pop())[0][parent_key_pair[1]]=activeobject,key=void 0,activeobject=parent_key_pair[0]):"-"==ch?sign=-1:void 0===key?mappingUncompress.hasOwnProperty(ch)?(keyparts+=mappingUncompress[ch],key=parseInt(keyparts,16)*sign,sign=1,keyparts=""):keyparts+=ch:mappingUncompress.hasOwnProperty(ch)?(valueparts+=mappingUncompress[ch],activeobject[key]=parseInt(valueparts,16)*sign,sign=1,key=void 0,valueparts=""):valueparts+=ch;return output},encodingBlock={codePages:["WinAnsiEncoding"],WinAnsiEncoding:uncompress("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},encodings={Unicode:{Courier:encodingBlock,"Courier-Bold":encodingBlock,"Courier-BoldOblique":encodingBlock,"Courier-Oblique":encodingBlock,Helvetica:encodingBlock,"Helvetica-Bold":encodingBlock,"Helvetica-BoldOblique":encodingBlock,"Helvetica-Oblique":encodingBlock,"Times-Roman":encodingBlock,"Times-Bold":encodingBlock,"Times-BoldItalic":encodingBlock,"Times-Italic":encodingBlock}},fontMetrics={Unicode:{"Courier-Oblique":uncompress("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":uncompress("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":uncompress("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:uncompress("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":uncompress("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":uncompress("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:uncompress("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:uncompress("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":uncompress("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:uncompress("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":uncompress("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":uncompress("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":uncompress("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":uncompress("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};API.events.push(["addFont",function(data){var font=data.font,metrics=fontMetrics.Unicode[font.postScriptName];metrics&&(font.metadata.Unicode={},font.metadata.Unicode.widths=metrics.widths,font.metadata.Unicode.kerning=metrics.kerning);var encodingBlock=encodings.Unicode[font.postScriptName];encodingBlock&&(font.metadata.Unicode.encoding=encodingBlock,font.encoding=encodingBlock.codePages[0])}])}(jsPDF.API),
/**
   * @license
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDF){var binaryStringToUint8Array=function(binary_string){for(var len=binary_string.length,bytes=new Uint8Array(len),i=0;i<len;i++)bytes[i]=binary_string.charCodeAt(i);return bytes};jsPDF.API.events.push(["addFont",function(data){var file=void 0,font=data.font,instance=data.instance;if(!font.isStandardFont){if(void 0===instance)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+font.postScriptName+"').");if("string"!=typeof(file=!1===instance.existsFileInVFS(font.postScriptName)?instance.loadFile(font.postScriptName):instance.getFileFromVFS(font.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+font.postScriptName+"').");!function(font,file){file=/^\x00\x01\x00\x00/.test(file)?binaryStringToUint8Array(file):binaryStringToUint8Array(atob(file)),font.metadata=jsPDF.API.TTFFont.open(file),font.metadata.Unicode=font.metadata.Unicode||{encoding:{},kerning:{},widths:[]},font.metadata.glyIdsUsed=[0]}(font,file)}}])}(jsPDF),function(jsPDFAPI){function loadCanvg(){return(globalObject.canvg?Promise.resolve(globalObject.canvg):"object"===(void 0===exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?new Promise((function(resolve,reject){try{resolve(require("canvg"))}catch(e){reject(e)}})):"function"==typeof define&&define.amd?new Promise((function(resolve,reject){try{require(["canvg"],resolve)}catch(e){reject(e)}})):Promise.reject(new Error("Could not load canvg"))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(canvg){return canvg.default?canvg.default:canvg}))}jsPDFAPI.addSvgAsImage=function(svg,x,y,w,h,alias,compression,rotation){if(isNaN(x)||isNaN(y))throw console.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(w)||isNaN(h))throw console.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var canvas=document.createElement("canvas");canvas.width=w,canvas.height=h;var ctx=canvas.getContext("2d");ctx.fillStyle="#fff",ctx.fillRect(0,0,canvas.width,canvas.height);var options={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},doc=this;return loadCanvg().then((function(canvg){return canvg.fromString(ctx,svg,options)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(instance){return instance.render(options)})).then((function(){doc.addImage(canvas.toDataURL("image/jpeg",1),x,y,w,h,compression,rotation)}))}}(jsPDF.API),
/**
   * @license
   * ====================================================================
   * Copyright (c) 2013 Eduardo Menezes de Morais, eduardo.morais@usp.br
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */
function(jsPDFAPI){jsPDFAPI.putTotalPages=function(pageExpression){var replaceExpression,totalNumberOfPages=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(replaceExpression=new RegExp(pageExpression,"g"),totalNumberOfPages=this.internal.getNumberOfPages()):(replaceExpression=new RegExp(this.pdfEscape16(pageExpression,this.internal.getFont()),"g"),totalNumberOfPages=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(replaceExpression,totalNumberOfPages);return this}}(jsPDF.API),function(jsPDFAPI){jsPDFAPI.viewerPreferences=function(options,doReset){var configuration;options=options||{},doReset=doReset||!1;var isValid,method,value,configurationTemplate={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},configurationKeys=Object.keys(configurationTemplate),rangeArray=[],i=0,j=0,k=0;function arrayContainsElement(array,element){var iterator,result=!1;for(iterator=0;iterator<array.length;iterator+=1)array[iterator]===element&&(result=!0);return result}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(configurationTemplate)),this.internal.viewerpreferences.isSubscribed=!1),configuration=this.internal.viewerpreferences.configuration,"reset"===options||!0===doReset){var len=configurationKeys.length;for(k=0;k<len;k+=1)configuration[configurationKeys[k]].value=configuration[configurationKeys[k]].defaultValue,configuration[configurationKeys[k]].explicitSet=!1}if("object"===_typeof(options))for(method in options)if(value=options[method],arrayContainsElement(configurationKeys,method)&&void 0!==value){if("boolean"===configuration[method].type&&"boolean"==typeof value)configuration[method].value=value;else if("name"===configuration[method].type&&arrayContainsElement(configuration[method].valueSet,value))configuration[method].value=value;else if("integer"===configuration[method].type&&Number.isInteger(value))configuration[method].value=value;else if("array"===configuration[method].type){for(i=0;i<value.length;i+=1)if(isValid=!0,1===value[i].length&&"number"==typeof value[i][0])rangeArray.push(String(value[i]-1));else if(value[i].length>1){for(j=0;j<value[i].length;j+=1)"number"!=typeof value[i][j]&&(isValid=!1);!0===isValid&&rangeArray.push([value[i][0]-1,value[i][1]-1].join(" "))}configuration[method].value="["+rangeArray.join(" ")+"]"}else configuration[method].value=configuration[method].defaultValue;configuration[method].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var vPref,pdfDict=[];for(vPref in configuration)!0===configuration[vPref].explicitSet&&("name"===configuration[vPref].type?pdfDict.push("/"+vPref+" /"+configuration[vPref].value):pdfDict.push("/"+vPref+" "+configuration[vPref].value));0!==pdfDict.length&&this.internal.write("/ViewerPreferences\n<<\n"+pdfDict.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=configuration,this}}(jsPDF.API),
/** ====================================================================
   * @license
   * jsPDF XMP metadata plugin
   * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */
function(jsPDFAPI){var postPutResources=function(){var rdf_beginning='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',utf8_xmpmeta_beginning=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),utf8_rdf_beginning=unescape(encodeURIComponent(rdf_beginning)),utf8_metadata=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),utf8_rdf_ending=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),utf8_xmpmeta_ending=unescape(encodeURIComponent("</x:xmpmeta>")),total_len=utf8_rdf_beginning.length+utf8_metadata.length+utf8_rdf_ending.length+utf8_xmpmeta_beginning.length+utf8_xmpmeta_ending.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+total_len+" >>"),this.internal.write("stream"),this.internal.write(utf8_xmpmeta_beginning+utf8_rdf_beginning+utf8_metadata+utf8_rdf_ending+utf8_xmpmeta_ending),this.internal.write("endstream"),this.internal.write("endobj")},putCatalog=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};jsPDFAPI.addMetadata=function(metadata,namespaceuri){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:metadata,namespaceuri:namespaceuri||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",putCatalog),this.internal.events.subscribe("postPutResources",postPutResources)),this}}(jsPDF.API),function(jsPDF){var jsPDFAPI=jsPDF.API,pdfEscape16=jsPDFAPI.pdfEscape16=function(text,font){for(var t,widths=font.metadata.Unicode.widths,padz=["","0","00","000","0000"],ar=[""],i=0,l=text.length;i<l;++i){if(t=font.metadata.characterToGlyph(text.charCodeAt(i)),font.metadata.glyIdsUsed.push(t),font.metadata.toUnicode[t]=text.charCodeAt(i),-1==widths.indexOf(t)&&(widths.push(t),widths.push([parseInt(font.metadata.widthOfGlyph(t),10)])),"0"==t)return ar.join("");t=t.toString(16),ar.push(padz[4-t.length],t)}return ar.join("")},toUnicodeCmap=function(map){var code,codes,range,unicode,unicodeMap,_i,_len;for(unicodeMap="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",range=[],_i=0,_len=(codes=Object.keys(map).sort((function(a,b){return a-b}))).length;_i<_len;_i++)code=codes[_i],range.length>=100&&(unicodeMap+="\n"+range.length+" beginbfchar\n"+range.join("\n")+"\nendbfchar",range=[]),void 0!==map[code]&&null!==map[code]&&"function"==typeof map[code].toString&&(unicode=("0000"+map[code].toString(16)).slice(-4),code=("0000"+(+code).toString(16)).slice(-4),range.push("<"+code+"><"+unicode+">"));return range.length&&(unicodeMap+="\n"+range.length+" beginbfchar\n"+range.join("\n")+"\nendbfchar\n"),unicodeMap+="endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};jsPDFAPI.events.push(["putFont",function(args){!function(options){var font=options.font,out=options.out,newObject=options.newObject,putStream=options.putStream;if(font.metadata instanceof jsPDF.API.TTFFont&&"Identity-H"===font.encoding){for(var widths=font.metadata.Unicode.widths,pdfOutput=font.metadata.subset.encode(font.metadata.glyIdsUsed,1),pdfOutput2="",i=0;i<pdfOutput.length;i++)pdfOutput2+=String.fromCharCode(pdfOutput[i]);var fontTable=newObject();putStream({data:pdfOutput2,addLength1:!0,objectId:fontTable}),out("endobj");var cmap=newObject();putStream({data:toUnicodeCmap(font.metadata.toUnicode),addLength1:!0,objectId:cmap}),out("endobj");var fontDescriptor=newObject();out("<<"),out("/Type /FontDescriptor"),out("/FontName /"+toPDFName(font.fontName)),out("/FontFile2 "+fontTable+" 0 R"),out("/FontBBox "+jsPDF.API.PDFObject.convert(font.metadata.bbox)),out("/Flags "+font.metadata.flags),out("/StemV "+font.metadata.stemV),out("/ItalicAngle "+font.metadata.italicAngle),out("/Ascent "+font.metadata.ascender),out("/Descent "+font.metadata.decender),out("/CapHeight "+font.metadata.capHeight),out(">>"),out("endobj");var DescendantFont=newObject();out("<<"),out("/Type /Font"),out("/BaseFont /"+toPDFName(font.fontName)),out("/FontDescriptor "+fontDescriptor+" 0 R"),out("/W "+jsPDF.API.PDFObject.convert(widths)),out("/CIDToGIDMap /Identity"),out("/DW 1000"),out("/Subtype /CIDFontType2"),out("/CIDSystemInfo"),out("<<"),out("/Supplement 0"),out("/Registry (Adobe)"),out("/Ordering ("+font.encoding+")"),out(">>"),out(">>"),out("endobj"),font.objectNumber=newObject(),out("<<"),out("/Type /Font"),out("/Subtype /Type0"),out("/ToUnicode "+cmap+" 0 R"),out("/BaseFont /"+toPDFName(font.fontName)),out("/Encoding /"+font.encoding),out("/DescendantFonts ["+DescendantFont+" 0 R]"),out(">>"),out("endobj"),font.isAlreadyPutted=!0}}(args)}]);jsPDFAPI.events.push(["putFont",function(args){!function(options){var font=options.font,out=options.out,newObject=options.newObject,putStream=options.putStream;if(font.metadata instanceof jsPDF.API.TTFFont&&"WinAnsiEncoding"===font.encoding){for(var pdfOutput=font.metadata.rawData,pdfOutput2="",i=0;i<pdfOutput.length;i++)pdfOutput2+=String.fromCharCode(pdfOutput[i]);var fontTable=newObject();putStream({data:pdfOutput2,addLength1:!0,objectId:fontTable}),out("endobj");var cmap=newObject();putStream({data:toUnicodeCmap(font.metadata.toUnicode),addLength1:!0,objectId:cmap}),out("endobj");var fontDescriptor=newObject();out("<<"),out("/Descent "+font.metadata.decender),out("/CapHeight "+font.metadata.capHeight),out("/StemV "+font.metadata.stemV),out("/Type /FontDescriptor"),out("/FontFile2 "+fontTable+" 0 R"),out("/Flags 96"),out("/FontBBox "+jsPDF.API.PDFObject.convert(font.metadata.bbox)),out("/FontName /"+toPDFName(font.fontName)),out("/ItalicAngle "+font.metadata.italicAngle),out("/Ascent "+font.metadata.ascender),out(">>"),out("endobj"),font.objectNumber=newObject();for(var j=0;j<font.metadata.hmtx.widths.length;j++)font.metadata.hmtx.widths[j]=parseInt(font.metadata.hmtx.widths[j]*(1e3/font.metadata.head.unitsPerEm));out("<</Subtype/TrueType/Type/Font/ToUnicode "+cmap+" 0 R/BaseFont/"+toPDFName(font.fontName)+"/FontDescriptor "+fontDescriptor+" 0 R/Encoding/"+font.encoding+" /FirstChar 29 /LastChar 255 /Widths "+jsPDF.API.PDFObject.convert(font.metadata.hmtx.widths)+">>"),out("endobj"),font.isAlreadyPutted=!0}}(args)}]);var utf8TextFunction=function(args){var cmapConfirm,text=args.text||"",x=args.x,y=args.y,options=args.options||{},mutex=args.mutex||{},pdfEscape=mutex.pdfEscape,activeFontKey=mutex.activeFontKey,fonts=mutex.fonts,key=activeFontKey,str="",s=0,strText="",encoding=fonts[key].encoding;if("Identity-H"!==fonts[key].encoding)return{text:text,x:x,y:y,options:options,mutex:mutex};for(strText=text,key=activeFontKey,Array.isArray(text)&&(strText=text[0]),s=0;s<strText.length;s+=1)fonts[key].metadata.hasOwnProperty("cmap")&&(cmapConfirm=fonts[key].metadata.cmap.unicode.codeMap[strText[s].charCodeAt(0)]),cmapConfirm||strText[s].charCodeAt(0)<256&&fonts[key].metadata.hasOwnProperty("Unicode")?str+=strText[s]:str+="";var result="";return parseInt(key.slice(1))<14||"WinAnsiEncoding"===encoding?result=pdfEscape(str,key).split("").map((function(cv){return cv.charCodeAt(0).toString(16)})).join(""):"Identity-H"===encoding&&(result=pdfEscape16(str,fonts[key])),mutex.isHex=!0,{text:result,x:x,y:y,options:options,mutex:mutex}};jsPDFAPI.events.push(["postProcessText",function(parms){var text=parms.text||"",tmpText=[],args={text:text,x:parms.x,y:parms.y,options:parms.options,mutex:parms.mutex};if(Array.isArray(text)){var i=0;for(i=0;i<text.length;i+=1)Array.isArray(text[i])&&3===text[i].length?tmpText.push([utf8TextFunction(Object.assign({},args,{text:text[i][0]})).text,text[i][1],text[i][2]]):tmpText.push(utf8TextFunction(Object.assign({},args,{text:text[i]})).text);parms.text=tmpText}else parms.text=utf8TextFunction(Object.assign({},args,{text:text})).text}])}(jsPDF),
/**
   * @license
   * jsPDF virtual FileSystem functionality
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */
function(jsPDFAPI){var _initializeVFS=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};jsPDFAPI.existsFileInVFS=function(filename){return _initializeVFS.call(this),void 0!==this.internal.vFS[filename]},jsPDFAPI.addFileToVFS=function(filename,filecontent){return _initializeVFS.call(this),this.internal.vFS[filename]=filecontent,this},jsPDFAPI.getFileFromVFS=function(filename){return _initializeVFS.call(this),void 0!==this.internal.vFS[filename]?this.internal.vFS[filename]:null}}(jsPDF.API),
/**
   * @license
   * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
   * MIT License
   */
function(jsPDF){jsPDF.__bidiEngine__=jsPDF.prototype.__bidiEngine__=function(options){var _hasUbatB,_hasUbatS,_isInVisual,_isInRtl,_isOutVisual,_isOutRtl,_isSymmetricSwapping,_UNICODE_TYPES=_bidiUnicodeTypes,_STATE_TABLE_LTR=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_STATE_TABLE_RTL=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_TYPE_NAMES_MAP={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_UNICODE_RANGES_MAP={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_SWAP_TABLE=["(",")","(","<",">","<","[","]","[","{","}","{","¬´","¬ª","¬´","‚Äπ","‚Ä∫","‚Äπ","‚ÅÖ","‚ÅÜ","‚ÅÖ","‚ÅΩ","‚Åæ","‚ÅΩ","‚Çç","‚Çé","‚Çç","‚â§","‚â•","‚â§","‚å©","‚å™","‚å©","Ôπô","Ôπö","Ôπô","Ôπõ","Ôπú","Ôπõ","Ôπù","Ôπû","Ôπù","Ôπ§","Ôπ•","Ôπ§"],_LTR_RANGES_REG_EXPR=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_lastArabic=!1,_dir=0;this.__bidiEngine__={};var _getCharType=function(ch){var charCode=ch.charCodeAt(),range=charCode>>8,rangeIdx=_UNICODE_RANGES_MAP[range];return void 0!==rangeIdx?_UNICODE_TYPES[256*rangeIdx+(255&charCode)]:252===range||253===range?"AL":_LTR_RANGES_REG_EXPR.test(range)?"L":8===range?"R":"N"},_isContextualDirRtl=function(text){for(var charType,i=0;i<text.length;i++){if("L"===(charType=_getCharType(text.charAt(i))))return!1;if("R"===charType)return!0}return!1},_resolveCharType=function(chars,types,resolvedTypes,index){var wType,nType,i,len,cType=types[index];switch(cType){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_lastArabic=!1;break;case"N":case"AN":break;case"EN":_lastArabic&&(cType="AN");break;case"AL":_lastArabic=!0,cType="R";break;case"WS":case"BN":cType="N";break;case"CS":index<1||index+1>=types.length||"EN"!==(wType=resolvedTypes[index-1])&&"AN"!==wType||"EN"!==(nType=types[index+1])&&"AN"!==nType?cType="N":_lastArabic&&(nType="AN"),cType=nType===wType?nType:"N";break;case"ES":cType="EN"===(wType=index>0?resolvedTypes[index-1]:"B")&&index+1<types.length&&"EN"===types[index+1]?"EN":"N";break;case"ET":if(index>0&&"EN"===resolvedTypes[index-1]){cType="EN";break}if(_lastArabic){cType="N";break}for(i=index+1,len=types.length;i<len&&"ET"===types[i];)i++;cType=i<len&&"EN"===types[i]?"EN":"N";break;case"NSM":if(_isInVisual&&!_isInRtl){for(len=types.length,i=index+1;i<len&&"NSM"===types[i];)i++;if(i<len){var c=chars[index],rtlCandidate=c>=1425&&c<=2303||64286===c;if(wType=types[i],rtlCandidate&&("R"===wType||"AL"===wType)){cType="R";break}}}cType=index<1||"B"===(wType=types[index-1])?"N":resolvedTypes[index-1];break;case"B":_lastArabic=!1,_hasUbatB=!0,cType=_dir;break;case"S":_hasUbatS=!0,cType="N"}return cType},_invertString=function(text,sourceToTargetMap,levels){var charArray=text.split("");return levels&&_computeLevels(charArray,levels,{hiLevel:_dir}),charArray.reverse(),sourceToTargetMap&&sourceToTargetMap.reverse(),charArray.join("")},_computeLevels=function(chars,levels,params){var action,i,index,newLevel,prevState,condPos=-1,len=chars.length,newState=0,resolvedTypes=[],stateTable=_dir?_STATE_TABLE_RTL:_STATE_TABLE_LTR,types=[];for(_lastArabic=!1,_hasUbatB=!1,_hasUbatS=!1,i=0;i<len;i++)types[i]=_getCharType(chars[i]);for(index=0;index<len;index++){if(prevState=newState,resolvedTypes[index]=_resolveCharType(chars,types,resolvedTypes,index),action=240&(newState=stateTable[prevState][_TYPE_NAMES_MAP[resolvedTypes[index]]]),newState&=15,levels[index]=newLevel=stateTable[newState][5],action>0)if(16===action){for(i=condPos;i<index;i++)levels[i]=1;condPos=-1}else condPos=-1;if(stateTable[newState][6])-1===condPos&&(condPos=index);else if(condPos>-1){for(i=condPos;i<index;i++)levels[i]=newLevel;condPos=-1}"B"===types[index]&&(levels[index]=0),params.hiLevel|=newLevel}_hasUbatS&&function(types,levels,length){for(var i=0;i<length;i++)if("S"===types[i]){levels[i]=_dir;for(var j=i-1;j>=0&&"WS"===types[j];j--)levels[j]=_dir}}(types,levels,len)},_invertByLevel=function(level,charArray,sourceToTargetMap,levels,params){if(!(params.hiLevel<level)){if(1===level&&1===_dir&&!_hasUbatB)return charArray.reverse(),void(sourceToTargetMap&&sourceToTargetMap.reverse());for(var ch,high,end,low,len=charArray.length,start=0;start<len;){if(levels[start]>=level){for(end=start+1;end<len&&levels[end]>=level;)end++;for(low=start,high=end-1;low<high;low++,high--)ch=charArray[low],charArray[low]=charArray[high],charArray[high]=ch,sourceToTargetMap&&(ch=sourceToTargetMap[low],sourceToTargetMap[low]=sourceToTargetMap[high],sourceToTargetMap[high]=ch);start=end}start++}}},_reorder=function(text,sourceToTargetMap,levels){var charArray=text.split(""),params={hiLevel:_dir};return levels||(levels=[]),_computeLevels(charArray,levels,params),function(charArray,levels,params){if(0!==params.hiLevel&&_isSymmetricSwapping)for(var index,i=0;i<charArray.length;i++)1===levels[i]&&(index=_SWAP_TABLE.indexOf(charArray[i]))>=0&&(charArray[i]=_SWAP_TABLE[index+1])}(charArray,levels,params),_invertByLevel(2,charArray,sourceToTargetMap,levels,params),_invertByLevel(1,charArray,sourceToTargetMap,levels,params),charArray.join("")};return this.__bidiEngine__.doBidiReorder=function(text,sourceToTargetMap,levels){if(function(text,sourceToTargetMap){if(sourceToTargetMap)for(var i=0;i<text.length;i++)sourceToTargetMap[i]=i;void 0===_isInRtl&&(_isInRtl=_isContextualDirRtl(text)),void 0===_isOutRtl&&(_isOutRtl=_isContextualDirRtl(text))}(text,sourceToTargetMap),_isInVisual||!_isOutVisual||_isOutRtl)if(_isInVisual&&_isOutVisual&&_isInRtl^_isOutRtl)_dir=_isInRtl?1:0,text=_invertString(text,sourceToTargetMap,levels);else if(!_isInVisual&&_isOutVisual&&_isOutRtl)_dir=_isInRtl?1:0,text=_reorder(text,sourceToTargetMap,levels),text=_invertString(text,sourceToTargetMap);else if(!_isInVisual||_isInRtl||_isOutVisual||_isOutRtl){if(_isInVisual&&!_isOutVisual&&_isInRtl^_isOutRtl)text=_invertString(text,sourceToTargetMap),_isInRtl?(_dir=0,text=_reorder(text,sourceToTargetMap,levels)):(_dir=1,text=_reorder(text,sourceToTargetMap,levels),text=_invertString(text,sourceToTargetMap));else if(_isInVisual&&_isInRtl&&!_isOutVisual&&_isOutRtl)_dir=1,text=_reorder(text,sourceToTargetMap,levels),text=_invertString(text,sourceToTargetMap);else if(!_isInVisual&&!_isOutVisual&&_isInRtl^_isOutRtl){var isSymmetricSwappingOrig=_isSymmetricSwapping;_isInRtl?(_dir=1,text=_reorder(text,sourceToTargetMap,levels),_dir=0,_isSymmetricSwapping=!1,text=_reorder(text,sourceToTargetMap,levels),_isSymmetricSwapping=isSymmetricSwappingOrig):(_dir=0,text=_reorder(text,sourceToTargetMap,levels),text=_invertString(text,sourceToTargetMap),_dir=1,_isSymmetricSwapping=!1,text=_reorder(text,sourceToTargetMap,levels),_isSymmetricSwapping=isSymmetricSwappingOrig,text=_invertString(text,sourceToTargetMap))}}else _dir=0,text=_reorder(text,sourceToTargetMap,levels);else _dir=_isInRtl?1:0,text=_reorder(text,sourceToTargetMap,levels);return text},this.__bidiEngine__.setOptions=function(options){options&&(_isInVisual=options.isInputVisual,_isOutVisual=options.isOutputVisual,_isInRtl=options.isInputRtl,_isOutRtl=options.isOutputRtl,_isSymmetricSwapping=options.isSymmetricSwapping)},this.__bidiEngine__.setOptions(options),this.__bidiEngine__};var _bidiUnicodeTypes=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],bidiEngine=new jsPDF.__bidiEngine__({isInputVisual:!0});jsPDF.API.events.push(["postProcessText",function(args){var text=args.text,options=(args.x,args.y,args.options||{}),tmpText=(args.mutex,options.lang,[]);if(options.isInputVisual="boolean"!=typeof options.isInputVisual||options.isInputVisual,bidiEngine.setOptions(options),"[object Array]"===Object.prototype.toString.call(text)){var i=0;for(tmpText=[],i=0;i<text.length;i+=1)"[object Array]"===Object.prototype.toString.call(text[i])?tmpText.push([bidiEngine.doBidiReorder(text[i][0]),text[i][1],text[i][2]]):tmpText.push([bidiEngine.doBidiReorder(text[i])]);args.text=tmpText}else args.text=bidiEngine.doBidiReorder(text);bidiEngine.setOptions({isInputVisual:!0})}])}(jsPDF),jsPDF.API.TTFFont=function(){function TTFFont(rawData){var data;if(this.rawData=rawData,data=this.contents=new Data(rawData),this.contents.pos=4,"ttcf"===data.readString(4))throw new Error("TTCF not supported.");data.pos=0,this.parse(),this.subset=new Subset(this),this.registerTTF()}return TTFFont.open=function(file){return new TTFFont(file)},TTFFont.prototype.parse=function(){return this.directory=new Directory(this.contents),this.head=new HeadTable(this),this.name=new NameTable(this),this.cmap=new CmapTable(this),this.toUnicode={},this.hhea=new HheaTable(this),this.maxp=new MaxpTable(this),this.hmtx=new HmtxTable(this),this.post=new PostTable(this),this.os2=new OS2Table(this),this.loca=new LocaTable(this),this.glyf=new GlyfTable(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},TTFFont.prototype.registerTTF=function(){var e,hi,low,raw,_ref;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var _i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.bbox).length;_i<_len;_i++)e=_ref[_i],_results.push(Math.round(e*this.scaleFactor));return _results}.call(this),this.stemV=0,this.post.exists?(low=255&(raw=this.post.italic_angle),0!=(32768&(hi=raw>>16))&&(hi=-(1+(65535^hi))),this.italicAngle=+(hi+"."+low)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(_ref=this.familyClass)||2===_ref||3===_ref||4===_ref||5===_ref||7===_ref,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},TTFFont.prototype.characterToGlyph=function(character){var _ref;return(null!=(_ref=this.cmap.unicode)?_ref.codeMap[character]:void 0)||0},TTFFont.prototype.widthOfGlyph=function(glyph){var scale;return scale=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(glyph).advance*scale},TTFFont.prototype.widthOfString=function(string,size,charSpace){var charCode,i,width,_ref;for(width=0,i=0,_ref=(string=""+string).length;0<=_ref?i<_ref:i>_ref;i=0<=_ref?++i:--i)charCode=string.charCodeAt(i),width+=this.widthOfGlyph(this.characterToGlyph(charCode))+charSpace*(1e3/size)||0;return width*(size/1e3)},TTFFont.prototype.lineHeight=function(size,includeGap){var gap;return null==includeGap&&(includeGap=!1),gap=includeGap?this.lineGap:0,(this.ascender+gap-this.decender)/1e3*size},TTFFont}();var Table,Data=function(){function Data(data){this.data=null!=data?data:[],this.pos=0,this.length=this.data.length}return Data.prototype.readByte=function(){return this.data[this.pos++]},Data.prototype.writeByte=function(byte){return this.data[this.pos++]=byte},Data.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},Data.prototype.writeUInt32=function(val){return this.writeByte(val>>>24&255),this.writeByte(val>>16&255),this.writeByte(val>>8&255),this.writeByte(255&val)},Data.prototype.readInt32=function(){var int;return(int=this.readUInt32())>=2147483648?int-4294967296:int},Data.prototype.writeInt32=function(val){return val<0&&(val+=4294967296),this.writeUInt32(val)},Data.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},Data.prototype.writeUInt16=function(val){return this.writeByte(val>>8&255),this.writeByte(255&val)},Data.prototype.readInt16=function(){var int;return(int=this.readUInt16())>=32768?int-65536:int},Data.prototype.writeInt16=function(val){return val<0&&(val+=65536),this.writeUInt16(val)},Data.prototype.readString=function(length){var i,ret;for(ret=[],i=0;0<=length?i<length:i>length;i=0<=length?++i:--i)ret[i]=String.fromCharCode(this.readByte());return ret.join("")},Data.prototype.writeString=function(val){var i,_ref,_results;for(_results=[],i=0,_ref=val.length;0<=_ref?i<_ref:i>_ref;i=0<=_ref?++i:--i)_results.push(this.writeByte(val.charCodeAt(i)));return _results},Data.prototype.readShort=function(){return this.readInt16()},Data.prototype.writeShort=function(val){return this.writeInt16(val)},Data.prototype.readLongLong=function(){var b1,b2,b3,b4,b5,b6,b7,b8;return b1=this.readByte(),b2=this.readByte(),b3=this.readByte(),b4=this.readByte(),b5=this.readByte(),b6=this.readByte(),b7=this.readByte(),b8=this.readByte(),128&b1?-1*(72057594037927940*(255^b1)+281474976710656*(255^b2)+1099511627776*(255^b3)+4294967296*(255^b4)+16777216*(255^b5)+65536*(255^b6)+256*(255^b7)+(255^b8)+1):72057594037927940*b1+281474976710656*b2+1099511627776*b3+4294967296*b4+16777216*b5+65536*b6+256*b7+b8},Data.prototype.writeLongLong=function(val){var high,low;return high=Math.floor(val/4294967296),low=4294967295&val,this.writeByte(high>>24&255),this.writeByte(high>>16&255),this.writeByte(high>>8&255),this.writeByte(255&high),this.writeByte(low>>24&255),this.writeByte(low>>16&255),this.writeByte(low>>8&255),this.writeByte(255&low)},Data.prototype.readInt=function(){return this.readInt32()},Data.prototype.writeInt=function(val){return this.writeInt32(val)},Data.prototype.read=function(bytes){var buf,i;for(buf=[],i=0;0<=bytes?i<bytes:i>bytes;i=0<=bytes?++i:--i)buf.push(this.readByte());return buf},Data.prototype.write=function(bytes){var byte,i,_len,_results;for(_results=[],i=0,_len=bytes.length;i<_len;i++)byte=bytes[i],_results.push(this.writeByte(byte));return _results},Data}(),Directory=function(){var checksum;function Directory(data){var entry,i,_ref;for(this.scalarType=data.readInt(),this.tableCount=data.readShort(),this.searchRange=data.readShort(),this.entrySelector=data.readShort(),this.rangeShift=data.readShort(),this.tables={},i=0,_ref=this.tableCount;0<=_ref?i<_ref:i>_ref;i=0<=_ref?++i:--i)entry={tag:data.readString(4),checksum:data.readInt(),offset:data.readInt(),length:data.readInt()},this.tables[entry.tag]=entry}return Directory.prototype.encode=function(tables){var adjustment,directory,directoryLength,entrySelector,headOffset,log2,offset,rangeShift,searchRange,table,tableCount,tableData,tag;for(tag in tableCount=Object.keys(tables).length,log2=Math.log(2),searchRange=16*Math.floor(Math.log(tableCount)/log2),entrySelector=Math.floor(searchRange/log2),rangeShift=16*tableCount-searchRange,(directory=new Data).writeInt(this.scalarType),directory.writeShort(tableCount),directory.writeShort(searchRange),directory.writeShort(entrySelector),directory.writeShort(rangeShift),directoryLength=16*tableCount,offset=directory.pos+directoryLength,headOffset=null,tableData=[],tables)for(table=tables[tag],directory.writeString(tag),directory.writeInt(checksum(table)),directory.writeInt(offset),directory.writeInt(table.length),tableData=tableData.concat(table),"head"===tag&&(headOffset=offset),offset+=table.length;offset%4;)tableData.push(0),offset++;return directory.write(tableData),adjustment=2981146554-checksum(directory.data),directory.pos=headOffset+8,directory.writeUInt32(adjustment),directory.data},checksum=function(data){var i,sum,tmp,_ref;for(data=__slice.call(data);data.length%4;)data.push(0);for(tmp=new Data(data),sum=0,i=0,_ref=data.length;i<_ref;i=i+=4)sum+=tmp.readUInt32();return 4294967295&sum},Directory}(),__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},HeadTable=function(_super){function HeadTable(){return HeadTable.__super__.constructor.apply(this,arguments)}return __extends(HeadTable,_super),HeadTable.prototype.tag="head",HeadTable.prototype.parse=function(data){return data.pos=this.offset,this.version=data.readInt(),this.revision=data.readInt(),this.checkSumAdjustment=data.readInt(),this.magicNumber=data.readInt(),this.flags=data.readShort(),this.unitsPerEm=data.readShort(),this.created=data.readLongLong(),this.modified=data.readLongLong(),this.xMin=data.readShort(),this.yMin=data.readShort(),this.xMax=data.readShort(),this.yMax=data.readShort(),this.macStyle=data.readShort(),this.lowestRecPPEM=data.readShort(),this.fontDirectionHint=data.readShort(),this.indexToLocFormat=data.readShort(),this.glyphDataFormat=data.readShort()},HeadTable.prototype.encode=function(indexToLocFormat){var table;return(table=new Data).writeInt(this.version),table.writeInt(this.revision),table.writeInt(this.checkSumAdjustment),table.writeInt(this.magicNumber),table.writeShort(this.flags),table.writeShort(this.unitsPerEm),table.writeLongLong(this.created),table.writeLongLong(this.modified),table.writeShort(this.xMin),table.writeShort(this.yMin),table.writeShort(this.xMax),table.writeShort(this.yMax),table.writeShort(this.macStyle),table.writeShort(this.lowestRecPPEM),table.writeShort(this.fontDirectionHint),table.writeShort(indexToLocFormat),table.writeShort(this.glyphDataFormat),table.data},HeadTable}(Table=function(){function Table(file){var info;this.file=file,info=this.file.directory.tables[this.tag],this.exists=!!info,info&&(this.offset=info.offset,this.length=info.length,this.parse(this.file.contents))}return Table.prototype.parse=function(){},Table.prototype.encode=function(){},Table.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},Table}()),CmapEntry=function(){function CmapEntry(data,offset){var code,count,endCode,glyphId,glyphIds,i,idDelta,idRangeOffset,saveOffset,segCount,segCountX2,start,startCode,tail,_j,_k,_len;switch(this.platformID=data.readUInt16(),this.encodingID=data.readShort(),this.offset=offset+data.readInt(),saveOffset=data.pos,data.pos=this.offset,this.format=data.readUInt16(),this.length=data.readUInt16(),this.language=data.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(i=0;i<256;++i)this.codeMap[i]=data.readByte();break;case 4:for(segCountX2=data.readUInt16(),segCount=segCountX2/2,data.pos+=6,endCode=function(){var _j,_results;for(_results=[],i=_j=0;0<=segCount?_j<segCount:_j>segCount;i=0<=segCount?++_j:--_j)_results.push(data.readUInt16());return _results}(),data.pos+=2,startCode=function(){var _j,_results;for(_results=[],i=_j=0;0<=segCount?_j<segCount:_j>segCount;i=0<=segCount?++_j:--_j)_results.push(data.readUInt16());return _results}(),idDelta=function(){var _j,_results;for(_results=[],i=_j=0;0<=segCount?_j<segCount:_j>segCount;i=0<=segCount?++_j:--_j)_results.push(data.readUInt16());return _results}(),idRangeOffset=function(){var _j,_results;for(_results=[],i=_j=0;0<=segCount?_j<segCount:_j>segCount;i=0<=segCount?++_j:--_j)_results.push(data.readUInt16());return _results}(),count=(this.length-data.pos+this.offset)/2,glyphIds=function(){var _j,_results;for(_results=[],i=_j=0;0<=count?_j<count:_j>count;i=0<=count?++_j:--_j)_results.push(data.readUInt16());return _results}(),i=_j=0,_len=endCode.length;_j<_len;i=++_j)for(tail=endCode[i],code=_k=start=startCode[i];start<=tail?_k<=tail:_k>=tail;code=start<=tail?++_k:--_k)0===idRangeOffset[i]?glyphId=code+idDelta[i]:0!==(glyphId=glyphIds[idRangeOffset[i]/2+(code-start)-(segCount-i)]||0)&&(glyphId+=idDelta[i]),this.codeMap[code]=65535&glyphId}data.pos=saveOffset}return CmapEntry.encode=function(charmap,encoding){var charMap,code,codeMap,codes,delta,deltas,diff,endCode,endCodes,entrySelector,glyphIDs,i,id,indexes,last,map,nextID,offset,old,rangeOffsets,rangeShift,searchRange,segCount,segCountX2,startCode,startCodes,startGlyph,subtable,_i,_j,_k,_l,_len,_len1,_len2,_len3,_len4,_len5,_len6,_len7,_m,_n,_name,_o,_p,_q;switch(subtable=new Data,codes=Object.keys(charmap).sort((function(a,b){return a-b})),encoding){case"macroman":for(id=0,indexes=function(){var _results=[];for(i=0;i<256;++i)_results.push(0);return _results}(),map={0:0},codeMap={},_i=0,_len=codes.length;_i<_len;_i++)null==map[_name=charmap[code=codes[_i]]]&&(map[_name]=++id),codeMap[code]={old:charmap[code],new:map[charmap[code]]},indexes[code]=map[charmap[code]];return subtable.writeUInt16(1),subtable.writeUInt16(0),subtable.writeUInt32(12),subtable.writeUInt16(0),subtable.writeUInt16(262),subtable.writeUInt16(0),subtable.write(indexes),{charMap:codeMap,subtable:subtable.data,maxGlyphID:id+1};case"unicode":for(startCodes=[],endCodes=[],nextID=0,map={},charMap={},last=diff=null,_j=0,_len1=codes.length;_j<_len1;_j++)null==map[old=charmap[code=codes[_j]]]&&(map[old]=++nextID),charMap[code]={old:old,new:map[old]},delta=map[old]-code,null!=last&&delta===diff||(last&&endCodes.push(last),startCodes.push(code),diff=delta),last=code;for(last&&endCodes.push(last),endCodes.push(65535),startCodes.push(65535),segCountX2=2*(segCount=startCodes.length),searchRange=2*Math.pow(Math.log(segCount)/Math.LN2,2),entrySelector=Math.log(searchRange/2)/Math.LN2,rangeShift=2*segCount-searchRange,deltas=[],rangeOffsets=[],glyphIDs=[],i=_k=0,_len2=startCodes.length;_k<_len2;i=++_k){if(startCode=startCodes[i],endCode=endCodes[i],65535===startCode){deltas.push(0),rangeOffsets.push(0);break}if(startCode-(startGlyph=charMap[startCode].new)>=32768)for(deltas.push(0),rangeOffsets.push(2*(glyphIDs.length+segCount-i)),code=_l=startCode;startCode<=endCode?_l<=endCode:_l>=endCode;code=startCode<=endCode?++_l:--_l)glyphIDs.push(charMap[code].new);else deltas.push(startGlyph-startCode),rangeOffsets.push(0)}for(subtable.writeUInt16(3),subtable.writeUInt16(1),subtable.writeUInt32(12),subtable.writeUInt16(4),subtable.writeUInt16(16+8*segCount+2*glyphIDs.length),subtable.writeUInt16(0),subtable.writeUInt16(segCountX2),subtable.writeUInt16(searchRange),subtable.writeUInt16(entrySelector),subtable.writeUInt16(rangeShift),_m=0,_len3=endCodes.length;_m<_len3;_m++)code=endCodes[_m],subtable.writeUInt16(code);for(subtable.writeUInt16(0),_n=0,_len4=startCodes.length;_n<_len4;_n++)code=startCodes[_n],subtable.writeUInt16(code);for(_o=0,_len5=deltas.length;_o<_len5;_o++)delta=deltas[_o],subtable.writeUInt16(delta);for(_p=0,_len6=rangeOffsets.length;_p<_len6;_p++)offset=rangeOffsets[_p],subtable.writeUInt16(offset);for(_q=0,_len7=glyphIDs.length;_q<_len7;_q++)id=glyphIDs[_q],subtable.writeUInt16(id);return{charMap:charMap,subtable:subtable.data,maxGlyphID:nextID+1}}},CmapEntry}(),CmapTable=function(_super){function CmapTable(){return CmapTable.__super__.constructor.apply(this,arguments)}return __extends(CmapTable,_super),CmapTable.prototype.tag="cmap",CmapTable.prototype.parse=function(data){var entry,i,tableCount;for(data.pos=this.offset,this.version=data.readUInt16(),tableCount=data.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=tableCount?i<tableCount:i>tableCount;i=0<=tableCount?++i:--i)entry=new CmapEntry(data,this.offset),this.tables.push(entry),entry.isUnicode&&null==this.unicode&&(this.unicode=entry);return!0},CmapTable.encode=function(charmap,encoding){var result,table;return null==encoding&&(encoding="macroman"),result=CmapEntry.encode(charmap,encoding),(table=new Data).writeUInt16(0),table.writeUInt16(1),result.table=table.data.concat(result.subtable),result},CmapTable}(Table),HheaTable=function(_super){function HheaTable(){return HheaTable.__super__.constructor.apply(this,arguments)}return __extends(HheaTable,_super),HheaTable.prototype.tag="hhea",HheaTable.prototype.parse=function(data){return data.pos=this.offset,this.version=data.readInt(),this.ascender=data.readShort(),this.decender=data.readShort(),this.lineGap=data.readShort(),this.advanceWidthMax=data.readShort(),this.minLeftSideBearing=data.readShort(),this.minRightSideBearing=data.readShort(),this.xMaxExtent=data.readShort(),this.caretSlopeRise=data.readShort(),this.caretSlopeRun=data.readShort(),this.caretOffset=data.readShort(),data.pos+=8,this.metricDataFormat=data.readShort(),this.numberOfMetrics=data.readUInt16()},HheaTable}(Table),OS2Table=function(_super){function OS2Table(){return OS2Table.__super__.constructor.apply(this,arguments)}return __extends(OS2Table,_super),OS2Table.prototype.tag="OS/2",OS2Table.prototype.parse=function(data){if(data.pos=this.offset,this.version=data.readUInt16(),this.averageCharWidth=data.readShort(),this.weightClass=data.readUInt16(),this.widthClass=data.readUInt16(),this.type=data.readShort(),this.ySubscriptXSize=data.readShort(),this.ySubscriptYSize=data.readShort(),this.ySubscriptXOffset=data.readShort(),this.ySubscriptYOffset=data.readShort(),this.ySuperscriptXSize=data.readShort(),this.ySuperscriptYSize=data.readShort(),this.ySuperscriptXOffset=data.readShort(),this.ySuperscriptYOffset=data.readShort(),this.yStrikeoutSize=data.readShort(),this.yStrikeoutPosition=data.readShort(),this.familyClass=data.readShort(),this.panose=function(){var i,_results;for(_results=[],i=0;i<10;++i)_results.push(data.readByte());return _results}(),this.charRange=function(){var i,_results;for(_results=[],i=0;i<4;++i)_results.push(data.readInt());return _results}(),this.vendorID=data.readString(4),this.selection=data.readShort(),this.firstCharIndex=data.readShort(),this.lastCharIndex=data.readShort(),this.version>0&&(this.ascent=data.readShort(),this.descent=data.readShort(),this.lineGap=data.readShort(),this.winAscent=data.readShort(),this.winDescent=data.readShort(),this.codePageRange=function(){var i,_results;for(_results=[],i=0;i<2;i=++i)_results.push(data.readInt());return _results}(),this.version>1))return this.xHeight=data.readShort(),this.capHeight=data.readShort(),this.defaultChar=data.readShort(),this.breakChar=data.readShort(),this.maxContext=data.readShort()},OS2Table}(Table),PostTable=function(_super){function PostTable(){return PostTable.__super__.constructor.apply(this,arguments)}return __extends(PostTable,_super),PostTable.prototype.tag="post",PostTable.prototype.parse=function(data){var length,numberOfGlyphs,_results;switch(data.pos=this.offset,this.format=data.readInt(),this.italicAngle=data.readInt(),this.underlinePosition=data.readShort(),this.underlineThickness=data.readShort(),this.isFixedPitch=data.readInt(),this.minMemType42=data.readInt(),this.maxMemType42=data.readInt(),this.minMemType1=data.readInt(),this.maxMemType1=data.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(numberOfGlyphs=data.readUInt16(),this.glyphNameIndex=[],i=0;0<=numberOfGlyphs?i<numberOfGlyphs:i>numberOfGlyphs;i=0<=numberOfGlyphs?++i:--i)this.glyphNameIndex.push(data.readUInt16());for(this.names=[],_results=[];data.pos<this.offset+this.length;)length=data.readByte(),_results.push(this.names.push(data.readString(length)));return _results;case 151552:return numberOfGlyphs=data.readUInt16(),this.offsets=data.read(numberOfGlyphs);case 262144:return this.map=function(){var _j,_ref,_results1;for(_results1=[],i=_j=0,_ref=this.file.maxp.numGlyphs;0<=_ref?_j<_ref:_j>_ref;i=0<=_ref?++_j:--_j)_results1.push(data.readUInt32());return _results1}.call(this)}},PostTable}(Table),NameEntry=function(raw,entry){this.raw=raw,this.length=raw.length,this.platformID=entry.platformID,this.encodingID=entry.encodingID,this.languageID=entry.languageID},NameTable=function(_super){function NameTable(){return NameTable.__super__.constructor.apply(this,arguments)}return __extends(NameTable,_super),NameTable.prototype.tag="name",NameTable.prototype.parse=function(data){var count,entries,entry,i,name,stringOffset,strings,text,_j,_len,_name;for(data.pos=this.offset,data.readShort(),count=data.readShort(),stringOffset=data.readShort(),entries=[],i=0;0<=count?i<count:i>count;i=0<=count?++i:--i)entries.push({platformID:data.readShort(),encodingID:data.readShort(),languageID:data.readShort(),nameID:data.readShort(),length:data.readShort(),offset:this.offset+stringOffset+data.readShort()});for(strings={},i=_j=0,_len=entries.length;_j<_len;i=++_j)entry=entries[i],data.pos=entry.offset,text=data.readString(entry.length),name=new NameEntry(text,entry),null==strings[_name=entry.nameID]&&(strings[_name]=[]),strings[entry.nameID].push(name);this.strings=strings,this.copyright=strings[0],this.fontFamily=strings[1],this.fontSubfamily=strings[2],this.uniqueSubfamily=strings[3],this.fontName=strings[4],this.version=strings[5];try{this.postscriptName=strings[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=strings[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=strings[7],this.manufacturer=strings[8],this.designer=strings[9],this.description=strings[10],this.vendorUrl=strings[11],this.designerUrl=strings[12],this.license=strings[13],this.licenseUrl=strings[14],this.preferredFamily=strings[15],this.preferredSubfamily=strings[17],this.compatibleFull=strings[18],this.sampleText=strings[19]},NameTable}(Table),MaxpTable=function(_super){function MaxpTable(){return MaxpTable.__super__.constructor.apply(this,arguments)}return __extends(MaxpTable,_super),MaxpTable.prototype.tag="maxp",MaxpTable.prototype.parse=function(data){return data.pos=this.offset,this.version=data.readInt(),this.numGlyphs=data.readUInt16(),this.maxPoints=data.readUInt16(),this.maxContours=data.readUInt16(),this.maxCompositePoints=data.readUInt16(),this.maxComponentContours=data.readUInt16(),this.maxZones=data.readUInt16(),this.maxTwilightPoints=data.readUInt16(),this.maxStorage=data.readUInt16(),this.maxFunctionDefs=data.readUInt16(),this.maxInstructionDefs=data.readUInt16(),this.maxStackElements=data.readUInt16(),this.maxSizeOfInstructions=data.readUInt16(),this.maxComponentElements=data.readUInt16(),this.maxComponentDepth=data.readUInt16()},MaxpTable}(Table),HmtxTable=function(_super){function HmtxTable(){return HmtxTable.__super__.constructor.apply(this,arguments)}return __extends(HmtxTable,_super),HmtxTable.prototype.tag="hmtx",HmtxTable.prototype.parse=function(data){var i,last,lsbCount,m,_j,_ref,_results;for(data.pos=this.offset,this.metrics=[],i=0,_ref=this.file.hhea.numberOfMetrics;0<=_ref?i<_ref:i>_ref;i=0<=_ref?++i:--i)this.metrics.push({advance:data.readUInt16(),lsb:data.readInt16()});for(lsbCount=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var _j,_results;for(_results=[],i=_j=0;0<=lsbCount?_j<lsbCount:_j>lsbCount;i=0<=lsbCount?++_j:--_j)_results.push(data.readInt16());return _results}(),this.widths=function(){var _j,_len,_ref1,_results;for(_results=[],_j=0,_len=(_ref1=this.metrics).length;_j<_len;_j++)m=_ref1[_j],_results.push(m.advance);return _results}.call(this),last=this.widths[this.widths.length-1],_results=[],i=_j=0;0<=lsbCount?_j<lsbCount:_j>lsbCount;i=0<=lsbCount?++_j:--_j)_results.push(this.widths.push(last));return _results},HmtxTable.prototype.forGlyph=function(id){return id in this.metrics?this.metrics[id]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[id-this.metrics.length]}},HmtxTable}(Table),__slice=[].slice,GlyfTable=function(_super){function GlyfTable(){return GlyfTable.__super__.constructor.apply(this,arguments)}return __extends(GlyfTable,_super),GlyfTable.prototype.tag="glyf",GlyfTable.prototype.parse=function(){return this.cache={}},GlyfTable.prototype.glyphFor=function(id){var data,index,length,loca,numberOfContours,raw,xMax,xMin,yMax,yMin;return id in this.cache?this.cache[id]:(loca=this.file.loca,data=this.file.contents,index=loca.indexOf(id),0===(length=loca.lengthOf(id))?this.cache[id]=null:(data.pos=this.offset+index,numberOfContours=(raw=new Data(data.read(length))).readShort(),xMin=raw.readShort(),yMin=raw.readShort(),xMax=raw.readShort(),yMax=raw.readShort(),this.cache[id]=-1===numberOfContours?new CompoundGlyph(raw,xMin,yMin,xMax,yMax):new SimpleGlyph(raw,numberOfContours,xMin,yMin,xMax,yMax),this.cache[id]))},GlyfTable.prototype.encode=function(glyphs,mapping,old2new){var glyph,offsets,table,_i,_len;for(table=[],offsets=[],_i=0,_len=mapping.length;_i<_len;_i++)glyph=glyphs[mapping[_i]],offsets.push(table.length),glyph&&(table=table.concat(glyph.encode(old2new)));return offsets.push(table.length),{table:table,offsets:offsets}},GlyfTable}(Table),SimpleGlyph=function(){function SimpleGlyph(raw,numberOfContours,xMin,yMin,xMax,yMax){this.raw=raw,this.numberOfContours=numberOfContours,this.xMin=xMin,this.yMin=yMin,this.xMax=xMax,this.yMax=yMax,this.compound=!1}return SimpleGlyph.prototype.encode=function(){return this.raw.data},SimpleGlyph}(),CompoundGlyph=function(){function CompoundGlyph(raw,xMin,yMin,xMax,yMax){var data,flags;for(this.raw=raw,this.xMin=xMin,this.yMin=yMin,this.xMax=xMax,this.yMax=yMax,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],data=this.raw;flags=data.readShort(),this.glyphOffsets.push(data.pos),this.glyphIDs.push(data.readUInt16()),32&flags;)data.pos+=1&flags?4:2,128&flags?data.pos+=8:64&flags?data.pos+=4:8&flags&&(data.pos+=2)}return 1,8,32,64,128,CompoundGlyph.prototype.encode=function(){var i,result,_len;for(result=new Data(__slice.call(this.raw.data)),i=0,_len=this.glyphIDs.length;i<_len;++i)result.pos=this.glyphOffsets[i];return result.data},CompoundGlyph}(),LocaTable=function(_super){function LocaTable(){return LocaTable.__super__.constructor.apply(this,arguments)}return __extends(LocaTable,_super),LocaTable.prototype.tag="loca",LocaTable.prototype.parse=function(data){var format,i;return data.pos=this.offset,format=this.file.head.indexToLocFormat,this.offsets=0===format?function(){var _ref,_results;for(_results=[],i=0,_ref=this.length;i<_ref;i+=2)_results.push(2*data.readUInt16());return _results}.call(this):function(){var _ref,_results;for(_results=[],i=0,_ref=this.length;i<_ref;i+=4)_results.push(data.readUInt32());return _results}.call(this)},LocaTable.prototype.indexOf=function(id){return this.offsets[id]},LocaTable.prototype.lengthOf=function(id){return this.offsets[id+1]-this.offsets[id]},LocaTable.prototype.encode=function(offsets,activeGlyphs){for(var LocaTable=new Uint32Array(this.offsets.length),glyfPtr=0,listGlyf=0,k=0;k<LocaTable.length;++k)if(LocaTable[k]=glyfPtr,listGlyf<activeGlyphs.length&&activeGlyphs[listGlyf]==k){++listGlyf,LocaTable[k]=glyfPtr;var start=this.offsets[k],len=this.offsets[k+1]-start;len>0&&(glyfPtr+=len)}for(var newLocaTable=new Array(4*LocaTable.length),j=0;j<LocaTable.length;++j)newLocaTable[4*j+3]=255&LocaTable[j],newLocaTable[4*j+2]=(65280&LocaTable[j])>>8,newLocaTable[4*j+1]=(16711680&LocaTable[j])>>16,newLocaTable[4*j]=(4278190080&LocaTable[j])>>24;return newLocaTable},LocaTable}(Table),Subset=function(){function Subset(font){this.font=font,this.subset={},this.unicodes={},this.next=33}return Subset.prototype.generateCmap=function(){var mapping,roman,unicode,unicodeCmap,_ref;for(roman in unicodeCmap=this.font.cmap.tables[0].codeMap,mapping={},_ref=this.subset)unicode=_ref[roman],mapping[roman]=unicodeCmap[unicode];return mapping},Subset.prototype.glyphsFor=function(glyphIDs){var additionalIDs,glyph,glyphs,id,_i,_len,_ref;for(glyphs={},_i=0,_len=glyphIDs.length;_i<_len;_i++)glyphs[id=glyphIDs[_i]]=this.font.glyf.glyphFor(id);for(id in additionalIDs=[],glyphs)(null!=(glyph=glyphs[id])?glyph.compound:void 0)&&additionalIDs.push.apply(additionalIDs,glyph.glyphIDs);if(additionalIDs.length>0)for(id in _ref=this.glyphsFor(additionalIDs))glyph=_ref[id],glyphs[id]=glyph;return glyphs},Subset.prototype.encode=function(glyID,indexToLocFormat){var cmap,code,glyf,glyphs,id,ids,loca,new2old,newIDs,nextGlyphID,old2new,oldID,oldIDs,tables,_ref;for(code in cmap=CmapTable.encode(this.generateCmap(),"unicode"),glyphs=this.glyphsFor(glyID),old2new={0:0},_ref=cmap.charMap)old2new[(ids=_ref[code]).old]=ids.new;for(oldID in nextGlyphID=cmap.maxGlyphID,glyphs)oldID in old2new||(old2new[oldID]=nextGlyphID++);return new2old=function(object){var key,ret;for(key in ret={},object)ret[object[key]]=key;return ret}(old2new),newIDs=Object.keys(new2old).sort((function(a,b){return a-b})),oldIDs=function(){var _i,_len,_results;for(_results=[],_i=0,_len=newIDs.length;_i<_len;_i++)id=newIDs[_i],_results.push(new2old[id]);return _results}(),glyf=this.font.glyf.encode(glyphs,oldIDs,old2new),loca=this.font.loca.encode(glyf.offsets,oldIDs),tables={cmap:this.font.cmap.raw(),glyf:glyf.table,loca:loca,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(indexToLocFormat)},this.font.os2.exists&&(tables["OS/2"]=this.font.os2.raw()),this.font.directory.encode(tables)},Subset}();return jsPDF.API.PDFObject=function(){var pad;function PDFObject(){}return pad=function(str,length){return(Array(length+1).join("0")+str).slice(-length)},PDFObject.convert=function(object){var e,key,out,val;if(Array.isArray(object))return"["+function(){var _i,_len,_results;for(_results=[],_i=0,_len=object.length;_i<_len;_i++)e=object[_i],_results.push(PDFObject.convert(e));return _results}().join(" ")+"]";if("string"==typeof object)return"/"+object;if(null!=object?object.isString:void 0)return"("+object+")";if(object instanceof Date)return"(D:"+pad(object.getUTCFullYear(),4)+pad(object.getUTCMonth(),2)+pad(object.getUTCDate(),2)+pad(object.getUTCHours(),2)+pad(object.getUTCMinutes(),2)+pad(object.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(object)){for(key in out=["<<"],object)val=object[key],out.push("/"+key+" "+PDFObject.convert(val));return out.push(">>"),out.join("\n")}return""+object},PDFObject}(),exports.AcroForm=AcroForm,exports.AcroFormAppearance=AcroFormAppearance,exports.AcroFormButton=AcroFormButton,exports.AcroFormCheckBox=AcroFormCheckBox,exports.AcroFormChoiceField=AcroFormChoiceField,exports.AcroFormComboBox=AcroFormComboBox,exports.AcroFormEditBox=AcroFormEditBox,exports.AcroFormListBox=AcroFormListBox,exports.AcroFormPasswordField=AcroFormPasswordField,exports.AcroFormPushButton=AcroFormPushButton,exports.AcroFormRadioButton=AcroFormRadioButton,exports.AcroFormTextField=AcroFormTextField,exports.GState=GState,exports.ShadingPattern=ShadingPattern,exports.TilingPattern=TilingPattern,exports.default=jsPDF,exports.jsPDF=jsPDF,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default}));

//# sourceMappingURL=jspdf.min.js.map