{"version":3,"file":"resend_submission.min.js","sources":["../src/resend_submission.js"],"sourcesContent":["/**\n * Javascript controller for resubmissions.\n *\n * @copyright Turnitin\n * @author 2019 David Winn <dwinn@turnitin.com>\n * @module plagiarism_turnitin/resendSubmission\n */\n\ndefine(['jquery'], function($) {\n    return {\n        resendSubmission: function() {\n            // Create new event for submission to be re-sent to Turnitin.\n            $(document).on('click', '.plagiarism_turnitin_resubmit_link', function() {\n                $(this).hide();\n                $(this).siblings('.pp_resubmitting').removeClass('hidden');\n                var that = $(this);\n\n                var submissionid = $(this).prop('id').split(\"_\")[2];\n                var forumpost = $('#content_' + submissionid).html();\n                var forumdata = $('#forumdata_' + submissionid).html();\n\n                $.ajax({\n                    type: \"POST\",\n                    url: M.cfg.wwwroot + \"/plagiarism/turnitin/ajax.php\",\n                    dataType: \"json\",\n                    data: {\n                        action: \"resubmit_event\",\n                        submissionid: submissionid,\n                        forumpost: forumpost,\n                        forumdata: forumdata,\n                        sesskey: M.cfg.sesskey\n                    },\n                    success: function() {\n                        that.siblings('.turnitin_status').removeClass('hidden');\n                        that.siblings('.pp_resubmitting').addClass('hidden');\n                    },\n                    error: function() {\n                        that.show();\n                        that.siblings('.pp_resubmitting').addClass('hidden');\n                    }\n                });\n\n                return false;\n            });\n        }\n    };\n});\n"],"names":["define","$","resendSubmission","document","on","this","hide","siblings","removeClass","that","submissionid","prop","split","forumpost","html","forumdata","ajax","type","url","M","cfg","wwwroot","dataType","data","action","sesskey","success","addClass","error","show"],"mappings":"AAQAA,+CAAO,CAAC,WAAW,SAASC,SACjB,CACHC,iBAAkB,WAEdD,EAAEE,UAAUC,GAAG,QAAS,sCAAsC,WAC1DH,EAAEI,MAAMC,OACRL,EAAEI,MAAME,SAAS,oBAAoBC,YAAY,cAC7CC,KAAOR,EAAEI,MAETK,aAAeT,EAAEI,MAAMM,KAAK,MAAMC,MAAM,KAAK,GAC7CC,UAAYZ,EAAE,YAAcS,cAAcI,OAC1CC,UAAYd,EAAE,cAAgBS,cAAcI,cAEhDb,EAAEe,KAAK,CACHC,KAAM,OACNC,IAAKC,EAAEC,IAAIC,QAAU,gCACrBC,SAAU,OACVC,KAAM,CACFC,OAAQ,iBACRd,aAAcA,aACdG,UAAWA,UACXE,UAAWA,UACXU,QAASN,EAAEC,IAAIK,SAEnBC,QAAS,WACLjB,KAAKF,SAAS,oBAAoBC,YAAY,UAC9CC,KAAKF,SAAS,oBAAoBoB,SAAS,WAE/CC,MAAO,WACHnB,KAAKoB,OACLpB,KAAKF,SAAS,oBAAoBoB,SAAS,cAI5C"}