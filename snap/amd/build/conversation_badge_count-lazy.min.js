define(["jquery","core/ajax"],function(a,b){var c=this;return c.init=function(b){c.userid=b,c.containerEl=a(".conversation_badge_count"),c.queryCount()},c.countUnreadConversations=function(a){var d={methodname:"core_message_get_unread_conversations_count",args:a},e=b.call([d])[0];return e.fail(c.resetCount),e},c.queryCount=function(){c.countUnreadConversations({useridto:c.userid}).then(c.updateCount)},c.updateCount=function(a){a>0?(c.containerEl.text(a),c.containerEl.removeClass("hidden")):(c.containerEl.text(""),c.containerEl.addClass("hidden"))},c.resetCount=function(){c.updateCount(0)},{init:c.init}});