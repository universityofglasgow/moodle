{{=<% %>=}}

<%> local_xp/mobile-css %>

<style>
.mma-xp-ladder .mma-xp-item-ladder {
    border-left: 5px solid transparent;
}
.mma-xp-ladder .mma-xp-item-ladder.is-me {
    border-color: #41c2ff;
}
.mma-xp-ladder .mma-xp-item-ladder .badge {
    padding-top: 4px;
    padding-bottom: 4px;
}
</style>

<%#tabs%>
    <%> local_xp/mobile-tabs %>
<%/tabs%>

<%#groupselector%>
    <%> local_xp/mobile-group-selector %>
<%/groupselector%>

<%#ladder%>
<div class="mma-xp-ladder ion-margin-bottom">
    <ion-list>
        <%#hasbefore%>
            <ion-item>
                <ion-button class="prev-page ion-no-margin" fill="clear" expand="full" core-site-plugins-new-content component="local_xp" method="ladder_page" samePage="true" [useOtherData]="['groupid']" [args]="{courseid: <% courseid %>, page: <% prevpage %>}"><%#str%>previous, core<%/str%></ion-button>
            </ion-item>
        <%/hasbefore%>

        <%#ranking%>
            <ion-item class="mma-xp-item-ladder <%#state.subject.ismine%>is-me<%/state.subject.ismine%>">

                <%#showrank%>
                    <div class="rank" slot="start"><% rank %>.</div>
                <%/showrank%>

                <%#state.level%>
                    <div class="badge" slot="start">
                        <%> local_xp/mobile-level-xsmall%>
                    </div>
                <%/state.level%>

                <%#showrelrank%>
                    <div class="rank rank-rel" slot="start">
                        <%#rank%>
                            <%#rankpositive%>+<%/rankpositive%><% . %>
                        <%/rank%>
                        <%^rank%>0<%/rank%>
                    </div>
                <%/showrelrank%>

                <ion-avatar slot="start">
                    <img src="<% state.subject.imageurl %>" core-external-content alt="">
                </ion-avatar>

                <core-format-text text="<% state.subject.name %>" component="local_xp"></core-format-text>

                <%#showtotal%>
                    <div slot="end">
                        <%#state.xp%>
                            <%> local_xp/mobile-xp %>
                        <%/state.xp%>
                        <%^state.xp%>
                            <%> local_xp/mobile-xp-zero %>
                        <%/state.xp%>
                    </div>
                <%/showtotal%>

            </ion-item>
        <%/ranking%>

        <%#hasmore%>
            <ion-item>
                <ion-button class="next-page ion-no-margin" fill="clear" expand="full" core-site-plugins-new-content component="local_xp" method="ladder_page" samePage="true" [useOtherData]="['groupid']" [args]="{courseid: <% courseid %>, page: <% nextpage %>}"><%#str%>next, core<%/str%></ion-button>
            </ion-item>
        <%/hasmore%>
    </ion-list>
</div>
<%/ladder%>
