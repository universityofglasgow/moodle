{"version":3,"file":"peermark.min.js","sources":["../src/peermark.js"],"sourcesContent":["/**\n * Javascript controller for launching a Peermark modal.\n *\n * @copyright Turnitin\n * @author 2019 David Winn <dwinn@turnitin.com>\n * @module plagiarism_turnitin/peermarkLaunch\n */\n\ndefine(['jquery',\n        'core/templates',\n        'core/modal_factory',\n        'core/modal_events',\n        'plagiarism_turnitin/modal_peermark_manager_launch',\n        'plagiarism_turnitin/modal_peermark_reviews_launch'\n    ],\n    function($, Templates, ModalFactory, ModalEvents, ModalPeermarkManagerLaunch, ModalPeermarkReviewsLaunch) {\n        return {\n            peermarkLaunch: function() {\n                var that = this;\n                $('.peermark_manager_launch').on('click', function(event) {\n                    event.preventDefault();\n                    that.peermarkCreateModal(ModalPeermarkManagerLaunch.TYPE);\n                });\n\n                $(document).on('click', '.peermark_reviews_pp_launch', function() {\n                    that.peermarkCreateModal(ModalPeermarkReviewsLaunch.TYPE);\n                });\n            },\n            peermarkCreateModal: function(modalType) {\n\n                if ($('input[name=\"coursemodule\"]').val()) {\n                    var cmid = $('input[name=\"coursemodule\"]').val();\n                } else {\n                    var urlParams = new URLSearchParams(window.location.search);\n                    var cmid = urlParams.get('id');\n                }\n                ModalFactory.create({\n                    type: modalType,\n                    templateContext: {\n                        cmid: cmid,\n                        wwwroot: M.cfg.wwwroot\n                    },\n                    large: true\n                })\n                    .then(function (modal) {\n                        modal.show();\n                    });\n            }\n        };\n    });"],"names":["define","$","Templates","ModalFactory","ModalEvents","ModalPeermarkManagerLaunch","ModalPeermarkReviewsLaunch","peermarkLaunch","that","this","on","event","preventDefault","peermarkCreateModal","TYPE","document","modalType","val","cmid","URLSearchParams","window","location","search","get","create","type","templateContext","wwwroot","M","cfg","large","then","modal","show"],"mappings":"AAQAA,sCAAO,CAAC,SACA,iBACA,qBACA,oBACA,oDACA,sDAEJ,SAASC,EAAGC,UAAWC,aAAcC,YAAaC,2BAA4BC,kCACnE,CACHC,eAAgB,eACRC,KAAOC,KACXR,EAAE,4BAA4BS,GAAG,SAAS,SAASC,OAC/CA,MAAMC,iBACNJ,KAAKK,oBAAoBR,2BAA2BS,SAGxDb,EAAEc,UAAUL,GAAG,QAAS,+BAA+B,WACnDF,KAAKK,oBAAoBP,2BAA2BQ,UAG5DD,oBAAqB,SAASG,cAEtBf,EAAE,8BAA8BgB,UAC5BC,KAAOjB,EAAE,8BAA8BgB,WAGvCC,KADY,IAAIC,gBAAgBC,OAAOC,SAASC,QAC/BC,IAAI,MAE7BpB,aAAaqB,OAAO,CAChBC,KAAMT,UACNU,gBAAiB,CACbR,KAAMA,KACNS,QAASC,EAAEC,IAAIF,SAEnBG,OAAO,IAENC,MAAK,SAAUC,OACZA,MAAMC"}