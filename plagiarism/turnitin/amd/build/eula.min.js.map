{"version":3,"sources":["../src/eula.js"],"names":["define","$","Templates","ModalFactory","ModalEvents","ModalEulaLaunch","eulaLaunch","turnitinEulaClass","show","document","on","create","type","TYPE","templateContext","cmid","val","wwwroot","M","cfg","large","then","modal","getRoot","find","addClass","length","hide","siblings"],"mappings":"AASAA,OAAM,4BAAC,CAAC,QAAD,CACC,gBADD,CAEC,oBAFD,CAGC,mBAHD,CAIC,uCAJD,CAAD,CAMF,SAASC,CAAT,CAAYC,CAAZ,CAAuBC,CAAvB,CAAqCC,CAArC,CAAkDC,CAAlD,CAAmE,CAC/D,MAAO,CACHC,UAAU,CAAE,qBAAW,CACnB,GAAIC,CAAAA,CAAiB,CAAGN,CAAC,CAAC,mBAAD,CAAzB,CACAM,CAAiB,CAACC,IAAlB,GAEAP,CAAC,CAACQ,QAAD,CAAD,CAAYC,EAAZ,CAAe,OAAf,CAAwB,wBAAxB,CAAkD,UAAW,CACzDP,CAAY,CAACQ,MAAb,CAAoB,CAChBC,IAAI,CAAEP,CAAe,CAACQ,IADN,CAEhBC,eAAe,CAAE,CACbC,IAAI,CAAEd,CAAC,CAAC,8BAAD,CAAD,CAAgCe,GAAhC,EADO,CAEbC,OAAO,CAAEC,CAAC,CAACC,GAAF,CAAMF,OAFF,CAFD,CAMhBG,KAAK,GANW,CAApB,EAQKC,IARL,CAQU,SAAUC,CAAV,CAAiB,CACnBA,CAAK,CAACd,IAAN,GACAc,CAAK,CAACC,OAAN,GAAgBC,IAAhB,CAAqB,QAArB,EAA+BC,QAA/B,CAAwC,mBAAxC,EACAH,CAAK,CAACC,OAAN,GAAgBC,IAAhB,CAAqB,gBAArB,EAAuCC,QAAvC,CAAgD,2BAAhD,CACH,CAZL,CAaH,CAdD,EAiBA,GAA4C,CAAxC,CAAAxB,CAAC,CAAC,2BAAD,CAAD,CAA+ByB,MAAnC,CAA+C,CAC3C,GAAsC,CAAlC,CAAAzB,CAAC,CAAC,qBAAD,CAAD,CAAyByB,MAA7B,CAAyC,CACrCzB,CAAC,CAAC,qBAAD,CAAD,CAAyB0B,IAAzB,EACH,CACD,GAAkD,CAA9C,CAAApB,CAAiB,CAACqB,QAAlB,CAA2B,QAA3B,EAAqCF,MAAzC,CAAqD,CACjDnB,CAAiB,CAACqB,QAAlB,CAA2B,QAA3B,EAAqCD,IAArC,EACH,CACJ,CACJ,CA9BE,CAgCV,CAvCC,CAAN","sourcesContent":["/**\n * Javascript controller for launching the EULA modal.\n *\n * @package   turnitin\n * @copyright Turnitin\n * @author 2019 David Winn <dwinn@turnitin.com>\n * @module plagiarism_turnitin/eulaLaunch\n */\n\ndefine(['jquery',\n        'core/templates',\n        'core/modal_factory',\n        'core/modal_events',\n        'plagiarism_turnitin/modal_eula_launch'\n    ],\n    function($, Templates, ModalFactory, ModalEvents, ModalEulaLaunch) {\n        return {\n            eulaLaunch: function() {\n                var turnitinEulaClass = $(\".pp_turnitin_eula\");\n                turnitinEulaClass.show();\n\n                $(document).on('click', '.pp_turnitin_eula_link', function() {\n                    ModalFactory.create({\n                        type: ModalEulaLaunch.TYPE,\n                        templateContext: {\n                            cmid: $('input[name=\"coursemodule\"]').val(),\n                            wwwroot: M.cfg.wwwroot\n                        },\n                        large: true\n                    })\n                        .then(function (modal) {\n                            modal.show();\n                            modal.getRoot().find('.modal').addClass('tii_pp_modal_eula');\n                            modal.getRoot().find('.modal-content').addClass('tii_pp_modal_eula_content');\n                        });\n                });\n\n                // Hide the submission form if the user has never accepted or declined the Turnitin EULA.\n                if ($(\".pp_turnitin_eula_ignored\").length > 0) {\n                    if ($('.editsubmissionform').length > 0) {\n                        $('.editsubmissionform').hide();\n                    }\n                    if (turnitinEulaClass.siblings('.mform').length > 0) {\n                        turnitinEulaClass.siblings('.mform').hide();\n                    }\n                }\n            }\n        };\n    });"],"file":"eula.min.js"}