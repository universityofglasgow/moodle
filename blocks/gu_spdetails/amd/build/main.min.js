define(["core/ajax"],function(d){var a=t=>{var e=document.getElementById("current_tab"),s=document.getElementById("past_tab"),a=document.getElementById("sortby_course"),c=document.getElementById("sortby_date"),r=document.getElementById("sortby_startdate"),d=document.getElementById("sortby_enddate");switch(t.target){case e:var o="current",l=0,i="coursetitle",n="asc";e.classList.add("active"),s.classList.remove("active"),u(o,l,i,n);break;case s:var o="past",l=0,i="coursetitle",n="asc";e.classList.remove("active"),s.classList.add("active"),u(o,l,i,n);break;case a:o=e.classList.contains("active")?"current":"past";l=0,i="coursetitle";"asc"==a.getAttribute("data-value")?(n="desc",a.setAttribute("data-value","desc"),a.classList.add("th-sort-desc"),a.classList.remove("th-sort-asc")):(n="asc",a.setAttribute("data-value","asc"),a.classList.add("th-sort-asc"),a.classList.remove("th-sort-desc")),u(o,l,i,n);break;case c:o="current",l=0,i="duedate";"asc"==c.getAttribute("data-value")?(n="desc",c.setAttribute("data-value","desc"),c.classList.add("th-sort-desc"),c.classList.remove("th-sort-asc")):(n="asc",c.setAttribute("data-value","asc"),c.classList.add("th-sort-asc"),c.classList.remove("th-sort-desc")),u(o,l,i,n);break;case r:o="past",l=0,i="startdate";"asc"==r.getAttribute("data-value")?(n="desc",r.setAttribute("data-value","desc"),r.classList.add("th-sort-desc"),r.classList.remove("th-sort-asc")):(n="asc",r.setAttribute("data-value","asc"),r.classList.add("th-sort-asc"),r.classList.remove("th-sort-desc")),u(o,l,i,n);break;case d:o="past",l=0,i="enddate";"asc"==d.getAttribute("data-value")?(n="desc",d.setAttribute("data-value","desc"),d.classList.add("th-sort-desc"),d.classList.remove("th-sort-asc")):(n="asc",d.setAttribute("data-value","asc"),d.classList.add("th-sort-asc"),d.classList.remove("th-sort-desc")),u(o,l,i,n)}},c=t=>{var e=document.getElementById("menu_current_assessments_sortby"),s=document.getElementById("menu_past_assessments_sortby"),a=document.getElementById("sortby_course"),c=document.getElementById("sortby_date"),r=document.getElementById("sortby_startdate"),d=document.getElementById("sortby_enddate");switch(t.target){case e:var o="current",l=0,i=e.value,n="asc";"coursetitle"===e.value?(a.classList.add("th-sort-asc"),a.classList.remove("th-sort-desc"),a.setAttribute("data-value","asc")):(c.classList.add("th-sort-asc"),c.classList.remove("th-sort-desc"),c.setAttribute("data-value","asc")),u(o,l,i,n);break;case s:o="past",l=0,i=s.value,n="asc";"coursetitle"===s.value?(a.classList.add("th-sort-asc"),a.classList.remove("th-sort-desc"),a.setAttribute("data-value","asc")):"startdate"===s.value?(r.classList.add("th-sort-asc"),r.classList.remove("th-sort-desc"),r.setAttribute("data-value","asc")):(d.classList.add("th-sort-asc"),d.classList.remove("th-sort-desc"),d.setAttribute("data-value","asc")),u(o,l,i,n)}};const u=(t,e,s,a)=>{var c=document.querySelector(".assessments-details-container"),r=document.getElementById("assessments_details_contents");d.call([{methodname:"block_gu_spdetails_retrieve_assessments",args:{activetab:t,page:e,sortby:s,sortorder:a}}])[0].done(function(t){r.innerHTML=t.result,l(),o(s,a)}).fail(function(t){var e,s,a;t&&((e=document.createElement("div")).classList.add("alert","alert-danger"),t.hasOwnProperty("message")&&((a=document.createElement("p")).innerHTML=t.message,e.appendChild(a),a.classList.add("errormessage")),t.hasOwnProperty("moreinfourl")&&(s=document.createElement("p"),(a=document.createElement("a")).setAttribute("href",t.moreinfourl),a.setAttribute("target","_blank"),a.innerHTML="More information about this error",e.appendChild(s),s.appendChild(a),s.classList.add("errorcode")),c.prepend(e))})},o=(t,e)=>{var s=document.getElementById("sortby_course"),a=document.getElementById("sortby_date"),c=document.getElementById("sortby_startdate"),r=document.getElementById("sortby_enddate");switch(t){case"coursetitle":s&&("asc"===e?(s.classList.add("th-sort-asc"),s.classList.remove("th-sort-desc"),s.setAttribute("data-value","asc")):(s.classList.add("th-sort-desc"),s.classList.remove("th-sort-asc"),s.setAttribute("data-value","desc")));break;case"duedate":a&&("asc"===e?(a.classList.add("th-sort-asc"),a.classList.remove("th-sort-desc"),a.setAttribute("data-value","asc")):(a.classList.add("th-sort-desc"),a.classList.remove("th-sort-asc"),a.setAttribute("data-value","desc")));break;case"startdate":c&&("asc"===e?(c.classList.add("th-sort-asc"),c.classList.remove("th-sort-desc"),c.setAttribute("data-value","asc")):(c.classList.add("th-sort-desc"),c.classList.remove("th-sort-asc"),c.setAttribute("data-value","desc")));break;case"enddate":r&&("asc"===e?(r.classList.add("th-sort-asc"),r.classList.remove("th-sort-desc"),r.setAttribute("data-value","asc")):(r.classList.add("th-sort-desc"),r.classList.remove("th-sort-asc"),r.setAttribute("data-value","desc")))}},l=()=>{document.querySelectorAll("#assessments_details_contents .page-item a.page-link").forEach(t=>{var e,s,a,c,r;"#"!==t.getAttribute("href")?(e=new URL(t.getAttribute("href")),e=new URLSearchParams(e.search),s=e.get("activetab"),a=e.get("page"),c=e.get("sortby"),r=e.get("sortorder"),t.addEventListener("click",t=>{t.preventDefault(),u(s,a,c,r)})):t.removeAttribute("href")})};return{init:function(){const t=document.querySelector(".assessments-details-container");var e,s;t&&(e=document.getElementById("current_tab"),s=document.getElementById("past_tab"),e.classList.add("active"),s.classList.remove("active"),u("current",0,"coursetitle","asc"),t.addEventListener("change",c),t.addEventListener("click",a))}}});
