define(["jquery","core/ajax","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/modal_events"],function(a,b,c,d,e,f,g){function h(){a.ajax({type:"POST",url:M.cfg.wwwroot+"/plagiarism/turnitin/ajax.php",dataType:"json",data:{action:"refresh_peermark_assignments",cmid:a('input[name="coursemodule"]').val(),sesskey:M.cfg.sesskey}})}var i=!1,j={HIDE_BUTTON:'[data-action="hide"]',MODAL:'[data-region="modal"]'},k=function(a){e.call(this,a)};return k.TYPE="plagiarism_turnitin-modal_peermark_manager_launch",k.prototype=Object.create(e.prototype),k.prototype.constructor=k,k.prototype.registerEventListeners=function(){e.prototype.registerEventListeners.call(this),this.getModal().on(d.events.activate,j.HIDE_BUTTON,function(b,c){var d=a.Event(g.cancel);this.getRoot().trigger(d,this),d.isDefaultPrevented()||(this.hide(),c.originalEvent.preventDefault(),h())}.bind(this)),this.getRoot().click(function(b){a(b.target).closest(j.MODAL).length||h()}.bind(this))},i||(f.register(k.TYPE,k,"plagiarism_turnitin/modal_peermark_manager_launch"),i=!0),k});