define ("qtype_wordselect/navigation",["jquery"],function(a){var b={CSS:{QUESTION_CONTENT:".qtext",SELECTABLE_WORD:"span.selectable"},tableMatrix:[],init:function init(){var c=a(b.CSS.QUESTION_CONTENT),d=c.find(b.CSS.SELECTABLE_WORD);if(0===d.length){return}for(var e=0,f=parseInt(a(d[0]).position().top,10),g=0,h=[],j=0;j<d.length;j++){var k=a(d[j]),l=k.parent().closest("table").length,m=0;if(l){m=k.parent().closest("table").find("tr:first td").length}if(parseInt(k.position().top,10)!==f||l&&g===m){g=0;e++}if("undefined"==typeof h[e]){h[e]=[]}var n=[];n.id=k.attr("id");n.value=k.text();h[e][g]=n;f=parseInt(k.position().top,10);g++}b.tableMatrix=h;a(b.CSS.SELECTABLE_WORD).on("keydown",function(c){if(37===c.keyCode||38===c.keyCode||39===c.keyCode||40===c.keyCode){c.preventDefault();var d=b.getWordPosition(a(this).attr("id"));b.navigateToWord(d.row,d.col,c.keyCode)}});a(b.CSS.SELECTABLE_WORD).on("keyup",function(b){if(a(this).hasClass("selected")&&(9===b.keyCode||b.shiftKey&&9===b.which||37===b.keyCode||38===b.keyCode||39===b.keyCode||40===b.keyCode)){b.preventDefault();a(this).addClass("keyboard_focus")}});a(b.CSS.SELECTABLE_WORD).focusout(function(){if(a(this).hasClass("selected")&&a(this).hasClass("keyboard_focus")){a(this).removeClass("keyboard_focus")}})},getWordPosition:function getWordPosition(a){for(var c=0,d;c<b.tableMatrix.length;c++){d=b.tableMatrix[c];for(var e=0;e<d.length;e++){if(d[e].id===a){return{row:c,col:e}}}}return!1},navigateToWord:function navigateToWord(c,d,e){if("undefined"!=typeof b.tableMatrix[c]&&"undefined"!=typeof b.tableMatrix[c][d]){var f="";if(37===e){if("undefined"!=typeof b.tableMatrix[c][d-1]){f=b.tableMatrix[c][d-1].id}else if("undefined"!=typeof b.tableMatrix[c-1]&&"undefined"!=typeof b.tableMatrix[c-1][b.tableMatrix[c-1].length-1]){f=b.tableMatrix[c-1][b.tableMatrix[c-1].length-1].id}}else if(38===e){if("undefined"!=typeof b.tableMatrix[c-1]&&"undefined"!=typeof b.tableMatrix[c-1][0]){f=b.tableMatrix[c-1][0].id}}else if(39===e){if("undefined"!=typeof b.tableMatrix[c][d+1]){f=b.tableMatrix[c][d+1].id}else if("undefined"!=typeof b.tableMatrix[c+1]&&"undefined"!=typeof b.tableMatrix[c+1][0]){f=b.tableMatrix[c+1][0].id}}else if(40===e){if("undefined"!=typeof b.tableMatrix[c+1]&&"undefined"!=typeof b.tableMatrix[c+1][0]){f=b.tableMatrix[c+1][0].id}}a("span[name='"+f+"']").focus()}}};return b});
//# sourceMappingURL=navigation.min.js.map
