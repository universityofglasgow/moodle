function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}define("local_gustaffview/dashboard",["exports","core/log"],(function(_exports,Log){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,Log=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Log);var Selectors_DASHBOARD_BLOCK="#tmpContainer",UpdateDashboard=function UpdateDashboard(event){var studentid,params;studentid=void 0!==event.target.selectedOptions?event.target.selectedOptions[0].value:document.querySelector("#selectstudent").selectedOptions[0].value;var courseid=new URLSearchParams(window.location.search).get("courseid"),tempPanel=document.querySelector(Selectors_DASHBOARD_BLOCK);tempPanel.innerHTML="",courseid>0&&studentid>0&&(tempPanel.insertAdjacentHTML("afterbegin","<div class='loader d-flex justify-content-center'>\n<div class='spinner-border text-primary' role='status'><span class='hidden'>Loading...</span></div></div>"),params="?courseid="+courseid+"&studentid="+studentid,event.target.dataset.ts&&(params+="&ts="+event.target.dataset.ts),event.target.dataset.tdr&&(params+="&tdr="+event.target.dataset.tdr),event.target.dataset.page&&(params+="&page="+event.target.dataset.page),fetch("dashboard_panel.php"+params,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"text/plain"},redirect:"follow",referrerPolicy:"no-referrer"}).then((function(response){if(!response.ok)throw new Error("HTTP error, status = ".concat(response.status));return response.text()})).then((function(html){document.querySelector(".loader").remove(),document.querySelector(Selectors_DASHBOARD_BLOCK).innerHTML=html;var sort_direction,sort_item="";document.querySelectorAll(".header>a").forEach((function(header){header.addEventListener("click",UpdateDashboard),header.children.length>0&&(sort_item=header.children[0].dataset.ts,sort_direction=header.children[0].dataset.tdr)})),document.querySelectorAll(".pagination>li>a:not([aria-current='page'])").forEach((function(pageLink){pageLink.href="#";var pageNumber=pageLink.parentElement.dataset.pageNumber>0?pageLink.parentElement.dataset.pageNumber-1:0;pageLink.setAttribute("data-page",pageNumber),pageLink.addEventListener("click",(function(event){event.target.dataset.page=pageNumber,""!==sort_item&&(event.target.dataset.ts=sort_item,event.target.dataset.tdr="3"===sort_direction?"4":"3"),UpdateDashboard(event)}))}))})).catch((function(error){document.querySelector(Selectors_DASHBOARD_BLOCK).innerHTML='<div class="alert alert-danger" role="alert">Something went wrong.</div>',Log.debug("Error: ".concat(error.message))})))};_exports.init=function(){document.querySelector("#selectstudent").addEventListener("change",UpdateDashboard),document.querySelector("#selectstudent").selectedOptions[0].value>0&&document.querySelector("#selectstudent").dispatchEvent(new Event("change"))}}));

//# sourceMappingURL=dashboard.min.js.map