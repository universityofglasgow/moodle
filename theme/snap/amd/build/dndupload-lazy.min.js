define(["jquery","core/yui","theme_snap/util"],function(a,b,c){var d=this;return d.dndupload=null,d.init=function(a){c.whenTrue(function(){return"undefined"!=typeof M.course_dndupload},function(){d.dndupload=M.course_dndupload,b.use("node","event","json","anim",function(b){d.decorateCourseDNDUpload(b,a)})},!0)},d.decorateCourseDNDUpload=function(b,c){theme_snap_course_file_handlers?c.handlers=theme_snap_course_file_handlers:c.handlers={};var e=["gif","jpe","jpg","jpeg","png","svg","svgz","webp","mp3"],f=[];for(var g in c.handlers.filehandlers){var h=c.handlers.filehandlers[g];h&&h.module&&("label"===h.module&&e.indexOf(h.extension.toLowerCase())!==-1||f.push(h))}c.handlers.filehandlers=f,d.dndupload.init(b,c),a(".js-snap-drop-file").change(function(){for(var c,e=a(this).attr("id").replace("snap-drop-file-",""),f=b.one("#section-"+e),g=0;g<this.files.length;g++)c=this.files.item(g),d.dndupload.handle_file(c,f,e)})},{init:d.init}});