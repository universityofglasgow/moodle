define(["jquery","core/templates","core/modal_factory","core/modal_events","plagiarism_turnitin/modal_rubric_manager_launch","plagiarism_turnitin/modal_rubric_view_launch"],function(a,b,c,d,e,f){return{rubric:function(){var b=this;a(".rubric_manager_launch").on("click",function(){b.rubricCreateModal(e.TYPE)}),a(document).on("click",".rubric_view",function(){b.rubricCreateModal(f.TYPE)}),a("#id_plagiarism_rubric").mousedown(function(){""!=a('input[name="instance"]').val()&&"Y"!=a('input[name="rubric_warning_seen"]').val()&&confirm(M.str.plagiarism_turnitin.changerubricwarning)&&a('input[name="rubric_warning_seen"]').val("Y")})},rubricCreateModal:function(b){if(a('input[name="coursemodule"]').val())var d=a('input[name="coursemodule"]').val();else var e=new URLSearchParams(window.location.search),d=e.get("id");c.create({type:b,templateContext:{cmid:d,wwwroot:M.cfg.wwwroot},large:!0}).then(function(a){a.show(),a.getRoot().find(".modal").addClass("tii_pp_modal_rubric"),a.getRoot().find(".modal-content").addClass("tii_pp_modal_rubric_content")})}}});