{"version":3,"sources":["../src/peermark.js"],"names":["define","$","Templates","ModalFactory","ModalEvents","ModalPeermarkManagerLaunch","ModalPeermarkReviewsLaunch","peermarkLaunch","that","on","event","preventDefault","peermarkCreateModal","TYPE","document","modalType","val","cmid","urlParams","URLSearchParams","window","location","search","get","create","type","templateContext","wwwroot","M","cfg","large","then","modal","show"],"mappings":"AASAA,OAAM,gCAAC,CAAC,QAAD,CACC,gBADD,CAEC,oBAFD,CAGC,mBAHD,CAIC,mDAJD,CAKC,mDALD,CAAD,CAOF,SAASC,CAAT,CAAYC,CAAZ,CAAuBC,CAAvB,CAAqCC,CAArC,CAAkDC,CAAlD,CAA8EC,CAA9E,CAA0G,CACtG,MAAO,CACHC,cAAc,CAAE,yBAAW,CACvB,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACAP,CAAC,CAAC,0BAAD,CAAD,CAA8BQ,EAA9B,CAAiC,OAAjC,CAA0C,SAASC,CAAT,CAAgB,CACtDA,CAAK,CAACC,cAAN,GACAH,CAAI,CAACI,mBAAL,CAAyBP,CAA0B,CAACQ,IAApD,CACH,CAHD,EAKAZ,CAAC,CAACa,QAAD,CAAD,CAAYL,EAAZ,CAAe,OAAf,CAAwB,6BAAxB,CAAuD,UAAW,CAC9DD,CAAI,CAACI,mBAAL,CAAyBN,CAA0B,CAACO,IAApD,CACH,CAFD,CAGH,CAXE,CAYHD,mBAAmB,CAAE,6BAASG,CAAT,CAAoB,CAErC,GAAId,CAAC,CAAC,8BAAD,CAAD,CAAgCe,GAAhC,EAAJ,CAA2C,CACvC,GAAIC,CAAAA,CAAI,CAAGhB,CAAC,CAAC,8BAAD,CAAD,CAAgCe,GAAhC,EACd,CAFD,IAEO,IACCE,CAAAA,CAAS,CAAG,GAAIC,CAAAA,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CADb,CAECL,CAAI,CAAGC,CAAS,CAACK,GAAV,CAAc,IAAd,CACd,CACDpB,CAAY,CAACqB,MAAb,CAAoB,CAChBC,IAAI,CAAEV,CADU,CAEhBW,eAAe,CAAE,CACbT,IAAI,CAAEA,CADO,CAEbU,OAAO,CAAEC,CAAC,CAACC,GAAF,CAAMF,OAFF,CAFD,CAMhBG,KAAK,GANW,CAApB,EAQKC,IARL,CAQU,SAAUC,CAAV,CAAiB,CACnBA,CAAK,CAACC,IAAN,EACH,CAVL,CAWH,CA/BE,CAiCV,CAzCC,CAAN","sourcesContent":["/**\n * Javascript controller for launching a Peermark modal.\n *\n * @package   turnitin\n * @copyright Turnitin\n * @author 2019 David Winn <dwinn@turnitin.com>\n * @module plagiarism_turnitin/peermarkLaunch\n */\n\ndefine(['jquery',\n        'core/templates',\n        'core/modal_factory',\n        'core/modal_events',\n        'plagiarism_turnitin/modal_peermark_manager_launch',\n        'plagiarism_turnitin/modal_peermark_reviews_launch'\n    ],\n    function($, Templates, ModalFactory, ModalEvents, ModalPeermarkManagerLaunch, ModalPeermarkReviewsLaunch) {\n        return {\n            peermarkLaunch: function() {\n                var that = this;\n                $('.peermark_manager_launch').on('click', function(event) {\n                    event.preventDefault();\n                    that.peermarkCreateModal(ModalPeermarkManagerLaunch.TYPE);\n                });\n\n                $(document).on('click', '.peermark_reviews_pp_launch', function() {\n                    that.peermarkCreateModal(ModalPeermarkReviewsLaunch.TYPE);\n                });\n            },\n            peermarkCreateModal: function(modalType) {\n\n                if ($('input[name=\"coursemodule\"]').val()) {\n                    var cmid = $('input[name=\"coursemodule\"]').val();\n                } else {\n                    var urlParams = new URLSearchParams(window.location.search);\n                    var cmid = urlParams.get('id');\n                }\n                ModalFactory.create({\n                    type: modalType,\n                    templateContext: {\n                        cmid: cmid,\n                        wwwroot: M.cfg.wwwroot\n                    },\n                    large: true\n                })\n                    .then(function (modal) {\n                        modal.show();\n                    });\n            }\n        };\n    });"],"file":"peermark.min.js"}