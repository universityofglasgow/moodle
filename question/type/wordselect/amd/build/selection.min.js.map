{"version":3,"sources":["../src/selection.js"],"names":["define","WordSelectQuestion","questionId","$","on","e","keyCode","toggleSelection","selection","iselected","hasClass","wordname","attr","hidden","document","getElementById","disabled","removeClass","removeAttr","type","style","visibility","display","value","addClass","prop","checked","init"],"mappings":"AAwBAA,OAAM,8BAAC,UAAW,CAOhB,QAASC,CAAAA,CAAT,CAA4BC,CAA5B,CAAwC,CACtCC,CAAC,CAAC,IAAMD,CAAN,CAAmB,cAApB,CAAD,CAAqCE,EAArC,CAAwC,SAAxC,CAAmD,SAASC,CAAT,CAAY,CAE7D,GAAkB,EAAd,GAAAA,CAAC,CAACC,OAAN,CAAsB,CACpBC,CAAe,CAACJ,CAAC,CAAC,IAAD,CAAF,CAAf,CACA,QACD,CAED,GAAkB,EAAd,GAAAE,CAAC,CAACC,OAAN,CAAsB,CACpB,QACD,CACD,QACD,CAXD,EAYAH,CAAC,CAAC,IAAMD,CAAN,CAAmB,cAApB,CAAD,CAAqCE,EAArC,CAAwC,OAAxC,CAAiD,UAAW,CAC1DG,CAAe,CAACJ,CAAC,CAAC,IAAD,CAAF,CAChB,CAFD,CAGD,CAOD,QAASI,CAAAA,CAAT,CAAyBC,CAAzB,CAAoC,IAC9BC,CAAAA,CAAS,CAAGN,CAAC,CAACK,CAAD,CAAD,CAAaE,QAAb,CAAsB,UAAtB,CADkB,CAE9BC,CAAQ,CAAGH,CAAS,CAACI,IAAV,CAAe,MAAf,CAFmB,CAG9BC,CAAM,CAAGC,QAAQ,CAACC,cAAT,CAAwBJ,CAAxB,CAHqB,CAIlC,GAAe,IAAX,GAAAE,CAAM,EAAa,KAAAA,CAAM,CAACG,QAA9B,CAAiD,CAC/C,MACD,CACD,GAAI,KAAAP,CAAJ,CAAwB,CACtBD,CAAS,CAACS,WAAV,CAAsB,UAAtB,EACAT,CAAS,CAACU,UAAV,CAAqB,OAArB,EACAV,CAAS,CAACI,IAAV,CAAe,cAAf,CAA+B,OAA/B,EAKAC,CAAM,CAACM,IAAP,CAAc,MAAd,CACAN,CAAM,CAACO,KAAP,CAAaC,UAAb,CAA0B,QAA1B,CACAR,CAAM,CAACO,KAAP,CAAaE,OAAb,CAAuB,MAAvB,CACAT,CAAM,CAACU,KAAP,CAAe,EAChB,CAZD,IAYO,CACLf,CAAS,CAACgB,QAAV,CAAmB,UAAnB,EACAhB,CAAS,CAACiB,IAAV,CAAe,OAAf,CAAwB,UAAxB,EACAjB,CAAS,CAACI,IAAV,CAAe,cAAf,CAA+B,MAA/B,EACAC,CAAM,CAACM,IAAP,CAAc,UAAd,CACAN,CAAM,CAACU,KAAP,CAAe,IAAf,CACAV,CAAM,CAACa,OAAP,CAAiB,MAClB,CACF,CAED,MAAO,CACLC,IAAI,CAAE,cAASzB,CAAT,CAAqB,CACzB,GAAID,CAAAA,CAAJ,CAAuBC,CAAvB,CACD,CAHI,CAKR,CAhEK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript code for the wordselect question type.\n *\n * @package    qtype_wordselect\n * @copyright  2016 Marcus Green\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* global $ */\ndefine(function() {\n  /**\n   * Initialise the quesiton instance with a unique id\n   * Necessary where there is more than one of this\n   * type of question per page.\n   * @param {int} questionId\n   */\n  function WordSelectQuestion(questionId) {\n    $('#' + questionId + ' .selectable').on('keydown', function(e) {\n      /* Space bar */\n      if (e.keyCode === 32) {\n        toggleSelection($(this));\n        return false;\n      }\n      /* Eat the keycode so it doesnt scroll the screen down */\n      if (e.keyCode === 32) {\n        return false;\n      }\n      return true;\n    });\n    $('#' + questionId + ' .selectable').on('click', function() {\n      toggleSelection($(this));\n    });\n  }\n\n  /**\n   * Toggle a word (or collection of word)\n   * As selected/unselected.\n   * @param {string} selection\n   */\n  function toggleSelection(selection) {\n    var iselected = $(selection).hasClass('selected');\n    var wordname = selection.attr('name');\n    var hidden = document.getElementById(wordname);\n    if (hidden === null || hidden.disabled === true) {\n      return;\n    }\n    if (iselected === true) {\n      selection.removeClass('selected');\n      selection.removeAttr('title');\n      selection.attr('aria-checked', 'false');\n      /* Convert type to text, because\n      * unchecked textboxes would not\n      * be included in the response\n      */\n      hidden.type = 'text';\n      hidden.style.visibility = 'hidden';\n      hidden.style.display = 'none';\n      hidden.value = '';\n    } else {\n      selection.addClass('selected');\n      selection.prop('title', 'selected');\n      selection.attr('aria-checked', 'true');\n      hidden.type = 'checkbox';\n      hidden.value = 'on';\n      hidden.checked = 'true';\n    }\n  }\n\n  return {\n    init: function(questionId) {\n      new WordSelectQuestion(questionId);\n    },\n  };\n});\n"],"file":"selection.min.js"}