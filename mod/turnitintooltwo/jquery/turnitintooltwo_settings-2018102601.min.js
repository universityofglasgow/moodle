jQuery(document).ready(function($){if($(".settingsform fieldset div.formsettingheading").length>0){var tabmenu=$(".settingsform fieldset div.formsettingheading:first").html();tabmenu.indexOf("tabtree")>=0&&($(".settingsform fieldset div.formsettingheading:first").remove(),$(".settingsform h2:first").after(tabmenu))}$('input[name="selectallcb"]').click(function(){$(this).prop("checked")?($(".browser_checkbox").prop("checked",!0),$(".browser_checkbox:checked").length>0?$(".create_checkboxes").slideDown():$(".create_checkboxes").slideUp()):($(".browser_checkbox").prop("checked",!1),$(".create_checkboxes").slideUp())}),$(".test_connection").length>0&&(""==$("#id_s_turnitintooltwo_accountid").val()&&""==$("#id_s_turnitintooltwo_secretkey").val()||($(".test_connection").show(),$("#test_link").show()),$("#id_s_turnitintooltwo_accountid, #id_s_turnitintooltwo_secretkey, #id_s_turnitintooltwo_apiurl").keyup(function(){$("#testing_container").hide();var t=$("#id_s_turnitintooltwo_accountid").val(),e=$("#id_s_turnitintooltwo_secretkey").val();t=t.trim(),e=e.trim(),0==t.length||0==e.length?($("#test_result").hide(),$(".test_connection").hide()):($(".test_connection").show(),$("#test_link").show())}),$("#test_link").click(function(){$("#test_result").hide(),$("input, #id_s_turnitintooltwo_apiurl").prop("disabled",!0),$("#test_link").hide(),$("#test_result").css("opacity",""),$("#test_result").removeClass("test_link_success test_link_fail"),$("#testing_container").show();var url="ajax.php";$(".settingsform fieldset div.formsettingheading").length>0&&(url="../mod/turnitintooltwo/ajax.php");var accountid=$("#id_s_turnitintooltwo_accountid").val(),accountshared=$("#id_s_turnitintooltwo_secretkey").val(),accounturl=$("#id_s_turnitintooltwo_apiurl").val();$.ajax({type:"POST",url:url,dataType:"json",data:{action:"test_connection",sesskey:M.cfg.sesskey,accountid:accountid,accountshared:accountshared,url:accounturl},success:function(data){eval(data),$("#testing_container").hide(),"success"==data.connection_status?$("#test_result").addClass("test_link_success"):$("#test_result").addClass("test_link_fail"),$("#test_result").html(data.msg),$("#test_result").show(),$("#test_link").show(),$("input, #id_s_turnitintooltwo_apiurl").prop("disabled",!1)}})}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR1cm5pdGludG9vbHR3b19zZXR0aW5ncy0yMDE4MTAyNjAxLmpzIl0sIm5hbWVzIjpbImpRdWVyeSIsImRvY3VtZW50IiwicmVhZHkiLCIkIiwibGVuZ3RoIiwidGFibWVudSIsImh0bWwiLCJpbmRleE9mIiwicmVtb3ZlIiwiYWZ0ZXIiLCJjbGljayIsInRoaXMiLCJwcm9wIiwic2xpZGVEb3duIiwic2xpZGVVcCIsInZhbCIsInNob3ciLCJrZXl1cCIsImhpZGUiLCJhY2NvdW50aWQiLCJhY2NvdW50c2hhcmVkIiwidHJpbSIsImNzcyIsInJlbW92ZUNsYXNzIiwidXJsIiwiYWNjb3VudHVybCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJkYXRhIiwiYWN0aW9uIiwic2Vzc2tleSIsIk0iLCJjZmciLCJzdWNjZXNzIiwiZXZhbCIsImNvbm5lY3Rpb25fc3RhdHVzIiwiYWRkQ2xhc3MiLCJtc2ciXSwibWFwcGluZ3MiOiJBQUtBQSxPQUFPQyxVQUFVQyxNQUFNLFNBQVNDLEdBQzVCLEdBQUlBLEVBQUUsaURBQWlEQyxPQUFTLEVBQUcsQ0FDL0QsR0FBSUMsU0FBVUYsRUFBRSx1REFBdURHLE1BQ25FRCxTQUFRRSxRQUFRLFlBQWMsSUFDOUJKLEVBQUUsdURBQXVESyxTQUN6REwsRUFBRSwwQkFBMEJNLE1BQU1KLFVBSTFDRixFQUFFLDZCQUE2Qk8sTUFBTSxXQUM3QlAsRUFBRVEsTUFBTUMsS0FBSyxZQUNiVCxFQUFFLHFCQUFxQlMsS0FBSyxXQUFXLEdBQ25DVCxFQUFFLDZCQUE2QkMsT0FBUyxFQUN4Q0QsRUFBRSxzQkFBc0JVLFlBRXhCVixFQUFFLHNCQUFzQlcsWUFHNUJYLEVBQUUscUJBQXFCUyxLQUFLLFdBQVcsR0FDdkNULEVBQUUsc0JBQXNCVyxhQUk1QlgsRUFBRSxvQkFBb0JDLE9BQVMsSUFDbUIsSUFBOUNELEVBQUUsbUNBQW1DWSxPQUE2RCxJQUE5Q1osRUFBRSxtQ0FBbUNZLFFBQ3pGWixFQUFFLG9CQUFvQmEsT0FDdEJiLEVBQUUsY0FBY2EsUUFHcEJiLEVBQUUsa0dBQWtHYyxNQUFNLFdBQ3RHZCxFQUFFLHNCQUFzQmUsTUFFeEIsSUFBSUMsR0FBWWhCLEVBQUUsbUNBQW1DWSxNQUNqREssRUFBZ0JqQixFQUFFLG1DQUFtQ1ksS0FHekRJLEdBQVlBLEVBQVVFLE9BQ3RCRCxFQUFnQkEsRUFBY0MsT0FDTixHQUFwQkYsRUFBVWYsUUFBdUMsR0FBeEJnQixFQUFjaEIsUUFDdkNELEVBQUUsZ0JBQWdCZSxPQUNsQmYsRUFBRSxvQkFBb0JlLFNBRXRCZixFQUFFLG9CQUFvQmEsT0FDdEJiLEVBQUUsY0FBY2EsVUFJeEJiLEVBQUUsY0FBY08sTUFBTSxXQUNsQlAsRUFBRSxnQkFBZ0JlLE9BQ2xCZixFQUFFLHVDQUF1Q1MsS0FBSyxZQUFZLEdBQzFEVCxFQUFFLGNBQWNlLE9BQ2hCZixFQUFFLGdCQUFnQm1CLElBQUksVUFBVyxJQUNqQ25CLEVBQUUsZ0JBQWdCb0IsWUFBWSxvQ0FDOUJwQixFQUFFLHNCQUFzQmEsTUFHeEIsSUFBSVEsS0FBTSxVQUNOckIsR0FBRSxpREFBaURDLE9BQVMsSUFDNURvQixJQUFNLGtDQUdWLElBQUlMLFdBQVloQixFQUFFLG1DQUFtQ1ksTUFDakRLLGNBQWdCakIsRUFBRSxtQ0FBbUNZLE1BQ3JEVSxXQUFhdEIsRUFBRSxnQ0FBZ0NZLEtBRW5EWixHQUFFdUIsTUFDRUMsS0FBTSxPQUNOSCxJQUFLQSxJQUNMSSxTQUFVLE9BQ1ZDLE1BQU9DLE9BQVEsa0JBQW1CQyxRQUFTQyxFQUFFQyxJQUFJRixRQUFTWixVQUFXQSxVQUFXQyxjQUFlQSxjQUFlSSxJQUFLQyxZQUNuSFMsUUFBUyxTQUFTTCxNQUNkTSxLQUFLTixNQUVMMUIsRUFBRSxzQkFBc0JlLE9BRU0sV0FBMUJXLEtBQUtPLGtCQUNMakMsRUFBRSxnQkFBZ0JrQyxTQUFTLHFCQUUzQmxDLEVBQUUsZ0JBQWdCa0MsU0FBUyxrQkFHL0JsQyxFQUFFLGdCQUFnQkcsS0FBS3VCLEtBQUtTLEtBQzVCbkMsRUFBRSxnQkFBZ0JhLE9BQ2xCYixFQUFFLGNBQWNhLE9BQ2hCYixFQUFFLHVDQUF1Q1MsS0FBSyxZQUFZIiwiZmlsZSI6InR1cm5pdGludG9vbHR3b19zZXR0aW5ncy0yMDE4MTAyNjAxLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBUaGlzIHNtYWxsIHBpZWNlIG9mIHNjcmlwdCBpcyBhIHdvcmthcm91bmQgdGhhdCdzIG5lZWRlZCB0byBhZGQgdGFicyBpbiB0b1xuICogdGhlIHNldHRpbmdzIHBhZ2UuIFRoZXkgbmVlZCB0byBiZSByZW1vdmVkIGZyb20gdGhlIHNldHRpbmdzIGZvcm0gYW5kIHBsYWNlZFxuICogb3V0c2lkZSB0aGF0IGNvbnRhaW5pbmcgZmllbGRzZXQuXG4gKi9cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuICAgIGlmICgkKCcuc2V0dGluZ3Nmb3JtIGZpZWxkc2V0IGRpdi5mb3Jtc2V0dGluZ2hlYWRpbmcnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB0YWJtZW51ID0gJCgnLnNldHRpbmdzZm9ybSBmaWVsZHNldCBkaXYuZm9ybXNldHRpbmdoZWFkaW5nOmZpcnN0JykuaHRtbCgpO1xuICAgICAgICBpZiAodGFibWVudS5pbmRleE9mKFwidGFidHJlZVwiKSA+PSAwKSB7XG4gICAgICAgICAgICAkKCcuc2V0dGluZ3Nmb3JtIGZpZWxkc2V0IGRpdi5mb3Jtc2V0dGluZ2hlYWRpbmc6Zmlyc3QnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJy5zZXR0aW5nc2Zvcm0gaDI6Zmlyc3QnKS5hZnRlcih0YWJtZW51KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQoJ2lucHV0W25hbWU9XCJzZWxlY3RhbGxjYlwiXScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgICAgICAgICQoJy5icm93c2VyX2NoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAgICAgaWYgKCQoJy5icm93c2VyX2NoZWNrYm94OmNoZWNrZWQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCgnLmNyZWF0ZV9jaGVja2JveGVzJykuc2xpZGVEb3duKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5jcmVhdGVfY2hlY2tib3hlcycpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5icm93c2VyX2NoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICQoJy5jcmVhdGVfY2hlY2tib3hlcycpLnNsaWRlVXAoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCQoJy50ZXN0X2Nvbm5lY3Rpb24nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmICgkKCcjaWRfc190dXJuaXRpbnRvb2x0d29fYWNjb3VudGlkJykudmFsKCkgIT0gJycgfHwgJCgnI2lkX3NfdHVybml0aW50b29sdHdvX3NlY3JldGtleScpLnZhbCgpICE9ICcnKSB7XG4gICAgICAgICAgICAkKCcudGVzdF9jb25uZWN0aW9uJykuc2hvdygpO1xuICAgICAgICAgICAgJCgnI3Rlc3RfbGluaycpLnNob3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJyNpZF9zX3R1cm5pdGludG9vbHR3b19hY2NvdW50aWQsICNpZF9zX3R1cm5pdGludG9vbHR3b19zZWNyZXRrZXksICNpZF9zX3R1cm5pdGludG9vbHR3b19hcGl1cmwnKS5rZXl1cChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJyN0ZXN0aW5nX2NvbnRhaW5lcicpLmhpZGUoKTtcblxuICAgICAgICAgICAgdmFyIGFjY291bnRpZCA9ICQoJyNpZF9zX3R1cm5pdGludG9vbHR3b19hY2NvdW50aWQnKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBhY2NvdW50c2hhcmVkID0gJCgnI2lkX3NfdHVybml0aW50b29sdHdvX3NlY3JldGtleScpLnZhbCgpO1xuXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhleSBhcmVuJ3QgZW1wdHkgc3RyaW5ncy5cbiAgICAgICAgICAgIGFjY291bnRpZCA9IGFjY291bnRpZC50cmltKCk7XG4gICAgICAgICAgICBhY2NvdW50c2hhcmVkID0gYWNjb3VudHNoYXJlZC50cmltKCk7XG4gICAgICAgICAgICBpZiAoYWNjb3VudGlkLmxlbmd0aCA9PSAwIHx8IGFjY291bnRzaGFyZWQubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAkKCcjdGVzdF9yZXN1bHQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLnRlc3RfY29ubmVjdGlvbicpLmhpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLnRlc3RfY29ubmVjdGlvbicpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcjdGVzdF9saW5rJykuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcjdGVzdF9saW5rJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcjdGVzdF9yZXN1bHQnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCdpbnB1dCwgI2lkX3NfdHVybml0aW50b29sdHdvX2FwaXVybCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAkKCcjdGVzdF9saW5rJykuaGlkZSgpO1xuICAgICAgICAgICAgJChcIiN0ZXN0X3Jlc3VsdFwiKS5jc3MoJ29wYWNpdHknLCAnJyk7XG4gICAgICAgICAgICAkKCcjdGVzdF9yZXN1bHQnKS5yZW1vdmVDbGFzcygndGVzdF9saW5rX3N1Y2Nlc3MgdGVzdF9saW5rX2ZhaWwnKTtcbiAgICAgICAgICAgICQoJyN0ZXN0aW5nX2NvbnRhaW5lcicpLnNob3coKTtcblxuICAgICAgICAgICAgLy8gQ2hhbmdlIFVybCBkZXBlbmRpbmcgb24gU2V0dGluZ3MgcGFnZS5cbiAgICAgICAgICAgIHZhciB1cmwgPSBcImFqYXgucGhwXCI7XG4gICAgICAgICAgICBpZiAoJCgnLnNldHRpbmdzZm9ybSBmaWVsZHNldCBkaXYuZm9ybXNldHRpbmdoZWFkaW5nJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHVybCA9IFwiLi4vbW9kL3R1cm5pdGludG9vbHR3by9hamF4LnBocFwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYWNjb3VudGlkID0gJCgnI2lkX3NfdHVybml0aW50b29sdHdvX2FjY291bnRpZCcpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGFjY291bnRzaGFyZWQgPSAkKCcjaWRfc190dXJuaXRpbnRvb2x0d29fc2VjcmV0a2V5JykudmFsKCk7XG4gICAgICAgICAgICB2YXIgYWNjb3VudHVybCA9ICQoJyNpZF9zX3R1cm5pdGludG9vbHR3b19hcGl1cmwnKS52YWwoKTtcblxuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICAgICAgZGF0YToge2FjdGlvbjogXCJ0ZXN0X2Nvbm5lY3Rpb25cIiwgc2Vzc2tleTogTS5jZmcuc2Vzc2tleSwgYWNjb3VudGlkOiBhY2NvdW50aWQsIGFjY291bnRzaGFyZWQ6IGFjY291bnRzaGFyZWQsIHVybDogYWNjb3VudHVybH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBldmFsKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyN0ZXN0aW5nX2NvbnRhaW5lcicpLmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb25uZWN0aW9uX3N0YXR1cyA9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Rlc3RfcmVzdWx0JykuYWRkQ2xhc3MoJ3Rlc3RfbGlua19zdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjdGVzdF9yZXN1bHQnKS5hZGRDbGFzcygndGVzdF9saW5rX2ZhaWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQoJyN0ZXN0X3Jlc3VsdCcpLmh0bWwoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGVzdF9yZXN1bHQnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0ZXN0X2xpbmsnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0LCAjaWRfc190dXJuaXRpbnRvb2x0d29fYXBpdXJsJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pOyJdfQ==
