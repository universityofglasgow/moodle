{"version":3,"file":"rubric.min.js","sources":["../src/rubric.js"],"sourcesContent":["/**\n * Javascript controller for handling rubrics.\n *\n * @copyright Turnitin\n * @author 2019 David Winn <dwinn@turnitin.com>\n * @module plagiarism_turnitin/rubric\n */\n\ndefine(['jquery',\n        'core/templates',\n        'core/modal_factory',\n        'core/modal_events',\n        'plagiarism_turnitin/modal_rubric_manager_launch',\n        'plagiarism_turnitin/modal_rubric_view_launch'\n    ],\n    function($, Templates, ModalFactory, ModalEvents, ModalRubricManagerLaunch, ModalRubricViewLaunch) {\n        return {\n            rubric: function() {\n                var that = this;\n                $('.rubric_manager_launch').on('click', function() {\n                    var courseid = $(this).data('courseid');\n                    var cmid = $(this).data('cmid');\n                    that.rubricCreateModal(ModalRubricManagerLaunch.TYPE, courseid, cmid);\n                });\n\n                $(document).on('click', '.rubric_view', function() {\n                    var courseid = $(this).data('courseid');\n                    var cmid = $(this).data('cmid');\n                    that.rubricCreateModal(ModalRubricViewLaunch.TYPE, courseid, cmid);\n                });\n\n                // Show warning when changing the rubric linked to an assignment.\n                $('#id_plagiarism_rubric').mousedown(function () {\n                    if ($('input[name=\"instance\"]').val() != '' && $('input[name=\"rubric_warning_seen\"]').val() != 'Y') {\n                        if (confirm(M.str.plagiarism_turnitin.changerubricwarning)) {\n                            $('input[name=\"rubric_warning_seen\"]').val('Y');\n                        }\n                    }\n                });\n            },\n            rubricCreateModal: function(modalType, courseid, cmid) {\n                ModalFactory.create({\n                    type: modalType,\n                    templateContext: {\n                        courseid: courseid,\n                        cmid: cmid,\n                        wwwroot: M.cfg.wwwroot\n                    },\n                    large: true\n                })\n                    .then(function (modal) {\n                        modal.show();\n                        modal.getRoot().find('.modal').addClass('tii_pp_modal_rubric');\n                        modal.getRoot().find('.modal-dialog').addClass('tii_pp_modal_rubric_content');\n                    });\n            }\n        };\n    });\n"],"names":["define","$","Templates","ModalFactory","ModalEvents","ModalRubricManagerLaunch","ModalRubricViewLaunch","rubric","that","this","on","courseid","data","cmid","rubricCreateModal","TYPE","document","mousedown","val","confirm","M","str","plagiarism_turnitin","changerubricwarning","modalType","create","type","templateContext","wwwroot","cfg","large","then","modal","show","getRoot","find","addClass"],"mappings":"AAQAA,oCAAO,CAAC,SACA,iBACA,qBACA,oBACA,kDACA,iDAEJ,SAASC,EAAGC,UAAWC,aAAcC,YAAaC,yBAA0BC,6BACjE,CACHC,OAAQ,eACAC,KAAOC,KACXR,EAAE,0BAA0BS,GAAG,SAAS,eAChCC,SAAWV,EAAEQ,MAAMG,KAAK,YACxBC,KAAOZ,EAAEQ,MAAMG,KAAK,QACxBJ,KAAKM,kBAAkBT,yBAAyBU,KAAMJ,SAAUE,SAGpEZ,EAAEe,UAAUN,GAAG,QAAS,gBAAgB,eAChCC,SAAWV,EAAEQ,MAAMG,KAAK,YACxBC,KAAOZ,EAAEQ,MAAMG,KAAK,QACxBJ,KAAKM,kBAAkBR,sBAAsBS,KAAMJ,SAAUE,SAIjEZ,EAAE,yBAAyBgB,WAAU,WACQ,IAArChB,EAAE,0BAA0BiB,OAA+D,KAAhDjB,EAAE,qCAAqCiB,OAC9EC,QAAQC,EAAEC,IAAIC,oBAAoBC,sBAClCtB,EAAE,qCAAqCiB,IAAI,SAK3DJ,kBAAmB,SAASU,UAAWb,SAAUE,MAC7CV,aAAasB,OAAO,CAChBC,KAAMF,UACNG,gBAAiB,CACbhB,SAAUA,SACVE,KAAMA,KACNe,QAASR,EAAES,IAAID,SAEnBE,OAAO,IAENC,MAAK,SAAUC,OACZA,MAAMC,OACND,MAAME,UAAUC,KAAK,UAAUC,SAAS,uBACxCJ,MAAME,UAAUC,KAAK,iBAAiBC,SAAS"}