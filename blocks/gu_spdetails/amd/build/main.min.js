define ("block_gu_spdetails/main",["core/ajax"],function(a){var b=function(a){var b=document.getElementById("current_tab"),c=document.getElementById("past_tab"),e=document.getElementById("sortby_course"),f=document.getElementById("sortby_date"),g=document.getElementById("sortby_startdate"),h=document.getElementById("sortby_enddate");switch(a.target){case b:var i="current",j=0,k="coursetitle",l="asc";b.classList.add("active");c.classList.remove("active");d(i,j,k,l);break;case c:var i="past",j=0,k="coursetitle",l="asc";b.classList.remove("active");c.classList.add("active");d(i,j,k,l);break;case e:if(b.classList.contains("active")){var i="current"}else{var i="past"}var j=0,k="coursetitle";if("asc"==e.getAttribute("data-value")){l="desc";e.setAttribute("data-value","desc");e.classList.add("th-sort-desc");e.classList.remove("th-sort-asc")}else{l="asc";e.setAttribute("data-value","asc");e.classList.add("th-sort-asc");e.classList.remove("th-sort-desc")}d(i,j,k,l);break;case f:var i="current",j=0,k="duedate";if("asc"==f.getAttribute("data-value")){l="desc";f.setAttribute("data-value","desc");f.classList.add("th-sort-desc");f.classList.remove("th-sort-asc")}else{l="asc";f.setAttribute("data-value","asc");f.classList.add("th-sort-asc");f.classList.remove("th-sort-desc")}d(i,j,k,l);break;case g:var i="past",j=0,k="startdate";if("asc"==g.getAttribute("data-value")){l="desc";g.setAttribute("data-value","desc");g.classList.add("th-sort-desc");g.classList.remove("th-sort-asc")}else{l="asc";g.setAttribute("data-value","asc");g.classList.add("th-sort-asc");g.classList.remove("th-sort-desc")}d(i,j,k,l);break;case h:var i="past",j=0,k="enddate";if("asc"==h.getAttribute("data-value")){l="desc";h.setAttribute("data-value","desc");h.classList.add("th-sort-desc");h.classList.remove("th-sort-asc")}else{l="asc";h.setAttribute("data-value","asc");h.classList.add("th-sort-asc");h.classList.remove("th-sort-desc")}d(i,j,k,l);break;default:break;}},c=function(a){var b=document.getElementById("menu_current_assessments_sortby"),c=document.getElementById("menu_past_assessments_sortby"),e=document.getElementById("sortby_course"),f=document.getElementById("sortby_date"),g=document.getElementById("sortby_startdate"),h=document.getElementById("sortby_enddate");switch(a.target){case b:var i="current",j=0,k=b.value,l="asc";if("coursetitle"===b.value){e.classList.add("th-sort-asc");e.classList.remove("th-sort-desc");e.setAttribute("data-value","asc")}else{f.classList.add("th-sort-asc");f.classList.remove("th-sort-desc");f.setAttribute("data-value","asc")}d(i,j,k,l);break;case c:var i="past",j=0,k=c.value,l="asc";if("coursetitle"===c.value){e.classList.add("th-sort-asc");e.classList.remove("th-sort-desc");e.setAttribute("data-value","asc")}else if("startdate"===c.value){g.classList.add("th-sort-asc");g.classList.remove("th-sort-desc");g.setAttribute("data-value","asc")}else{h.classList.add("th-sort-asc");h.classList.remove("th-sort-desc");h.setAttribute("data-value","asc")}d(i,j,k,l);break;default:break;}},d=function(b,c,d,e){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null,j=document.getElementById("assessments-container"),k=document.getElementById("subcategory-container"),l=null===i?j:k,m=null===i?document.getElementById("assessments_details_contents"):document.getElementById("subcategory_details_contents");if(null===i){j.classList.remove("hidden-container");k.classList.add("hidden-container")}else{j.classList.add("hidden-container");k.classList.remove("hidden-container")}var n=a.call([{methodname:"block_gu_spdetails_retrieve_assessments",args:{activetab:b,page:c,sortby:d,sortorder:e,subcategory:i}}]);n[0].done(function(a){m.innerHTML=a.result;var b=document.querySelectorAll(".subcategory-row");h(b);g();f(d,e)}).fail(function(a){if(a){var b=document.createElement("div");b.classList.add("alert","alert-danger");if(a.hasOwnProperty("message")){var c=document.createElement("p");c.innerHTML=a.message;b.appendChild(c);c.classList.add("errormessage")}if(a.hasOwnProperty("moreinfourl")){var d=document.createElement("p"),e=document.createElement("a");e.setAttribute("href",a.moreinfourl);e.setAttribute("target","_blank");e.innerHTML="More information about this error";b.appendChild(d);d.appendChild(e);d.classList.add("errorcode")}l.prepend(b)}})},e=function(a){id=a.getAttribute("data-id");subname=a.getAttribute("data-name");course=a.getAttribute("data-course");grade=a.getAttribute("data-grade");weight=a.getAttribute("data-weight");if(null!==id){d("current",0,"duedate","asc",id);document.getElementById("subcategory-details-course").innerHTML=course;document.getElementById("subcategory-details-weight").innerHTML=weight;document.getElementById("subcategory-details-grade").innerHTML=grade;document.getElementById("subcategory-details-name").innerHTML=subname;document.getElementById("subcategory-return-assessment").addEventListener("click",function(){document.getElementById("assessments-container").classList.remove("hidden-container");document.getElementById("subcategory-container").classList.add("hidden-container");document.getElementById("subcategory_details_contents").innerHTML=""})}},f=function(a,b){var c=document.getElementById("sortby_course"),d=document.getElementById("sortby_date"),e=document.getElementById("sortby_startdate"),f=document.getElementById("sortby_enddate");switch(a){case"coursetitle":if(c){if("asc"===b){c.classList.add("th-sort-asc");c.classList.remove("th-sort-desc");c.setAttribute("data-value","asc")}else{c.classList.add("th-sort-desc");c.classList.remove("th-sort-asc");c.setAttribute("data-value","desc")}}break;case"duedate":if(d){if("asc"===b){d.classList.add("th-sort-asc");d.classList.remove("th-sort-desc");d.setAttribute("data-value","asc")}else{d.classList.add("th-sort-desc");d.classList.remove("th-sort-asc");d.setAttribute("data-value","desc")}}break;case"startdate":if(e){if("asc"===b){e.classList.add("th-sort-asc");e.classList.remove("th-sort-desc");e.setAttribute("data-value","asc")}else{e.classList.add("th-sort-desc");e.classList.remove("th-sort-asc");e.setAttribute("data-value","desc")}}break;case"enddate":if(f){if("asc"===b){f.classList.add("th-sort-asc");f.classList.remove("th-sort-desc");f.setAttribute("data-value","asc")}else{f.classList.add("th-sort-desc");f.classList.remove("th-sort-asc");f.setAttribute("data-value","desc")}}break;default:break;}},g=function(){var a=document.querySelectorAll("#assessments_details_contents .page-item a.page-link");a.forEach(function(a){if("#"!==a.getAttribute("href")){var b=new URL(a.getAttribute("href")),c=new URLSearchParams(b.search),e=c.get("activetab"),f=c.get("page"),g=c.get("sortby"),h=c.get("sortorder");a.addEventListener("click",function(a){a.preventDefault();d(e,f,g,h)})}else{a.removeAttribute("href")}})},h=function(a){if(0<a.length){a.forEach(function(a){a.addEventListener("click",function(){return e(a)})})}};return{init:function init(){var a=document.querySelector(".assessments-details-container");if(a){var e=document.getElementById("current_tab"),f=document.getElementById("past_tab");e.classList.add("active");f.classList.remove("active");d("current",0,"coursetitle","asc");a.addEventListener("change",c);a.addEventListener("click",b)}}}});
//# sourceMappingURL=main.min.js.map
