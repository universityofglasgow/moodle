define(["jquery"],function(s){return{origreport_open:function(){var n=this;s(document).off("click",".pp_origreport_open").on("click",".pp_origreport_open",function(){for(var e,t=s(this).attr("class").replace(/\s+/," ").split(" "),i=0;i<t.length;i++)-1!==t[i].indexOf("origreport_")&&"pp_origreport_open"!=t[i]&&(e=t[i].split("_"),n.openDV("origreport",e[1],e[2]))})},grademark_open:function(){var n=this;s(document).off("click",".pp_grademark_open").on("click",".pp_grademark_open",function(){for(var e,t=s(this).attr("class").replace(/\s+/," ").split(" "),i=0;i<t.length;i++)-1!==t[i].indexOf("grademark_")&&"pp_grademark_open"!=t[i]&&(e=t[i].split("_"),n.openDV("grademark",e[1],e[2]))})},openDV:function(e,t,i){var n=this,r=window.open("","turnitin_viewer"),o='<div class="tii_dv_loading" style="text-align:center;">',o=(o+='<img src="'+M.cfg.wwwroot+'/plagiarism/turnitin/pix/turnitin-icon.png" style="width:100px; height: 100px">')+('<p style="font-family: Arial, Helvetica, sans-serif;">'+M.str.plagiarism_turnitin.loadingdv+"</p>")+"</div>";s(r.document.body).html(o),s.ajax({type:"POST",url:M.cfg.wwwroot+"/plagiarism/turnitin/ajax.php",dataType:"json",data:{action:"get_dv_html",submissionid:t,dvtype:e,cmid:i,sesskey:M.cfg.sesskey},success:function(e){s(r.document.body).html(o+e),r.document.forms[0].submit(),r.document.close(),n.checkDVClosed(t,i,r)}})},checkDVClosed:function(e,t,i){var n=this;i.closed?n.refreshScores(e,t):setTimeout(function(){n.checkDVClosed(e,t,i)},500)},refreshScores:function(e,t){var i=(new Date).getTime();s.ajax({type:"POST",url:M.cfg.wwwroot+"/plagiarism/turnitin/ajax.php",dataType:"json",data:{action:"update_grade",submission:e,cmid:t,sesskey:M.cfg.sesskey},success:function(){(new Date).getTime()-i<3e3||!s(".turnitin_score_refresh_alert").length?window.location=window.location+"":s(".turnitin_score_refresh_alert").show()}})}}});
//# sourceMappingURL=open_viewer.min.js.map