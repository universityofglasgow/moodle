/**
 * Course rule.
 *
 * @author     Frédéric Massart <fred@branchup.tech>
 * @copyright  2018 Frédéric Massart
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery","core/templates","core/str","block_xp/dialogue-base"],(function($,Templates,Str,DialogueBase){function Dialogue(){DialogueBase.prototype.constructor.apply(this,[])}return Dialogue.prototype=Object.create(DialogueBase.prototype),Dialogue.prototype.constructor=Dialogue,Dialogue.prototype._render=function(){return Str.get_string("courseselector","local_xp").then(function(title){return Templates.render("local_xp/course-selector",{}).then(function(html,js){this.setTitle(title),this._setDialogueContent(html),Templates.runTemplateJS(js),this.center(),this.find(".local_xp-course-selector-widget").on("course-selected",function(e,course){this.trigger("course-selected",course),this.close()}.bind(this))}.bind(this))}.bind(this))},{init:function(){$(".block-xp-filters").on("click",".local_xp-course-rule-widget button",(function(e){e.preventDefault();var node=$(e.target).closest(".local_xp-course-rule-widget");if(node){var d=new Dialogue;d.on("course-selected",(function(e,course){node.find(".course-rule-courseid").val(course.id),node.find(".course-selected").text(M.util.get_string("rulecoursedesc","local_xp",course.shortname)),node.addClass("has-course")})),d.show()}}))}}}));

//# sourceMappingURL=course-rule.min.js.map