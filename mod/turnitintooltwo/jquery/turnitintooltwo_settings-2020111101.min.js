jQuery(document).ready(function($){var tabmenu;0<$(".settingsform fieldset div.formsettingheading").length&&(tabmenu=$(".settingsform fieldset div.formsettingheading:first").html(),0<=tabmenu.indexOf("tabtree")&&($(".settingsform fieldset div.formsettingheading:first").remove(),$(".settingsform h2:first").after(tabmenu))),$('input[name="selectallcb"]').click(function(){$(this).prop("checked")?($(".browser_checkbox").prop("checked",!0),0<$(".browser_checkbox:checked").length?$(".create_checkboxes").slideDown():$(".create_checkboxes").slideUp()):($(".browser_checkbox").prop("checked",!1),$(".create_checkboxes").slideUp())}),0<$(".test_connection").length&&(""==$("#id_s_turnitintooltwo_accountid").val()&&""==$("#id_s_turnitintooltwo_secretkey").val()||($(".test_connection").show(),$("#test_link").show()),$("#id_s_turnitintooltwo_accountid, #id_s_turnitintooltwo_secretkey, #id_s_turnitintooltwo_apiurl").keyup(function(){$("#testing_container").hide();var t=$("#id_s_turnitintooltwo_accountid").val(),e=$("#id_s_turnitintooltwo_secretkey").val(),t=t.trim(),e=e.trim();0==t.length||0==e.length?($("#test_result").hide(),$(".test_connection").hide()):($(".test_connection").show(),$("#test_link").show())}),$("#test_link").click(function(){$("#test_result").hide(),$("input, #id_s_turnitintooltwo_apiurl").prop("disabled",!0),$("#test_link").hide(),$("#test_result").css("opacity",""),$("#test_result").removeClass("test_link_success test_link_fail"),$("#testing_container").show();var url="ajax.php";0<$(".settingsform fieldset div.formsettingheading").length&&(url="../mod/turnitintooltwo/ajax.php");var accountid=$("#id_s_turnitintooltwo_accountid").val(),accountshared=$("#id_s_turnitintooltwo_secretkey").val(),accounturl=$("#id_s_turnitintooltwo_apiurl").val();$.ajax({type:"POST",url:url,dataType:"json",data:{action:"test_connection",sesskey:M.cfg.sesskey,accountid:accountid,accountshared:accountshared,url:accounturl},success:function(data){eval(data),$("#testing_container").hide(),"success"==data.connection_status?$("#test_result").addClass("test_link_success"):$("#test_result").addClass("test_link_fail"),$("#test_result").html(data.msg),$("#test_result").show(),$("#test_link").show(),$("input, #id_s_turnitintooltwo_apiurl").prop("disabled",!1)}})}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHVybml0aW50b29sdHdvX3NldHRpbmdzLTIwMjAxMTExMDEubWluLmpzIiwic291cmNlcyI6WyJ0dXJuaXRpbnRvb2x0d29fc2V0dGluZ3MtMjAyMDExMTEwMS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogVGhpcyBzbWFsbCBwaWVjZSBvZiBzY3JpcHQgaXMgYSB3b3JrYXJvdW5kIHRoYXQncyBuZWVkZWQgdG8gYWRkIHRhYnMgaW4gdG9cbiAqIHRoZSBzZXR0aW5ncyBwYWdlLiBUaGV5IG5lZWQgdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSBzZXR0aW5ncyBmb3JtIGFuZCBwbGFjZWRcbiAqIG91dHNpZGUgdGhhdCBjb250YWluaW5nIGZpZWxkc2V0LlxuICovXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpIHtcbiAgICBpZiAoJCgnLnNldHRpbmdzZm9ybSBmaWVsZHNldCBkaXYuZm9ybXNldHRpbmdoZWFkaW5nJykubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgdGFibWVudSA9ICQoJy5zZXR0aW5nc2Zvcm0gZmllbGRzZXQgZGl2LmZvcm1zZXR0aW5naGVhZGluZzpmaXJzdCcpLmh0bWwoKTtcbiAgICAgICAgaWYgKHRhYm1lbnUuaW5kZXhPZihcInRhYnRyZWVcIikgPj0gMCkge1xuICAgICAgICAgICAgJCgnLnNldHRpbmdzZm9ybSBmaWVsZHNldCBkaXYuZm9ybXNldHRpbmdoZWFkaW5nOmZpcnN0JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAkKCcuc2V0dGluZ3Nmb3JtIGgyOmZpcnN0JykuYWZ0ZXIodGFibWVudSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkKCdpbnB1dFtuYW1lPVwic2VsZWN0YWxsY2JcIl0nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQodGhpcykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgICAkKCcuYnJvd3Nlcl9jaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICgkKCcuYnJvd3Nlcl9jaGVja2JveDpjaGVja2VkJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJy5jcmVhdGVfY2hlY2tib3hlcycpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuY3JlYXRlX2NoZWNrYm94ZXMnKS5zbGlkZVVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcuYnJvd3Nlcl9jaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAkKCcuY3JlYXRlX2NoZWNrYm94ZXMnKS5zbGlkZVVwKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICgkKCcudGVzdF9jb25uZWN0aW9uJykubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoJCgnI2lkX3NfdHVybml0aW50b29sdHdvX2FjY291bnRpZCcpLnZhbCgpICE9ICcnIHx8ICQoJyNpZF9zX3R1cm5pdGludG9vbHR3b19zZWNyZXRrZXknKS52YWwoKSAhPSAnJykge1xuICAgICAgICAgICAgJCgnLnRlc3RfY29ubmVjdGlvbicpLnNob3coKTtcbiAgICAgICAgICAgICQoJyN0ZXN0X2xpbmsnKS5zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcjaWRfc190dXJuaXRpbnRvb2x0d29fYWNjb3VudGlkLCAjaWRfc190dXJuaXRpbnRvb2x0d29fc2VjcmV0a2V5LCAjaWRfc190dXJuaXRpbnRvb2x0d29fYXBpdXJsJykua2V5dXAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcjdGVzdGluZ19jb250YWluZXInKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIHZhciBhY2NvdW50aWQgPSAkKCcjaWRfc190dXJuaXRpbnRvb2x0d29fYWNjb3VudGlkJykudmFsKCk7XG4gICAgICAgICAgICB2YXIgYWNjb3VudHNoYXJlZCA9ICQoJyNpZF9zX3R1cm5pdGludG9vbHR3b19zZWNyZXRrZXknKS52YWwoKTtcblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZXkgYXJlbid0IGVtcHR5IHN0cmluZ3MuXG4gICAgICAgICAgICBhY2NvdW50aWQgPSBhY2NvdW50aWQudHJpbSgpO1xuICAgICAgICAgICAgYWNjb3VudHNoYXJlZCA9IGFjY291bnRzaGFyZWQudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGFjY291bnRpZC5sZW5ndGggPT0gMCB8fCBhY2NvdW50c2hhcmVkLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgJCgnI3Rlc3RfcmVzdWx0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy50ZXN0X2Nvbm5lY3Rpb24nKS5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy50ZXN0X2Nvbm5lY3Rpb24nKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCgnI3Rlc3RfbGluaycpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnI3Rlc3RfbGluaycpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI3Rlc3RfcmVzdWx0JykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnaW5wdXQsICNpZF9zX3R1cm5pdGludG9vbHR3b19hcGl1cmwnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgJCgnI3Rlc3RfbGluaycpLmhpZGUoKTtcbiAgICAgICAgICAgICQoXCIjdGVzdF9yZXN1bHRcIikuY3NzKCdvcGFjaXR5JywgJycpO1xuICAgICAgICAgICAgJCgnI3Rlc3RfcmVzdWx0JykucmVtb3ZlQ2xhc3MoJ3Rlc3RfbGlua19zdWNjZXNzIHRlc3RfbGlua19mYWlsJyk7XG4gICAgICAgICAgICAkKCcjdGVzdGluZ19jb250YWluZXInKS5zaG93KCk7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSBVcmwgZGVwZW5kaW5nIG9uIFNldHRpbmdzIHBhZ2UuXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJhamF4LnBocFwiO1xuICAgICAgICAgICAgaWYgKCQoJy5zZXR0aW5nc2Zvcm0gZmllbGRzZXQgZGl2LmZvcm1zZXR0aW5naGVhZGluZycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB1cmwgPSBcIi4uL21vZC90dXJuaXRpbnRvb2x0d28vYWpheC5waHBcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGFjY291bnRpZCA9ICQoJyNpZF9zX3R1cm5pdGludG9vbHR3b19hY2NvdW50aWQnKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBhY2NvdW50c2hhcmVkID0gJCgnI2lkX3NfdHVybml0aW50b29sdHdvX3NlY3JldGtleScpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGFjY291bnR1cmwgPSAkKCcjaWRfc190dXJuaXRpbnRvb2x0d29fYXBpdXJsJykudmFsKCk7XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHthY3Rpb246IFwidGVzdF9jb25uZWN0aW9uXCIsIHNlc3NrZXk6IE0uY2ZnLnNlc3NrZXksIGFjY291bnRpZDogYWNjb3VudGlkLCBhY2NvdW50c2hhcmVkOiBhY2NvdW50c2hhcmVkLCB1cmw6IGFjY291bnR1cmx9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZhbChkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCcjdGVzdGluZ19jb250YWluZXInKS5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29ubmVjdGlvbl9zdGF0dXMgPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyN0ZXN0X3Jlc3VsdCcpLmFkZENsYXNzKCd0ZXN0X2xpbmtfc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Rlc3RfcmVzdWx0JykuYWRkQ2xhc3MoJ3Rlc3RfbGlua19mYWlsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKCcjdGVzdF9yZXN1bHQnKS5odG1sKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3Rlc3RfcmVzdWx0Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGVzdF9saW5rJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dCwgI2lkX3NfdHVybml0aW50b29sdHdvX2FwaXVybCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59KTsiXSwibmFtZXMiOlsialF1ZXJ5IiwiZG9jdW1lbnQiLCJyZWFkeSIsIiQiLCJ0YWJtZW51IiwibGVuZ3RoIiwiaHRtbCIsImluZGV4T2YiLCJyZW1vdmUiLCJhZnRlciIsImNsaWNrIiwidGhpcyIsInByb3AiLCJzbGlkZURvd24iLCJzbGlkZVVwIiwidmFsIiwic2hvdyIsImtleXVwIiwiaGlkZSIsImFjY291bnRpZCIsImFjY291bnRzaGFyZWQiLCJ0cmltIiwiY3NzIiwicmVtb3ZlQ2xhc3MiLCJ1cmwiLCJhY2NvdW50dXJsIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRhdGEiLCJhY3Rpb24iLCJzZXNza2V5IiwiTSIsImNmZyIsInN1Y2Nlc3MiLCJldmFsIiwiY29ubmVjdGlvbl9zdGF0dXMiLCJhZGRDbGFzcyIsIm1zZyJdLCJtYXBwaW5ncyI6IkFBS0FBLE9BQU9DLFVBQVVDLE1BQU0sU0FBU0MsR0FDNUIsSUFDUUMsUUFEd0QsRUFBNURELEVBQUUsaURBQWlERSxTQUMvQ0QsUUFBVUQsRUFBRSx1REFBdURHLE9BQ3JDLEdBQTlCRixRQUFRRyxRQUFRLGFBQ2hCSixFQUFFLHVEQUF1REssU0FDekRMLEVBQUUsMEJBQTBCTSxNQUFNTCxXQUkxQ0QsRUFBRSw2QkFBNkJPLE1BQU0sV0FDN0JQLEVBQUVRLE1BQU1DLEtBQUssWUFDYlQsRUFBRSxxQkFBcUJTLEtBQUssV0FBVyxHQUNLLEVBQXhDVCxFQUFFLDZCQUE2QkUsT0FDL0JGLEVBQUUsc0JBQXNCVSxZQUV4QlYsRUFBRSxzQkFBc0JXLFlBRzVCWCxFQUFFLHFCQUFxQlMsS0FBSyxXQUFXLEdBQ3ZDVCxFQUFFLHNCQUFzQlcsYUFJRyxFQUEvQlgsRUFBRSxvQkFBb0JFLFNBQzRCLElBQTlDRixFQUFFLG1DQUFtQ1ksT0FBNkQsSUFBOUNaLEVBQUUsbUNBQW1DWSxRQUN6RlosRUFBRSxvQkFBb0JhLE9BQ3RCYixFQUFFLGNBQWNhLFFBR3BCYixFQUFFLGtHQUFrR2MsTUFBTSxXQUN0R2QsRUFBRSxzQkFBc0JlLE9BRXhCLElBQUlDLEVBQVloQixFQUFFLG1DQUFtQ1ksTUFDakRLLEVBQWdCakIsRUFBRSxtQ0FBbUNZLE1BR3pESSxFQUFZQSxFQUFVRSxPQUN0QkQsRUFBZ0JBLEVBQWNDLE9BQ04sR0FBcEJGLEVBQVVkLFFBQXVDLEdBQXhCZSxFQUFjZixRQUN2Q0YsRUFBRSxnQkFBZ0JlLE9BQ2xCZixFQUFFLG9CQUFvQmUsU0FFdEJmLEVBQUUsb0JBQW9CYSxPQUN0QmIsRUFBRSxjQUFjYSxVQUl4QmIsRUFBRSxjQUFjTyxNQUFNLFdBQ2xCUCxFQUFFLGdCQUFnQmUsT0FDbEJmLEVBQUUsdUNBQXVDUyxLQUFLLFlBQVksR0FDMURULEVBQUUsY0FBY2UsT0FDaEJmLEVBQUUsZ0JBQWdCbUIsSUFBSSxVQUFXLElBQ2pDbkIsRUFBRSxnQkFBZ0JvQixZQUFZLG9DQUM5QnBCLEVBQUUsc0JBQXNCYSxPQUd4QixJQUFJUSxJQUFNLFdBQ3NELEVBQTVEckIsRUFBRSxpREFBaURFLFNBQ25EbUIsSUFBTSxtQ0FHVixJQUFJTCxVQUFZaEIsRUFBRSxtQ0FBbUNZLE1BQ2pESyxjQUFnQmpCLEVBQUUsbUNBQW1DWSxNQUNyRFUsV0FBYXRCLEVBQUUsZ0NBQWdDWSxNQUVuRFosRUFBRXVCLEtBQUssQ0FDSEMsS0FBTSxPQUNOSCxJQUFLQSxJQUNMSSxTQUFVLE9BQ1ZDLEtBQU0sQ0FBQ0MsT0FBUSxrQkFBbUJDLFFBQVNDLEVBQUVDLElBQUlGLFFBQVNaLFVBQVdBLFVBQVdDLGNBQWVBLGNBQWVJLElBQUtDLFlBQ25IUyxRQUFTLFNBQVNMLE1BQ2RNLEtBQUtOLE1BRUwxQixFQUFFLHNCQUFzQmUsT0FFTSxXQUExQlcsS0FBS08sa0JBQ0xqQyxFQUFFLGdCQUFnQmtDLFNBQVMscUJBRTNCbEMsRUFBRSxnQkFBZ0JrQyxTQUFTLGtCQUcvQmxDLEVBQUUsZ0JBQWdCRyxLQUFLdUIsS0FBS1MsS0FDNUJuQyxFQUFFLGdCQUFnQmEsT0FDbEJiLEVBQUUsY0FBY2EsT0FDaEJiLEVBQUUsdUNBQXVDUyxLQUFLLFlBQVkifQ==
