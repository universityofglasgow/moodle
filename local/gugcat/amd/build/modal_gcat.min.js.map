{"version":3,"sources":["../src/modal_gcat.js"],"names":["define","$","CustomEvents","Modal","ModalRegistry","registered","SELECTORS","RELEASE_PROVISIONAL_GRADE_BUTTON","RELEASE_FINAL_GRADE_BUTTON","IMPORT_GRADE_BUTTON","ADJUST_WEIGHT_BUTTON","BULK_IMPORT_BUTTON","HIDDEN_SUBMIT_BUTTON","CANCEL_BUTTON","ModalGcat","root","call","showImportLoading","document","getElementById","style","display","querySelector","overflow","TYPE","prototype","Object","create","constructor","registerEventListeners","getModal","on","events","activate","click","bind","hide","setInterval","register"],"mappings":"AAuBAA,OAAM,2BAAC,CAAC,QAAD,CAAW,gCAAX,CAA6C,YAA7C,CAA2D,qBAA3D,CAAD,CACE,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAiCC,CAAjC,CAAgD,IAEhDC,CAAAA,CAAU,GAFsC,CAGhDC,CAAS,CAAG,CACZC,gCAAgC,CAAE,2BADtB,CAEZC,0BAA0B,CAAE,gCAFhB,CAGZC,mBAAmB,CAAE,gCAHT,CAIZC,oBAAoB,CAAE,gCAJV,CAKZC,kBAAkB,CAAE,oCALR,CAMZC,oBAAoB,CAAE,gCANV,CAOZC,aAAa,CAAE,0BAPH,CAHoC,CAkBhDC,CAAS,CAAG,SAASC,CAAT,CAAe,CAC3BZ,CAAK,CAACa,IAAN,CAAW,IAAX,CAAiBD,CAAjB,CACH,CApBmD,CA0B9CE,CAAiB,CAAG,UAAM,CAC5BC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA1C,CAAgDC,OAAhD,CAA0D,OAA1D,CACAH,QAAQ,CAACI,aAAT,CAAuB,MAAvB,EAA+BF,KAA/B,CAAqCG,QAArC,CAAgD,QACnD,CA7BmD,CA+BpDT,CAAS,CAACU,IAAV,CAAiB,mBAAjB,CACAV,CAAS,CAACW,SAAV,CAAsBC,MAAM,CAACC,MAAP,CAAcxB,CAAK,CAACsB,SAApB,CAAtB,CACAX,CAAS,CAACW,SAAV,CAAoBG,WAApB,CAAkCd,CAAlC,CAOAA,CAAS,CAACW,SAAV,CAAoBI,sBAApB,CAA6C,UAAW,CAEpD1B,CAAK,CAACsB,SAAN,CAAgBI,sBAAhB,CAAuCb,IAAvC,CAA4C,IAA5C,EAEA,KAAKc,QAAL,GAAgBC,EAAhB,CAAmB7B,CAAY,CAAC8B,MAAb,CAAoBC,QAAvC,CAAiD3B,CAAS,CAACC,gCAA3D,CAA6F,UAAW,CAGpGW,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0Ce,KAA1C,EACH,CAJ4F,CAI3FC,IAJ2F,CAItF,IAJsF,CAA7F,EAMA,KAAKL,QAAL,GAAgBC,EAAhB,CAAmB7B,CAAY,CAAC8B,MAAb,CAAoBC,QAAvC,CAAiD3B,CAAS,CAACE,0BAA3D,CAAuF,UAAW,CAC9FU,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,EAA+Ce,KAA/C,EACH,CAFsF,CAErFC,IAFqF,CAEhF,IAFgF,CAAvF,EAIA,KAAKL,QAAL,GAAgBC,EAAhB,CAAmB7B,CAAY,CAAC8B,MAAb,CAAoBC,QAAvC,CAAiD3B,CAAS,CAACG,mBAA3D,CAAgF,UAAW,CACvF,KAAK2B,IAAL,GACAnB,CAAiB,GACjBC,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,EAA+Ce,KAA/C,EACH,CAJ+E,CAI9EC,IAJ8E,CAIzE,IAJyE,CAAhF,EAMA,KAAKL,QAAL,GAAgBC,EAAhB,CAAmB7B,CAAY,CAAC8B,MAAb,CAAoBC,QAAvC,CAAiD3B,CAAS,CAACI,oBAA3D,CAAiF,UAAW,CACxFQ,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDe,KAAlD,EACH,CAFgF,CAE/EC,IAF+E,CAE1E,IAF0E,CAAjF,EAIA,KAAKL,QAAL,GAAgBC,EAAhB,CAAmB7B,CAAY,CAAC8B,MAAb,CAAoBC,QAAvC,CAAiD3B,CAAS,CAACK,kBAA3D,CAA+E,UAAW,CACtF,KAAKyB,IAAL,GACAnB,CAAiB,GACjBC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCe,KAAvC,EACH,CAJ8E,CAI7EC,IAJ6E,CAIxE,IAJwE,CAA/E,EAMA,KAAKL,QAAL,GAAgBC,EAAhB,CAAmB7B,CAAY,CAAC8B,MAAb,CAAoBC,QAAvC,CAAiD3B,CAAS,CAACM,oBAA3D,CAAiF,UAAW,CACxFM,QAAQ,CAACI,aAAT,CAAuB,6BAAvB,EAAoDY,KAApD,EACH,CAFgF,CAE/EC,IAF+E,CAE1E,IAF0E,CAAjF,EAIA,KAAKL,QAAL,GAAgBC,EAAhB,CAAmB7B,CAAY,CAAC8B,MAAb,CAAoBC,QAAvC,CAAiD3B,CAAS,CAACO,aAA3D,CAA0E,UAAW,YAEjFwB,WAAW,CAAC,UAAM,CACd,CAAI,CAACD,IAAL,EACH,CAFU,CAER,GAFQ,CAGd,CALyE,CAKxED,IALwE,CAKnE,IALmE,CAA1E,CAMH,CAxCD,CA4CA,GAAI,CAAC9B,CAAL,CAAiB,CACbD,CAAa,CAACkC,QAAd,CAAuBxB,CAAS,CAACU,IAAjC,CAAuCV,CAAvC,CAAkD,yBAAlD,EACAT,CAAU,GACb,CAED,MAAOS,CAAAA,CACV,CA3FK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Customize modal for gugcat\n *\n * @package    local_gugcat\n * @copyright  2020\n * @author     Accenture\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/custom_interaction_events', 'core/modal', 'core/modal_registry'],\n        function($, CustomEvents, Modal, ModalRegistry) {\n\n    var registered = false;\n    var SELECTORS = {\n        RELEASE_PROVISIONAL_GRADE_BUTTON: '[data-action=\"release\"]',\n        RELEASE_FINAL_GRADE_BUTTON: '[data-action=\"finalrelease\"]',\n        IMPORT_GRADE_BUTTON: '[data-action=\"importgrades\"]',\n        ADJUST_WEIGHT_BUTTON: '[data-action=\"adjustweight\"]',\n        BULK_IMPORT_BUTTON: '[data-action=\"bulkimportgrades\"]',\n        HIDDEN_SUBMIT_BUTTON: '[data-action=\"hiddensubmit\"]',\n        CANCEL_BUTTON: '[data-action=\"cancel\"]',\n    };\n\n    /**\n     * Constructor for the Modal.\n     *\n     * @param {object} root The root jQuery element for the modal\n     */\n    var ModalGcat = function(root) {\n        Modal.call(this, root);\n    };\n\n    /**\n     * Show import loading modal.\n     *\n     */\n    const showImportLoading = () => {\n        document.getElementById('import-loading').style.display = 'block';\n        document.querySelector('body').style.overflow = 'hidden';\n    };\n\n    ModalGcat.TYPE = 'local_gugcat-gcat';\n    ModalGcat.prototype = Object.create(Modal.prototype);\n    ModalGcat.prototype.constructor = ModalGcat;\n\n    /**\n     * Set up all of the event handling for the modal.\n     *\n     * @method registerEventListeners\n     */\n    ModalGcat.prototype.registerEventListeners = function() {\n        // Apply parent event listeners.\n        Modal.prototype.registerEventListeners.call(this);\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.RELEASE_PROVISIONAL_GRADE_BUTTON, function() {\n            // Add your logic for when the login button is clicked. This could include the form validation,\n            // loading animations, error handling etc.\n            document.getElementById('release-submit').click();\n        }.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.RELEASE_FINAL_GRADE_BUTTON, function() {\n            document.getElementById('finalrelease-submit').click();\n        }.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.IMPORT_GRADE_BUTTON, function() {\n            this.hide();\n            showImportLoading();\n            document.getElementById('importgrades-submit').click();\n        }.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.ADJUST_WEIGHT_BUTTON, function() {\n            document.getElementById('coursegradeform-submit').click();\n        }.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.BULK_IMPORT_BUTTON, function() {\n            this.hide();\n            showImportLoading();\n            document.getElementById('bulk-submit').click();\n        }.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.HIDDEN_SUBMIT_BUTTON, function() {\n            document.querySelector('[name=\"hiddensubmitform\"]').click();\n        }.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.CANCEL_BUTTON, function() {\n            // Add your logic for when the cancel button is clicked.\n            setInterval(() => {\n                this.hide();\n            }, 400);\n        }.bind(this));\n    };\n\n    // Automatically register with the modal registry the first time this module is imported so that you can create modals\n    // of this type using the modal factory.\n    if (!registered) {\n        ModalRegistry.register(ModalGcat.TYPE, ModalGcat, 'local_gugcat/modal_gcat');\n        registered = true;\n    }\n\n    return ModalGcat;\n});"],"file":"modal_gcat.min.js"}