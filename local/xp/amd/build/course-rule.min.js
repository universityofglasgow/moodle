define(["jquery","core/templates","core/ajax","core/str","block_xp/dialogue-base"],function(a,b,c,d,e){function f(){e.prototype.constructor.apply(this,[])}function g(){a(h).on("click",j,function(b){b.preventDefault();var c=a(b.target).closest(i);if(c){var d=new f;d.on("course-selected",function(a,b){c.find(".course-rule-courseid").val(b.id),c.find(".course-selected").text(M.util.get_string("rulecoursedesc","local_xp",b.shortname)),c.addClass("has-course")}),d.show()}})}var h=".block-xp-filters",i=".local_xp-course-rule-widget",j=".local_xp-course-rule-widget button",k=".local_xp-course-selector-widget";return f.prototype=Object.create(e.prototype),f.prototype.constructor=f,f.prototype._render=function(){return d.get_string("courseselector","local_xp").then(function(a){return b.render("local_xp/course-selector",{}).then(function(c,d){this.setTitle(a),this._setDialogueContent(c),b.runTemplateJS(d),this.center(),this.find(k).on("course-selected",function(a,b){this.trigger("course-selected",b),this.close()}.bind(this))}.bind(this))}.bind(this))},{init:g}});