/**
 * Modal drop setup.
 *
 * @copyright  2022 Frédéric Massart
 * @author     Frédéric Massart <fred@branchup.tech>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["core/templates","core/modal","core/modal_events","core/notification","block_xp/role-button"],(function(Templates,Modal,ModalEvents,Notification,RoleButton){function show(context){Templates.render("local_xp/modal-drop-setup",context).then((html=>{const modal=new Modal(html);modal.getRoot().on(ModalEvents.shown,(()=>{const codeNode=modal.getRoot().find('[data-content="shortcode"]')[0],copyBtn=modal.getRoot().find('[data-action="copy"]')[0];codeNode&&copyBtn&&(navigator.clipboard?copyBtn.addEventListener("click",(e=>{e.preventDefault(),navigator.clipboard.writeText(codeNode.textContent)})):copyBtn.style="display: none")})),modal.show()})).catch(Notification.exception)}function showFromNode(node){show({name:node.dataset.name,shortcode:node.dataset.shortcode,editurl:node.dataset.editurl})}return Templates.render("local_xp/modal-drop-setup",[]),{show:show,showFromNode:showFromNode,showFromSelector:function(nodeSelector){const node=document.querySelector(nodeSelector);node&&showFromNode(node)},delegateClick:function(rootSelector,nodeSelector){RoleButton.delegateClick(rootSelector,nodeSelector,(node=>{showFromNode(node)}))}}}));

//# sourceMappingURL=modal-drop-setup.min.js.map