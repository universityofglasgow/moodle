define(["jquery","core/templates","core/ajax","core/notification"],function(a,b,c,d){return{init:function(){function e(c,e,f){var g={votecount:f.count,id:e,ownrequest:f.ownrequest,voted:f.voted};b.render("report_enhance/votes",g).done(function(b){a(c).html(b)}).fail(d.exception)}a(".filter-list .nav-link").click(function(){a(".filter-list .nav-link").removeClass("active"),a(this).addClass("active"),a(".filter-all").hide(),a(a(this).attr("data-filter")).show(),0==a(a(this).attr("data-filter")).length?a(".bottom-button").hide():a(".bottom-button").show();try{localStorage.setItem("selected-filter",a(this).attr("data-filter"))}catch(b){return!1}});try{var f=localStorage.getItem("selected-filter");null===f&&(f=".filter-status-1, .filter-status-2, .filter-status-3, .filter-status-4, .filter-status-5, .filter-status-6, .filter-status-9"),a(".filter-all").hide(),a(f).show(),0==a(f).length?a(".bottom-button").hide():a(".bottom-button").show(),a(".active").removeClass("active"),a("[data-filter='"+f+"']").addClass("active")}catch(g){return!1}a(".enhance_votes").on("click",".votebutton",function(){var b=a(this).data("requestid"),f=a(this).data("vote"),g=a(this).parent();return c.call([{methodname:"report_enhance_set_vote",args:{requestid:b,vote:f},done:function(a){e(g,b,a)},fail:d.exception}]),!1}),a(".save-link").on("click",function(){var b=a(document).scrollTop();try{localStorage.setItem("scroll-position",b)}catch(c){return}});try{var h=localStorage.getItem("scroll-position")}catch(i){return}h&&a(document).scrollTop(h)}}});