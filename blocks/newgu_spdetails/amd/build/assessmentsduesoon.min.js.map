{"version":3,"file":"assessmentsduesoon.min.js","sources":["../src/assessmentsduesoon.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript to initialise the Assessments due soon section.\n * We're using Chart.js v3.8.0 at present.\n *\n * @module     block_newgu_spdetails/assessmentsduesoon\n * @author     Greg Pedder <greg.pedder@glasgow.ac.uk>\n * @copyright  2024 University of Glasgow\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\"use strict\";\n\nimport * as Log from 'core/log';\nimport * as ajax from 'core/ajax';\nimport {Chart, BarController} from 'core/chartjs';\nimport {exception as displayException} from 'core/notification';\nimport Templates from 'core/templates';\nimport sortTable from 'block_newgu_spdetails/sorting';\n\nconst Selectors = {\n    DUESOON_BLOCK: '#assessmentsDueSoonContainer',\n    COURSECONTENTS_BLOCK: '#courseTab-container',\n    ASSESSMENTSDUE_BLOCK: '#assessmentsDue-container',\n    ASSESSMENTSDUE_CONTENTS: '#assessmentsdue_content'\n};\n\nconst viewAssessmentsDueByChartType = function(chartItem, legendItem) {\n    const chartType = ((legendItem) ? legendItem.datasetIndex : chartItem);\n    const crsFilter = document.querySelector('#course_contents_container [data-region=\"filter\"] ul li [aria-current=\"true\"]');\n    const filterValue = crsFilter.getAttribute('data-value');\n    let activeTab = sessionStorage.getItem('activeTab') !== null ?\n    sessionStorage.getItem('activeTab') : 'current';\n\n    let containerBlock = document.querySelector(Selectors.COURSECONTENTS_BLOCK);\n    if (containerBlock.checkVisibility()) {\n        containerBlock.classList.add('hidden-container');\n    }\n\n    let assessmentsDueBlock = document.querySelector(Selectors.ASSESSMENTSDUE_BLOCK);\n    let assessmentsDueContents = document.querySelector(Selectors.ASSESSMENTSDUE_CONTENTS);\n\n    if (assessmentsDueBlock.children.length > 0) {\n        assessmentsDueContents.innerHTML = '';\n    }\n\n    assessmentsDueBlock.classList.remove('hidden-container');\n\n    assessmentsDueContents.insertAdjacentHTML(\"afterbegin\", \"<div class='loader d-flex justify-content-center'>\\n\" +\n        \"<div class='spinner-border' role='status'><span class='hidden'>Loading...</span></div></div>\");\n\n    ajax.call([{\n        methodname: 'block_newgu_spdetails_get_assessmentsduebytype',\n        args: {\n            charttype: chartType,\n            coursefilter: filterValue,\n            activetab: activeTab\n        },\n    }])[0].done(function(response) {\n        document.querySelector('.loader').remove();\n        let assessmentdata = JSON.parse(response.result);\n        Templates.renderForPromise('block_newgu_spdetails/assessmentsdue', {data: assessmentdata})\n        .then(({html, js}) => {\n            Templates.appendNodeContents(assessmentsDueContents, html, js);\n            returnToAssessmentsHandler();\n            let sortColumns = document.querySelectorAll('#assessment_data_table .th-sortable');\n            sortingEventHandler(sortColumns);\n            return true;\n        }).catch((error) => displayException(error));\n    }).fail(function(response) {\n        if (response) {\n            document.querySelector('.loader').remove();\n            let errorContainer = document.createElement('div');\n            errorContainer.classList.add('alert', 'alert-danger');\n\n            if (response.hasOwnProperty('message')) {\n                let errorMsg = document.createElement('p');\n\n                errorMsg.innerHTML = response.message;\n                errorContainer.appendChild(errorMsg);\n                errorMsg.classList.add('errormessage');\n            }\n\n            if (response.hasOwnProperty('moreinfourl')) {\n                let errorLinkContainer = document.createElement('p');\n                let errorLink = document.createElement('a');\n\n                errorLink.setAttribute('href', response.moreinfourl);\n                errorLink.setAttribute('target', '_blank');\n                errorLink.innerHTML = 'More information about this error';\n                errorContainer.appendChild(errorLinkContainer);\n                errorLinkContainer.appendChild(errorLink);\n                errorLinkContainer.classList.add('errorcode');\n            }\n\n            assessmentsDueContents.prepend(errorContainer);\n        }\n    });\n};\n\n/**\n * Function to bind click handlers to row headers.\n * @param {*} rows\n */\nconst sortingEventHandler = (rows) => {\n    if (rows.length > 0) {\n        rows.forEach((element) => {\n            element.addEventListener('click', () => sortTable(element.cellIndex, element.getAttribute('data-sortby'),\n            'assessment_data_table'));\n        });\n    }\n};\n\n/**\n * @method returnToAssessmentsHandler\n */\nconst returnToAssessmentsHandler = () => {\n    if (document.querySelector('#assessments-due-return')) {\n        document.querySelector('#assessments-due-return').addEventListener('click', () => {\n            let containerBlock = document.querySelector(Selectors.COURSECONTENTS_BLOCK);\n            let assessmentsDueBlock = document.querySelector(Selectors.ASSESSMENTSDUE_BLOCK);\n            assessmentsDueBlock.classList.add('hidden-container');\n            containerBlock.classList.remove('hidden-container');\n        });\n\n        document.querySelector('#assessments-due-return').addEventListener('keyup', function(event) {\n            let element = document.activeElement;\n            if (event.keyCode === 13 && element.hasAttribute('tabindex')) {\n                event.preventDefault();\n                element.click();\n            }\n        });\n    }\n};\n\n/**\n * @method fetchAssessmentsDueSoon\n * @param {string} activeTab\n * @param {string} courseFilter\n */\nconst fetchAssessmentsDueSoon = (activeTab, courseFilter) => {\n    window.console.log('fetchAssessmentsDueSoon called with filter:', courseFilter, ' activeTab:', activeTab);\n    Chart.register(BarController);\n    let tempPanel = document.querySelector(Selectors.DUESOON_BLOCK);\n    // This will only exist after the initial page load.\n    if (tempPanel.firstChild) {\n        tempPanel.firstChild.remove();\n    }\n\n    tempPanel.insertAdjacentHTML(\"afterbegin\", \"<div class='loader d-flex justify-content-center'>\\n\" +\n        \"<div class='spinner-border' role='status'><span class='hidden'>Loading...</span></div></div>\");\n\n    ajax.call([{\n        methodname: 'block_newgu_spdetails_get_assessmentsduesoon',\n        args: {\n            activetab: activeTab,\n            coursefilter: courseFilter\n        },\n    }])[0].done(function(response) {\n        document.querySelector('.loader').remove();\n        tempPanel.insertAdjacentHTML(\"afterbegin\", \"<canvas id='assessmentsDueSoonChart'\\n\" +\n            \" width='400' height='200' aria-label='Assessments Due Soon. A chart displaying\" +\n            \" assessments that are due in the next 24 hours, 7 days, or month.' role='img' tabindex='0'>\\n\" +\n            \"<p>The 'Assessments due in the next' chart displays information about assessments that are due\" +\n            \" in the next 24 hours, 7 days and 1 calendar month. Links to further information about these\" +\n            \" assessments also form part of this chart.</p>\\n\" +\n            \"</canvas>\");\n\n        // This is lame, but we have no other way (in Chart.js) but to target these elements when using the accessibility tool.\n        let tmpFontColour = '#000';\n        let gridColour = '#eee';\n        let gridLabelTextColour = '';\n        // Check for the contrast setting\n        if (document.querySelector('.hillhead40-night')) {\n            tmpFontColour = '#95B7E6';\n            gridColour = '#95B7E6';\n            gridLabelTextColour = '#95B7E6';\n            document.querySelector('.alert.alert-info a').style.color='#95B7E6';\n        }\n        if (document.querySelector('.hillhead40-contrast-wb')) {\n            tmpFontColour = '#eee';\n            gridLabelTextColour = '#eee';\n            document.querySelector('.alert.alert-info a').style.color='#eee';\n        }\n        if (document.querySelector('.hillhead40-contrast-yb')) {\n            tmpFontColour = '#ee6';\n            gridColour = '#ee6';\n            gridLabelTextColour = '#ee6';\n            document.querySelector('.alert.alert-info a').style.color='#ee6';\n        }\n        if (document.querySelector('.hillhead40-contrast-by')) {\n            gridColour = '#000';\n            document.querySelector('.alert.alert-info a').style.color='#000';\n        }\n        if (document.querySelector('.hillhead40-contrast-wg')) {\n            tmpFontColour = '#eee';\n            gridLabelTextColour = '#eee';\n            document.querySelector('.alert.alert-info a').style.color='#eee';\n        }\n        if (document.querySelector('.hillhead40-contrast-br')) {\n            gridColour = '#000';\n            document.querySelector('.alert.alert-info a').style.color='#000';\n        }\n        if (document.querySelector('.hillhead40-contrast-bb')) {\n            gridColour = '#000';\n            document.querySelector('.alert.alert-info a').style.color='#000';\n        }\n        if (document.querySelector('.hillhead40-contrast-bw')) {\n            gridColour = '#000';\n            document.querySelector('.alert.alert-info a').style.color='#000';\n        }\n        // Check for the font setting\n        let tmpFontFamily = \"'Hillhead', 'Ubuntu', 'Trebuchet MS', 'Arial', sans-serif\";\n        let tmpFontSize = 12;\n        let tmpLegendSize = 20;\n        if (document.querySelector('.hillhead40-font-modern')) {\n            tmpFontFamily = \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\";\n        }\n        if (document.querySelector('.hillhead40-font-classic')) {\n            tmpFontFamily = \"'Palatino', 'Times New Roman', serif\";\n        }\n        if (document.querySelector('.hillhead40-font-comic')) {\n            tmpFontFamily = \"'Hillhead Comic', 'Chalkboard', 'Comic Sans', 'Comic Sans MS', sans-serif\";\n        }\n        if (document.querySelector('.hillhead40-font-mono')) {\n            tmpFontFamily = \"'Hillhead Mono', 'Menlo', 'Courier New', monospace\";\n        }\n        if (document.querySelector('.hillhead40-font-dyslexic')) {\n            tmpFontFamily = \"'OpenDyslexic', 'Helvetica', 'Arial', sans-serif\";\n        }\n        // Check for the size setting\n        if (document.querySelector('.hillhead40-size-120')) {\n            tmpFontSize = '20%';\n            tmpLegendSize = '25%';\n        }\n        if (document.querySelector('.hillhead40-size-140')) {\n            tmpFontSize = '25%';\n            tmpLegendSize = '30%';\n        }\n        if (document.querySelector('.hillhead40-size-160')) {\n            tmpFontSize = '30%';\n            tmpLegendSize = '35%';\n        }\n        if (document.querySelector('.hillhead40-size-180')) {\n            tmpFontSize = '35%';\n            tmpLegendSize = '40%';\n        }\n        // Check for the bold setting\n        let tmpFontWeight = 'normal';\n        if (document.querySelector('.hillhead40-bold')) {\n            tmpFontWeight = 'bolder';\n        }\n        // Check for the spacing setting\n        let tmpLineHeight = '';\n        if (document.querySelector('.hillhead40-spacing')) {\n            tmpLineHeight = '2rem';\n        }\n\n        const data = [\n            {\n                labeltitle: `24 hours:`,\n                value: response[0]['24hours']\n            },\n            {\n                labeltitle: `7 days:`,\n                value: response[0].week\n            },\n            {\n                labeltitle: `month:`,\n                value: response[0].month\n            }\n        ];\n\n        const ctx = document.getElementById('assessmentsDueSoonChart');\n        const chart = new Chart(ctx, {\n                type: 'bar',\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    indexAxis: 'y',\n                    onHover: (event, chartElement) => {\n                        event.native.target.style.cursor = chartElement[0] ? 'pointer' : 'default';\n                    },\n                    scales: {\n                        x: {\n                            suggestedMin: 1,\n                            suggestedMax: 10,\n                            grid: {\n                                color: gridColour,\n                            },\n                            ticks: {\n                                color: gridLabelTextColour,\n                                font: {\n                                    size: tmpFontSize,\n                                    family: tmpFontFamily,\n                                    weight: tmpFontWeight,\n                                    lineHeight: tmpLineHeight,\n                                }\n                            }\n                        },\n                        y: {\n                            grid: {\n                                color: gridColour,\n                            },\n                            ticks: {\n                                color: gridLabelTextColour,\n                                font: {\n                                    size: tmpFontSize,\n                                    family: tmpFontFamily,\n                                    weight: tmpFontWeight,\n                                    lineHeight: tmpLineHeight,\n                                }\n                            }\n                        },\n                    },\n                    plugins: {\n                        legend: {\n                            display: true,\n                            position: 'top',\n                            onClick: viewAssessmentsDueByChartType,\n                            onHover: (event) => {\n                                event.native.target.style.cursor = 'pointer';\n                            },\n                            onLeave: (event) => {\n                                event.native.target.style.cursor = 'default';\n                            },\n                            labels: {\n                                usePointStyle: true,\n                                font: {\n                                    size: tmpLegendSize,\n                                    family: tmpFontFamily,\n                                    weight: tmpFontWeight,\n                                    lineHeight: tmpLineHeight,\n                                },\n                                generateLabels: (chart) => {\n                                    const datasets = chart.data.datasets;\n                                    return datasets[0].data.map((data, i) => ({\n                                        text: `${chart.data.labels[i]} ${data}`,\n                                        borderRadius: 0,\n                                        datasetIndex: i,\n                                        fillStyle: datasets[0].backgroundColor[i],\n                                        fontColor: tmpFontColour,\n                                        hidden: false,\n                                        lineCap: '',\n                                        lineDash: [],\n                                        lineDashOffset: 0,\n                                        lineJoin: '',\n                                        lineWidth: 0,\n                                        strokeStyle: datasets[0].backgroundColor[i],\n                                        pointStyle: 'rectRounded',\n                                        rotation: 0,\n                                        index: i\n                                    }));\n                                }\n                            },\n                        }\n                    },\n                },\n                data: {\n                    labels: data.map(row => row.labeltitle),\n                    datasets: [{\n                        data: data.map(row => row.value),\n                        indexAxis: 'y',\n                        backgroundColor: [\n                            'rgba(255,0,0,0.6)',\n                            'rgba(255,153,0,0.6)',\n                            'rgba(0,153,0,0.6)'\n                        ],\n                        borderColor: [\n                            'rgba(255,0,0)',\n                            'rgba(255,153,0)',\n                            'rgba(0,153,0)'\n                        ],\n                        borderWidth: 1,\n                        hoverOffset: 4\n                    }]\n                }\n            }\n        );\n\n        const canvas = document.getElementById('assessmentsDueSoonChart');\n        canvas.onclick = (evt) => {\n            const points = chart.getElementsAtEventForMode(\n                evt,\n                'nearest',\n                {intersect: true},\n                true\n              );\n              if (points.length === 0) {\n                return;\n              }\n              viewAssessmentsDueByChartType(points[0].index);\n          };\n\n    }).fail(function(err) {\n        document.querySelector('.loader').remove();\n        tempPanel.insertAdjacentHTML(\"afterbegin\", \"<div class='d-flex justify-content-center'>\\n\" +\n            err.message + \"</div>\");\n        Log.debug(err);\n    });\n};\n\n/**\n * @constructor\n * @param {string} activeTab\n * @param {string} courseFilter\n */\nexport const init = (activeTab, courseFilter) => {\n    fetchAssessmentsDueSoon(activeTab, courseFilter);\n};"],"names":["Selectors","viewAssessmentsDueByChartType","chartItem","legendItem","chartType","datasetIndex","filterValue","document","querySelector","getAttribute","activeTab","sessionStorage","getItem","containerBlock","checkVisibility","classList","add","assessmentsDueBlock","assessmentsDueContents","children","length","innerHTML","remove","insertAdjacentHTML","ajax","call","methodname","args","charttype","coursefilter","activetab","done","response","assessmentdata","JSON","parse","result","renderForPromise","data","then","_ref","html","js","appendNodeContents","returnToAssessmentsHandler","sortColumns","querySelectorAll","sortingEventHandler","catch","error","fail","errorContainer","createElement","hasOwnProperty","errorMsg","message","appendChild","errorLinkContainer","errorLink","setAttribute","moreinfourl","prepend","rows","forEach","element","addEventListener","cellIndex","event","activeElement","keyCode","hasAttribute","preventDefault","click","courseFilter","window","console","log","register","BarController","tempPanel","firstChild","tmpFontColour","gridColour","gridLabelTextColour","style","color","tmpFontFamily","tmpFontSize","tmpLegendSize","tmpFontWeight","tmpLineHeight","labeltitle","value","week","month","ctx","getElementById","chart","Chart","type","options","responsive","maintainAspectRatio","indexAxis","onHover","chartElement","native","target","cursor","scales","x","suggestedMin","suggestedMax","grid","ticks","font","size","family","weight","lineHeight","y","plugins","legend","display","position","onClick","onLeave","labels","usePointStyle","generateLabels","datasets","map","i","text","borderRadius","fillStyle","backgroundColor","fontColor","hidden","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","strokeStyle","pointStyle","rotation","index","row","borderColor","borderWidth","hoverOffset","onclick","evt","points","getElementsAtEventForMode","intersect","err","Log","debug","fetchAssessmentsDueSoon"],"mappings":"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"}