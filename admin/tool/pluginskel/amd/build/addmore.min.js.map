{"version":3,"sources":["../src/addmore.js"],"names":["define","$","addElements","deleteElements","templateVars","variableNames","isComponentFeature","variableName","idPrefix","componentFeatures","countName","variableCount","parseInt","val","templateVariable","i","name","elementIdPrefix","removeInputFromNode","lastIndex","last","remove","values","fieldVariable","lastElementDiv","type","nestedCountName","nestedCount","slice","j","nestedVariable","k","nestedDiv","buttonDivId","addMoreRootElements","namePrefix","prevIndex","newElements","newElementName","newElementId","prevElementName","prevElementId","prevElementClasses","attr","html","newNestedElementName","newNestedElementId","prevNestedElementName","prevNestedElementId","copyElement","newButtonId","newButtonName","prevButtonId","prevButtonName","prevCountName","newCountName","after","before","addMoreNestedElements","isPartOfAssocArray","parentVariableName","topIndex","prevIndexPrefix","newIndexPrefix","isRequired","required","prop","change","replace","newIdPrefix","newIndex","newElementHtml","indexOf","newElement","addMore","document","ready","on","event","buttonName","target","parseJSON","componentType","shouldAdd","split","length","pop","isNested","isNumeric"],"mappings":"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","sourcesContent":["define(['jquery'], function($) {\n\n    var addElements = {\n\n        /**\n         * Deletes a an array template variable value.\n         *\n         * @param {Array} templateVars The template variables.\n         * @param {String} variableNames The recipe hierarchy for the variable.\n         * @param {Boolean} isComponentFeature If the elements are a component feature.\n         */\n        deleteElements: function(templateVars, variableNames, isComponentFeature) {\n\n            var variableName;\n            var idPrefix;\n\n            if (isComponentFeature) {\n                var componentFeatures = variableNames[0];\n                variableName = variableNames[1];\n                idPrefix = componentFeatures + '_' + variableName;\n            } else {\n                variableName = variableNames[0];\n                idPrefix = variableName;\n            }\n\n            var countName = idPrefix + 'count';\n            var variableCount = parseInt($('[name=\"' + countName + '\"]').val());\n\n            var templateVariable;\n            for (var i in templateVars) {\n                if (templateVars[i].name == variableName) {\n                    templateVariable = templateVars[i];\n                    break;\n                }\n            }\n\n            if (variableCount == 1) {\n                var elementIdPrefix = 'id_' + idPrefix + '_0';\n                addElements.removeInputFromNode(templateVariable, elementIdPrefix);\n                return;\n            }\n\n            var lastIndex = variableCount - 1;\n\n            // Removing the newline before the element that will be deleted.\n            $('#id_' + idPrefix + ' br').last().remove();\n\n            for (i in templateVariable.values) {\n                var fieldVariable = templateVariable.values[i];\n                var lastElementDiv = 'fitem_id_' + idPrefix + '_' + lastIndex + '_' + fieldVariable.name;\n\n                $('#' + lastElementDiv).remove();\n\n                if (fieldVariable.type === 'numeric-array') {\n\n                    var nestedCountName = idPrefix + '_' + lastIndex + '_' + fieldVariable.name + 'count';\n                    var nestedCount = parseInt($(\"[name='\" + nestedCountName + \"']\").val());\n\n                    // Removing the newlines between the nested array elements.\n                    if (nestedCount >= 2) {\n                        $('#id_' + idPrefix + ' br').slice(-(nestedCount - 1)).remove();\n                    }\n\n                    for (var j in fieldVariable.values) {\n\n                        var nestedVariable = fieldVariable.values[j];\n\n                        for (var k = 0; k < nestedCount; k++) {\n                            var nestedDiv = lastElementDiv + '_' + k + '_' + nestedVariable.name;\n                            $('#' + nestedDiv).remove();\n                        }\n                    }\n\n                    // Removing the 'Add more ..' button.\n                    var buttonDivId = 'fitem_id_addmore_' + idPrefix + '_' + lastIndex + '_' + fieldVariable.name;\n                    $('#' + buttonDivId).remove();\n\n                    // Remove the number of nested variables.\n                    $(\"[name='\" + nestedCountName + \"']\").remove();\n                }\n            }\n\n            // Decrement the number of variable elements.\n            $('[name=\"' + countName + '\"]').val(variableCount - 1);\n        },\n\n        /**\n         * Adds more elements to a fieldset located at the root of the document.\n         *\n         * @param {Array} templateVars The template variables.\n         * @param {String} variableNames The recipe hierarchy for the variable.\n         * @param {Boolean} isComponentFeature If the elements are a component feature.\n         */\n        addMoreRootElements: function(templateVars, variableNames, isComponentFeature) {\n\n            var variableName;\n            var namePrefix;\n            var idPrefix;\n            if (isComponentFeature) {\n                var componentFeatures = variableNames[0];\n                variableName = variableNames[1];\n                namePrefix = componentFeatures + '[' + variableName + ']';\n                idPrefix = componentFeatures + '_' + variableName;\n            } else {\n                variableName = variableNames[0];\n                namePrefix = variableName;\n                idPrefix = variableName;\n            }\n\n            var countName = idPrefix + 'count';\n            var variableCount = parseInt($('[name=\"' + countName + '\"]').val());\n\n            var templateVariable;\n            for (var i in templateVars) {\n                if (templateVars[i].name == variableName) {\n                    templateVariable = templateVars[i];\n                    break;\n                }\n            }\n\n            var prevIndex = variableCount - 1;\n            var elementIdPrefix;\n            var newElements = '<br/>';\n\n            for (i in templateVariable.values) {\n                var fieldVariable = templateVariable.values[i];\n\n                var newElementName = namePrefix + '[' + variableCount + '][' + fieldVariable.name + ']';\n                var newElementId = 'id_' + idPrefix + '_' + variableCount + '_' + fieldVariable.name;\n\n                var prevElementName = namePrefix + '[' + prevIndex + '][' + fieldVariable.name + ']';\n                var prevElementId = 'id_' + idPrefix + '_' + prevIndex + '_' + fieldVariable.name;\n\n                if (fieldVariable.type == 'numeric-array') {\n\n                    // Cloning the static label.\n                    var prevElementClasses = $('#fitem_' + prevElementId).attr('class');\n                    newElements += '<div id=\"fitem_' + newElementId + '\" class=\"' + prevElementClasses + '\">';\n                    newElements += $('#fitem_' + prevElementId).html();\n                    newElements += '</div>';\n\n                    for (var j in fieldVariable.values) {\n                        var nestedVariable = fieldVariable.values[j];\n\n                        var newNestedElementName = newElementName + '[0][' + nestedVariable.name + ']';\n                        var newNestedElementId = newElementId + '_0_' + nestedVariable.name;\n\n                        var prevNestedElementName = prevElementName + '[0][' + nestedVariable.name + ']';\n                        var prevNestedElementId = prevElementId + '_0_' + nestedVariable.name;\n\n                        var prevNestedIndex = prevIndex + '.0';\n                        var newNestedIndex = variableCount + '.0';\n                        newElements += addElements.copyElement(prevNestedElementName, prevNestedElementId,\n                                                               newNestedElementName, newNestedElementId,\n                                                               prevNestedIndex, newNestedIndex);\n                    }\n\n                    // Cloning the 'Add more ..' button.\n                    var newButtonId = 'id_addmore_' + idPrefix + '_' + variableCount + '_' + fieldVariable.name;\n                    var newButtonName = 'addmore_' + namePrefix + '[' + variableCount + '][' + fieldVariable.name + ']';\n\n                    var prevButtonId = 'id_addmore_' + idPrefix + '_' + prevIndex + '_' + fieldVariable.name;\n                    var prevButtonName = 'addmore_' + namePrefix + '[' + prevIndex + '][' + fieldVariable.name + ']';\n\n                    newElements += addElements.copyElement(prevButtonName, prevButtonId, newButtonName, newButtonId,\n                                                           null, null);\n\n                    // Adding the hidden count field.\n                    var prevCountName = idPrefix + '_' + prevIndex + '_' + fieldVariable.name + 'count';\n                    var newCountName = idPrefix + '_' + variableCount + '_' + fieldVariable.name + 'count';\n                    var newCountHtml = '<input name=\"' + newCountName + '\" value=\"1\" type=\"hidden\"></input>';\n                    $('[name=\"' + prevCountName + '\"]').after(newCountHtml);\n\n                } else {\n                    newElements += addElements.copyElement(prevElementName, prevElementId, newElementName, newElementId,\n                                                           prevIndex, variableCount);\n                }\n            }\n\n            $('#fgroup_id_buttons_' + idPrefix).before(newElements);\n\n            elementIdPrefix = 'id_' + idPrefix + '_' + variableCount;\n            addElements.removeInputFromNode(templateVariable, elementIdPrefix);\n\n            // Increment the number of variable elements.\n            $('[name=\"' + countName + '\"]').val(variableCount + 1);\n        },\n\n        /**\n         * Adds more elements nested inside a fieldset element.\n         *\n         * @param {Array} templateVars The template variables.\n         * @param {String} variableNames The recipe hierarchy for the variable.\n         * @param {Boolean} isComponentFeature If the elements are a component feature.\n         * @param {Boolean} isPartOfAssocArray If the elements to add are part of an associative array variable.\n         */\n        addMoreNestedElements: function(templateVars, variableNames, isComponentFeature, isPartOfAssocArray) {\n\n            var namePrefix;\n            var idPrefix;\n            var parentVariableName;\n            var variableName;\n            var topIndex;\n\n            if (isPartOfAssocArray) {\n                if (isComponentFeature) {\n                    // Componenenttype_features[<parent associative array>][<numeric array>].\n                    namePrefix = variableNames[0] + '[' + variableNames[1] + '][' + variableNames[2] + ']';\n                    idPrefix = variableNames[0] + '_' + variableNames[1] + '_' + variableNames[2];\n                    parentVariableName = variableNames[1];\n                    variableName = variableNames[2];\n                } else {\n                    // Parent associative array[numeric array].\n                    namePrefix = variableNames[0] + '[' + variableNames[1] + ']';\n                    idPrefix = variableNames[0] + '_' + variableNames[1];\n                    parentVariableName = variableNames[0];\n                    variableName = variableNames[1];\n                }\n                topIndex = null;\n            } else {\n                if (isComponentFeature) {\n                    // Componenenttype_features[<parent numeric array>][<index>][<numeric array>].\n                    namePrefix = variableNames[0] + '[' + variableNames[1] + '][' + variableNames[2] + ']';\n                    namePrefix = namePrefix + '[' + variableNames[3] + ']';\n                    idPrefix = variableNames[0] + '_' + variableNames[1] + '_' + variableNames[2] + '_' + variableNames[3];\n                    parentVariableName = variableNames[1];\n                    variableName = variableNames[3];\n                    topIndex = variableNames[2];\n                } else {\n                    // Parent numeric array[<index>][<numeric array>].\n                    namePrefix = variableNames[0] + '[' + variableNames[1] + '][' + variableNames[2] + ']';\n                    idPrefix = variableNames[0] + '_' + variableNames[1] + '_' + variableNames[2];\n                    parentVariableName = variableNames[0];\n                    variableName = variableNames[2];\n                    topIndex = variableNames[1];\n                }\n            }\n\n            var countName = idPrefix + 'count';\n            var variableCount = parseInt($('[name=\"' + countName + '\"]').val());\n\n            var templateVariable;\n            for (var i in templateVars) {\n                if (templateVars[i].name == parentVariableName) {\n                    for (var j in templateVars[i].values) {\n                        if (templateVars[i].values[j].name == variableName) {\n                            templateVariable = templateVars[i].values[j];\n                            break;\n                        }\n                    }\n                }\n            }\n\n            var prevIndex = variableCount - 1;\n            var newElements = '<br/>';\n            for (i in templateVariable.values) {\n\n                var fieldVariable = templateVariable.values[i];\n\n                var newElementName = namePrefix + '[' + variableCount + '][' + fieldVariable.name + ']';\n                var newElementId = 'id_' + idPrefix + '_' + variableCount + '_' + fieldVariable.name;\n\n                var prevElementName = namePrefix + '[' + prevIndex + '][' + fieldVariable.name + ']';\n                var prevElementId = 'id_' + idPrefix + '_' + prevIndex + '_' + fieldVariable.name;\n\n                var prevIndexPrefix;\n                var newIndexPrefix;\n                if (topIndex === null) {\n                    prevIndexPrefix = prevIndex;\n                    newIndexPrefix = variableCount;\n                } else {\n                    prevIndexPrefix = topIndex + '.' + prevIndex;\n                    newIndexPrefix = topIndex + '.' + variableCount;\n                }\n                newElements += addElements.copyElement(prevElementName, prevElementId,\n                                                        newElementName, newElementId,\n                                                        prevIndexPrefix, newIndexPrefix);\n            }\n\n            $('#fitem_id_addmore_' + idPrefix).before(newElements);\n\n            var elementIdPrefix = 'id_' + idPrefix + '_' + variableCount;\n            addElements.removeInputFromNode(templateVariable, elementIdPrefix);\n\n            // Increment the number of variable elements.\n            $('[name=\"' + countName + '\"]').val(variableCount + 1);\n\n        },\n\n        /**\n         * Removes previous input from a node.\n         *\n         * @param {Array} templateVariable The variable from which the added elements were created.\n         * @param {String} elementIdPrefix The prefix for the elements' id.\n         */\n        removeInputFromNode: function(templateVariable, elementIdPrefix) {\n\n            for (var i in templateVariable.values) {\n\n                var fieldVariable = templateVariable.values[i];\n                var newElementId = elementIdPrefix + '_' + fieldVariable.name;\n\n                if (fieldVariable.type == 'text' || fieldVariable.type == 'int') {\n                    $('#' + newElementId).val('');\n                }\n\n                // Non required boolean variables are represented as a select element.\n                if (fieldVariable.type == 'multiple-options' || fieldVariable.type == 'boolean') {\n                    var isRequired = ('required' in fieldVariable) && fieldVariable.required === true;\n                    if (!isRequired) {\n                        $('#' + newElementId + ' option[value=\"undefined\"]').prop('selected', true).change();\n                    }\n                }\n\n                if (fieldVariable.type == 'numeric-array') {\n                    var countName = newElementId.replace('id_', '') + 'count';\n                    var variableCount = parseInt($('[name=\"' + countName + '\"]').val());\n\n                    for (var j = 0; j < variableCount; j++) {\n                        var newIdPrefix = newElementId + '_' + j;\n                        addElements.removeInputFromNode(fieldVariable, newIdPrefix);\n                    }\n                }\n            }\n        },\n\n        /**\n         * Creates a clone of a previous element.\n         *\n         * @param {String} prevElementName\n         * @param {String} prevElementId\n         * @param {String} newElementName\n         * @param {String} newElementId\n         * @param {String} prevIndex\n         * @param {String} newIndex\n         */\n        copyElement: function(prevElementName, prevElementId, newElementName, newElementId, prevIndex, newIndex) {\n\n            var prevElementClasses = $('#fitem_' + prevElementId).attr('class');\n            var newElementHtml = $('#fitem_' + prevElementId).html();\n\n            while (newElementHtml.indexOf(prevElementId) != -1) {\n                newElementHtml = newElementHtml.replace(prevElementId, newElementId);\n            }\n\n            while (newElementHtml.indexOf(prevElementName) != -1) {\n                newElementHtml = newElementHtml.replace(prevElementName, newElementName);\n            }\n\n            if (prevIndex !== null) {\n                prevIndex = prevIndex + '. ';\n                newIndex = newIndex + '. ';\n                newElementHtml = newElementHtml.replace('label for=\"' + newElementId + '\">' + prevIndex,\n                                                        'label for=\"' + newElementId + '\">' + newIndex);\n            }\n\n            var newElement = '<div id=\"fitem_' + newElementId + '\" class=\"' + prevElementClasses + '\">';\n            newElement += newElementHtml;\n            newElement += '</div>';\n\n            return newElement;\n        },\n\n        /**\n         * Adds or remove fields from an array template variable.\n         */\n        addMore: function() {\n\n            $(document).ready(function() {\n                $('.mform').on('click', ':button', function(event) {\n                    var buttonName = event.target.name;\n\n                    if (buttonName.indexOf('addmore_') !== -1 || buttonName.indexOf('delete_') !== -1) {\n                        var templateVars = $.parseJSON($('[name=\"templatevars\"]').val());\n                        var componentType = $('[name=\"componenttype1\"]').val();\n                        var componentFeatures = componentType + '_features';\n\n                        var shouldAdd;\n                        var variableName;\n                        if (buttonName.indexOf('addmore_') !== -1) {\n                            shouldAdd = true;\n                            variableName = buttonName.replace('addmore_', '');\n                        } else {\n                            variableName = buttonName.replace('delete_', '');\n                            shouldAdd = false;\n                        }\n\n                        var variableNames = variableName.split(/\\]\\[|\\[|\\]/gi);\n                        // Removing last empty element added by split.\n                        if (variableNames[variableNames.length - 1].length === 0) {\n                            variableNames.pop();\n                        }\n\n                        var isComponentFeature;\n                        if (variableNames[0] === componentFeatures) {\n                            isComponentFeature = true;\n                        } else {\n                            isComponentFeature = false;\n                        }\n\n                        var isNested = false;\n                        for (var i in variableNames) {\n                            if ($.isNumeric(variableNames[i])) {\n                                isNested = true;\n                                break;\n                            }\n                        }\n\n                        var isPartOfAssocArray = false;\n                        if (!isNested) {\n                            if (isComponentFeature && variableNames.length === 3) {\n                                isNested = true;\n                                isPartOfAssocArray = true;\n                            }\n\n                            if (!isComponentFeature && variableNames.length === 2) {\n                                isNested = true;\n                                isPartOfAssocArray = true;\n                            }\n                        }\n\n                        if (shouldAdd) {\n                            if (isNested) {\n                                addElements.addMoreNestedElements(templateVars, variableNames, isComponentFeature,\n                                                                  isPartOfAssocArray);\n                            } else {\n                                addElements.addMoreRootElements(templateVars, variableNames, isComponentFeature);\n                            }\n                        } else {\n                            addElements.deleteElements(templateVars, variableNames, isComponentFeature);\n                        }\n                    }\n                });\n            });\n        },\n    };\n\n    return addElements;\n});\n"],"file":"addmore.min.js"}