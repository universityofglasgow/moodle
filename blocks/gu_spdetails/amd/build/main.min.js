define ("block_gu_spdetails/main",["core/ajax"],function(a){var b=function(a){var b=document.getElementById("current_tab"),c=document.getElementById("past_tab"),e=document.getElementById("sortby_course"),f=document.getElementById("sortby_date"),g=document.getElementById("sortby_startdate"),h=document.getElementById("sortby_enddate"),i=!1;switch(a.target){case b:var j="current",k=0,l="coursetitle",m="asc";b.classList.add("active");c.classList.remove("active");d(j,k,l,m,i);break;case c:var j="past",k=0,l="coursetitle",m="asc";b.classList.remove("active");c.classList.add("active");d(j,k,l,m,i);break;case e:if(b.classList.contains("active")){var j="current"}else{var j="past"}var k=0,l="coursetitle";if("asc"==e.getAttribute("data-value")){m="desc";e.setAttribute("data-value","desc");e.classList.add("th-sort-desc");e.classList.remove("th-sort-asc")}else{m="asc";e.setAttribute("data-value","asc");e.classList.add("th-sort-asc");e.classList.remove("th-sort-desc")}d(j,k,l,m,i);break;case f:var j="current",k=0,l="duedate";if("asc"==f.getAttribute("data-value")){m="desc";f.setAttribute("data-value","desc");f.classList.add("th-sort-desc");f.classList.remove("th-sort-asc")}else{m="asc";f.setAttribute("data-value","asc");f.classList.add("th-sort-asc");f.classList.remove("th-sort-desc")}d(j,k,l,m,i);break;case g:var j="past",k=0,l="startdate";if("asc"==g.getAttribute("data-value")){m="desc";g.setAttribute("data-value","desc");g.classList.add("th-sort-desc");g.classList.remove("th-sort-asc")}else{m="asc";g.setAttribute("data-value","asc");g.classList.add("th-sort-asc");g.classList.remove("th-sort-desc")}d(j,k,l,m,i);break;case h:var j="past",k=0,l="enddate";if("asc"==h.getAttribute("data-value")){m="desc";h.setAttribute("data-value","desc");h.classList.add("th-sort-desc");h.classList.remove("th-sort-asc")}else{m="asc";h.setAttribute("data-value","asc");h.classList.add("th-sort-asc");h.classList.remove("th-sort-desc")}d(j,k,l,m,i);break;default:break;}},c=function(a){var b=document.getElementById("menu_current_assessments_sortby"),c=document.getElementById("menu_past_assessments_sortby"),e=document.getElementById("sortby_course"),f=document.getElementById("sortby_date"),g=document.getElementById("sortby_startdate"),h=document.getElementById("sortby_enddate"),i=!1;switch(a.target){case b:var j="current",k=0,l=b.value,m="asc";if("coursetitle"===b.value){e.classList.add("th-sort-asc");e.classList.remove("th-sort-desc");e.setAttribute("data-value","asc")}else{f.classList.add("th-sort-asc");f.classList.remove("th-sort-desc");f.setAttribute("data-value","asc")}d(j,k,l,m,i);break;case c:var j="past",k=0,l=c.value,m="asc";if("coursetitle"===c.value){e.classList.add("th-sort-asc");e.classList.remove("th-sort-desc");e.setAttribute("data-value","asc")}else if("startdate"===c.value){g.classList.add("th-sort-asc");g.classList.remove("th-sort-desc");g.setAttribute("data-value","asc")}else{h.classList.add("th-sort-asc");h.classList.remove("th-sort-desc");h.setAttribute("data-value","asc")}d(j,k,l,m,i);break;default:break;}},d=function(b,c,e,i,j){var k=5<arguments.length&&arguments[5]!==void 0?arguments[5]:null,l=document.querySelector(".block_gu_spdetails"),m=document.getElementById("assessments-container"),n=document.getElementById("subcategory-container"),o=null===k?m:n,p=null===k?document.getElementById("assessments_details_contents"):document.getElementById("subcategory_details_contents");if(null===k){m.classList.remove("hidden-container");n.classList.add("hidden-container")}else{m.classList.add("hidden-container");n.classList.remove("hidden-container")}var q=a.call([{methodname:"block_gu_spdetails_retrieve_assessments",args:{activetab:b,page:c,sortby:e,sortorder:i,subcategory:k}}]);q[0].done(function(a){p.innerHTML=a.result;var b=document.querySelectorAll(".subcategory-row");h(b);g(k);f(e,i);if(j){l.scrollIntoView()}if(null!==k){l.scrollIntoView();if("asc"===i){document.getElementById("sortby_date_subcategory").classList.add("th-sort-asc");document.getElementById("sortby_date_subcategory").classList.remove("th-sort-desc");document.getElementById("sortby_date_subcategory").setAttribute("data-value","asc")}else{document.getElementById("sortby_date_subcategory").classList.add("th-sort-desc");document.getElementById("sortby_date_subcategory").classList.remove("th-sort-asc");document.getElementById("sortby_date_subcategory").setAttribute("data-value","desc")}document.getElementById("sortby_date_subcategory").addEventListener("click",function(){var a="";if("asc"==document.getElementById("sortby_date_subcategory").getAttribute("data-value")){a="desc";document.getElementById("sortby_date_subcategory").setAttribute("data-value","desc");document.getElementById("sortby_date_subcategory").classList.add("th-sort-desc");document.getElementById("sortby_date_subcategory").classList.remove("th-sort-asc")}else{a="asc";document.getElementById("sortby_date_subcategory").setAttribute("data-value","asc");document.getElementById("sortby_date_subcategory").classList.add("th-sort-asc");document.getElementById("sortby_date_subcategory").classList.remove("th-sort-desc")}d("current",0,"duedate",a,j,k)})}}).fail(function(a){if(a){var b=document.createElement("div");b.classList.add("alert","alert-danger");if(a.hasOwnProperty("message")){var c=document.createElement("p");c.innerHTML=a.message;b.appendChild(c);c.classList.add("errormessage")}if(a.hasOwnProperty("moreinfourl")){var d=document.createElement("p"),e=document.createElement("a");e.setAttribute("href",a.moreinfourl);e.setAttribute("target","_blank");e.innerHTML="More information about this error";b.appendChild(d);d.appendChild(e);d.classList.add("errorcode")}o.prepend(b)}})},e=function(a){id=a.getAttribute("data-id");subname=a.getAttribute("data-name");course=a.getAttribute("data-course");grade=a.getAttribute("data-grade");weight=a.getAttribute("data-weight");if(null!==id){d("current",0,"duedate","asc",!1,id);document.getElementById("subcategory-details-course").innerHTML=course;document.getElementById("subcategory-details-weight").innerHTML=weight;document.getElementById("subcategory-details-grade").innerHTML=grade;document.getElementById("subcategory-details-name").innerHTML=subname;document.getElementById("subcategory-return-assessment").addEventListener("click",function(){document.getElementById("assessments-container").classList.remove("hidden-container");document.getElementById("subcategory-container").classList.add("hidden-container");document.getElementById("subcategory_details_contents").innerHTML=""})}},f=function(a,b){var c=document.getElementById("sortby_course"),d=document.getElementById("sortby_date"),e=document.getElementById("sortby_startdate"),f=document.getElementById("sortby_enddate");switch(a){case"coursetitle":if(c){if("asc"===b){c.classList.add("th-sort-asc");c.classList.remove("th-sort-desc");c.setAttribute("data-value","asc")}else{c.classList.add("th-sort-desc");c.classList.remove("th-sort-asc");c.setAttribute("data-value","desc")}}break;case"duedate":if(d){if("asc"===b){d.classList.add("th-sort-asc");d.classList.remove("th-sort-desc");d.setAttribute("data-value","asc")}else{d.classList.add("th-sort-desc");d.classList.remove("th-sort-asc");d.setAttribute("data-value","desc")}}break;case"startdate":if(e){if("asc"===b){e.classList.add("th-sort-asc");e.classList.remove("th-sort-desc");e.setAttribute("data-value","asc")}else{e.classList.add("th-sort-desc");e.classList.remove("th-sort-asc");e.setAttribute("data-value","desc")}}break;case"enddate":if(f){if("asc"===b){f.classList.add("th-sort-asc");f.classList.remove("th-sort-desc");f.setAttribute("data-value","asc")}else{f.classList.add("th-sort-desc");f.classList.remove("th-sort-asc");f.setAttribute("data-value","desc")}}break;default:break;}},g=function(a){var b=null!==a?document.querySelectorAll("#subcategory_details_contents .page-item a.page-link"):document.querySelectorAll("#assessments_details_contents .page-item a.page-link");b.forEach(function(b){if(b.hasAttribute("href")&&"#"!==b.getAttribute("href")){var c=new URL(b.getAttribute("href")),e=new URLSearchParams(c.search),f=e.get("activetab"),g=e.get("page"),h=e.get("sortby"),i=e.get("sortorder");b.addEventListener("click",function(b){b.preventDefault();d(f,g,h,i,!0,a)})}else{b.removeAttribute("href")}})},h=function(a){if(0<a.length){a.forEach(function(a){a.addEventListener("click",function(){return e(a)})})}};return{init:function init(){var a=document.querySelector(".assessments-details-container");if(a){var e=document.getElementById("current_tab"),f=document.getElementById("past_tab");e.classList.add("active");f.classList.remove("active");d("current",0,"coursetitle","asc",!1);a.addEventListener("change",c);a.addEventListener("click",b)}}}});
//# sourceMappingURL=main.min.js.map
